/*! For license information please see main.cf95ace4.js.LICENSE.txt */
(()=>{var e={6503:(e,t,n)=>{"use strict";e=n.nmd(e);const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t=>`\x1b[${38+e};5;${t}m`},i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(t,n,r)=>`\x1b[${38+e};2;${t};${n};${r}m`};Object.defineProperty(e,"exports",{enumerable:!0,get:function(){const e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(const[n,r]of Object.entries(t)){for(const[n,i]of Object.entries(r))t[n]={open:`\x1b[${i[0]}m`,close:`\x1b[${i[1]}m`},r[n]=t[n],e.set(i[0],i[1]);Object.defineProperty(t,n,{value:r,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="\x1b[39m",t.bgColor.close="\x1b[49m",t.color.ansi256=r(),t.color.ansi16m=i(),t.bgColor.ansi256=r(10),t.bgColor.ansi16m=i(10),Object.defineProperties(t,{rgbToAnsi256:{value:(e,t,n)=>e===t&&t===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(n/255*5),enumerable:!1},hexToRgb:{value:e=>{const t=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(e.toString(16));if(!t)return[0,0,0];let{colorString:n}=t.groups;3===n.length&&(n=n.split("").map((e=>e+e)).join(""));const r=Number.parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},enumerable:!1},hexToAnsi256:{value:e=>t.rgbToAnsi256(...t.hexToRgb(e)),enumerable:!1}}),t}})},1136:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 14H6l-2 2V4h16z"}),"ChatBubbleOutline")},4802:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},3471:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},697:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline")},5540:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},5473:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579);t.A=(0,i.default)((0,o.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess")},3639:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home")},4444:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M7.58 4.08 6.15 2.65C3.75 4.48 2.17 7.3 2.03 10.5h2c.15-2.65 1.51-4.97 3.55-6.42m12.39 6.42h2c-.15-3.2-1.73-6.02-4.12-7.85l-1.42 1.43c2.02 1.45 3.39 3.77 3.54 6.42M18 11c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2zm-6 11c.14 0 .27-.01.4-.04.65-.14 1.18-.58 1.44-1.18q.15-.36.15-.78h-4c.01 1.1.9 2 2.01 2"}),"NotificationsActive")},1560:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2m6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5z"}),"NotificationsNone")},2577:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings")},3932:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579);t.A=(0,i.default)((0,o.jsx)("path",{d:"M2 20h2c.55 0 1-.45 1-1v-9c0-.55-.45-1-1-1H2zm19.83-7.12c.11-.25.17-.52.17-.8V11c0-1.1-.9-2-2-2h-5.5l.92-4.65c.05-.22.02-.46-.08-.66-.23-.45-.52-.86-.88-1.22L14 2 7.59 8.41C7.21 8.79 7 9.3 7 9.83v7.84C7 18.95 8.05 20 9.34 20h8.11c.7 0 1.36-.37 1.72-.97z"}),"ThumbUpAlt")},1007:(e,t,n)=>{"use strict";var r=n(4994);t.A=void 0;var i=r(n(39)),o=n(579);t.A=(0,i.default)((0,o.jsx)("path",{d:"m13.11 5.72-.57 2.89c-.12.59.04 1.2.42 1.66s.94.73 1.54.73H20v1.08L17.43 18H9.34c-.18 0-.34-.16-.34-.34V9.82zM14 2 7.59 8.41C7.21 8.79 7 9.3 7 9.83v7.83C7 18.95 8.05 20 9.34 20h8.1c.71 0 1.36-.37 1.72-.97l2.67-6.15c.11-.25.17-.52.17-.8V11c0-1.1-.9-2-2-2h-5.5l.92-4.65c.05-.22.02-.46-.08-.66-.23-.45-.52-.86-.88-1.22zM4 9H2v11h2c.55 0 1-.45 1-1v-9c0-.55-.45-1-1-1"}),"ThumbUpOffAlt")},39:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(8811)},8811:(e,t,n)=>{"use strict";n.r(t),n.d(t,{capitalize:()=>a,createChainedFunction:()=>l,createSvgIcon:()=>Tr,debounce:()=>Ar,deprecatedPropType:()=>jr,isMuiElement:()=>Pr,ownerDocument:()=>Rr,ownerWindow:()=>Mr,requirePropFactory:()=>$r,setRef:()=>Dr,unstable_ClassNameGenerator:()=>Kr,unstable_memoTheme:()=>vr,unstable_useEnhancedEffect:()=>Fr,unstable_useId:()=>Hr,unsupportedProp:()=>Vr,useControlled:()=>Wr,useEventCallback:()=>qr,useForkRef:()=>Jr});const r=e=>e,i=(()=>{let e=r;return{configure(t){e=t},generate:t=>e(t),reset(){e=r}}})();function o(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function s(e){if("string"!==typeof e)throw new Error(o(7));return e.charAt(0).toUpperCase()+e.slice(1)}const a=s;const l=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}),(()=>{}))};var c=n(5043),u=n.t(c,2);function d(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=d(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const h=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=d(e))&&(r&&(r+=" "),r+=t);return r};function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(null,arguments)}function f(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var m=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,g=f((function(e){return m.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var y=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),v=Math.abs,b=String.fromCharCode,w=Object.assign;function x(e){return e.trim()}function k(e,t,n){return e.replace(t,n)}function S(e,t){return e.indexOf(t)}function _(e,t){return 0|e.charCodeAt(t)}function E(e,t,n){return e.slice(t,n)}function C(e){return e.length}function O(e){return e.length}function N(e,t){return t.push(e),e}var T=1,A=1,j=0,P=0,I=0,R="";function M(e,t,n,r,i,o,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:T,column:A,length:s,return:""}}function $(e,t){return w(M("",null,null,"",null,null,0),e,{length:-e.length},t)}function L(){return I=P>0?_(R,--P):0,A--,10===I&&(A=1,T--),I}function D(){return I=P<j?_(R,P++):0,A++,10===I&&(A=1,T++),I}function z(){return _(R,P)}function F(){return P}function B(e,t){return E(R,e,t)}function U(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function H(e){return T=A=1,j=C(R=e),P=0,[]}function V(e){return R="",e}function W(e){return x(B(P-1,K(91===e?e+2:40===e?e+1:e)))}function q(e){for(;(I=z())&&I<33;)D();return U(e)>2||U(I)>3?"":" "}function J(e,t){for(;--t&&D()&&!(I<48||I>102||I>57&&I<65||I>70&&I<97););return B(e,F()+(t<6&&32==z()&&32==D()))}function K(e){for(;D();)switch(I){case e:return P;case 34:case 39:34!==e&&39!==e&&K(I);break;case 40:41===e&&K(e);break;case 92:D()}return P}function G(e,t){for(;D()&&e+I!==57&&(e+I!==84||47!==z()););return"/*"+B(t,P-1)+"*"+b(47===e?e:D())}function Z(e){for(;!U(z());)D();return B(e,P)}var Y="-ms-",X="-moz-",Q="-webkit-",ee="comm",te="rule",ne="decl",re="@keyframes";function ie(e,t){for(var n="",r=O(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function oe(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case ne:return e.return=e.return||e.value;case ee:return"";case re:return e.return=e.value+"{"+ie(e.children,r)+"}";case te:e.value=e.props.join(",")}return C(n=ie(e.children,r))?e.return=e.value+"{"+n+"}":""}function se(e){return V(ae("",null,null,null,[""],e=H(e),0,[0],e))}function ae(e,t,n,r,i,o,s,a,l){for(var c=0,u=0,d=s,h=0,p=0,f=0,m=1,g=1,y=1,v=0,w="",x=i,E=o,O=r,T=w;g;)switch(f=v,v=D()){case 40:if(108!=f&&58==_(T,d-1)){-1!=S(T+=k(W(v),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:T+=W(v);break;case 9:case 10:case 13:case 32:T+=q(f);break;case 92:T+=J(F()-1,7);continue;case 47:switch(z()){case 42:case 47:N(ce(G(D(),F()),t,n),l);break;default:T+="/"}break;case 123*m:a[c++]=C(T)*y;case 125*m:case 59:case 0:switch(v){case 0:case 125:g=0;case 59+u:-1==y&&(T=k(T,/\f/g,"")),p>0&&C(T)-d&&N(p>32?ue(T+";",r,n,d-1):ue(k(T," ","")+";",r,n,d-2),l);break;case 59:T+=";";default:if(N(O=le(T,t,n,c,u,i,a,w,x=[],E=[],d),o),123===v)if(0===u)ae(T,t,O,O,x,o,d,a,E);else switch(99===h&&110===_(T,3)?100:h){case 100:case 108:case 109:case 115:ae(e,O,O,r&&N(le(e,O,O,0,0,i,a,w,i,x=[],d),E),i,E,d,a,r?x:E);break;default:ae(T,O,O,O,[""],E,0,a,E)}}c=u=p=0,m=y=1,w=T="",d=s;break;case 58:d=1+C(T),p=f;default:if(m<1)if(123==v)--m;else if(125==v&&0==m++&&125==L())continue;switch(T+=b(v),v*m){case 38:y=u>0?1:(T+="\f",-1);break;case 44:a[c++]=(C(T)-1)*y,y=1;break;case 64:45===z()&&(T+=W(D())),h=z(),u=d=C(w=T+=Z(F())),v++;break;case 45:45===f&&2==C(T)&&(m=0)}}return o}function le(e,t,n,r,i,o,s,a,l,c,u){for(var d=i-1,h=0===i?o:[""],p=O(h),f=0,m=0,g=0;f<r;++f)for(var y=0,b=E(e,d+1,d=v(m=s[f])),w=e;y<p;++y)(w=x(m>0?h[y]+" "+b:k(b,/&\f/g,h[y])))&&(l[g++]=w);return M(e,t,n,0===i?te:a,l,c,u)}function ce(e,t,n){return M(e,t,n,ee,b(I),E(e,2,-2),0)}function ue(e,t,n,r){return M(e,t,n,ne,E(e,0,r),E(e,r+1,-1),r)}var de=function(e,t,n){for(var r=0,i=0;r=i,i=z(),38===r&&12===i&&(t[n]=1),!U(i);)D();return B(e,P)},he=function(e,t){return V(function(e,t){var n=-1,r=44;do{switch(U(r)){case 0:38===r&&12===z()&&(t[n]=1),e[n]+=de(P-1,t,n);break;case 2:e[n]+=W(r);break;case 4:if(44===r){e[++n]=58===z()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=b(r)}}while(r=D());return e}(H(e),t))},pe=new WeakMap,fe=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||pe.get(n))&&!r){pe.set(e,!0);for(var i=[],o=he(t,i),s=n.props,a=0,l=0;a<o.length;a++)for(var c=0;c<s.length;c++,l++)e.props[l]=i[a]?o[a].replace(/&\f/g,s[c]):s[c]+" "+o[a]}}},me=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function ge(e,t){switch(function(e,t){return 45^_(e,0)?(((t<<2^_(e,0))<<2^_(e,1))<<2^_(e,2))<<2^_(e,3):0}(e,t)){case 5103:return Q+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Q+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Q+e+X+e+Y+e+e;case 6828:case 4268:return Q+e+Y+e+e;case 6165:return Q+e+Y+"flex-"+e+e;case 5187:return Q+e+k(e,/(\w+).+(:[^]+)/,Q+"box-$1$2"+Y+"flex-$1$2")+e;case 5443:return Q+e+Y+"flex-item-"+k(e,/flex-|-self/,"")+e;case 4675:return Q+e+Y+"flex-line-pack"+k(e,/align-content|flex-|-self/,"")+e;case 5548:return Q+e+Y+k(e,"shrink","negative")+e;case 5292:return Q+e+Y+k(e,"basis","preferred-size")+e;case 6060:return Q+"box-"+k(e,"-grow","")+Q+e+Y+k(e,"grow","positive")+e;case 4554:return Q+k(e,/([^-])(transform)/g,"$1"+Q+"$2")+e;case 6187:return k(k(k(e,/(zoom-|grab)/,Q+"$1"),/(image-set)/,Q+"$1"),e,"")+e;case 5495:case 3959:return k(e,/(image-set\([^]*)/,Q+"$1$`$1");case 4968:return k(k(e,/(.+:)(flex-)?(.*)/,Q+"box-pack:$3"+Y+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Q+e+e;case 4095:case 3583:case 4068:case 2532:return k(e,/(.+)-inline(.+)/,Q+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(C(e)-1-t>6)switch(_(e,t+1)){case 109:if(45!==_(e,t+4))break;case 102:return k(e,/(.+:)(.+)-([^]+)/,"$1"+Q+"$2-$3$1"+X+(108==_(e,t+3)?"$3":"$2-$3"))+e;case 115:return~S(e,"stretch")?ge(k(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==_(e,t+1))break;case 6444:switch(_(e,C(e)-3-(~S(e,"!important")&&10))){case 107:return k(e,":",":"+Q)+e;case 101:return k(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Q+(45===_(e,14)?"inline-":"")+"box$3$1"+Q+"$2$3$1"+Y+"$2box$3")+e}break;case 5936:switch(_(e,t+11)){case 114:return Q+e+Y+k(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Q+e+Y+k(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Q+e+Y+k(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Q+e+Y+e+e}return e}var ye=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case ne:e.return=ge(e.value,e.length);break;case re:return ie([$(e,{value:k(e.value,"@","@"+Q)})],r);case te:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ie([$(e,{props:[k(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return ie([$(e,{props:[k(t,/:(plac\w+)/,":"+Q+"input-$1")]}),$(e,{props:[k(t,/:(plac\w+)/,":-moz-$1")]}),$(e,{props:[k(t,/:(plac\w+)/,Y+"input-$1")]})],r)}return""}))}}],ve=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r,i,o=e.stylisPlugins||ye,s={},a=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;a.push(e)}));var l,c,u=[oe,(c=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],d=function(e){var t=O(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}([fe,me].concat(o,u));i=function(e,t,n,r){l=n,ie(se(e?e+"{"+t.styles+"}":t.styles),d),r&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new y({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:i};return h.sheet.hydrate(a),h};var be={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},we=!1,xe=/[A-Z]|^ms/g,ke=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Se=function(e){return 45===e.charCodeAt(1)},_e=function(e){return null!=e&&"boolean"!==typeof e},Ee=f((function(e){return Se(e)?e:e.replace(xe,"-$&").toLowerCase()})),Ce=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(ke,(function(e,t,n){return Te={name:t,styles:n,next:Te},t}))}return 1===be[e]||Se(e)||"number"!==typeof t||0===t?t:t+"px"},Oe="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Ne(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var i=n;if(1===i.anim)return Te={name:i.name,styles:i.styles,next:Te},i.name;var o=n;if(void 0!==o.styles){var s=o.next;if(void 0!==s)for(;void 0!==s;)Te={name:s.name,styles:s.styles,next:Te},s=s.next;return o.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Ne(e,t,n[i])+";";else for(var o in n){var s=n[o];if("object"!==typeof s){var a=s;null!=t&&void 0!==t[a]?r+=o+"{"+t[a]+"}":_e(a)&&(r+=Ee(o)+":"+Ce(o,a)+";")}else{if("NO_COMPONENT_SELECTOR"===o&&we)throw new Error(Oe);if(!Array.isArray(s)||"string"!==typeof s[0]||null!=t&&void 0!==t[s[0]]){var l=Ne(e,t,s);switch(o){case"animation":case"animationName":r+=Ee(o)+":"+l+";";break;default:r+=o+"{"+l+"}"}}else for(var c=0;c<s.length;c++)_e(s[c])&&(r+=Ee(o)+":"+Ce(o,s[c])+";")}}return r}(e,t,n);case"function":if(void 0!==e){var a=Te,l=n(e);return Te=a,Ne(e,t,l)}}var c=n;if(null==t)return c;var u=t[c];return void 0!==u?u:c}var Te,Ae=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var je=!!u.useInsertionEffect&&u.useInsertionEffect,Pe=je||function(e){return e()},Ie=(je||c.useLayoutEffect,c.createContext("undefined"!==typeof HTMLElement?ve({key:"css"}):null)),Re=(Ie.Provider,function(e){return(0,c.forwardRef)((function(t,n){var r=(0,c.useContext)(Ie);return e(t,r,n)}))}),Me=c.createContext({});var $e=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},Le=g,De=function(e){return"theme"!==e},ze=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?Le:De},Fe=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},Be=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return $e(t,n,r),Pe((function(){return function(e,t,n){$e(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,n,r)})),null},Ue=function e(t,n){var r,i,o=t.__emotion_real===t,s=o&&t.__emotion_base||t;void 0!==n&&(r=n.label,i=n.target);var a=Fe(t,n,o),l=a||ze(s),u=!l("as");return function(){var d=arguments,h=o&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==r&&h.push("label:"+r+";"),null==d[0]||void 0===d[0].raw)h.push.apply(h,d);else{h.push(d[0][0]);for(var f=d.length,m=1;m<f;m++)h.push(d[m],d[0][m])}var g=Re((function(e,t,n){var r=u&&e.as||s,o="",d=[],p=e;if(null==e.theme){for(var f in p={},e)p[f]=e[f];p.theme=c.useContext(Me)}"string"===typeof e.className?o=function(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}(t.registered,d,e.className):null!=e.className&&(o=e.className+" ");var m=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";Te=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=Ne(n,t,o)):i+=o[0];for(var s=1;s<e.length;s++)i+=Ne(n,t,e[s]),r&&(i+=o[s]);Ae.lastIndex=0;for(var a,l="";null!==(a=Ae.exec(i));)l+="-"+a[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:Te}}(h.concat(d),t.registered,p);o+=t.key+"-"+m.name,void 0!==i&&(o+=" "+i);var g=u&&void 0===a?ze(r):l,y={};for(var v in e)u&&"as"===v||g(v)&&(y[v]=e[v]);return y.className=o,n&&(y.ref=n),c.createElement(c.Fragment,null,c.createElement(Be,{cache:t,serialized:m,isStringTag:"string"===typeof r}),c.createElement(r,y))}));return g.displayName=void 0!==r?r:"Styled("+("string"===typeof s?s:s.displayName||s.name||"Component")+")",g.defaultProps=t.defaultProps,g.__emotion_real=g,g.__emotion_base=s,g.__emotion_styles=h,g.__emotion_forwardProp=a,Object.defineProperty(g,"toString",{value:function(){return"."+i}}),g.withComponent=function(t,r){return e(t,p({},n,r,{shouldForwardProp:Fe(g,r,!0)})).apply(void 0,h)},g}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){Ue[e]=Ue(e)}));function He(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Ve(e){if(!He(e))return e;const t={};return Object.keys(e).forEach((n=>{t[n]=Ve(e[n])})),t}function We(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0};const r=n.clone?{...e}:e;return He(e)&&He(t)&&Object.keys(t).forEach((i=>{He(t[i])&&Object.prototype.hasOwnProperty.call(e,i)&&He(e[i])?r[i]=We(e[i],t[i],n):n.clone?r[i]=He(t[i])?Ve(t[i]):t[i]:r[i]=t[i]})),r}const qe=e=>{const t=Object.keys(e).map((t=>({key:t,val:e[t]})))||[];return t.sort(((e,t)=>e.val-t.val)),t.reduce(((e,t)=>({...e,[t.key]:t.val})),{})};const Je={borderRadius:4},Ke={xs:0,sm:600,md:900,lg:1200,xl:1536},Ge={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Ke[e]}px)`},Ze={containerQueries:e=>({up:t=>{let n="number"===typeof t?t:Ke[t]||t;return"number"===typeof n&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function Ye(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const e=r.breakpoints||Ge;return t.reduce(((r,i,o)=>(r[e.up(e.keys[o])]=n(t[o]),r)),{})}if("object"===typeof t){const e=r.breakpoints||Ge;return Object.keys(t).reduce(((i,o)=>{if(function(e,t){return"@"===t||t.startsWith("@")&&(e.some((e=>t.startsWith(`@${e}`)))||!!t.match(/^@\d/))}(e.keys,o)){const e=function(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,o=Number.isNaN(+r)?r||0:+r;return e.containerQueries(i).up(o)}(r.containerQueries?r:Ze,o);e&&(i[e]=n(t[o],o))}else if(Object.keys(e.values||Ke).includes(o)){i[e.up(o)]=n(t[o],o)}else{const e=o;i[e]=t[e]}return i}),{})}return n(t)}function Xe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.keys?.reduce(((t,n)=>(t[e.up(n)]={},t)),{});return t||{}}function Qe(e,t){return e.reduce(((e,t)=>{const n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function et(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){const n=`vars.${t}`.split(".").reduce(((e,t)=>e&&e[t]?e[t]:null),e);if(null!=n)return n}return t.split(".").reduce(((e,t)=>e&&null!=e[t]?e[t]:null),e)}function tt(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:et(e,n)||i,t&&(r=t(r,i,e)),r}const nt=function(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:i}=e,o=e=>{if(null==e[t])return null;const o=e[t],a=et(e.theme,r)||{};return Ye(e,o,(e=>{let r=tt(a,i,e);return e===r&&"string"===typeof e&&(r=tt(a,i,`${t}${"default"===e?"":s(e)}`,e)),!1===n?r:{[n]:r}}))};return o.propTypes={},o.filterProps=[t],o};const rt=function(e,t){return t?We(e,t,{clone:!1}):e};const it={m:"margin",p:"padding"},ot={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},st={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},at=function(e){const t={};return n=>(void 0===t[n]&&(t[n]=e(n)),t[n])}((e=>{if(e.length>2){if(!st[e])return[e];e=st[e]}const[t,n]=e.split(""),r=it[t],i=ot[n]||"";return Array.isArray(i)?i.map((e=>r+e)):[r+i]})),lt=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],ct=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],ut=[...lt,...ct];function dt(e,t,n,r){const i=et(e,t,!0)??n;return"number"===typeof i||"string"===typeof i?e=>"string"===typeof e?e:"string"===typeof i?`calc(${e} * ${i})`:i*e:Array.isArray(i)?e=>{if("string"===typeof e)return e;const t=Math.abs(e);const n=i[t];return e>=0?n:"number"===typeof n?-n:`-${n}`}:"function"===typeof i?i:()=>{}}function ht(e){return dt(e,"spacing",8)}function pt(e,t){return"string"===typeof t||null==t?t:e(t)}function ft(e,t,n,r){if(!t.includes(n))return null;const i=function(e,t){return n=>e.reduce(((e,r)=>(e[r]=pt(t,n),e)),{})}(at(n),r);return Ye(e,e[n],i)}function mt(e,t){const n=ht(e.theme);return Object.keys(e).map((r=>ft(e,t,r,n))).reduce(rt,{})}function gt(e){return mt(e,lt)}function yt(e){return mt(e,ct)}function vt(e){return mt(e,ut)}gt.propTypes={},gt.filterProps=lt,yt.propTypes={},yt.filterProps=ct,vt.propTypes={},vt.filterProps=ut;function bt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ht({spacing:e});if(e.mui)return e;const n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0===n.length?[1]:n).map((e=>{const n=t(e);return"number"===typeof n?`${n}px`:n})).join(" ")};return n.mui=!0,n}const wt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>(t.filterProps.forEach((n=>{e[n]=t})),e)),{}),i=e=>Object.keys(e).reduce(((t,n)=>r[n]?rt(t,r[n](e)):t),{});return i.propTypes={},i.filterProps=t.reduce(((e,t)=>e.concat(t.filterProps)),[]),i};function xt(e){return"number"!==typeof e?e:`${e}px solid`}function kt(e,t){return nt({prop:e,themeKey:"borders",transform:t})}const St=kt("border",xt),_t=kt("borderTop",xt),Et=kt("borderRight",xt),Ct=kt("borderBottom",xt),Ot=kt("borderLeft",xt),Nt=kt("borderColor"),Tt=kt("borderTopColor"),At=kt("borderRightColor"),jt=kt("borderBottomColor"),Pt=kt("borderLeftColor"),It=kt("outline",xt),Rt=kt("outlineColor"),Mt=e=>{if(void 0!==e.borderRadius&&null!==e.borderRadius){const t=dt(e.theme,"shape.borderRadius",4),n=e=>({borderRadius:pt(t,e)});return Ye(e,e.borderRadius,n)}return null};Mt.propTypes={},Mt.filterProps=["borderRadius"];wt(St,_t,Et,Ct,Ot,Nt,Tt,At,jt,Pt,Mt,It,Rt);const $t=e=>{if(void 0!==e.gap&&null!==e.gap){const t=dt(e.theme,"spacing",8),n=e=>({gap:pt(t,e)});return Ye(e,e.gap,n)}return null};$t.propTypes={},$t.filterProps=["gap"];const Lt=e=>{if(void 0!==e.columnGap&&null!==e.columnGap){const t=dt(e.theme,"spacing",8),n=e=>({columnGap:pt(t,e)});return Ye(e,e.columnGap,n)}return null};Lt.propTypes={},Lt.filterProps=["columnGap"];const Dt=e=>{if(void 0!==e.rowGap&&null!==e.rowGap){const t=dt(e.theme,"spacing",8),n=e=>({rowGap:pt(t,e)});return Ye(e,e.rowGap,n)}return null};Dt.propTypes={},Dt.filterProps=["rowGap"];wt($t,Lt,Dt,nt({prop:"gridColumn"}),nt({prop:"gridRow"}),nt({prop:"gridAutoFlow"}),nt({prop:"gridAutoColumns"}),nt({prop:"gridAutoRows"}),nt({prop:"gridTemplateColumns"}),nt({prop:"gridTemplateRows"}),nt({prop:"gridTemplateAreas"}),nt({prop:"gridArea"}));function zt(e,t){return"grey"===t?t:e}wt(nt({prop:"color",themeKey:"palette",transform:zt}),nt({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:zt}),nt({prop:"backgroundColor",themeKey:"palette",transform:zt}));function Ft(e){return e<=1&&0!==e?100*e+"%":e}const Bt=nt({prop:"width",transform:Ft}),Ut=e=>{if(void 0!==e.maxWidth&&null!==e.maxWidth){const t=t=>{const n=e.theme?.breakpoints?.values?.[t]||Ke[t];return n?"px"!==e.theme?.breakpoints?.unit?{maxWidth:`${n}${e.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:Ft(t)}};return Ye(e,e.maxWidth,t)}return null};Ut.filterProps=["maxWidth"];const Ht=nt({prop:"minWidth",transform:Ft}),Vt=nt({prop:"height",transform:Ft}),Wt=nt({prop:"maxHeight",transform:Ft}),qt=nt({prop:"minHeight",transform:Ft}),Jt=(nt({prop:"size",cssProperty:"width",transform:Ft}),nt({prop:"size",cssProperty:"height",transform:Ft}),wt(Bt,Ut,Ht,Vt,Wt,qt,nt({prop:"boxSizing"})),{border:{themeKey:"borders",transform:xt},borderTop:{themeKey:"borders",transform:xt},borderRight:{themeKey:"borders",transform:xt},borderBottom:{themeKey:"borders",transform:xt},borderLeft:{themeKey:"borders",transform:xt},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:xt},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Mt},color:{themeKey:"palette",transform:zt},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:zt},backgroundColor:{themeKey:"palette",transform:zt},p:{style:yt},pt:{style:yt},pr:{style:yt},pb:{style:yt},pl:{style:yt},px:{style:yt},py:{style:yt},padding:{style:yt},paddingTop:{style:yt},paddingRight:{style:yt},paddingBottom:{style:yt},paddingLeft:{style:yt},paddingX:{style:yt},paddingY:{style:yt},paddingInline:{style:yt},paddingInlineStart:{style:yt},paddingInlineEnd:{style:yt},paddingBlock:{style:yt},paddingBlockStart:{style:yt},paddingBlockEnd:{style:yt},m:{style:gt},mt:{style:gt},mr:{style:gt},mb:{style:gt},ml:{style:gt},mx:{style:gt},my:{style:gt},margin:{style:gt},marginTop:{style:gt},marginRight:{style:gt},marginBottom:{style:gt},marginLeft:{style:gt},marginX:{style:gt},marginY:{style:gt},marginInline:{style:gt},marginInlineStart:{style:gt},marginInlineEnd:{style:gt},marginBlock:{style:gt},marginBlockStart:{style:gt},marginBlockEnd:{style:gt},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:$t},rowGap:{style:Dt},columnGap:{style:Lt},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Ft},maxWidth:{style:Ut},minWidth:{transform:Ft},height:{transform:Ft},maxHeight:{transform:Ft},minHeight:{transform:Ft},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}});const Kt=function(){function e(e,t,n,r){const i={[e]:t,theme:n},o=r[e];if(!o)return{[e]:t};const{cssProperty:a=e,themeKey:l,transform:c,style:u}=o;if(null==t)return null;if("typography"===l&&"inherit"===t)return{[e]:t};const d=et(n,l)||{};if(u)return u(i);return Ye(i,t,(t=>{let n=tt(d,c,t);return t===n&&"string"===typeof t&&(n=tt(d,c,`${e}${"default"===t?"":s(t)}`,t)),!1===a?n:{[a]:n}}))}return function t(n){const{sx:r,theme:i={}}=n||{};if(!r)return null;const o=i.unstable_sxConfig??Jt;function s(n){let r=n;if("function"===typeof n)r=n(i);else if("object"!==typeof n)return n;if(!r)return null;const s=Xe(i.breakpoints),a=Object.keys(s);let l=s;return Object.keys(r).forEach((n=>{const s=function(e,t){return"function"===typeof e?e(t):e}(r[n],i);if(null!==s&&void 0!==s)if("object"===typeof s)if(o[n])l=rt(l,e(n,s,i,o));else{const e=Ye({theme:i},s,(e=>({[n]:e})));!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.reduce(((e,t)=>e.concat(Object.keys(t))),[]),i=new Set(r);return t.every((e=>i.size===Object.keys(e).length))}(e,s)?l=rt(l,e):l[n]=t({sx:s,theme:i})}else l=rt(l,e(n,s,i,o))})),function(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter((e=>e.startsWith("@container"))).sort(((e,t)=>{const n=/min-width:\s*([0-9.]+)/;return+(e.match(n)?.[1]||0)-+(t.match(n)?.[1]||0)}));return n.length?n.reduce(((e,n)=>{const r=t[n];return delete e[n],e[n]=r,e}),{...t}):t}(i,Qe(a,l))}return Array.isArray(r)?r.map(s):s(r)}}();Kt.filterProps=["sx"];const Gt=Kt;function Zt(e,t){const n=this;if(n.vars){if(!n.colorSchemes?.[e]||"function"!==typeof n.getColorSchemeSelector)return{};let r=n.getColorSchemeSelector(e);return(r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:t}}return n.palette.mode===e?t:{}}const Yt=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t={},palette:n={},spacing:r,shape:i={},...o}=e,s=function(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=e,o=qe(t),s=Object.keys(o);function a(e){return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n})`}function l(e){return`@media (max-width:${("number"===typeof t[e]?t[e]:e)-r/100}${n})`}function c(e,i){const o=s.indexOf(i);return`@media (min-width:${"number"===typeof t[e]?t[e]:e}${n}) and (max-width:${(-1!==o&&"number"===typeof t[s[o]]?t[s[o]]:i)-r/100}${n})`}return{keys:s,values:o,up:a,down:l,between:c,only:function(e){return s.indexOf(e)+1<s.length?c(e,s[s.indexOf(e)+1]):a(e)},not:function(e){const t=s.indexOf(e);return 0===t?a(s[1]):t===s.length-1?l(s[t]):c(e,s[s.indexOf(e)+1]).replace("@media","@media not all and")},unit:n,...i}}(t);let a=We({breakpoints:s,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:bt(r),shape:{...Je,...i}},o);a=function(e){const t=(e,t)=>e.replace("@media",t?`@container ${t}`:"@container");function n(n,r){n.up=function(){return t(e.breakpoints.up(...arguments),r)},n.down=function(){return t(e.breakpoints.down(...arguments),r)},n.between=function(){return t(e.breakpoints.between(...arguments),r)},n.only=function(){return t(e.breakpoints.only(...arguments),r)},n.not=function(){const n=t(e.breakpoints.not(...arguments),r);return n.includes("not all and")?n.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):n}}const r={},i=e=>(n(r,e),r);return n(i),{...e,containerQueries:i}}(a),a.applyStyles=Zt;for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];return a=c.reduce(((e,t)=>We(e,t)),a),a.unstable_sxConfig={...Jt,...o?.unstable_sxConfig},a.unstable_sx=function(e){return Gt({sx:e,theme:this})},a},Xt=Yt();function Qt(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}function en(e,t,n){return function(e){for(const t in e)return!1;return!0}(t)?n:t[e]||t}const tn=Symbol("mui.processed_props");function nn(e,t,n){if(tn in e)return e[tn];const r={...e,theme:en(t,e.theme,n)};return e[tn]=r,r[tn]=r,r}function rn(e){return e?(t,n)=>n[e]:null}function on(e,t){const n="function"===typeof e?e(t):e;if(Array.isArray(n))return n.flatMap((e=>on(e,t)));if(Array.isArray(n?.variants)){const{variants:e,...r}=n;let i,o=r;e:for(let n=0;n<e.length;n+=1){const r=e[n];if("function"===typeof r.props){if(i??={...t,...t.ownerState,ownerState:t.ownerState},!r.props(i))continue}else for(const e in r.props)if(t[e]!==r.props[e]&&t.ownerState?.[e]!==r.props[e])continue e;Array.isArray(o)||(o=[o]),"function"===typeof r.style?(i??={...t,...t.ownerState,ownerState:t.ownerState},o.push(r.style(i))):o.push(r.style)}return o}return n}function sn(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}const an=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MIN_SAFE_INTEGER,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;return Math.max(t,Math.min(e,n))};function ln(e){return an(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)}function cn(e){if(e.type)return e;if("#"===e.charAt(0))return cn(function(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&1===n[0].length&&(n=n.map((e=>e+e))),n?`rgb${4===n.length?"a":""}(${n.map(((e,t)=>t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3)).join(", ")})`:""}(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(o(9,e));let r,i=e.substring(t+1,e.length-1);if("color"===n){if(i=i.split(" "),r=i.shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(o(10,r))}else i=i.split(",");return i=i.map((e=>parseFloat(e))),{type:n,values:i,colorSpace:r}}const un=(e,t)=>{try{return(e=>{const t=cn(e);return t.values.slice(0,3).map(((e,n)=>t.type.includes("hsl")&&0!==n?`${e}%`:e)).join(" ")})(e)}catch(n){return e}};function dn(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.includes("rgb")?r=r.map(((e,t)=>t<3?parseInt(e,10):e)):t.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),r=t.includes("color")?`${n} ${r.join(" ")}`:`${r.join(", ")}`,`${t}(${r})`}function hn(e){e=cn(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)};let a="rgb";const l=[Math.round(255*s(0)),Math.round(255*s(8)),Math.round(255*s(4))];return"hsla"===e.type&&(a+="a",l.push(t[3])),dn({type:a,values:l})}function pn(e){let t="hsl"===(e=cn(e)).type||"hsla"===e.type?cn(hn(e)).values:e.values;return t=t.map((t=>("color"!==e.type&&(t/=255),t<=.03928?t/12.92:((t+.055)/1.055)**2.4))),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function fn(e,t,n){try{return function(e,t){return e=cn(e),t=ln(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]=`/${t}`:e.values[3]=t,dn(e)}(e,t)}catch(r){return e}}function mn(e,t){if(e=cn(e),t=ln(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return dn(e)}function gn(e,t,n){try{return mn(e,t)}catch(r){return e}}function yn(e,t){if(e=cn(e),t=ln(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return dn(e)}function vn(e,t,n){try{return yn(e,t)}catch(r){return e}}function bn(e,t,n){try{return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return pn(e)>.5?mn(e,t):yn(e,t)}(e,t)}catch(r){return e}}const wn={black:"#000",white:"#fff"},xn={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},kn={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Sn={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},_n={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},En={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Cn={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},On={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Nn={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:wn.white,default:wn.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Tn={text:{primary:wn.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:wn.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function An(e,t,n,r){const i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=yn(e.main,i):"dark"===t&&(e.dark=mn(e.main,o)))}function jn(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2,...i}=e,s=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:En[200],light:En[50],dark:En[400]}:{main:En[700],light:En[400],dark:En[800]}}(t),a=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:kn[200],light:kn[50],dark:kn[400]}:{main:kn[500],light:kn[300],dark:kn[700]}}(t),l=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Sn[500],light:Sn[300],dark:Sn[700]}:{main:Sn[700],light:Sn[400],dark:Sn[800]}}(t),c=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Cn[400],light:Cn[300],dark:Cn[700]}:{main:Cn[700],light:Cn[500],dark:Cn[900]}}(t),u=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:On[400],light:On[300],dark:On[700]}:{main:On[800],light:On[500],dark:On[900]}}(t),d=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:_n[400],light:_n[300],dark:_n[700]}:{main:"#ed6c02",light:_n[500],dark:_n[900]}}(t);function h(e){const t=function(e,t){const n=pn(e),r=pn(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,Tn.text.primary)>=n?Tn.text.primary:Nn.text.primary;return t}const p=e=>{let{color:t,name:n,mainShade:i=500,lightShade:s=300,darkShade:a=700}=e;if(t={...t},!t.main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error(o(11,n?` (${n})`:"",i));if("string"!==typeof t.main)throw new Error(o(12,n?` (${n})`:"",JSON.stringify(t.main)));return An(t,"light",s,r),An(t,"dark",a,r),t.contrastText||(t.contrastText=h(t.main)),t},f={dark:Tn,light:Nn};return We({common:{...wn},mode:t,primary:p({color:s,name:"primary"}),secondary:p({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:p({color:l,name:"error"}),warning:p({color:d,name:"warning"}),info:p({color:c,name:"info"}),success:p({color:u,name:"success"}),grey:xn,contrastThreshold:n,getContrastText:h,augmentColor:p,tonalOffset:r,...f[t]},i)}function Pn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";function t(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(!r.length)return"";const o=r[0];return"string"!==typeof o||o.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, ${o}`:`, var(--${e?`${e}-`:""}${o}${t(...r.slice(1))})`}return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return`var(--${e?`${e}-`:""}${n}${t(...i)})`}}function In(e){const t={};return Object.entries(e).forEach((e=>{const[n,r]=e;"object"===typeof r&&(t[n]=`${r.fontStyle?`${r.fontStyle} `:""}${r.fontVariant?`${r.fontVariant} `:""}${r.fontWeight?`${r.fontWeight} `:""}${r.fontStretch?`${r.fontStretch} `:""}${r.fontSize||""}${r.lineHeight?`/${r.lineHeight} `:""}${r.fontFamily||""}`)})),t}const Rn=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=e;t.forEach(((e,o)=>{o===t.length-1?Array.isArray(i)?i[Number(e)]=n:i&&"object"===typeof i&&(i[e]=n):i&&"object"===typeof i&&(i[e]||(i[e]=r.includes(e)?[]:{}),i=i[e])}))},Mn=(e,t,n)=>{!function e(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];Object.entries(r).forEach((r=>{let[s,a]=r;(!n||n&&!n([...i,s]))&&void 0!==a&&null!==a&&("object"===typeof a&&Object.keys(a).length>0?e(a,[...i,s],Array.isArray(a)?[...o,s]:o):t([...i,s],a,o))}))}(e)},$n=(e,t)=>{if("number"===typeof t){if(["lineHeight","fontWeight","opacity","zIndex"].some((t=>e.includes(t))))return t;return e[e.length-1].toLowerCase().indexOf("opacity")>=0?t:`${t}px`}return t};function Ln(e,t){const{prefix:n,shouldSkipGeneratingVar:r}=t||{},i={},o={},s={};return Mn(e,((e,t,a)=>{if(("string"===typeof t||"number"===typeof t)&&(!r||!r(e,t))){const r=`--${n?`${n}-`:""}${e.join("-")}`,l=$n(e,t);Object.assign(i,{[r]:l}),Rn(o,e,`var(${r})`,a),Rn(s,e,`var(${r}, ${l})`,a)}}),(e=>"vars"===e[0])),{css:i,vars:o,varsWithDefaults:s}}const Dn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{getSelector:n=g,disableCssColorScheme:r,colorSchemeSelector:i}=t,{colorSchemes:o={},components:s,defaultColorScheme:a="light",...l}=e,{vars:c,css:u,varsWithDefaults:d}=Ln(l,t);let h=d;const p={},{[a]:f,...m}=o;if(Object.entries(m||{}).forEach((e=>{let[n,r]=e;const{vars:i,css:o,varsWithDefaults:s}=Ln(r,t);h=We(h,s),p[n]={css:o,vars:i}})),f){const{css:e,vars:n,varsWithDefaults:r}=Ln(f,t);h=We(h,r),p[a]={css:e,vars:n}}function g(t,n){let r=i;if("class"===i&&(r=".%s"),"data"===i&&(r="[data-%s]"),i?.startsWith("data-")&&!i.includes("%s")&&(r=`[${i}="%s"]`),t){if("media"===r){if(e.defaultColorScheme===t)return":root";const r=o[t]?.palette?.mode||t;return{[`@media (prefers-color-scheme: ${r})`]:{":root":n}}}if(r)return e.defaultColorScheme===t?`:root, ${r.replace("%s",String(t))}`:r.replace("%s",String(t))}return":root"}return{vars:h,generateThemeVars:()=>{let e={...c};return Object.entries(p).forEach((t=>{let[,{vars:n}]=t;e=We(e,n)})),e},generateStyleSheets:()=>{const t=[],i=e.defaultColorScheme||"light";function s(e,n){Object.keys(n).length&&t.push("string"===typeof e?{[e]:{...n}}:e)}s(n(void 0,{...u}),u);const{[i]:a,...l}=p;if(a){const{css:e}=a,t=o[i]?.palette?.mode,l=!r&&t?{colorScheme:t,...e}:{...e};s(n(i,{...l}),l)}return Object.entries(l).forEach((e=>{let[t,{css:i}]=e;const a=o[t]?.palette?.mode,l=!r&&a?{colorScheme:a,...i}:{...i};s(n(t,{...l}),l)})),t}}};function zn(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}const Fn={textTransform:"uppercase"},Bn='"Roboto", "Helvetica", "Arial", sans-serif';function Un(e,t){const{fontFamily:n=Bn,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:o=400,fontWeightMedium:s=500,fontWeightBold:a=700,htmlFontSize:l=16,allVariants:c,pxToRem:u,...d}="function"===typeof t?t(e):t;const h=r/14,p=u||(e=>e/l*h+"rem"),f=(e,t,r,i,o)=>{return{fontFamily:n,fontWeight:e,fontSize:p(t),lineHeight:r,...n===Bn?{letterSpacing:(s=i/t,Math.round(1e5*s)/1e5)+"em"}:{},...o,...c};var s},m={h1:f(i,96,1.167,-1.5),h2:f(i,60,1.2,-.5),h3:f(o,48,1.167,0),h4:f(o,34,1.235,.25),h5:f(o,24,1.334,0),h6:f(s,20,1.6,.15),subtitle1:f(o,16,1.75,.15),subtitle2:f(s,14,1.57,.1),body1:f(o,16,1.5,.15),body2:f(o,14,1.43,.15),button:f(s,14,1.75,.4,Fn),caption:f(o,12,1.66,.4),overline:f(o,12,2.66,1,Fn),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return We({htmlFontSize:l,pxToRem:p,fontFamily:n,fontSize:r,fontWeightLight:i,fontWeightRegular:o,fontWeightMedium:s,fontWeightBold:a,...m},d,{clone:!1})}function Hn(){return[`${arguments.length<=0?void 0:arguments[0]}px ${arguments.length<=1?void 0:arguments[1]}px ${arguments.length<=2?void 0:arguments[2]}px ${arguments.length<=3?void 0:arguments[3]}px rgba(0,0,0,0.2)`,`${arguments.length<=4?void 0:arguments[4]}px ${arguments.length<=5?void 0:arguments[5]}px ${arguments.length<=6?void 0:arguments[6]}px ${arguments.length<=7?void 0:arguments[7]}px rgba(0,0,0,0.14)`,`${arguments.length<=8?void 0:arguments[8]}px ${arguments.length<=9?void 0:arguments[9]}px ${arguments.length<=10?void 0:arguments[10]}px ${arguments.length<=11?void 0:arguments[11]}px rgba(0,0,0,0.12)`].join(",")}const Vn=["none",Hn(0,2,1,-1,0,1,1,0,0,1,3,0),Hn(0,3,1,-2,0,2,2,0,0,1,5,0),Hn(0,3,3,-2,0,3,4,0,0,1,8,0),Hn(0,2,4,-1,0,4,5,0,0,1,10,0),Hn(0,3,5,-1,0,5,8,0,0,1,14,0),Hn(0,3,5,-1,0,6,10,0,0,1,18,0),Hn(0,4,5,-2,0,7,10,1,0,2,16,1),Hn(0,5,5,-3,0,8,10,1,0,3,14,2),Hn(0,5,6,-3,0,9,12,1,0,3,16,2),Hn(0,6,6,-3,0,10,14,1,0,4,18,3),Hn(0,6,7,-4,0,11,15,1,0,4,20,3),Hn(0,7,8,-4,0,12,17,2,0,5,22,4),Hn(0,7,8,-4,0,13,19,2,0,5,24,4),Hn(0,7,9,-4,0,14,21,2,0,5,26,4),Hn(0,8,9,-5,0,15,22,2,0,6,28,5),Hn(0,8,10,-5,0,16,24,2,0,6,30,5),Hn(0,8,11,-5,0,17,26,2,0,6,32,5),Hn(0,9,11,-5,0,18,28,2,0,7,34,6),Hn(0,9,12,-6,0,19,29,2,0,7,36,6),Hn(0,10,13,-6,0,20,31,3,0,8,38,7),Hn(0,10,13,-6,0,21,33,3,0,8,40,7),Hn(0,10,14,-6,0,22,35,3,0,8,42,7),Hn(0,11,14,-7,0,23,36,3,0,9,44,8),Hn(0,11,15,-7,0,24,38,3,0,9,46,8)],Wn={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},qn={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Jn(e){return`${Math.round(e)}ms`}function Kn(e){if(!e)return 0;const t=e/36;return Math.min(Math.round(10*(4+15*t**.25+t/5)),3e3)}function Gn(e){const t={...Wn,...e.easing},n={...qn,...e.duration};return{getAutoHeightDuration:Kn,create:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{duration:i=n.standard,easing:o=t.easeInOut,delay:s=0,...a}=r;return(Array.isArray(e)?e:[e]).map((e=>`${e} ${"string"===typeof i?i:Jn(i)} ${o} ${"string"===typeof s?s:Jn(s)}`)).join(",")},...e,easing:t,duration:n}}const Zn={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Yn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{breakpoints:t,mixins:n={},spacing:r,palette:i={},transitions:s={},typography:a={},shape:l,...c}=e;if(e.vars)throw new Error(o(20));const u=jn(i),d=Yt(e);let h=We(d,{mixins:zn(d.breakpoints,n),palette:u,shadows:Vn.slice(),typography:Un(u,a),transitions:Gn(s),zIndex:{...Zn}});h=We(h,c);for(var p=arguments.length,f=new Array(p>1?p-1:0),m=1;m<p;m++)f[m-1]=arguments[m];return h=f.reduce(((e,t)=>We(e,t)),h),h.unstable_sxConfig={...Jt,...c?.unstable_sxConfig},h.unstable_sx=function(e){return Gt({sx:e,theme:this})},h}const Xn=Yn;const Qn=[...Array(25)].map(((e,t)=>{if(0===t)return;const n=function(e){let t;return t=e<1?5.11916*e**2:4.5*Math.log(e+1)+2,Math.round(10*t)/1e3}(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`}));function er(e){return{inputPlaceholder:"dark"===e?.5:.42,inputUnderline:"dark"===e?.7:.42,switchTrackDisabled:"dark"===e?.2:.12,switchTrack:"dark"===e?.3:.38}}function tr(e){return"dark"===e?Qn:[]}function nr(e){return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||"palette"===e[0]&&!!e[1]?.match(/(mode|contrastThreshold|tonalOffset)/)}const rr=e=>[...[...Array(24)].map(((t,n)=>`--${e?`${e}-`:""}overlays-${n+1}`)),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],ir=e=>(t,n)=>{const r=e.colorSchemeSelector;let i=r;if("class"===r&&(i=".%s"),"data"===r&&(i="[data-%s]"),r?.startsWith("data-")&&!r.includes("%s")&&(i=`[${r}="%s"]`),e.defaultColorScheme===t){if("dark"===t){const r={};return rr(e.cssVarPrefix).forEach((e=>{r[e]=n[e],delete n[e]})),"media"===i?{":root":n,"@media (prefers-color-scheme: dark)":{":root":r}}:i?{[i.replace("%s",t)]:r,[`:root, ${i.replace("%s",t)}`]:n}:{":root":{...n,...r}}}if(i&&"media"!==i)return`:root, ${i.replace("%s",String(t))}`}else if(t){if("media"===i)return{[`@media (prefers-color-scheme: ${String(t)})`]:{":root":n}};if(i)return i.replace("%s",String(t))}return":root"};function or(){const e={...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}};return function e(t){const n=Object.entries(t);for(let i=0;i<n.length;i++){const[o,s]=n[i];!He(r=s)&&"undefined"!==typeof r&&"string"!==typeof r&&"boolean"!==typeof r&&"number"!==typeof r&&!Array.isArray(r)||o.startsWith("unstable_")?delete t[o]:He(s)&&(t[o]={...s},e(t[o]))}var r}(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';\n\nconst theme = ${JSON.stringify(e,null,2)};\n\ntheme.breakpoints = createBreakpoints(theme.breakpoints || {});\ntheme.transitions = createTransitions(theme.transitions || {});\n\nexport default theme;`}function sr(e,t,n){!e[t]&&n&&(e[t]=n)}function ar(e){return e&&e.startsWith("hsl")?hn(e):e}function lr(e,t){`${t}Channel`in e||(e[`${t}Channel`]=un(ar(e[t]),`MUI: Can't create \`palette.${t}Channel\` because \`palette.${t}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().\nTo suppress this warning, you need to explicitly provide the \`palette.${t}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}const cr=e=>{try{return e()}catch(t){}},ur=function(){return Pn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"mui")};function dr(e,t,n,r){if(!t)return;t=!0===t?{}:t;const i="dark"===r?"dark":"light";if(!n)return void(e[r]=function(e){const{palette:t={mode:"light"},opacity:n,overlays:r,...i}=e,o=jn(t);return{palette:o,opacity:{...er(o.mode),...n},overlays:r||tr(o.mode),...i}}({...t,palette:{mode:i,...t?.palette}}));const{palette:o,...s}=Xn({...n,palette:{mode:i,...t?.palette}});return e[r]={...t,palette:o,opacity:{...er(i),...t?.opacity},overlays:t?.overlays||tr(i)},s}function hr(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...!0!==n&&n,palette:jn({...!0===n?{}:n,mode:t})})}const pr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{palette:t,cssVariables:n=!1,colorSchemes:r=(t?void 0:{light:!0}),defaultColorScheme:i=t?.mode,...s}=e,a=i||"light",l=r?.[a],c={...r,...t?{[a]:{..."boolean"!==typeof l&&l,palette:t}}:void 0};for(var u=arguments.length,d=new Array(u>1?u-1:0),h=1;h<u;h++)d[h-1]=arguments[h];if(!1===n){const t=Xn(e,...d);return"colorSchemes"in e?(t.defaultColorScheme=a,t.colorSchemes=c,"light"===t.palette.mode&&(t.colorSchemes.light={palette:t.palette},hr(t,"dark",c.dark)),"dark"===t.palette.mode&&(t.colorSchemes.dark={palette:t.palette},hr(t,"light",c.light)),t):t}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{colorSchemes:t={light:!0},defaultColorScheme:n,disableCssColorScheme:r=!1,cssVarPrefix:i="mui",shouldSkipGeneratingVar:s=nr,colorSchemeSelector:a=(t.light&&t.dark?"media":void 0),...l}=e,c=Object.keys(t)[0],u=n||(t.light&&"light"!==c?"light":c),d=ur(i),{[u]:h,light:p,dark:f,...m}=t,g={...m};let y=h;if(("dark"===u&&!("dark"in t)||"light"===u&&!("light"in t))&&(y=!0),!y)throw new Error(o(21,u));const v=dr(g,y,l,u);p&&!g.light&&dr(g,p,void 0,"light"),f&&!g.dark&&dr(g,f,void 0,"dark");let b={defaultColorScheme:u,...v,cssVarPrefix:i,colorSchemeSelector:a,getCssVar:d,colorSchemes:g,font:{...In(v.typography),...v.font},spacing:(w=l.spacing,"number"===typeof w?`${w}px`:"string"===typeof w||"function"===typeof w||Array.isArray(w)?w:"8px")};var w;Object.keys(b.colorSchemes).forEach((e=>{const t=b.colorSchemes[e].palette,n=e=>{const n=e.split("-"),r=n[1],i=n[2];return d(e,t[r][i])};var r;if("light"===t.mode&&(sr(t.common,"background","#fff"),sr(t.common,"onBackground","#000")),"dark"===t.mode&&(sr(t.common,"background","#000"),sr(t.common,"onBackground","#fff")),r=t,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"].forEach((e=>{r[e]||(r[e]={})})),"light"===t.mode){sr(t.Alert,"errorColor",gn(t.error.light,.6)),sr(t.Alert,"infoColor",gn(t.info.light,.6)),sr(t.Alert,"successColor",gn(t.success.light,.6)),sr(t.Alert,"warningColor",gn(t.warning.light,.6)),sr(t.Alert,"errorFilledBg",n("palette-error-main")),sr(t.Alert,"infoFilledBg",n("palette-info-main")),sr(t.Alert,"successFilledBg",n("palette-success-main")),sr(t.Alert,"warningFilledBg",n("palette-warning-main")),sr(t.Alert,"errorFilledColor",cr((()=>t.getContrastText(t.error.main)))),sr(t.Alert,"infoFilledColor",cr((()=>t.getContrastText(t.info.main)))),sr(t.Alert,"successFilledColor",cr((()=>t.getContrastText(t.success.main)))),sr(t.Alert,"warningFilledColor",cr((()=>t.getContrastText(t.warning.main)))),sr(t.Alert,"errorStandardBg",vn(t.error.light,.9)),sr(t.Alert,"infoStandardBg",vn(t.info.light,.9)),sr(t.Alert,"successStandardBg",vn(t.success.light,.9)),sr(t.Alert,"warningStandardBg",vn(t.warning.light,.9)),sr(t.Alert,"errorIconColor",n("palette-error-main")),sr(t.Alert,"infoIconColor",n("palette-info-main")),sr(t.Alert,"successIconColor",n("palette-success-main")),sr(t.Alert,"warningIconColor",n("palette-warning-main")),sr(t.AppBar,"defaultBg",n("palette-grey-100")),sr(t.Avatar,"defaultBg",n("palette-grey-400")),sr(t.Button,"inheritContainedBg",n("palette-grey-300")),sr(t.Button,"inheritContainedHoverBg",n("palette-grey-A100")),sr(t.Chip,"defaultBorder",n("palette-grey-400")),sr(t.Chip,"defaultAvatarColor",n("palette-grey-700")),sr(t.Chip,"defaultIconColor",n("palette-grey-700")),sr(t.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),sr(t.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),sr(t.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),sr(t.LinearProgress,"primaryBg",vn(t.primary.main,.62)),sr(t.LinearProgress,"secondaryBg",vn(t.secondary.main,.62)),sr(t.LinearProgress,"errorBg",vn(t.error.main,.62)),sr(t.LinearProgress,"infoBg",vn(t.info.main,.62)),sr(t.LinearProgress,"successBg",vn(t.success.main,.62)),sr(t.LinearProgress,"warningBg",vn(t.warning.main,.62)),sr(t.Skeleton,"bg",`rgba(${n("palette-text-primaryChannel")} / 0.11)`),sr(t.Slider,"primaryTrack",vn(t.primary.main,.62)),sr(t.Slider,"secondaryTrack",vn(t.secondary.main,.62)),sr(t.Slider,"errorTrack",vn(t.error.main,.62)),sr(t.Slider,"infoTrack",vn(t.info.main,.62)),sr(t.Slider,"successTrack",vn(t.success.main,.62)),sr(t.Slider,"warningTrack",vn(t.warning.main,.62));const e=bn(t.background.default,.8);sr(t.SnackbarContent,"bg",e),sr(t.SnackbarContent,"color",cr((()=>t.getContrastText(e)))),sr(t.SpeedDialAction,"fabHoverBg",bn(t.background.paper,.15)),sr(t.StepConnector,"border",n("palette-grey-400")),sr(t.StepContent,"border",n("palette-grey-400")),sr(t.Switch,"defaultColor",n("palette-common-white")),sr(t.Switch,"defaultDisabledColor",n("palette-grey-100")),sr(t.Switch,"primaryDisabledColor",vn(t.primary.main,.62)),sr(t.Switch,"secondaryDisabledColor",vn(t.secondary.main,.62)),sr(t.Switch,"errorDisabledColor",vn(t.error.main,.62)),sr(t.Switch,"infoDisabledColor",vn(t.info.main,.62)),sr(t.Switch,"successDisabledColor",vn(t.success.main,.62)),sr(t.Switch,"warningDisabledColor",vn(t.warning.main,.62)),sr(t.TableCell,"border",vn(fn(t.divider,1),.88)),sr(t.Tooltip,"bg",fn(t.grey[700],.92))}if("dark"===t.mode){sr(t.Alert,"errorColor",vn(t.error.light,.6)),sr(t.Alert,"infoColor",vn(t.info.light,.6)),sr(t.Alert,"successColor",vn(t.success.light,.6)),sr(t.Alert,"warningColor",vn(t.warning.light,.6)),sr(t.Alert,"errorFilledBg",n("palette-error-dark")),sr(t.Alert,"infoFilledBg",n("palette-info-dark")),sr(t.Alert,"successFilledBg",n("palette-success-dark")),sr(t.Alert,"warningFilledBg",n("palette-warning-dark")),sr(t.Alert,"errorFilledColor",cr((()=>t.getContrastText(t.error.dark)))),sr(t.Alert,"infoFilledColor",cr((()=>t.getContrastText(t.info.dark)))),sr(t.Alert,"successFilledColor",cr((()=>t.getContrastText(t.success.dark)))),sr(t.Alert,"warningFilledColor",cr((()=>t.getContrastText(t.warning.dark)))),sr(t.Alert,"errorStandardBg",gn(t.error.light,.9)),sr(t.Alert,"infoStandardBg",gn(t.info.light,.9)),sr(t.Alert,"successStandardBg",gn(t.success.light,.9)),sr(t.Alert,"warningStandardBg",gn(t.warning.light,.9)),sr(t.Alert,"errorIconColor",n("palette-error-main")),sr(t.Alert,"infoIconColor",n("palette-info-main")),sr(t.Alert,"successIconColor",n("palette-success-main")),sr(t.Alert,"warningIconColor",n("palette-warning-main")),sr(t.AppBar,"defaultBg",n("palette-grey-900")),sr(t.AppBar,"darkBg",n("palette-background-paper")),sr(t.AppBar,"darkColor",n("palette-text-primary")),sr(t.Avatar,"defaultBg",n("palette-grey-600")),sr(t.Button,"inheritContainedBg",n("palette-grey-800")),sr(t.Button,"inheritContainedHoverBg",n("palette-grey-700")),sr(t.Chip,"defaultBorder",n("palette-grey-700")),sr(t.Chip,"defaultAvatarColor",n("palette-grey-300")),sr(t.Chip,"defaultIconColor",n("palette-grey-300")),sr(t.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),sr(t.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),sr(t.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),sr(t.LinearProgress,"primaryBg",gn(t.primary.main,.5)),sr(t.LinearProgress,"secondaryBg",gn(t.secondary.main,.5)),sr(t.LinearProgress,"errorBg",gn(t.error.main,.5)),sr(t.LinearProgress,"infoBg",gn(t.info.main,.5)),sr(t.LinearProgress,"successBg",gn(t.success.main,.5)),sr(t.LinearProgress,"warningBg",gn(t.warning.main,.5)),sr(t.Skeleton,"bg",`rgba(${n("palette-text-primaryChannel")} / 0.13)`),sr(t.Slider,"primaryTrack",gn(t.primary.main,.5)),sr(t.Slider,"secondaryTrack",gn(t.secondary.main,.5)),sr(t.Slider,"errorTrack",gn(t.error.main,.5)),sr(t.Slider,"infoTrack",gn(t.info.main,.5)),sr(t.Slider,"successTrack",gn(t.success.main,.5)),sr(t.Slider,"warningTrack",gn(t.warning.main,.5));const e=bn(t.background.default,.98);sr(t.SnackbarContent,"bg",e),sr(t.SnackbarContent,"color",cr((()=>t.getContrastText(e)))),sr(t.SpeedDialAction,"fabHoverBg",bn(t.background.paper,.15)),sr(t.StepConnector,"border",n("palette-grey-600")),sr(t.StepContent,"border",n("palette-grey-600")),sr(t.Switch,"defaultColor",n("palette-grey-300")),sr(t.Switch,"defaultDisabledColor",n("palette-grey-600")),sr(t.Switch,"primaryDisabledColor",gn(t.primary.main,.55)),sr(t.Switch,"secondaryDisabledColor",gn(t.secondary.main,.55)),sr(t.Switch,"errorDisabledColor",gn(t.error.main,.55)),sr(t.Switch,"infoDisabledColor",gn(t.info.main,.55)),sr(t.Switch,"successDisabledColor",gn(t.success.main,.55)),sr(t.Switch,"warningDisabledColor",gn(t.warning.main,.55)),sr(t.TableCell,"border",gn(fn(t.divider,1),.68)),sr(t.Tooltip,"bg",fn(t.grey[700],.92))}lr(t.background,"default"),lr(t.background,"paper"),lr(t.common,"background"),lr(t.common,"onBackground"),lr(t,"divider"),Object.keys(t).forEach((e=>{const n=t[e];n&&"object"===typeof n&&(n.main&&sr(t[e],"mainChannel",un(ar(n.main))),n.light&&sr(t[e],"lightChannel",un(ar(n.light))),n.dark&&sr(t[e],"darkChannel",un(ar(n.dark))),n.contrastText&&sr(t[e],"contrastTextChannel",un(ar(n.contrastText))),"text"===e&&(lr(t[e],"primary"),lr(t[e],"secondary")),"action"===e&&(n.active&&lr(t[e],"active"),n.selected&&lr(t[e],"selected")))}))}));for(var x=arguments.length,k=new Array(x>1?x-1:0),S=1;S<x;S++)k[S-1]=arguments[S];b=k.reduce(((e,t)=>We(e,t)),b);const _={prefix:i,disableCssColorScheme:r,shouldSkipGeneratingVar:s,getSelector:ir(b)},{vars:E,generateThemeVars:C,generateStyleSheets:O}=Dn(b,_);return b.vars=E,Object.entries(b.colorSchemes[b.defaultColorScheme]).forEach((e=>{let[t,n]=e;b[t]=n})),b.generateThemeVars=C,b.generateStyleSheets=O,b.generateSpacing=function(){return bt(l.spacing,ht(this))},b.getColorSchemeSelector=function(e){return function(t){return"media"===e?`@media (prefers-color-scheme: ${t})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${t}"] &`:"class"===e?`.${t} &`:"data"===e?`[data-${t}] &`:`${e.replace("%s",t)} &`:"&"}}(a),b.spacing=b.generateSpacing(),b.shouldSkipGeneratingVar=s,b.unstable_sxConfig={...Jt,...l?.unstable_sxConfig},b.unstable_sx=function(e){return Gt({sx:e,theme:this})},b.toRuntimeSource=or,b}({...s,colorSchemes:c,defaultColorScheme:a,..."boolean"!==typeof n&&n},...d)}();const fr=function(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e},mr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{themeId:t,defaultTheme:n=Xt,rootShouldForwardProp:r=Qt,slotShouldForwardProp:i=Qt}=e,o=e=>Gt(nn(e,t,n));return o.__mui_systemSx=!0,function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};((e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))})(e,(e=>e.filter((e=>!e?.__mui_systemSx))));const{name:a,slot:l,skipVariantsResolver:c,skipSx:u,overridesResolver:d=rn(sn(l)),...h}=s,p=void 0!==c?c:l&&"Root"!==l&&"root"!==l||!1,f=u||!1;let m=Qt;"Root"===l||"root"===l?m=r:l?m=i:function(e){return"string"===typeof e&&e.charCodeAt(0)>96}(e)&&(m=void 0);const g=function(e,t){return Ue(e,t)}(e,{shouldForwardProp:m,label:undefined,...h}),y=e=>"function"===typeof e&&e.__emotion_real!==e||He(e)?r=>on(e,nn(r,t,n)):e,v=function(r){let i=y(r);for(var s=arguments.length,l=new Array(s>1?s-1:0),c=1;c<s;c++)l[c-1]=arguments[c];const u=l?l.map(y):[];a&&d&&u.push((e=>{const r=en(t,e.theme,n);if(!r.components||!r.components[a]||!r.components[a].styleOverrides)return null;const i=r.components[a].styleOverrides,o={},s=nn(e,t,n);for(const t in i)o[t]=on(i[t],s);return d(e,o)})),a&&!p&&u.push((e=>{const r=en(t,e.theme,n),i=r?.components?.[a]?.variants;return i?on({variants:i},nn(e,t,n)):null})),f||u.push(o);const h=u.length-l.length;if(Array.isArray(r)&&h>0){const e=new Array(h).fill("");i=[...r,...e],i.raw=[...r.raw,...e]}const m=g(i,...u);return e.muiName&&(m.muiName=e.muiName),m};return g.withConfig&&(v.withConfig=g.withConfig),v}}({themeId:"$$material",defaultTheme:pr,rootShouldForwardProp:e=>fr(e)&&"classes"!==e}),gr=mr,yr={theme:void 0};function vr(e){let t,n;return r=>{let i=t;return void 0!==i&&r.theme===n||(yr.theme=r.theme,i=e(yr),t=i,n=r.theme),i}}function br(e,t){const n={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const i=r;if("components"===i||"slots"===i)n[i]={...e[i],...n[i]};else if("componentsProps"===i||"slotProps"===i){const r=e[i],o=t[i];if(o)if(r){n[i]={...o};for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e)){const t=e;n[i][t]=br(r[t],o[t])}}else n[i]=o;else n[i]=r||{}}else void 0===n[i]&&(n[i]=e[i])}return n}var wr=n(579);const xr=c.createContext(void 0);function kr(e){let{props:t,name:n}=e;return function(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const i=t.components[n];return i.defaultProps?br(i.defaultProps,r):i.styleOverrides||i.variants?r:br(i,r)}({props:t,name:n,theme:{components:c.useContext(xr)}})}const Sr={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function _r(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r=Sr[t];return r?`${n}-${r}`:`${i.generate(e)}-${t}`}function Er(e){return _r("MuiSvgIcon",e)}!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui";const r={};t.forEach((t=>{r[t]=_r(e,t,n)}))}("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Cr=gr("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,"inherit"!==n.color&&t[`color${a(n.color)}`],t[`fontSize${a(n.fontSize)}`]]}})(vr((e=>{let{theme:t}=e;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:t.transitions?.create?.("fill",{duration:(t.vars??t).transitions?.duration?.shorter}),variants:[{props:e=>!e.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:t.typography?.pxToRem?.(20)||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:t.typography?.pxToRem?.(24)||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:t.typography?.pxToRem?.(35)||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter((e=>{let[,t]=e;return t&&t.main})).map((e=>{let[n]=e;return{props:{color:n},style:{color:(t.vars??t).palette?.[n]?.main}}})),{props:{color:"action"},style:{color:(t.vars??t).palette?.action?.active}},{props:{color:"disabled"},style:{color:(t.vars??t).palette?.action?.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}}))),Or=c.forwardRef((function(e,t){const n=kr({props:e,name:"MuiSvgIcon"});const{children:r,className:i,color:o="inherit",component:s="svg",fontSize:l="medium",htmlColor:u,inheritViewBox:d=!1,titleAccess:p,viewBox:f="0 0 24 24",...m}=n,g=c.isValidElement(r)&&"svg"===r.type,y={...n,color:o,component:s,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:d,viewBox:f,hasSvgAsChild:g},v={};d||(v.viewBox=f);const b=(e=>{const{color:t,fontSize:n,classes:r}=e;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const r={};for(const i in e){const o=e[i];let s="";for(let e=0;e<o.length;e+=1){const r=o[e];r&&(s+=t(r)+" ",n&&n[r]&&(s+=n[r]+" "))}r[i]=s}return r}({root:["root","inherit"!==t&&`color${a(t)}`,`fontSize${a(n)}`]},Er,r)})(y);return(0,wr.jsxs)(Cr,{as:s,className:h(b.root,i),focusable:"false",color:u,"aria-hidden":!p||void 0,role:p?"img":void 0,ref:t,...v,...m,...g&&r.props,ownerState:y,children:[g?r.props.children:r,p?(0,wr.jsx)("title",{children:p}):null]})}));Or&&(Or.muiName="SvgIcon");const Nr=Or;function Tr(e,t){function n(n,r){return(0,wr.jsx)(Nr,{"data-testid":`${t}Icon`,ref:r,...n,children:e})}return n.muiName=Nr.muiName,c.memo(c.forwardRef(n))}const Ar=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];clearTimeout(t),t=setTimeout((()=>{e.apply(this,i)}),n)}return r.clear=()=>{clearTimeout(t)},r};const jr=function(e,t){return()=>null};const Pr=function(e,t){return c.isValidElement(e)&&-1!==t.indexOf(e.type.muiName??e.type?._payload?.value?.muiName)};function Ir(e){return e&&e.ownerDocument||document}const Rr=Ir;const Mr=function(e){return Ir(e).defaultView||window};const $r=function(e,t){return()=>null};function Lr(e,t){"function"===typeof e?e(t):e&&(e.current=t)}const Dr=Lr,zr="undefined"!==typeof window?c.useLayoutEffect:c.useEffect,Fr=zr;let Br=0;const Ur=u["useId".toString()];const Hr=function(e){if(void 0!==Ur){const t=Ur();return e??t}return function(e){const[t,n]=c.useState(e),r=e||t;return c.useEffect((()=>{null==t&&(Br+=1,n(`mui-${Br}`))}),[t]),r}(e)};const Vr=function(e,t,n,r,i){return null};const Wr=function(e){let{controlled:t,default:n,name:r,state:i="value"}=e;const{current:o}=c.useRef(void 0!==t),[s,a]=c.useState(n);return[o?t:s,c.useCallback((e=>{o||a(e)}),[])]};const qr=function(e){const t=c.useRef(e);return zr((()=>{t.current=e})),c.useRef((function(){return(0,t.current)(...arguments)})).current};const Jr=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo((()=>t.every((e=>null==e))?null:e=>{t.forEach((t=>{Lr(t,e)}))}),t)},Kr={configure:e=>{i.configure(e)}}},4445:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=a(e),s=o[0],l=o[1],c=new i(function(e,t,n){return 3*(t+n)/4-n}(0,s,l)),u=0,d=l>0?s-4:s;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===l&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,c[u++]=255&t);1===l&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],s=16383,a=0,c=r-i;a<c;a+=s)o.push(l(e,a,a+s>c?c:a+s));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],r=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)n[s]=o[s],r[o.charCodeAt(s)]=s;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,r){for(var i,o,s=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},9894:e=>{"use strict";const t=/[\p{Lu}]/u,n=/[\p{Ll}]/u,r=/^[\p{Lu}](?![\p{Lu}])/gu,i=/([\p{Alpha}\p{N}_]|$)/u,o=/[_.\- ]+/,s=new RegExp("^"+o.source),a=new RegExp(o.source+i.source,"gu"),l=new RegExp("\\d+"+i.source,"gu"),c=(e,i)=>{if("string"!==typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");if(i={pascalCase:!1,preserveConsecutiveUppercase:!1,...i},0===(e=Array.isArray(e)?e.map((e=>e.trim())).filter((e=>e.length)).join("-"):e.trim()).length)return"";const o=!1===i.locale?e=>e.toLowerCase():e=>e.toLocaleLowerCase(i.locale),c=!1===i.locale?e=>e.toUpperCase():e=>e.toLocaleUpperCase(i.locale);if(1===e.length)return i.pascalCase?c(e):o(e);return e!==o(e)&&(e=((e,r,i)=>{let o=!1,s=!1,a=!1;for(let l=0;l<e.length;l++){const c=e[l];o&&t.test(c)?(e=e.slice(0,l)+"-"+e.slice(l),o=!1,a=s,s=!0,l++):s&&a&&n.test(c)?(e=e.slice(0,l-1)+"-"+e.slice(l-1),a=s,s=!1,o=!0):(o=r(c)===c&&i(c)!==c,a=s,s=i(c)===c&&r(c)!==c)}return e})(e,o,c)),e=e.replace(s,""),e=i.preserveConsecutiveUppercase?((e,t)=>(r.lastIndex=0,e.replace(r,(e=>t(e)))))(e,o):o(e),i.pascalCase&&(e=c(e.charAt(0))+e.slice(1)),((e,t)=>(a.lastIndex=0,l.lastIndex=0,e.replace(a,((e,n)=>t(n))).replace(l,(e=>t(e)))))(e,c)};e.exports=c,e.exports.default=c},3047:e=>{"use strict";e.exports=function(e,t){if("string"!==typeof e)throw new TypeError("Expected a string");return t="undefined"===typeof t?"_":t,e.replace(/([a-z\d])([A-Z])/g,"$1"+t+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+t+"$2").toLowerCase()}},7283:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,s){if("function"!==typeof r)throw new TypeError("The listener must be a function");var a=new i(r,o||e,s),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,i,o,s){var a=n?n+e:e;if(!this._events[a])return!1;var l,c,u=this._events[a],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,o),!0;case 6:return u.fn.call(u.context,t,r,i,o,s),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},a.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||r&&a.context!==r||s(this,o);else{for(var l=0,c=[],u=a.length;l<u;l++)(a[l].fn!==t||i&&!a[l].once||r&&a[l].context!==r)&&c.push(a[l]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a},3240:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},s=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var r,i=t.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!i&&!o)return!1;for(r in e);return"undefined"===typeof r||t.call(e,r)},a=function(e,t){r&&"__proto__"===t.name?r(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},l=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(i)return i(e,n).value}return e[n]};e.exports=function e(){var t,n,r,i,c,u,d=arguments[0],h=1,p=arguments.length,f=!1;for("boolean"===typeof d&&(f=d,d=arguments[1]||{},h=2),(null==d||"object"!==typeof d&&"function"!==typeof d)&&(d={});h<p;++h)if(null!=(t=arguments[h]))for(n in t)r=l(d,n),d!==(i=l(t,n))&&(f&&i&&(s(i)||(c=o(i)))?(c?(c=!1,u=r&&o(r)?r:[]):u=r&&s(r)?r:{},a(d,{name:n,newValue:e(f,u,i)})):"undefined"!==typeof i&&a(d,{name:n,newValue:i}));return d}},4403:e=>{var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,r=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,l=/^\s+|\s+$/g,c="";function u(e){return e?e.replace(l,c):c}e.exports=function(e,l){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];l=l||{};var d=1,h=1;function p(e){var t=e.match(n);t&&(d+=t.length);var r=e.lastIndexOf("\n");h=~r?e.length-r:h+e.length}function f(){var e={line:d,column:h};return function(t){return t.position=new m(e),b(),t}}function m(e){this.start=e,this.end={line:d,column:h},this.source=l.source}m.prototype.content=e;var g=[];function y(t){var n=new Error(l.source+":"+d+":"+h+": "+t);if(n.reason=t,n.filename=l.source,n.line=d,n.column=h,n.source=e,!l.silent)throw n;g.push(n)}function v(t){var n=t.exec(e);if(n){var r=n[0];return p(r),e=e.slice(r.length),n}}function b(){v(r)}function w(e){var t;for(e=e||[];t=x();)!1!==t&&e.push(t);return e}function x(){var t=f();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;c!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,c===e.charAt(n-1))return y("End of comment missing");var r=e.slice(2,n-2);return h+=2,p(r),e=e.slice(n),h+=2,t({type:"comment",comment:r})}}function k(){var e=f(),n=v(i);if(n){if(x(),!v(o))return y("property missing ':'");var r=v(s),l=e({type:"declaration",property:u(n[0].replace(t,c)),value:r?u(r[0].replace(t,c)):c});return v(a),l}}return b(),function(){var e,t=[];for(w(t);e=k();)!1!==e&&(t.push(e),w(t));return t}()}},9498:e=>{"use strict";e.exports=(e,t)=>(t=t||(()=>{}),e.then((e=>new Promise((e=>{e(t())})).then((()=>e))),(e=>new Promise((e=>{e(t())})).then((()=>{throw e})))))},5623:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7283),i=n(2270),o=n(7349),s=()=>{},a=new i.TimeoutError;t.default=class extends r{constructor(e){var t,n,r,i;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=s,this._resolveIdle=s,!("number"===typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:o.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(n=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==n?n:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(i=null===(r=e.interval)||void 0===r?void 0:r.toString())&&void 0!==i?i:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=s,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=s,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout((()=>{this._onResumeInterval()}),t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval((()=>{this._onInterval()}),this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"===typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((n,r)=>{this._queue.enqueue((async()=>{this._pendingCount++,this._intervalCount++;try{const o=void 0===this._timeout&&void 0===t.timeout?e():i.default(Promise.resolve(e()),void 0===t.timeout?this._timeout:t.timeout,(()=>{(void 0===t.throwOnTimeout?this._throwOnTimeout:t.throwOnTimeout)&&r(a)}));n(await o)}catch(o){r(o)}this._next()}),t),this._tryToStartAnother(),this.emit("add")}))}async addAll(e,t){return Promise.all(e.map((async e=>this.add(e,t))))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise((e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}}))}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise((e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}}))}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}},115:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){let r=0,i=e.length;for(;i>0;){const o=i/2|0;let s=r+o;n(e[s],t)<=0?(r=++s,i-=o+1):i=o}return r}},7349:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(115);t.default=class{constructor(){this._queue=[]}enqueue(e,t){const n={priority:(t=Object.assign({priority:0},t)).priority,run:e};if(this.size&&this._queue[this.size-1].priority>=t.priority)return void this._queue.push(n);const i=r.default(this._queue,n,((e,t)=>t.priority-e.priority));this._queue.splice(i,0,n)}dequeue(){const e=this._queue.shift();return null===e||void 0===e?void 0:e.run}filter(e){return this._queue.filter((t=>t.priority===e.priority)).map((e=>e.run))}get size(){return this._queue.length}}},6659:(e,t,n)=>{"use strict";const r=n(302),i=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class o extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,({message:e}=e)):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const s=(e,t)=>new Promise(((n,s)=>{t={onFailedAttempt:()=>{},retries:10,...t};const a=r.operation(t);a.attempt((async r=>{try{n(await e(r))}catch(c){if(!(c instanceof Error))return void s(new TypeError(`Non-error was thrown: "${c}". You should only throw errors.`));if(c instanceof o)a.stop(),s(c.originalError);else if(c instanceof TypeError&&(l=c.message,!i.includes(l)))a.stop(),s(c);else{((e,t,n)=>{const r=n.retries-(t-1);e.attemptNumber=t,e.retriesLeft=r})(c,r,t);try{await t.onFailedAttempt(c)}catch(c){return void s(c)}a.retry(c)||s(a.mainError())}}var l}))}));e.exports=s,e.exports.default=s,e.exports.AbortError=o},2270:(e,t,n)=>{"use strict";const r=n(9498);class i extends Error{constructor(e){super(e),this.name="TimeoutError"}}const o=(e,t,n)=>new Promise(((o,s)=>{if("number"!==typeof t||t<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(t===1/0)return void o(e);const a=setTimeout((()=>{if("function"===typeof n){try{o(n())}catch(a){s(a)}return}const r=n instanceof Error?n:new i("string"===typeof n?n:`Promise timed out after ${t} milliseconds`);"function"===typeof e.cancel&&e.cancel(),s(r)}),t);r(e.then(o,s),(()=>{clearTimeout(a)}))}));e.exports=o,e.exports.default=o,e.exports.TimeoutError=i},1497:(e,t,n)=>{"use strict";var r=n(3218);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},5173:(e,t,n)=>{e.exports=n(1497)()},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2730:(e,t,n)=>{"use strict";var r=n(5043),i=n(8853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),O=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var $,L=Object.assign;function D(e){if(void 0===$)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$=t&&t[1]||""}return"\n"+$+e}var z=!1;function F(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?D(e):""}function B(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case E:return"Profiler";case _:return"StrictMode";case T:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case O:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function G(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function oe(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,_e=null;function Ee(e){if(e=bi(e)){if("function"!==typeof ke)throw Error(o(280));var t=e.stateNode;t&&(t=xi(t),ke(e.stateNode,e.type,t))}}function Ce(e){Se?_e?_e.push(e):_e=[e]:Se=e}function Oe(){if(Se){var e=Se,t=_e;if(_e=Se=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ne(e,t){return e(t)}function Te(){}var Ae=!1;function je(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ne(e,t,n)}finally{Ae=!1,(null!==Se||null!==_e)&&(Te(),Oe())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ie=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){Ie=!1}function Me(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var $e=!1,Le=null,De=!1,ze=null,Fe={onError:function(e){$e=!0,Le=e}};function Be(e,t,n,r,i,o,s,a,l){$e=!1,Le=null,Me.apply(Fe,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(Ue(e)!==e)throw Error(o(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ve(i),e;if(s===r)return Ve(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Je=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Ge=i.unstable_shouldYield,Ze=i.unstable_requestPaint,Ye=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Qe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=dt(a):0!==(o&=s)&&(r=dt(o))}else 0!==(s=n&~i)?r=dt(s):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,kt,St,_t,Et,Ct=!1,Ot=[],Nt=null,Tt=null,At=null,jt=new Map,Pt=new Map,It=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Nt=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":jt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function $t(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=vi(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Et(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Dt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function zt(e,t,n){Dt(e)&&n.delete(t)}function Ft(){Ct=!1,null!==Nt&&Dt(Nt)&&(Nt=null),null!==Tt&&Dt(Tt)&&(Tt=null),null!==At&&Dt(At)&&(At=null),jt.forEach(zt),Pt.forEach(zt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ft)))}function Ut(e){function t(t){return Bt(t,e)}if(0<Ot.length){Bt(Ot[0],e);for(var n=1;n<Ot.length;n++){var r=Ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Nt&&Bt(Nt,e),null!==Tt&&Bt(Tt,e),null!==At&&Bt(At,e),jt.forEach(t),Pt.forEach(t),n=0;n<It.length;n++)(r=It[n]).blockedOn===e&&(r.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Lt(n),null===n.blockedOn&&It.shift()}var Ht=w.ReactCurrentBatchConfig,Vt=!0;function Wt(e,t,n,r){var i=bt,o=Ht.transition;Ht.transition=null;try{bt=1,Jt(e,t,n,r)}finally{bt=i,Ht.transition=o}}function qt(e,t,n,r){var i=bt,o=Ht.transition;Ht.transition=null;try{bt=4,Jt(e,t,n,r)}finally{bt=i,Ht.transition=o}}function Jt(e,t,n,r){if(Vt){var i=Gt(e,t,n,r);if(null===i)Vr(e,t,r,Kt,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Nt=$t(Nt,e,t,n,r,i),!0;case"dragenter":return Tt=$t(Tt,e,t,n,r,i),!0;case"mouseover":return At=$t(At,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return jt.set(o,$t(jt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Pt.set(o,$t(Pt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&xt(o),null===(o=Gt(e,t,n,r))&&Vr(e,t,r,Kt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Vr(e,t,r,null,n)}}var Kt=null;function Gt(e,t,n,r){if(Kt=null,null!==(e=vi(e=xe(r))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Qe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Qt=null;function en(){if(Qt)return Qt;var e,t,n=Xt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Qt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=L({},cn,{view:0,detail:0}),hn=on(dn),pn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=on(pn),mn=on(L({},pn,{dataTransfer:0})),gn=on(L({},dn,{relatedTarget:0})),yn=on(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(vn),wn=on(L({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function En(){return _n}var Cn=L({},dn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),On=on(Cn),Nn=on(L({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Tn=on(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),An=on(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),jn=L({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=on(jn),In=[9,13,27,32],Rn=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var $n=u&&"TextEvent"in window&&!Mn,Ln=u&&(!Rn||Mn&&8<Mn&&11>=Mn),Dn=String.fromCharCode(32),zn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ce(r),0<(t=qr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Jn=null;function Kn(e){Dr(e,0)}function Gn(e){if(J(wi(e)))return e}function Zn(e,t){if("change"===e)return t}var Yn=!1;if(u){var Xn;if(u){var Qn="oninput"in document;if(!Qn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Qn="function"===typeof er.oninput}Xn=Qn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Jn=qn=null)}function nr(e){if("value"===e.propertyName&&Gn(Jn)){var t=[];Wn(t,Jn,e,xe(e)),je(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Jn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn(Jn)}function or(e,t){if("click"===e)return Gn(t)}function sr(e,t){if("input"===e||"change"===e)return Gn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=qr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Sr={},_r={};function Er(e){if(Sr[e])return Sr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in _r)return Sr[e]=n[t];return e}u&&(_r=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Cr=Er("animationend"),Or=Er("animationiteration"),Nr=Er("animationstart"),Tr=Er("transitionend"),Ar=new Map,jr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),l(t,[e])}for(var Ir=0;Ir<jr.length;Ir++){var Rr=jr[Ir];Pr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Pr(Cr,"onAnimationEnd"),Pr(Or,"onAnimationIteration"),Pr(Nr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Tr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$r=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(Be.apply(this,arguments),$e){if(!$e)throw Error(o(198));var u=Le;$e=!1,Le=null,De||(De=!0,ze=u)}}(r,t,void 0,e),e.currentTarget=null}function Dr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Lr(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Lr(i,a,c),o=l}}}if(De)throw e=ze,De=!1,ze=null,e}function zr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function Fr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[Br]){e[Br]=!0,s.forEach((function(t){"selectionchange"!==t&&($r.has(t)||Fr(t,!1,e),Fr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Fr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Zt(t)){case 1:var i=Wt;break;case 4:i=qt;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Vr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=vi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}je((function(){var r=o,i=xe(n),s=[];e:{var a=Ar.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=On;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Tn;break;case Cr:case Or:case Nr:l=yn;break;case Tr:l=An;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Nn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Pe(f,h))&&u.push(Wr(f,m,p)))),d)break;f=f.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[fi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(d=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Nn,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?a:wi(l),p=null==c?a:wi(c),(a=new u(m,f+"leave",l,n,i)).target=d,a.relatedTarget=p,m=null,vi(i)===r&&((u=new u(h,f+"enter",c,n,i)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Jr(p))f++;for(p=0,m=h;m;m=Jr(m))p++;for(;0<f-p;)u=Jr(u),f--;for(;0<p-f;)h=Jr(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Jr(u),h=Jr(h)}u=null}else u=null;null!==l&&Kr(s,a,l,u,!1),null!==c&&null!==d&&Kr(s,d,c,u,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Zn;else if(Vn(a))if(Yn)g=sr;else{g=ir;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?Wn(s,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?wi(r):window,e){case"focusin":(Vn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(s,n,i)}var v;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Un?Fn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(Un||"onCompositionStart"!==b?"onCompositionEnd"===b&&Un&&(v=en()):(Xt="value"in(Yt=i)?Yt.value:Yt.textContent,Un=!0)),0<(y=qr(r,b)).length&&(b=new wn(b,e,null,n,i),s.push({event:b,listeners:y}),v?b.data=v:null!==(v=Bn(n))&&(b.data=v))),(v=$n?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(zn=!0,Dn);case"textInput":return(e=t.data)===Dn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!Rn&&Fn(e,t)?(e=en(),Qt=Xt=Yt=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=v))}Dr(s,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Pe(e,n))&&r.unshift(Wr(e,o,i)),null!=(o=Pe(e,t))&&r.push(Wr(e,o,i))),e=e.return}return r}function Jr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Pe(n,o))&&s.unshift(Wr(n,l,a)):i||null!=(l=Pe(n,o))&&s.push(Wr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Gr=/\r\n?/g,Zr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Gr,"\n").replace(Zr,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(o(425))}function Qr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ut(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ut(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,pi="__reactProps$"+di,fi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,yi="__reactHandles$"+di;function vi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function xi(e){return e[pi]||null}var ki=[],Si=-1;function _i(e){return{current:e}}function Ei(e){0>Si||(e.current=ki[Si],ki[Si]=null,Si--)}function Ci(e,t){Si++,ki[Si]=e.current,e.current=t}var Oi={},Ni=_i(Oi),Ti=_i(!1),Ai=Oi;function ji(e,t){var n=e.type.contextTypes;if(!n)return Oi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ii(){Ei(Ti),Ei(Ni)}function Ri(e,t,n){if(Ni.current!==Oi)throw Error(o(168));Ci(Ni,t),Ci(Ti,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,H(e)||"Unknown",i));return L({},n,r)}function $i(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Oi,Ai=Ni.current,Ci(Ni,e),Ci(Ti,Ti.current),!0}function Li(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Mi(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ti),Ei(Ni),Ci(Ni,e)):Ei(Ti),Ci(Ti,n)}var Di=null,zi=!1,Fi=!1;function Bi(e){null===Di?Di=[e]:Di.push(e)}function Ui(){if(!Fi&&null!==Di){Fi=!0;var e=0,t=bt;try{var n=Di;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Di=null,zi=!1}catch(i){throw null!==Di&&(Di=Di.slice(e+1)),Je(Qe,Ui),i}finally{bt=t,Fi=!1}}return null}var Hi=[],Vi=0,Wi=null,qi=0,Ji=[],Ki=0,Gi=null,Zi=1,Yi="";function Xi(e,t){Hi[Vi++]=qi,Hi[Vi++]=Wi,Wi=e,qi=t}function Qi(e,t,n){Ji[Ki++]=Zi,Ji[Ki++]=Yi,Ji[Ki++]=Gi,Gi=e;var r=Zi;e=Yi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Zi=1<<32-st(t)+i|n<<i|r,Yi=o+e}else Zi=1<<o|n<<i|r,Yi=e}function eo(e){null!==e.return&&(Xi(e,1),Qi(e,1,0))}function to(e){for(;e===Wi;)Wi=Hi[--Vi],Hi[Vi]=null,qi=Hi[--Vi],Hi[Vi]=null;for(;e===Gi;)Gi=Ji[--Ki],Ji[Ki]=null,Yi=Ji[--Ki],Ji[Ki]=null,Zi=Ji[--Ki],Ji[Ki]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=jc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Gi?{id:Zi,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=jc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw po(),Error(o(418));for(;t;)so(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function po(){for(var e=ro;e;)e=ci(e.nextSibling)}function fo(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=w.ReactCurrentBatchConfig;function yo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function vo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function wo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ic(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===P&&bo(o)===t.type)?((r=i(t,n.props)).ref=yo(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=yo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Dc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=yo(e,null,t),n.return=e,n;case k:return(t=Dc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Mc(t,e.mode,n,null)).return=e,t;vo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case k:return n.key===i?u(e,t,n,r):null;case P:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:d(e,t,n,r,null);vo(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return d(t,e=e.get(n)||null,r,i,null);vo(t,r)}return null}function m(i,o,a,l){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=p(i,d,a[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),o=s(y,o,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===a.length)return n(i,d),io&&Xi(i,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(o=s(d,o,m),null===u?c=d:u.sibling=d,u=d);return io&&Xi(i,m),c}for(d=r(i,d);m<a.length;m++)null!==(g=f(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),io&&Xi(i,m),c}function g(i,a,l,c){var u=M(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=p(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=s(b,a,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(i,m),io&&Xi(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,c))&&(a=s(v,a,g),null===d?u=v:d.sibling=v,d=v);return io&&Xi(i,g),u}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=f(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach((function(e){return t(i,e)})),io&&Xi(i,g),u}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case x:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===S){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&bo(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=yo(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===S?((o=Mc(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Rc(s.type,s.key,s.props,null,r.mode,l)).ref=yo(r,o,s),l.return=r,r=l)}return a(r);case k:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Dc(s,r.mode,l)).return=r,r=o}return a(r);case P:return e(r,o,(u=s._init)(s._payload),l)}if(te(s))return m(r,o,s,l);if(M(s))return g(r,o,s,l);vo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Lc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var xo=wo(!0),ko=wo(!1),So=_i(null),_o=null,Eo=null,Co=null;function Oo(){Co=Eo=_o=null}function No(e){var t=So.current;Ei(So),e._currentValue=t}function To(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ao(e,t){_o=e,Co=Eo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function jo(e){var t=e._currentValue;if(Co!==e)if(e={context:e,memoizedValue:t,next:null},null===Eo){if(null===_o)throw Error(o(308));Eo=e,_o.dependencies={lanes:0,firstContext:e}}else Eo=Eo.next=e;return t}var Po=null;function Io(e){null===Po?Po=[e]:Po.push(e)}function Ro(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Io(t)):(n.next=i.next,i.next=n),t.interleaved=n,Mo(e,r)}function Mo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var $o=!1;function Lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Do(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Nl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Mo(e,n)}return null===(i=r.interleaved)?(t.next=t,Io(r)):(t.next=i.next,i.next=t),r.interleaved=t,Mo(e,n)}function Bo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Uo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ho(e,t,n,r){var i=e.updateQueue;$o=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(s=0,u=c=l=null,a=o;;){var h=a.lane,p=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=L({},d,h);break e;case 2:$o=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,s|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);$l|=s,e.lanes=s,e.memoizedState=d}}function Vo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Wo={},qo=_i(Wo),Jo=_i(Wo),Ko=_i(Wo);function Go(e){if(e===Wo)throw Error(o(174));return e}function Zo(e,t){switch(Ci(Ko,t),Ci(Jo,e),Ci(qo,Wo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(qo),Ci(qo,t)}function Yo(){Ei(qo),Ei(Jo),Ei(Ko)}function Xo(e){Go(Ko.current);var t=Go(qo.current),n=le(t,e.type);t!==n&&(Ci(Jo,e),Ci(qo,n))}function Qo(e){Jo.current===e&&(Ei(qo),Ei(Jo))}var es=_i(0);function ts(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ns=[];function rs(){for(var e=0;e<ns.length;e++)ns[e]._workInProgressVersionPrimary=null;ns.length=0}var is=w.ReactCurrentDispatcher,os=w.ReactCurrentBatchConfig,ss=0,as=null,ls=null,cs=null,us=!1,ds=!1,hs=0,ps=0;function fs(){throw Error(o(321))}function ms(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function gs(e,t,n,r,i,s){if(ss=s,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,is.current=null===e||null===e.memoizedState?Qs:ea,e=n(r,i),ds){s=0;do{if(ds=!1,hs=0,25<=s)throw Error(o(301));s+=1,cs=ls=null,t.updateQueue=null,is.current=ta,e=n(r,i)}while(ds)}if(is.current=Xs,t=null!==ls&&null!==ls.next,ss=0,cs=ls=as=null,us=!1,t)throw Error(o(300));return e}function ys(){var e=0!==hs;return hs=0,e}function vs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===cs?as.memoizedState=cs=e:cs=cs.next=e,cs}function bs(){if(null===ls){var e=as.alternate;e=null!==e?e.memoizedState:null}else e=ls.next;var t=null===cs?as.memoizedState:cs.next;if(null!==t)cs=t,ls=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ls=e).memoizedState,baseState:ls.baseState,baseQueue:ls.baseQueue,queue:ls.queue,next:null},null===cs?as.memoizedState=cs=e:cs=cs.next=e}return cs}function ws(e,t){return"function"===typeof t?t(e):t}function xs(e){var t=bs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ls,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((ss&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,as.lanes|=d,$l|=d}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,as.lanes|=s,$l|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ks(e){var t=bs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(ba=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ss(){}function _s(e,t){var n=as,r=bs(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,ba=!0),r=r.queue,$s(Os.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==cs&&1&cs.memoizedState.tag){if(n.flags|=2048,js(9,Cs.bind(null,n,r,i,t),void 0,null),null===Tl)throw Error(o(349));0!==(30&ss)||Es(n,t,i)}return i}function Es(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Cs(e,t,n,r){t.value=n,t.getSnapshot=r,Ns(t)&&Ts(e)}function Os(e,t,n){return n((function(){Ns(t)&&Ts(e)}))}function Ns(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Ts(e){var t=Mo(e,1);null!==t&&nc(t,e,1,-1)}function As(e){var t=vs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:e},t.queue=e,e=e.dispatch=Ks.bind(null,as,e),[t.memoizedState,e]}function js(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ps(){return bs().memoizedState}function Is(e,t,n,r){var i=vs();as.flags|=e,i.memoizedState=js(1|t,n,void 0,void 0===r?null:r)}function Rs(e,t,n,r){var i=bs();r=void 0===r?null:r;var o=void 0;if(null!==ls){var s=ls.memoizedState;if(o=s.destroy,null!==r&&ms(r,s.deps))return void(i.memoizedState=js(t,n,o,r))}as.flags|=e,i.memoizedState=js(1|t,n,o,r)}function Ms(e,t){return Is(8390656,8,e,t)}function $s(e,t){return Rs(2048,8,e,t)}function Ls(e,t){return Rs(4,2,e,t)}function Ds(e,t){return Rs(4,4,e,t)}function zs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Fs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Rs(4,4,zs.bind(null,t,e),n)}function Bs(){}function Us(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Hs(e,t){var n=bs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ms(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Vs(e,t,n){return 0===(21&ss)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),as.lanes|=n,$l|=n,e.baseState=!0),t)}function Ws(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=os.transition;os.transition={};try{e(!1),t()}finally{bt=n,os.transition=r}}function qs(){return bs().memoizedState}function Js(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gs(e))Zs(t,n);else if(null!==(n=Ro(e,t,n,r))){nc(n,e,r,ec()),Ys(n,t,r)}}function Ks(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gs(e))Zs(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(i.next=i,Io(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ro(e,t,i,r))&&(nc(n,e,r,i=ec()),Ys(n,t,r))}}function Gs(e){var t=e.alternate;return e===as||null!==t&&t===as}function Zs(e,t){ds=us=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ys(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Xs={readContext:jo,useCallback:fs,useContext:fs,useEffect:fs,useImperativeHandle:fs,useInsertionEffect:fs,useLayoutEffect:fs,useMemo:fs,useReducer:fs,useRef:fs,useState:fs,useDebugValue:fs,useDeferredValue:fs,useTransition:fs,useMutableSource:fs,useSyncExternalStore:fs,useId:fs,unstable_isNewReconciler:!1},Qs={readContext:jo,useCallback:function(e,t){return vs().memoizedState=[e,void 0===t?null:t],e},useContext:jo,useEffect:Ms,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Is(4194308,4,zs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Is(4194308,4,e,t)},useInsertionEffect:function(e,t){return Is(4,2,e,t)},useMemo:function(e,t){var n=vs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vs();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Js.bind(null,as,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vs().memoizedState=e},useState:As,useDebugValue:Bs,useDeferredValue:function(e){return vs().memoizedState=e},useTransition:function(){var e=As(!1),t=e[0];return e=Ws.bind(null,e[1]),vs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=as,i=vs();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Tl)throw Error(o(349));0!==(30&ss)||Es(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Ms(Os.bind(null,r,s,e),[e]),r.flags|=2048,js(9,Cs.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=vs(),t=Tl.identifierPrefix;if(io){var n=Yi;t=":"+t+"R"+(n=(Zi&~(1<<32-st(Zi)-1)).toString(32)+n),0<(n=hs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ps++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:jo,useCallback:Us,useContext:jo,useEffect:$s,useImperativeHandle:Fs,useInsertionEffect:Ls,useLayoutEffect:Ds,useMemo:Hs,useReducer:xs,useRef:Ps,useState:function(){return xs(ws)},useDebugValue:Bs,useDeferredValue:function(e){return Vs(bs(),ls.memoizedState,e)},useTransition:function(){return[xs(ws)[0],bs().memoizedState]},useMutableSource:Ss,useSyncExternalStore:_s,useId:qs,unstable_isNewReconciler:!1},ta={readContext:jo,useCallback:Us,useContext:jo,useEffect:$s,useImperativeHandle:Fs,useInsertionEffect:Ls,useLayoutEffect:Ds,useMemo:Hs,useReducer:ks,useRef:Ps,useState:function(){return ks(ws)},useDebugValue:Bs,useDeferredValue:function(e){var t=bs();return null===ls?t.memoizedState=e:Vs(t,ls.memoizedState,e)},useTransition:function(){return[ks(ws)[0],bs().memoizedState]},useMutableSource:Ss,useSyncExternalStore:_s,useId:qs,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=zo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Fo(e,o,i))&&(nc(t,e,i,r),Bo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=zo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Fo(e,o,i))&&(nc(t,e,i,r),Bo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=zo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Fo(e,i,r))&&(nc(t,e,r,n),Bo(t,e,r))}};function oa(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function sa(e,t,n){var r=!1,i=Oi,o=t.contextType;return"object"===typeof o&&null!==o?o=jo(o):(i=Pi(t)?Ai:Ni.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?ji(e,i):Oi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Lo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=jo(o):(o=Pi(t)?Ai:Ni.current,i.context=ji(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(ra(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),Ho(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ha="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=zo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vl||(Vl=!0,Wl=r),da(0,t)},n}function fa(e,t,n){(n=zo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ha;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=zo(-1,1)).tag=2,Fo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var va=w.ReactCurrentOwner,ba=!1;function wa(e,t,n,r){t.child=null===e?ko(t,null,n,r):xo(t,e.child,n,r)}function xa(e,t,n,r,i){n=n.render;var o=t.ref;return Ao(t,i),r=gs(e,t,n,r,o,i),n=ys(),null===e||ba?(io&&n&&eo(t),t.flags|=1,wa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Va(e,t,i))}function ka(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Pc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Sa(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Va(e,t,i)}return t.flags|=1,(e=Ic(o,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Va(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Ca(e,t,n,r,i)}function _a(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Il,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Il,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ci(Il,Pl),Pl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ci(Il,Pl),Pl|=r;return wa(e,t,i,n),t.child}function Ea(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ca(e,t,n,r,i){var o=Pi(n)?Ai:Ni.current;return o=ji(t,o),Ao(t,i),n=gs(e,t,n,r,o,i),r=ys(),null===e||ba?(io&&r&&eo(t),t.flags|=1,wa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Va(e,t,i))}function Oa(e,t,n,r,i){if(Pi(n)){var o=!0;$i(t)}else o=!1;if(Ao(t,i),null===t.stateNode)Ha(e,t),sa(t,n,r),la(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=jo(c):c=ji(t,c=Pi(n)?Ai:Ni.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&aa(t,s,r,c),$o=!1;var h=t.memoizedState;s.state=h,Ho(t,r,s,i),l=t.memoizedState,a!==r||h!==l||Ti.current||$o?("function"===typeof u&&(ra(t,n,u,r),l=t.memoizedState),(a=$o||oa(t,n,a,r,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Do(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=jo(l):l=ji(t,l=Pi(n)?Ai:Ni.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&aa(t,s,r,l),$o=!1,h=t.memoizedState,s.state=h,Ho(t,r,s,i);var f=t.memoizedState;a!==d||h!==f||Ti.current||$o?("function"===typeof p&&(ra(t,n,p,r),f=t.memoizedState),(c=$o||oa(t,n,c,r,h,f,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Na(e,t,n,r,o,i)}function Na(e,t,n,r,i,o){Ea(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Li(t,n,!1),Va(e,t,o);r=t.stateNode,va.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=xo(t,e.child,null,o),t.child=xo(t,null,a,o)):wa(e,t,a,o),t.memoizedState=r.state,i&&Li(t,n,!0),t.child}function Ta(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),Zo(e,t.containerInfo)}function Aa(e,t,n,r,i){return fo(),mo(i),t.flags|=256,wa(e,t,n,r),t.child}var ja,Pa,Ia,Ra,Ma={dehydrated:null,treeContext:null,retryLane:0};function $a(e){return{baseLanes:e,cachePool:null,transitions:null}}function La(e,t,n){var r,i=t.pendingProps,s=es.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ci(es,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=$c(l,i,0,null),e=Mc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=$a(n),t.memoizedState=Ma,e):Da(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,za(e,t,a,r=ua(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=$c({mode:"visible",children:r.children},i,0,null),(s=Mc(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&xo(t,e.child,null,a),t.child.memoizedState=$a(a),t.memoizedState=Ma,s);if(0===(1&t.mode))return za(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,za(e,t,a,r=ua(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Tl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Mo(e,i),nc(r,e,i,-1))}return mc(),za(e,t,a,r=ua(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Oc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Ji[Ki++]=Zi,Ji[Ki++]=Yi,Ji[Ki++]=Gi,Zi=e.id,Yi=e.overflow,Gi=t),t=Da(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Ic(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Ic(r,a):(a=Mc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?$a(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Ic(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Da(e,t){return(t=$c({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function za(e,t,n,r){return null!==r&&mo(r),xo(t,e.child,null,n),(e=Da(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fa(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),To(e.return,t,n)}function Ba(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ua(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(wa(e,t,r.children,n),0!==(2&(r=es.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fa(e,n,t);else if(19===e.tag)Fa(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(es,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ts(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ba(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ts(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ba(t,!0,n,null,o);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Va(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),$l|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ic(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ic(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Wa(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ja(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qa(t),null;case 1:case 17:return Pi(t.type)&&Ii(),qa(t),null;case 3:return r=t.stateNode,Yo(),Ei(Ti),Ei(Ni),rs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(sc(oo),oo=null))),Pa(e,t),qa(t),null;case 5:Qo(t);var i=Go(Ko.current);if(n=t.type,null!==e&&null!=t.stateNode)Ia(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return qa(t),null}if(e=Go(qo.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[hi]=t,r[pi]=s,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)zr(Mr[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":Z(r,s),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},zr("invalid",r);break;case"textarea":ie(r,s),zr("invalid",r)}for(var l in ve(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":q(r),Q(r,s,!0);break;case"textarea":q(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Qr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[pi]=r,ja(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),i=r;break;case"iframe":case"object":case"embed":zr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)zr(Mr[i],e);i=r;break;case"source":zr("error",e),i=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),i=r;break;case"details":zr("toggle",e),i=r;break;case"input":Z(e,r),i=G(e,r),zr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=L({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),zr("invalid",e)}for(s in ve(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&zr("scroll",e):null!=u&&b(e,s,u,l))}switch(n){case"input":q(e),Q(e,r,!1);break;case"textarea":q(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qa(t),null;case 6:if(e&&null!=t.stateNode)Ra(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Go(Ko.current),Go(qo.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return qa(t),null;case 13:if(Ei(es),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[hi]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qa(t),s=!1}else null!==oo&&(sc(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&es.current)?0===Rl&&(Rl=3):mc())),null!==t.updateQueue&&(t.flags|=4),qa(t),null);case 4:return Yo(),Pa(e,t),null===e&&Ur(t.stateNode.containerInfo),qa(t),null;case 10:return No(t.type._context),qa(t),null;case 19:if(Ei(es),null===(s=t.memoizedState))return qa(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Wa(s,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ts(e))){for(t.flags|=128,Wa(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(es,1&es.current|2),t.child}e=e.sibling}null!==s.tail&&Ye()>Ul&&(t.flags|=128,r=!0,Wa(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ts(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Wa(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return qa(t),null}else 2*Ye()-s.renderingStartTime>Ul&&1073741824!==n&&(t.flags|=128,r=!0,Wa(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ye(),t.sibling=null,n=es.current,Ci(es,r?1&n|2:1&n),t):(qa(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(qa(t),6&t.subtreeFlags&&(t.flags|=8192)):qa(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ka(e,t){switch(to(t),t.tag){case 1:return Pi(t.type)&&Ii(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Yo(),Ei(Ti),Ei(Ni),rs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qo(t),null;case 13:if(Ei(es),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(es),null;case 4:return Yo(),null;case 10:return No(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}ja=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Pa=function(){},Ia=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Go(qo.current);var o,s=null;switch(n){case"input":i=G(e,i),r=G(e,r),s=[];break;case"select":i=L({},i,{value:void 0}),r=L({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Qr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Ra=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ga=!1,Za=!1,Ya="function"===typeof WeakSet?WeakSet:Set,Xa=null;function Qa(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){_c(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){_c(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,n,o)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Qr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Za||Qa(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Ut(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Za&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&el(n,t,s),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Za&&(Qa(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){_c(n,t,a)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Za=(r=Za)||null!==n.memoizedState,hl(e,t,n),Za=r):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ya),t.forEach((function(t){var r=Nc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));pl(s,a,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){_c(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){_c(e,e.return,g)}try{nl(5,e,e.return)}catch(g){_c(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&Qa(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&Qa(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){_c(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Y(i,s),be(l,a);var u=be(l,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":X(i,s);break;case"textarea":oe(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ne(i,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[pi]=s}catch(g){_c(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){_c(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(g){_c(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Bl=Ye())),4&r&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Za=(u=Za)||d,ml(t,e),Za=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xa=e,d=e.child;null!==d;){for(h=Xa=d;null!==Xa;){switch(f=(p=Xa).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Qa(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){_c(r,n,g)}}break;case 5:Qa(p,p.return);break;case 22:if(null!==p.memoizedState){xl(h);continue}}null!==f?(f.return=p,Xa=f):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){_c(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){_c(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),yl(e),4&r&&fl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;ll(e,al(e),s);break;default:throw Error(o(161))}}catch(a){_c(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Xa=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Xa;){var i=Xa,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Ga;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Za;a=Ga;var c=Za;if(Ga=s,(Za=l)&&!c)for(Xa=i;null!==Xa;)l=(s=Xa).child,22===s.tag&&null!==s.memoizedState?kl(i):null!==l?(l.return=s,Xa=l):kl(i);for(;null!==o;)Xa=o,bl(o,t,n),o=o.sibling;Xa=i,Ga=a,Za=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Xa=o):wl(e)}}function wl(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Za||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Za)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Vo(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Ut(h)}}}break;default:throw Error(o(163))}Za||512&t.flags&&il(t)}catch(p){_c(t,t.return,p)}}if(t===e){Xa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xa=n;break}Xa=t.return}}function xl(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xa=n;break}Xa=t.return}}function kl(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){_c(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){_c(t,i,l)}}var o=t.return;try{il(t)}catch(l){_c(t,o,l)}break;case 5:var s=t.return;try{il(t)}catch(l){_c(t,s,l)}}}catch(l){_c(t,t.return,l)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var Sl,_l=Math.ceil,El=w.ReactCurrentDispatcher,Cl=w.ReactCurrentOwner,Ol=w.ReactCurrentBatchConfig,Nl=0,Tl=null,Al=null,jl=0,Pl=0,Il=_i(0),Rl=0,Ml=null,$l=0,Ll=0,Dl=0,zl=null,Fl=null,Bl=0,Ul=1/0,Hl=null,Vl=!1,Wl=null,ql=null,Jl=!1,Kl=null,Gl=0,Zl=0,Yl=null,Xl=-1,Ql=0;function ec(){return 0!==(6&Nl)?Ye():-1!==Xl?Xl:Xl=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Nl)&&0!==jl?jl&-jl:null!==go.transition?(0===Ql&&(Ql=mt()),Ql):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function nc(e,t,n,r){if(50<Zl)throw Zl=0,Yl=null,Error(o(185));yt(e,n,r),0!==(2&Nl)&&e===Tl||(e===Tl&&(0===(2&Nl)&&(Ll|=n),4===Rl&&ac(e,jl)),rc(e,r),1===n&&0===Nl&&0===(1&t.mode)&&(Ul=Ye()+500,zi&&Ui()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=pt(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=ht(e,e===Tl?jl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){zi=!0,Bi(e)}(lc.bind(null,e)):Bi(lc.bind(null,e)),si((function(){0===(6&Nl)&&Ui()})),n=null;else{switch(wt(r)){case 1:n=Qe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Tc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xl=-1,Ql=0,0!==(6&Nl))throw Error(o(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=ht(e,e===Tl?jl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Nl;Nl|=2;var s=fc();for(Tl===e&&jl===t||(Hl=null,Ul=Ye()+500,hc(e,t));;)try{vc();break}catch(l){pc(e,l)}Oo(),El.current=s,Nl=i,null!==Al?t=0:(Tl=null,jl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ml,hc(e,0),ac(e,r),rc(e,Ye()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(s=ft(e))&&(r=s,t=oc(e,s))),1===t))throw n=Ml,hc(e,0),ac(e,r),rc(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:xc(e,Fl,Hl);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Bl+500-Ye())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Fl,Hl),t);break}xc(e,Fl,Hl);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_l(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Fl,Hl),r);break}xc(e,Fl,Hl);break;default:throw Error(o(329))}}}return rc(e,Ye()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Fl,Fl=n,null!==t&&sc(t)),e}function sc(e){null===Fl?Fl=e:Fl.push.apply(Fl,e)}function ac(e,t){for(t&=~Dl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Nl))throw Error(o(327));kc();var t=ht(e,0);if(0===(1&t))return rc(e,Ye()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ml,hc(e,0),ac(e,t),rc(e,Ye()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Fl,Hl),rc(e,Ye()),null}function cc(e,t){var n=Nl;Nl|=1;try{return e(t)}finally{0===(Nl=n)&&(Ul=Ye()+500,zi&&Ui())}}function uc(e){null!==Kl&&0===Kl.tag&&0===(6&Nl)&&kc();var t=Nl;Nl|=1;var n=Ol.transition,r=bt;try{if(Ol.transition=null,bt=1,e)return e()}finally{bt=r,Ol.transition=n,0===(6&(Nl=t))&&Ui()}}function dc(){Pl=Il.current,Ei(Il)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Al)for(n=Al.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ii();break;case 3:Yo(),Ei(Ti),Ei(Ni),rs();break;case 5:Qo(r);break;case 4:Yo();break;case 13:case 19:Ei(es);break;case 10:No(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Tl=e,Al=e=Ic(e.current,null),jl=Pl=t,Rl=0,Ml=null,Dl=Ll=$l=0,Fl=zl=null,null!==Po){for(t=0;t<Po.length;t++)if(null!==(r=(n=Po[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Po=null}return e}function pc(e,t){for(;;){var n=Al;try{if(Oo(),is.current=Xs,us){for(var r=as.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}us=!1}if(ss=0,cs=ls=as=null,ds=!1,hs=0,Cl.current=null,null===n||null===n.return){Rl=1,Ml=t,Al=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=jl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=ga(a);if(null!==f){f.flags&=-257,ya(f,a,l,0,t),1&f.mode&&ma(s,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ma(s,u,t),mc();break e}c=Error(o(426))}else if(io&&1&l.mode){var y=ga(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,t),mo(ca(c,l));break e}}s=c=ca(c,l),4!==Rl&&(Rl=2),null===zl?zl=[s]:zl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Uo(s,pa(0,c,t));break e;case 1:l=c;var v=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ql||!ql.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Uo(s,fa(s,l,t));break e}}s=s.return}while(null!==s)}wc(n)}catch(w){t=w,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function fc(){var e=El.current;return El.current=Xs,null===e?Xs:e}function mc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Tl||0===(268435455&$l)&&0===(268435455&Ll)||ac(Tl,jl)}function gc(e,t){var n=Nl;Nl|=2;var r=fc();for(Tl===e&&jl===t||(Hl=null,hc(e,t));;)try{yc();break}catch(i){pc(e,i)}if(Oo(),Nl=n,El.current=r,null!==Al)throw Error(o(261));return Tl=null,jl=0,Rl}function yc(){for(;null!==Al;)bc(Al)}function vc(){for(;null!==Al&&!Ge();)bc(Al)}function bc(e){var t=Sl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?wc(e):Al=t,Cl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ja(n,t,Pl)))return void(Al=n)}else{if(null!==(n=Ka(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Rl=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Rl&&(Rl=5)}function xc(e,t,n){var r=bt,i=Ol.transition;try{Ol.transition=null,bt=1,function(e,t,n,r){do{kc()}while(null!==Kl);if(0!==(6&Nl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Tl&&(Al=Tl=null,jl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Jl||(Jl=!0,Tc(tt,(function(){return kc(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Ol.transition,Ol.transition=null;var a=bt;bt=1;var l=Nl;Nl|=4,Cl.current=null,function(e,t){if(ei=Vt,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(x){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===i&&(l=a),p===s&&++d===r&&(c=a),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Vt=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(x){_c(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}m=tl,tl=!1}(e,n),gl(n,e),fr(ti),Vt=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Ze(),Nl=l,bt=a,Ol.transition=s}else e.current=n;if(Jl&&(Jl=!1,Kl=e,Gl=i),s=e.pendingLanes,0===s&&(ql=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Vl)throw Vl=!1,e=Wl,Wl=null,e;0!==(1&Gl)&&0!==e.tag&&kc(),s=e.pendingLanes,0!==(1&s)?e===Yl?Zl++:(Zl=0,Yl=e):Zl=0,Ui()}(e,t,n,r)}finally{Ol.transition=i,bt=r}return null}function kc(){if(null!==Kl){var e=wt(Gl),t=Ol.transition,n=bt;try{if(Ol.transition=null,bt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Gl=0,0!==(6&Nl))throw Error(o(331));var i=Nl;for(Nl|=4,Xa=e.current;null!==Xa;){var s=Xa,a=s.child;if(0!==(16&Xa.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Xa=u;null!==Xa;){var d=Xa;switch(d.tag){case 0:case 11:case 15:nl(8,d,s)}var h=d.child;if(null!==h)h.return=d,Xa=h;else for(;null!==Xa;){var p=(d=Xa).sibling,f=d.return;if(ol(d),d===u){Xa=null;break}if(null!==p){p.return=f,Xa=p;break}Xa=f}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Xa=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(s=Xa).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,Xa=v;break e}Xa=s.return}}var b=e.current;for(Xa=b;null!==Xa;){var w=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Xa=w;else e:for(a=b;null!==Xa;){if(0!==(2048&(l=Xa).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(k){_c(l,l.return,k)}if(l===a){Xa=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Xa=x;break e}Xa=l.return}}if(Nl=i,Ui(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(k){}r=!0}return r}finally{bt=n,Ol.transition=t}}return!1}function Sc(e,t,n){e=Fo(e,t=pa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function _c(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ql||!ql.has(r))){t=Fo(t,e=fa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(jl&n)===n&&(4===Rl||3===Rl&&(130023424&jl)===jl&&500>Ye()-Bl?hc(e,0):Dl|=n),rc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Mo(e,t))&&(yt(e,t,n),rc(e,n))}function Oc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Nc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Cc(e,n)}function Tc(e,t){return Je(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jc(e,t,n,r){return new Ac(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ic(e,t){var n=e.alternate;return null===n?((n=jc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Pc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Mc(n.children,i,s,t);case _:a=8,i|=8;break;case E:return(e=jc(12,n,t,2|i)).elementType=E,e.lanes=s,e;case T:return(e=jc(13,n,t,i)).elementType=T,e.lanes=s,e;case A:return(e=jc(19,n,t,i)).elementType=A,e.lanes=s,e;case I:return $c(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case O:a=9;break e;case N:a=11;break e;case j:a=14;break e;case P:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=jc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Mc(e,t,n,r){return(e=jc(7,e,r,t)).lanes=n,e}function $c(e,t,n,r){return(e=jc(22,e,r,t)).elementType=I,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=jc(6,e,null,t)).lanes=n,e}function Dc(e,t,n){return(t=jc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fc(e,t,n,r,i,o,s,a,l){return e=new zc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=jc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lo(o),e}function Bc(e){if(!e)return Oi;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Mi(e,n,t)}return t}function Uc(e,t,n,r,i,o,s,a,l){return(e=Fc(n,r,!0,e,0,o,0,a,l)).context=Bc(null),n=e.current,(o=zo(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Fo(n,o,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Hc(e,t,n,r){var i=t.current,o=ec(),s=tc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=zo(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Fo(i,t,s))&&(nc(e,i,s,o),Bo(e,i,s)),s}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Wc(e,t),(e=e.alternate)&&Wc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ti.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Ta(t),fo();break;case 5:Xo(t);break;case 1:Pi(t.type)&&$i(t);break;case 4:Zo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(So,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(es,1&es.current),t.flags|=128,null):0!==(n&t.child.childLanes)?La(e,t,n):(Ci(es,1&es.current),null!==(e=Va(e,t,n))?e.sibling:null);Ci(es,1&es.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ua(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(es,es.current),r)break;return null;case 22:case 23:return t.lanes=0,_a(e,t,n)}return Va(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,io&&0!==(1048576&t.flags)&&Qi(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ha(e,t),e=t.pendingProps;var i=ji(t,Ni.current);Ao(t,n),i=gs(null,t,r,e,i,n);var s=ys();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(s=!0,$i(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Lo(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,r,e,n),t=Na(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),wa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ha(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===j)return 14}return 2}(r),e=na(r,e),i){case 0:t=Ca(null,t,r,e,n);break e;case 1:t=Oa(null,t,r,e,n);break e;case 11:t=xa(null,t,r,e,n);break e;case 14:t=ka(null,t,r,na(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:na(r,i),n);case 1:return r=t.type,i=t.pendingProps,Oa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 3:e:{if(Ta(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Do(e,t),Ho(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Aa(e,t,r,n,i=ca(Error(o(423)),t));break e}if(r!==i){t=Aa(e,t,r,n,i=ca(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=ko(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),r===i){t=Va(e,t,n);break e}wa(e,t,r,n)}t=t.child}return t;case 5:return Xo(t),null===e&&co(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Ea(e,t),wa(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return La(e,t,n);case 4:return Zo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xo(t,null,r,n):wa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:na(r,i),n);case 7:return wa(e,t,t.pendingProps,n),t.child;case 8:case 12:return wa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ci(So,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Ti.current){t=Va(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=zo(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),To(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),To(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}wa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ao(t,n),r=r(i=jo(i)),t.flags|=1,wa(e,t,r,n),t.child;case 14:return i=na(r=t.type,t.pendingProps),ka(e,t,r,i=na(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:na(r,i),Ha(e,t),t.tag=1,Pi(r)?(e=!0,$i(t)):e=!1,Ao(t,n),sa(t,r,i),la(t,r,i,n),Na(null,t,r,!0,e,n);case 19:return Ua(e,t,n);case 22:return _a(e,t,n)}throw Error(o(156,t.tag))};var Jc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Gc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Qc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Vc(s);a.call(e)}}Hc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Vc(s);o.call(e)}}var s=Uc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=s,e[fi]=s.current,Ur(8===e.nodeType?e.parentNode:e),uc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Vc(l);a.call(e)}}var l=Fc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[fi]=l.current,Ur(8===e.nodeType?e.parentNode:e),uc((function(){Hc(t,l,n,r)})),l}(n,t,e,i,r);return Vc(s)}Gc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Hc(e,t,null,null)},Gc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Hc(null,e,null,null)})),t[fi]=null}},Gc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<It.length&&0!==t&&t<It[n].priority;n++);It.splice(n,0,e),0===n&&Lt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,Ye()),0===(6&Nl)&&(Ul=Ye()+500,Ui()))}break;case 13:uc((function(){var t=Mo(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),qc(e,1)}},kt=function(e){if(13===e.tag){var t=Mo(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Mo(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},_t=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},ke=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(o(90));J(r),X(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ne=cc,Te=uc;var eu={usingClientEntryPoint:!1,Events:[bi,wi,xi,Ce,Oe,cc]},tu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(o(299));var n=!1,r="",i=Jc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Fc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Ur(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(o(200));return Qc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Jc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Uc(t,null,e,1,null!=n?n:null,i,0,s,a),e[fi]=t.current,Ur(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Gc(t)},t.render=function(e,t,n){if(!Yc(t))throw Error(o(200));return Qc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc((function(){Qc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Qc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8136:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return u.default}}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(5043)),i=h(n(5173)),o=h(n(7950)),s=h(n(7989)),a=n(1212),l=n(1777),c=n(2447),u=h(n(935)),d=h(n(5387));function h(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g extends r.Component{static getDerivedStateFromProps(e,t){let{position:n}=e,{prevPropsPosition:r}=t;return!n||r&&n.x===r.x&&n.y===r.y?null:((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:r}),{x:n.x,y:n.y,prevPropsPosition:{...n}})}constructor(e){super(e),m(this,"onDragStart",((e,t)=>{(0,d.default)("Draggable: onDragStart: %j",t);if(!1===this.props.onStart(e,(0,l.createDraggableData)(this,t)))return!1;this.setState({dragging:!0,dragged:!0})})),m(this,"onDrag",((e,t)=>{if(!this.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",t);const n=(0,l.createDraggableData)(this,t),r={x:n.x,y:n.y,slackX:0,slackY:0};if(this.props.bounds){const{x:e,y:t}=r;r.x+=this.state.slackX,r.y+=this.state.slackY;const[i,o]=(0,l.getBoundPosition)(this,r.x,r.y);r.x=i,r.y=o,r.slackX=this.state.slackX+(e-r.x),r.slackY=this.state.slackY+(t-r.y),n.x=r.x,n.y=r.y,n.deltaX=r.x-this.state.x,n.deltaY=r.y-this.state.y}if(!1===this.props.onDrag(e,n))return!1;this.setState(r)})),m(this,"onDragStop",((e,t)=>{if(!this.state.dragging)return!1;if(!1===this.props.onStop(e,(0,l.createDraggableData)(this,t)))return!1;(0,d.default)("Draggable: onDragStop: %j",t);const n={dragging:!1,slackX:0,slackY:0};if(Boolean(this.props.position)){const{x:e,y:t}=this.props.position;n.x=e,n.y=t}this.setState(n)})),this.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:{...e.position},slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){"undefined"!==typeof window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var e,t;return null!==(e=null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current)&&void 0!==e?e:o.default.findDOMNode(this)}render(){const{axis:e,bounds:t,children:n,defaultPosition:i,defaultClassName:o,defaultClassNameDragging:c,defaultClassNameDragged:d,position:h,positionOffset:p,scale:m,...g}=this.props;let y={},v=null;const b=!Boolean(h)||this.state.dragging,w=h||i,x={x:(0,l.canDragX)(this)&&b?this.state.x:w.x,y:(0,l.canDragY)(this)&&b?this.state.y:w.y};this.state.isElementSVG?v=(0,a.createSVGTransform)(x,p):y=(0,a.createCSSTransform)(x,p);const k=(0,s.default)(n.props.className||"",o,{[c]:this.state.dragging,[d]:this.state.dragged});return r.createElement(u.default,f({},g,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),r.cloneElement(r.Children.only(n),{className:k,style:{...n.props.style,...y},transform:v}))}}t.default=g,m(g,"displayName","Draggable"),m(g,"propTypes",{...u.default.propTypes,axis:i.default.oneOf(["both","x","y","none"]),bounds:i.default.oneOfType([i.default.shape({left:i.default.number,right:i.default.number,top:i.default.number,bottom:i.default.number}),i.default.string,i.default.oneOf([!1])]),defaultClassName:i.default.string,defaultClassNameDragging:i.default.string,defaultClassNameDragged:i.default.string,defaultPosition:i.default.shape({x:i.default.number,y:i.default.number}),positionOffset:i.default.shape({x:i.default.oneOfType([i.default.number,i.default.string]),y:i.default.oneOfType([i.default.number,i.default.string])}),position:i.default.shape({x:i.default.number,y:i.default.number}),className:c.dontSetMe,style:c.dontSetMe,transform:c.dontSetMe}),m(g,"defaultProps",{...u.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})},935:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(n(5043)),i=u(n(5173)),o=u(n(7950)),s=n(1212),a=n(1777),l=n(2447),c=u(n(5387));function u(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function h(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p={start:"touchstart",move:"touchmove",stop:"touchend"},f={start:"mousedown",move:"mousemove",stop:"mouseup"};let m=f;class g extends r.Component{constructor(){super(...arguments),h(this,"dragging",!1),h(this,"lastX",NaN),h(this,"lastY",NaN),h(this,"touchIdentifier",null),h(this,"mounted",!1),h(this,"handleDragStart",(e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&"number"===typeof e.button&&0!==e.button)return!1;const t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:n}=t;if(this.props.disabled||!(e.target instanceof n.defaultView.Node)||this.props.handle&&!(0,s.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,s.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;"touchstart"===e.type&&e.preventDefault();const r=(0,s.getTouchIdentifier)(e);this.touchIdentifier=r;const i=(0,a.getControlPosition)(e,r,this);if(null==i)return;const{x:o,y:l}=i,u=(0,a.createCoreData)(this,o,l);(0,c.default)("DraggableCore: handleDragStart: %j",u),(0,c.default)("calling",this.props.onStart);!1!==this.props.onStart(e,u)&&!1!==this.mounted&&(this.props.enableUserSelectHack&&(0,s.addUserSelectStyles)(n),this.dragging=!0,this.lastX=o,this.lastY=l,(0,s.addEvent)(n,m.move,this.handleDrag),(0,s.addEvent)(n,m.stop,this.handleDragStop))})),h(this,"handleDrag",(e=>{const t=(0,a.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:n,y:r}=t;if(Array.isArray(this.props.grid)){let e=n-this.lastX,t=r-this.lastY;if([e,t]=(0,a.snapToGrid)(this.props.grid,e,t),!e&&!t)return;n=this.lastX+e,r=this.lastY+t}const i=(0,a.createCoreData)(this,n,r);(0,c.default)("DraggableCore: handleDrag: %j",i);if(!1!==this.props.onDrag(e,i)&&!1!==this.mounted)this.lastX=n,this.lastY=r;else try{this.handleDragStop(new MouseEvent("mouseup"))}catch(o){const e=document.createEvent("MouseEvents");e.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(e)}})),h(this,"handleDragStop",(e=>{if(!this.dragging)return;const t=(0,a.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:n,y:r}=t;if(Array.isArray(this.props.grid)){let e=n-this.lastX||0,t=r-this.lastY||0;[e,t]=(0,a.snapToGrid)(this.props.grid,e,t),n=this.lastX+e,r=this.lastY+t}const i=(0,a.createCoreData)(this,n,r);if(!1===this.props.onStop(e,i)||!1===this.mounted)return!1;const o=this.findDOMNode();o&&this.props.enableUserSelectHack&&(0,s.removeUserSelectStyles)(o.ownerDocument),(0,c.default)("DraggableCore: handleDragStop: %j",i),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,o&&((0,c.default)("DraggableCore: Removing handlers"),(0,s.removeEvent)(o.ownerDocument,m.move,this.handleDrag),(0,s.removeEvent)(o.ownerDocument,m.stop,this.handleDragStop))})),h(this,"onMouseDown",(e=>(m=f,this.handleDragStart(e)))),h(this,"onMouseUp",(e=>(m=f,this.handleDragStop(e)))),h(this,"onTouchStart",(e=>(m=p,this.handleDragStart(e)))),h(this,"onTouchEnd",(e=>(m=p,this.handleDragStop(e))))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,s.addEvent)(e,p.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:t}=e;(0,s.removeEvent)(t,f.move,this.handleDrag),(0,s.removeEvent)(t,p.move,this.handleDrag),(0,s.removeEvent)(t,f.stop,this.handleDragStop),(0,s.removeEvent)(t,p.stop,this.handleDragStop),(0,s.removeEvent)(e,p.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,s.removeUserSelectStyles)(t)}}findDOMNode(){var e,t;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current:o.default.findDOMNode(this)}render(){return r.cloneElement(r.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}t.default=g,h(g,"displayName","DraggableCore"),h(g,"propTypes",{allowAnyClick:i.default.bool,children:i.default.node.isRequired,disabled:i.default.bool,enableUserSelectHack:i.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:i.default.arrayOf(i.default.number),handle:i.default.string,cancel:i.default.string,nodeRef:i.default.object,onStart:i.default.func,onDrag:i.default.func,onStop:i.default.func,onMouseDown:i.default.func,scale:i.default.number,className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),h(g,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},1929:(e,t,n)=>{"use strict";const{default:r,DraggableCore:i}=n(8136);e.exports=r,e.exports.default=r,e.exports.DraggableCore=i},1212:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addClassName=c,t.addEvent=function(e,t,n,r){if(!e)return;const i={capture:!0,...r};e.addEventListener?e.addEventListener(t,n,i):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},t.addUserSelectStyles=function(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t));e.body&&c(e.body,"react-draggable-transparent-selection")},t.createCSSTransform=function(e,t){const n=l(e,t,"px");return{[(0,i.browserPrefixToKey)("transform",i.default)]:n}},t.createSVGTransform=function(e,t){return l(e,t,"")},t.getTouch=function(e,t){return e.targetTouches&&(0,r.findInArray)(e.targetTouches,(e=>t===e.identifier))||e.changedTouches&&(0,r.findInArray)(e.changedTouches,(e=>t===e.identifier))},t.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},t.getTranslation=l,t.innerHeight=function(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,r.int)(n.paddingTop),t-=(0,r.int)(n.paddingBottom),t},t.innerWidth=function(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,r.int)(n.paddingLeft),t-=(0,r.int)(n.paddingRight),t},t.matchesSelector=a,t.matchesSelectorAndParentsTo=function(e,t,n){let r=e;do{if(a(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1},t.offsetXYFromParent=function(e,t,n){const r=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),i=(e.clientX+t.scrollLeft-r.left)/n,o=(e.clientY+t.scrollTop-r.top)/n;return{x:i,y:o}},t.outerHeight=function(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,r.int)(n.borderTopWidth),t+=(0,r.int)(n.borderBottomWidth),t},t.outerWidth=function(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,r.int)(n.borderLeftWidth),t+=(0,r.int)(n.borderRightWidth),t},t.removeClassName=u,t.removeEvent=function(e,t,n,r){if(!e)return;const i={capture:!0,...r};e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},t.removeUserSelectStyles=function(e){if(!e)return;try{if(e.body&&u(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(t){}};var r=n(2447),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=i?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(r,s,a):r[s]=e[s]}r.default=e,n&&n.set(e,r);return r}(n(1561));function o(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}let s="";function a(e,t){return s||(s=(0,r.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,r.isFunction)(e[t])}))),!!(0,r.isFunction)(e[s])&&e[s](t)}function l(e,t,n){let{x:r,y:i}=e,o="translate(".concat(r).concat(n,",").concat(i).concat(n,")");if(t){const e="".concat("string"===typeof t.x?t.x:t.x+n),r="".concat("string"===typeof t.y?t.y:t.y+n);o="translate(".concat(e,", ").concat(r,")")+o}return o}function c(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function u(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}},1561:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserPrefixToKey=i,t.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},t.default=void 0,t.getPrefix=r;const n=["Moz","Webkit","O","ms"];function r(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"===typeof window)return"";const r=null===(e=window.document)||void 0===e||null===(e=e.documentElement)||void 0===e?void 0:e.style;if(!r)return"";if(t in r)return"";for(let o=0;o<n.length;o++)if(i(t,n[o])in r)return n[o];return""}function i(e,t){return t?"".concat(t).concat(function(e){let t="",n=!0;for(let r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):"-"===e[r]?n=!0:t+=e[r];return t}(e)):e}t.default=r()},5387:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){0}},1777:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},t.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},t.createCoreData=function(e,t,n){const i=!(0,r.isNum)(e.lastX),s=o(e);return i?{node:s,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:s,deltaX:t-e.lastX,deltaY:n-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:n}},t.createDraggableData=function(e,t){const n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}},t.getBoundPosition=function(e,t,n){if(!e.props.bounds)return[t,n];let{bounds:s}=e.props;s="string"===typeof s?s:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(s);const a=o(e);if("string"===typeof s){const{ownerDocument:e}=a,t=e.defaultView;let n;if(n="parent"===s?a.parentNode:e.querySelector(s),!(n instanceof t.HTMLElement))throw new Error('Bounds selector "'+s+'" could not find an element.');const o=n,l=t.getComputedStyle(a),c=t.getComputedStyle(o);s={left:-a.offsetLeft+(0,r.int)(c.paddingLeft)+(0,r.int)(l.marginLeft),top:-a.offsetTop+(0,r.int)(c.paddingTop)+(0,r.int)(l.marginTop),right:(0,i.innerWidth)(o)-(0,i.outerWidth)(a)-a.offsetLeft+(0,r.int)(c.paddingRight)-(0,r.int)(l.marginRight),bottom:(0,i.innerHeight)(o)-(0,i.outerHeight)(a)-a.offsetTop+(0,r.int)(c.paddingBottom)-(0,r.int)(l.marginBottom)}}(0,r.isNum)(s.right)&&(t=Math.min(t,s.right));(0,r.isNum)(s.bottom)&&(n=Math.min(n,s.bottom));(0,r.isNum)(s.left)&&(t=Math.max(t,s.left));(0,r.isNum)(s.top)&&(n=Math.max(n,s.top));return[t,n]},t.getControlPosition=function(e,t,n){const r="number"===typeof t?(0,i.getTouch)(e,t):null;if("number"===typeof t&&!r)return null;const s=o(n),a=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,i.offsetXYFromParent)(r||e,a,n.props.scale)},t.snapToGrid=function(e,t,n){const r=Math.round(t/e[0])*e[0],i=Math.round(n/e[1])*e[1];return[r,i]};var r=n(2447),i=n(1212);function o(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}},2447:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dontSetMe=function(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))},t.findInArray=function(e,t){for(let n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]},t.int=function(e){return parseInt(e,10)},t.isFunction=function(e){return"function"===typeof e||"[object Function]"===Object.prototype.toString.call(e)},t.isNum=function(e){return"number"===typeof e&&!isNaN(e)}},7989:(e,t,n)=>{"use strict";function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function i(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}n.r(t),n.d(t,{clsx:()=>i,default:()=>o});const o=i},1153:(e,t,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)k.call(t,i)&&!_.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:S.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var O=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+N(l,0):o,x(s)?(i="",null!=e&&(i=e.replace(O,"$&/")+"/"),T(s,t,i,"",(function(e){return e}))):null!=s&&(C(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(O,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",x(e))for(var c=0;c<e.length;c++){var u=o+N(a=e[c],c);l+=T(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=T(a=a.value,t,i,u=o+N(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function j(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},I={transition:null},R={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:I,ReactCurrentOwner:S};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=M,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)k.call(t,c)&&!_.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.3.1"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},302:(e,t,n)=>{e.exports=n(3944)},3944:(e,t,n)=>{var r=n(5790);t.operation=function(e){var n=t.timeouts(e);return new r(n,{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})},t.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var n in e)t[n]=e[n];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var r=[],i=0;i<t.retries;i++)r.push(this.createTimeout(i,t));return e&&e.forever&&!r.length&&r.push(this.createTimeout(i,t)),r.sort((function(e,t){return e-t})),r},t.createTimeout=function(e,t){var n=t.randomize?Math.random()+1:1,r=Math.round(n*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return r=Math.min(r,t.maxTimeout)},t.wrap=function(e,n,r){if(n instanceof Array&&(r=n,n=null),!r)for(var i in r=[],e)"function"===typeof e[i]&&r.push(i);for(var o=0;o<r.length;o++){var s=r[o],a=e[s];e[s]=function(r){var i=t.operation(n),o=Array.prototype.slice.call(arguments,1),s=o.pop();o.push((function(e){i.retry(e)||(e&&(arguments[0]=i.mainError()),s.apply(this,arguments))})),i.attempt((function(){r.apply(e,o)}))}.bind(e,a),e[s].options=n}}},5790:e=>{function t(e,t){"boolean"===typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}e.exports=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var n=this._timeouts.shift();if(void 0===n){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1)}var r=this;return this._timer=setTimeout((function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout((function(){r._operationTimeoutCb(r._attempts)}),r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)}),n),this._options.unref&&this._timer.unref(),!0},t.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout((function(){n._operationTimeoutCb()}),n._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,n=0,r=0;r<this._errors.length;r++){var i=this._errors[r],o=i.message,s=(e[o]||0)+1;e[o]=s,s>=n&&(t=i,n=s)}return t}},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,I(k);else{var t=r(u);null!==t&&R(x,t.startTime-e)}}function k(e,n){m=!1,g&&(g=!1,v(C),C=-1),f=!0;var o=p;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!T());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&R(x,d.startTime-n),l=!1}return l}finally{h=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,_=!1,E=null,C=-1,O=5,N=-1;function T(){return!(t.unstable_now()-N<O)}function A(){if(null!==E){var e=t.unstable_now();N=e;var n=!0;try{n=E(!0,e)}finally{n?S():(_=!1,E=null)}}else _=!1}if("function"===typeof b)S=function(){b(A)};else if("undefined"!==typeof MessageChannel){var j=new MessageChannel,P=j.port2;j.port1.onmessage=A,S=function(){P.postMessage(null)}}else S=function(){y(A,0)};function I(e){E=e,_||(_=!0,S())}function R(e,n){C=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,I(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(v(C),C=-1):g=!0,R(x,o-s))):(e.sortIndex=a,n(c,e),m||f||(m=!0,I(k))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},3383:(e,t,n)=>{const r=Symbol("SemVer ANY");class i{static get ANY(){return r}constructor(e,t){if(t=o(t),e instanceof i){if(e.loose===!!t.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),c("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===r?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(e){const t=this.options.loose?s[a.COMPARATORLOOSE]:s[a.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new u(n[2],this.options.loose):this.semver=r}toString(){return this.value}test(e){if(c("Comparator.test",e,this.options.loose),this.semver===r||e===r)return!0;if("string"===typeof e)try{e=new u(e,this.options)}catch(t){return!1}return l(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new d(e.value,t).test(this.value):""===e.operator?""===e.value||new d(this.value,t).test(e.semver):(!(t=o(t)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(l(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(l(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}e.exports=i;const o=n(6272),{safeRe:s,t:a}=n(1323),l=n(538),c=n(1411),u=n(8207),d=n(7458)},7458:(e,t,n)=>{const r=/\s+/g;class i{constructor(e,t){if(t=s(t),e instanceof i)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new i(e.raw,t);if(e instanceof a)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().replace(r," "),this.set=this.raw.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!y(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const t of this.set)if(1===t.length&&v(t[0])){this.set=[t];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&m)|(this.options.loose&&g))+":"+e,n=o.get(t);if(n)return n;const r=this.options.loose,i=r?u[d.HYPHENRANGELOOSE]:u[d.HYPHENRANGE];e=e.replace(i,A(this.options.includePrerelease)),l("hyphen replace",e),e=e.replace(u[d.COMPARATORTRIM],h),l("comparator trim",e),e=e.replace(u[d.TILDETRIM],p),l("tilde trim",e),e=e.replace(u[d.CARETTRIM],f),l("caret trim",e);let s=e.split(" ").map((e=>w(e,this.options))).join(" ").split(/\s+/).map((e=>T(e,this.options)));r&&(s=s.filter((e=>(l("loose invalid filter",e,this.options),!!e.match(u[d.COMPARATORLOOSE]))))),l("range list",s);const c=new Map,v=s.map((e=>new a(e,this.options)));for(const o of v){if(y(o))return[o];c.set(o.value,o)}c.size>1&&c.has("")&&c.delete("");const b=[...c.values()];return o.set(t,b),b}intersects(e,t){if(!(e instanceof i))throw new TypeError("a Range is required");return this.set.some((n=>b(n,t)&&e.set.some((e=>b(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"===typeof e)try{e=new c(e,this.options)}catch(t){return!1}for(let n=0;n<this.set.length;n++)if(j(this.set[n],e,this.options))return!0;return!1}}e.exports=i;const o=new(n(4371)),s=n(6272),a=n(3383),l=n(1411),c=n(8207),{safeRe:u,t:d,comparatorTrimReplace:h,tildeTrimReplace:p,caretTrimReplace:f}=n(1323),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:g}=n(6225),y=e=>"<0.0.0-0"===e.value,v=e=>""===e.value,b=(e,t)=>{let n=!0;const r=e.slice();let i=r.pop();for(;n&&r.length;)n=r.every((e=>i.intersects(e,t))),i=r.pop();return n},w=(e,t)=>(l("comp",e,t),e=_(e,t),l("caret",e),e=k(e,t),l("tildes",e),e=C(e,t),l("xrange",e),e=N(e,t),l("stars",e),e),x=e=>!e||"x"===e.toLowerCase()||"*"===e,k=(e,t)=>e.trim().split(/\s+/).map((e=>S(e,t))).join(" "),S=(e,t)=>{const n=t.loose?u[d.TILDELOOSE]:u[d.TILDE];return e.replace(n,((t,n,r,i,o)=>{let s;return l("tilde",e,t,n,r,i,o),x(n)?s="":x(r)?s=`>=${n}.0.0 <${+n+1}.0.0-0`:x(i)?s=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:o?(l("replaceTilde pr",o),s=`>=${n}.${r}.${i}-${o} <${n}.${+r+1}.0-0`):s=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`,l("tilde return",s),s}))},_=(e,t)=>e.trim().split(/\s+/).map((e=>E(e,t))).join(" "),E=(e,t)=>{l("caret",e,t);const n=t.loose?u[d.CARETLOOSE]:u[d.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,i,o,s)=>{let a;return l("caret",e,t,n,i,o,s),x(n)?a="":x(i)?a=`>=${n}.0.0${r} <${+n+1}.0.0-0`:x(o)?a="0"===n?`>=${n}.${i}.0${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.0${r} <${+n+1}.0.0-0`:s?(l("replaceCaret pr",s),a="0"===n?"0"===i?`>=${n}.${i}.${o}-${s} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}-${s} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o}-${s} <${+n+1}.0.0-0`):(l("no pr"),a="0"===n?"0"===i?`>=${n}.${i}.${o}${r} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o} <${+n+1}.0.0-0`),l("caret return",a),a}))},C=(e,t)=>(l("replaceXRanges",e,t),e.split(/\s+/).map((e=>O(e,t))).join(" ")),O=(e,t)=>{e=e.trim();const n=t.loose?u[d.XRANGELOOSE]:u[d.XRANGE];return e.replace(n,((n,r,i,o,s,a)=>{l("xRange",e,n,r,i,o,s,a);const c=x(i),u=c||x(o),d=u||x(s),h=d;return"="===r&&h&&(r=""),a=t.includePrerelease?"-0":"",c?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&h?(u&&(o=0),s=0,">"===r?(r=">=",u?(i=+i+1,o=0,s=0):(o=+o+1,s=0)):"<="===r&&(r="<",u?i=+i+1:o=+o+1),"<"===r&&(a="-0"),n=`${r+i}.${o}.${s}${a}`):u?n=`>=${i}.0.0${a} <${+i+1}.0.0-0`:d&&(n=`>=${i}.${o}.0${a} <${i}.${+o+1}.0-0`),l("xRange return",n),n}))},N=(e,t)=>(l("replaceStars",e,t),e.trim().replace(u[d.STAR],"")),T=(e,t)=>(l("replaceGTE0",e,t),e.trim().replace(u[t.includePrerelease?d.GTE0PRE:d.GTE0],"")),A=e=>(t,n,r,i,o,s,a,l,c,u,d,h)=>`${n=x(r)?"":x(i)?`>=${r}.0.0${e?"-0":""}`:x(o)?`>=${r}.${i}.0${e?"-0":""}`:s?`>=${n}`:`>=${n}${e?"-0":""}`} ${l=x(c)?"":x(u)?`<${+c+1}.0.0-0`:x(d)?`<${c}.${+u+1}.0-0`:h?`<=${c}.${u}.${d}-${h}`:e?`<${c}.${u}.${+d+1}-0`:`<=${l}`}`.trim(),j=(e,t,n)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(l(e[n].semver),e[n].semver!==a.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0}},8207:(e,t,n)=>{const r=n(1411),{MAX_LENGTH:i,MAX_SAFE_INTEGER:o}=n(6225),{safeRe:s,t:a}=n(1323),l=n(6272),{compareIdentifiers:c}=n(9520);class u{constructor(e,t){if(t=l(t),e instanceof u){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!==typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>i)throw new TypeError(`version is longer than ${i} characters`);r("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?s[a.LOOSE]:s[a.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<o)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(r("SemVer.compare",this.version,this.options,e),!(e instanceof u)){if("string"===typeof e&&e===this.version)return 0;e=new u(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof u||(e=new u(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof u||(e=new u(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],i=e.prerelease[t];if(r("prerelease compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return c(n,i)}while(++t)}compareBuild(e){e instanceof u||(e=new u(e,this.options));let t=0;do{const n=this.build[t],i=e.build[t];if(r("build compare",t,n,i),void 0===n&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===n)return-1;if(n!==i)return c(n,i)}while(++t)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(n)?1:0;if(!t&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let r=this.prerelease.length;for(;--r>=0;)"number"===typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);if(-1===r){if(t===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let r=[t,e];!1===n&&(r=[t]),0===c(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=r):this.prerelease=r}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}e.exports=u},4747:(e,t,n)=>{const r=n(4501);e.exports=(e,t)=>{const n=r(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}},538:(e,t,n)=>{const r=n(7814),i=n(9930),o=n(6187),s=n(9896),a=n(7508),l=n(4369);e.exports=(e,t,n,c)=>{switch(t){case"===":return"object"===typeof e&&(e=e.version),"object"===typeof n&&(n=n.version),e===n;case"!==":return"object"===typeof e&&(e=e.version),"object"===typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return r(e,n,c);case"!=":return i(e,n,c);case">":return o(e,n,c);case">=":return s(e,n,c);case"<":return a(e,n,c);case"<=":return l(e,n,c);default:throw new TypeError(`Invalid operator: ${t}`)}}},7525:(e,t,n)=>{const r=n(8207),i=n(4501),{safeRe:o,t:s}=n(1323);e.exports=(e,t)=>{if(e instanceof r)return e;if("number"===typeof e&&(e=String(e)),"string"!==typeof e)return null;let n=null;if((t=t||{}).rtl){const r=t.includePrerelease?o[s.COERCERTLFULL]:o[s.COERCERTL];let i;for(;(i=r.exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&i.index+i[0].length===n.index+n[0].length||(n=i),r.lastIndex=i.index+i[1].length+i[2].length;r.lastIndex=-1}else n=e.match(t.includePrerelease?o[s.COERCEFULL]:o[s.COERCE]);if(null===n)return null;const a=n[2],l=n[3]||"0",c=n[4]||"0",u=t.includePrerelease&&n[5]?`-${n[5]}`:"",d=t.includePrerelease&&n[6]?`+${n[6]}`:"";return i(`${a}.${l}.${c}${u}${d}`,t)}},8356:(e,t,n)=>{const r=n(8207);e.exports=(e,t,n)=>{const i=new r(e,n),o=new r(t,n);return i.compare(o)||i.compareBuild(o)}},5094:(e,t,n)=>{const r=n(3193);e.exports=(e,t)=>r(e,t,!0)},3193:(e,t,n)=>{const r=n(8207);e.exports=(e,t,n)=>new r(e,n).compare(new r(t,n))},6627:(e,t,n)=>{const r=n(4501);e.exports=(e,t)=>{const n=r(e,null,!0),i=r(t,null,!0),o=n.compare(i);if(0===o)return null;const s=o>0,a=s?n:i,l=s?i:n,c=!!a.prerelease.length;if(!!l.prerelease.length&&!c)return l.patch||l.minor?a.patch?"patch":a.minor?"minor":"major":"major";const u=c?"pre":"";return n.major!==i.major?u+"major":n.minor!==i.minor?u+"minor":n.patch!==i.patch?u+"patch":"prerelease"}},7814:(e,t,n)=>{const r=n(3193);e.exports=(e,t,n)=>0===r(e,t,n)},6187:(e,t,n)=>{const r=n(3193);e.exports=(e,t,n)=>r(e,t,n)>0},9896:(e,t,n)=>{const r=n(3193);e.exports=(e,t,n)=>r(e,t,n)>=0},3974:(e,t,n)=>{const r=n(8207);e.exports=(e,t,n,i,o)=>{"string"===typeof n&&(o=i,i=n,n=void 0);try{return new r(e instanceof r?e.version:e,n).inc(t,i,o).version}catch(s){return null}}},7508:(e,t,n)=>{const r=n(3193);e.exports=(e,t,n)=>r(e,t,n)<0},4369:(e,t,n)=>{const r=n(3193);e.exports=(e,t,n)=>r(e,t,n)<=0},7963:(e,t,n)=>{const r=n(8207);e.exports=(e,t)=>new r(e,t).major},1647:(e,t,n)=>{const r=n(8207);e.exports=(e,t)=>new r(e,t).minor},9930:(e,t,n)=>{const r=n(3193);e.exports=(e,t,n)=>0!==r(e,t,n)},4501:(e,t,n)=>{const r=n(8207);e.exports=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e instanceof r)return e;try{return new r(e,t)}catch(i){if(!n)return null;throw i}}},4760:(e,t,n)=>{const r=n(8207);e.exports=(e,t)=>new r(e,t).patch},3390:(e,t,n)=>{const r=n(4501);e.exports=(e,t)=>{const n=r(e,t);return n&&n.prerelease.length?n.prerelease:null}},3033:(e,t,n)=>{const r=n(3193);e.exports=(e,t,n)=>r(t,e,n)},8020:(e,t,n)=>{const r=n(8356);e.exports=(e,t)=>e.sort(((e,n)=>r(n,e,t)))},7263:(e,t,n)=>{const r=n(7458);e.exports=(e,t,n)=>{try{t=new r(t,n)}catch(i){return!1}return t.test(e)}},8644:(e,t,n)=>{const r=n(8356);e.exports=(e,t)=>e.sort(((e,n)=>r(e,n,t)))},2192:(e,t,n)=>{const r=n(4501);e.exports=(e,t)=>{const n=r(e,t);return n?n.version:null}},500:(e,t,n)=>{const r=n(1323),i=n(6225),o=n(8207),s=n(9520),a=n(4501),l=n(2192),c=n(4747),u=n(3974),d=n(6627),h=n(7963),p=n(1647),f=n(4760),m=n(3390),g=n(3193),y=n(3033),v=n(5094),b=n(8356),w=n(8644),x=n(8020),k=n(6187),S=n(7508),_=n(7814),E=n(9930),C=n(9896),O=n(4369),N=n(538),T=n(7525),A=n(3383),j=n(7458),P=n(7263),I=n(4074),R=n(2285),M=n(3359),$=n(1390),L=n(1061),D=n(7724),z=n(256),F=n(7497),B=n(7941),U=n(536),H=n(7853);e.exports={parse:a,valid:l,clean:c,inc:u,diff:d,major:h,minor:p,patch:f,prerelease:m,compare:g,rcompare:y,compareLoose:v,compareBuild:b,sort:w,rsort:x,gt:k,lt:S,eq:_,neq:E,gte:C,lte:O,cmp:N,coerce:T,Comparator:A,Range:j,satisfies:P,toComparators:I,maxSatisfying:R,minSatisfying:M,minVersion:$,validRange:L,outside:D,gtr:z,ltr:F,intersects:B,simplifyRange:U,subset:H,SemVer:o,re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:i.SEMVER_SPEC_VERSION,RELEASE_TYPES:i.RELEASE_TYPES,compareIdentifiers:s.compareIdentifiers,rcompareIdentifiers:s.rcompareIdentifiers}},6225:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:t,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},1411:e=>{const t="object"===typeof process&&{NODE_ENV:"production",PUBLIC_URL:"/login",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"http://localhost:5000/api",REACT_APP_GROQ_API_KEY:"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",REACT_APP_SOCKET_URL:"http://localhost:5000"}.NODE_DEBUG&&/\bsemver\b/i.test({NODE_ENV:"production",PUBLIC_URL:"/login",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"http://localhost:5000/api",REACT_APP_GROQ_API_KEY:"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",REACT_APP_SOCKET_URL:"http://localhost:5000"}.NODE_DEBUG)?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return console.error("SEMVER",...t)}:()=>{};e.exports=t},9520:e=>{const t=/^[0-9]+$/,n=(e,n)=>{const r=t.test(e),i=t.test(n);return r&&i&&(e=+e,n=+n),e===n?0:r&&!i?-1:i&&!r?1:e<n?-1:1};e.exports={compareIdentifiers:n,rcompareIdentifiers:(e,t)=>n(t,e)}},4371:e=>{e.exports=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}},6272:e=>{const t=Object.freeze({loose:!0}),n=Object.freeze({});e.exports=e=>e?"object"!==typeof e?t:e:n},1323:(e,t,n)=>{const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:o}=n(6225),s=n(1411),a=(t=e.exports={}).re=[],l=t.safeRe=[],c=t.src=[],u=t.t={};let d=0;const h="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",o],[h,i]],f=(e,t,n)=>{const r=(e=>{for(const[t,n]of p)e=e.split(`${t}*`).join(`${t}{0,${n}}`).split(`${t}+`).join(`${t}{1,${n}}`);return e})(t),i=d++;s(e,i,t),u[e]=i,c[i]=t,a[i]=new RegExp(t,n?"g":void 0),l[i]=new RegExp(r,n?"g":void 0)};f("NUMERICIDENTIFIER","0|[1-9]\\d*"),f("NUMERICIDENTIFIERLOOSE","\\d+"),f("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),f("MAINVERSION",`(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})`),f("MAINVERSIONLOOSE",`(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})`),f("PRERELEASEIDENTIFIER",`(?:${c[u.NUMERICIDENTIFIER]}|${c[u.NONNUMERICIDENTIFIER]})`),f("PRERELEASEIDENTIFIERLOOSE",`(?:${c[u.NUMERICIDENTIFIERLOOSE]}|${c[u.NONNUMERICIDENTIFIER]})`),f("PRERELEASE",`(?:-(${c[u.PRERELEASEIDENTIFIER]}(?:\\.${c[u.PRERELEASEIDENTIFIER]})*))`),f("PRERELEASELOOSE",`(?:-?(${c[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[u.PRERELEASEIDENTIFIERLOOSE]})*))`),f("BUILDIDENTIFIER",`${h}+`),f("BUILD",`(?:\\+(${c[u.BUILDIDENTIFIER]}(?:\\.${c[u.BUILDIDENTIFIER]})*))`),f("FULLPLAIN",`v?${c[u.MAINVERSION]}${c[u.PRERELEASE]}?${c[u.BUILD]}?`),f("FULL",`^${c[u.FULLPLAIN]}$`),f("LOOSEPLAIN",`[v=\\s]*${c[u.MAINVERSIONLOOSE]}${c[u.PRERELEASELOOSE]}?${c[u.BUILD]}?`),f("LOOSE",`^${c[u.LOOSEPLAIN]}$`),f("GTLT","((?:<|>)?=?)"),f("XRANGEIDENTIFIERLOOSE",`${c[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),f("XRANGEIDENTIFIER",`${c[u.NUMERICIDENTIFIER]}|x|X|\\*`),f("XRANGEPLAIN",`[v=\\s]*(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:${c[u.PRERELEASE]})?${c[u.BUILD]}?)?)?`),f("XRANGEPLAINLOOSE",`[v=\\s]*(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:${c[u.PRERELEASELOOSE]})?${c[u.BUILD]}?)?)?`),f("XRANGE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAIN]}$`),f("XRANGELOOSE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAINLOOSE]}$`),f("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),f("COERCE",`${c[u.COERCEPLAIN]}(?:$|[^\\d])`),f("COERCEFULL",c[u.COERCEPLAIN]+`(?:${c[u.PRERELEASE]})?`+`(?:${c[u.BUILD]})?(?:$|[^\\d])`),f("COERCERTL",c[u.COERCE],!0),f("COERCERTLFULL",c[u.COERCEFULL],!0),f("LONETILDE","(?:~>?)"),f("TILDETRIM",`(\\s*)${c[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",f("TILDE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAIN]}$`),f("TILDELOOSE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAINLOOSE]}$`),f("LONECARET","(?:\\^)"),f("CARETTRIM",`(\\s*)${c[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",f("CARET",`^${c[u.LONECARET]}${c[u.XRANGEPLAIN]}$`),f("CARETLOOSE",`^${c[u.LONECARET]}${c[u.XRANGEPLAINLOOSE]}$`),f("COMPARATORLOOSE",`^${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]})$|^$`),f("COMPARATOR",`^${c[u.GTLT]}\\s*(${c[u.FULLPLAIN]})$|^$`),f("COMPARATORTRIM",`(\\s*)${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]}|${c[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",f("HYPHENRANGE",`^\\s*(${c[u.XRANGEPLAIN]})\\s+-\\s+(${c[u.XRANGEPLAIN]})\\s*$`),f("HYPHENRANGELOOSE",`^\\s*(${c[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[u.XRANGEPLAINLOOSE]})\\s*$`),f("STAR","(<|>)?=?\\s*\\*"),f("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),f("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},256:(e,t,n)=>{const r=n(7724);e.exports=(e,t,n)=>r(e,t,">",n)},7941:(e,t,n)=>{const r=n(7458);e.exports=(e,t,n)=>(e=new r(e,n),t=new r(t,n),e.intersects(t,n))},7497:(e,t,n)=>{const r=n(7724);e.exports=(e,t,n)=>r(e,t,"<",n)},2285:(e,t,n)=>{const r=n(8207),i=n(7458);e.exports=(e,t,n)=>{let o=null,s=null,a=null;try{a=new i(t,n)}catch(l){return null}return e.forEach((e=>{a.test(e)&&(o&&-1!==s.compare(e)||(o=e,s=new r(o,n)))})),o}},3359:(e,t,n)=>{const r=n(8207),i=n(7458);e.exports=(e,t,n)=>{let o=null,s=null,a=null;try{a=new i(t,n)}catch(l){return null}return e.forEach((e=>{a.test(e)&&(o&&1!==s.compare(e)||(o=e,s=new r(o,n)))})),o}},1390:(e,t,n)=>{const r=n(8207),i=n(7458),o=n(6187);e.exports=(e,t)=>{e=new i(e,t);let n=new r("0.0.0");if(e.test(n))return n;if(n=new r("0.0.0-0"),e.test(n))return n;n=null;for(let i=0;i<e.set.length;++i){const t=e.set[i];let s=null;t.forEach((e=>{const t=new r(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":s&&!o(t,s)||(s=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!s||n&&!o(n,s)||(n=s)}return n&&e.test(n)?n:null}},7724:(e,t,n)=>{const r=n(8207),i=n(3383),{ANY:o}=i,s=n(7458),a=n(7263),l=n(6187),c=n(7508),u=n(4369),d=n(9896);e.exports=(e,t,n,h)=>{let p,f,m,g,y;switch(e=new r(e,h),t=new s(t,h),n){case">":p=l,f=u,m=c,g=">",y=">=";break;case"<":p=c,f=d,m=l,g="<",y="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(e,t,h))return!1;for(let r=0;r<t.set.length;++r){const n=t.set[r];let s=null,a=null;if(n.forEach((e=>{e.semver===o&&(e=new i(">=0.0.0")),s=s||e,a=a||e,p(e.semver,s.semver,h)?s=e:m(e.semver,a.semver,h)&&(a=e)})),s.operator===g||s.operator===y)return!1;if((!a.operator||a.operator===g)&&f(e,a.semver))return!1;if(a.operator===y&&m(e,a.semver))return!1}return!0}},536:(e,t,n)=>{const r=n(7263),i=n(3193);e.exports=(e,t,n)=>{const o=[];let s=null,a=null;const l=e.sort(((e,t)=>i(e,t,n)));for(const i of l){r(i,t,n)?(a=i,s||(s=i)):(a&&o.push([s,a]),a=null,s=null)}s&&o.push([s,null]);const c=[];for(const[r,i]of o)r===i?c.push(r):i||r!==l[0]?i?r===l[0]?c.push(`<=${i}`):c.push(`${r} - ${i}`):c.push(`>=${r}`):c.push("*");const u=c.join(" || "),d="string"===typeof t.raw?t.raw:String(t);return u.length<d.length?u:t}},7853:(e,t,n)=>{const r=n(7458),i=n(3383),{ANY:o}=i,s=n(7263),a=n(3193),l=[new i(">=0.0.0-0")],c=[new i(">=0.0.0")],u=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===o){if(1===t.length&&t[0].semver===o)return!0;e=n.includePrerelease?l:c}if(1===t.length&&t[0].semver===o){if(n.includePrerelease)return!0;t=c}const r=new Set;let i,u,p,f,m,g,y;for(const o of e)">"===o.operator||">="===o.operator?i=d(i,o,n):"<"===o.operator||"<="===o.operator?u=h(u,o,n):r.add(o.semver);if(r.size>1)return null;if(i&&u){if(p=a(i.semver,u.semver,n),p>0)return null;if(0===p&&(">="!==i.operator||"<="!==u.operator))return null}for(const o of r){if(i&&!s(o,String(i),n))return null;if(u&&!s(o,String(u),n))return null;for(const e of t)if(!s(o,String(e),n))return!1;return!0}let v=!(!u||n.includePrerelease||!u.semver.prerelease.length)&&u.semver,b=!(!i||n.includePrerelease||!i.semver.prerelease.length)&&i.semver;v&&1===v.prerelease.length&&"<"===u.operator&&0===v.prerelease[0]&&(v=!1);for(const o of t){if(y=y||">"===o.operator||">="===o.operator,g=g||"<"===o.operator||"<="===o.operator,i)if(b&&o.semver.prerelease&&o.semver.prerelease.length&&o.semver.major===b.major&&o.semver.minor===b.minor&&o.semver.patch===b.patch&&(b=!1),">"===o.operator||">="===o.operator){if(f=d(i,o,n),f===o&&f!==i)return!1}else if(">="===i.operator&&!s(i.semver,String(o),n))return!1;if(u)if(v&&o.semver.prerelease&&o.semver.prerelease.length&&o.semver.major===v.major&&o.semver.minor===v.minor&&o.semver.patch===v.patch&&(v=!1),"<"===o.operator||"<="===o.operator){if(m=h(u,o,n),m===o&&m!==u)return!1}else if("<="===u.operator&&!s(u.semver,String(o),n))return!1;if(!o.operator&&(u||i)&&0!==p)return!1}return!(i&&g&&!u&&0!==p)&&(!(u&&y&&!i&&0!==p)&&(!b&&!v))},d=(e,t,n)=>{if(!e)return t;const r=a(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},h=(e,t,n)=>{if(!e)return t;const r=a(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e===t)return!0;e=new r(e,n),t=new r(t,n);let i=!1;e:for(const r of e.set){for(const e of t.set){const t=u(r,e,n);if(i=i||null!==t,t)continue e}if(i)return!1}return!0}},4074:(e,t,n)=>{const r=n(7458);e.exports=(e,t)=>new r(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},1061:(e,t,n)=>{const r=n(7458);e.exports=(e,t)=>{try{return new r(e,t).range||"*"}catch(n){return null}}},4222:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=null;if(!e||"string"!==typeof e)return n;var r=(0,i.default)(e),o="function"===typeof t;return r.forEach((function(e){if("declaration"===e.type){var r=e.property,i=e.value;o?t(r,i,e):i&&((n=n||{})[r]=i)}})),n};var i=r(n(4403))},4994:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(o,s),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".d855a71b.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="frontend:";n.l=(r,i,o,s)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+o){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=r),e[r]=[i];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/login/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=o);var s=n.p+n.u(t),a=new Error;n.l(s,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,o,s=r[0],a=r[1],l=r[2],c=0;if(s.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<s.length;c++)o=s[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkfrontend=self.webpackChunkfrontend||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{hasBrowserEnv:()=>zt,hasStandardBrowserEnv:()=>Bt,hasStandardBrowserWebWorkerEnv:()=>Ut,navigator:()=>Ft,origin:()=>Ht});var t={};n.r(t),n.d(t,{JsonPatchError:()=>ky,_areEquals:()=>Py,applyOperation:()=>Oy,applyPatch:()=>Ny,applyReducer:()=>Ty,deepClone:()=>Sy,getValueByPointer:()=>Cy,validate:()=>jy,validator:()=>Ay});var r={};n.r(r),n.d(r,{xX:()=>ax,qA:()=>lx,LG:()=>ox,cH:()=>sx,v3:()=>ux,v7:()=>cx,fK:()=>px,i7:()=>ix,PO:()=>gx,m_:()=>hx,Ll:()=>dx,OE:()=>mx,Is:()=>fx});var i={};n.r(i),n.d(i,{boolean:()=>XS,booleanish:()=>QS,commaOrSpaceSeparated:()=>i_,commaSeparated:()=>r_,number:()=>t_,overloadedBoolean:()=>e_,spaceSeparated:()=>n_});var o={};n.r(o),n.d(o,{attentionMarkers:()=>LC,contentInitial:()=>jC,disable:()=>DC,document:()=>AC,flow:()=>IC,flowInitial:()=>PC,insideSpan:()=>$C,string:()=>RC,text:()=>MC});var s,a=n(5043),l=n.t(a,2),c=n(4391),u=n(7950),d=n.t(u,2);function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(s||(s={}));const p="popstate";function f(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function m(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function g(e,t){return{usr:e.state,key:e.key,idx:t}}function y(e,t,n,r){return void 0===n&&(n=null),h({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?b(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function v(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function b(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function w(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,l=s.Pop,c=null,u=d();function d(){return(a.state||{idx:null}).idx}function m(){l=s.Pop;let e=d(),t=null==e?null:e-u;u=e,c&&c({action:l,location:w.location,delta:t})}function b(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:v(e);return n=n.replace(/ $/,"%20"),f(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==u&&(u=0,a.replaceState(h({},a.state,{idx:u}),""));let w={get action(){return l},get location(){return e(i,a)},listen(e){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(p,m),c=e,()=>{i.removeEventListener(p,m),c=null}},createHref:e=>t(i,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=s.Push;let r=y(w.location,e,t);n&&n(r,e),u=d()+1;let h=g(r,u),p=w.createHref(r);try{a.pushState(h,"",p)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;i.location.assign(p)}o&&c&&c({action:l,location:w.location,delta:1})},replace:function(e,t){l=s.Replace;let r=y(w.location,e,t);n&&n(r,e),u=d();let i=g(r,u),h=w.createHref(r);a.replaceState(i,"",h),o&&c&&c({action:l,location:w.location,delta:0})},go:e=>a.go(e)};return w}var x;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(x||(x={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function k(e,t,n){return void 0===n&&(n="/"),S(e,t,n,!1)}function S(e,t,n,r){let i=L(("string"===typeof t?b(t):t).pathname||"/",n);if(null==i)return null;let o=_(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let s=null;for(let a=0;null==s&&a<o.length;++a){let e=$(i);s=R(o[a],e,r)}return s}function _(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let s={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(f(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let a=U([r,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(f(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),_(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:I(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of E(e.path))i(e,t,r);else i(e,t)})),t}function E(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=E(r.join("/")),a=[];return a.push(...s.map((e=>""===e?o:[o,e].join("/")))),i&&a.push(...s),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const C=/^:[\w-]+$/,O=3,N=2,T=1,A=10,j=-2,P=e=>"*"===e;function I(e,t){let n=e.split("/"),r=n.length;return n.some(P)&&(r+=j),t&&(r+=N),n.filter((e=>!P(e))).reduce(((e,t)=>e+(C.test(t)?O:""===t?T:A)),r)}function R(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=M({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=M({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),s.push({params:i,pathname:U([o,u.pathname]),pathnameBase:H(U([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=U([o,u.pathnameBase]))}return s}function M(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);m("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:o,pathnameBase:s,pattern:e}}function $(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return m(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function L(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function D(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function z(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function F(e,t){let n=z(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function B(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=b(e):(i=h({},e),f(!i.pathname||!i.pathname.includes("?"),D("?","pathname","search",i)),f(!i.pathname||!i.pathname.includes("#"),D("#","pathname","hash",i)),f(!i.search||!i.search.includes("#"),D("#","search","hash",i)));let o,s=""===e||""===i.pathname,a=s?"/":i.pathname;if(null==a)o=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?b(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:V(r),hash:W(i)}}(i,o),c=a&&"/"!==a&&a.endsWith("/"),u=(s||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const U=e=>e.join("/").replace(/\/\/+/g,"/"),H=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",W=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const J=["post","put","patch","delete"],K=(new Set(J),["get",...J]);new Set(K),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G.apply(this,arguments)}const Z=a.createContext(null);const Y=a.createContext(null);const X=a.createContext(null);const Q=a.createContext(null);const ee=a.createContext({outlet:null,matches:[],isDataRoute:!1});const te=a.createContext(null);function ne(){return null!=a.useContext(Q)}function re(){return ne()||f(!1),a.useContext(Q).location}function ie(e){a.useContext(X).static||a.useLayoutEffect(e)}function oe(){let{isDataRoute:e}=a.useContext(ee);return e?function(){let{router:e}=ge(fe.UseNavigateStable),t=ve(me.UseNavigateStable),n=a.useRef(!1);return ie((()=>{n.current=!0})),a.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,G({fromRouteId:t},i)))}),[e,t])}():function(){ne()||f(!1);let e=a.useContext(Z),{basename:t,future:n,navigator:r}=a.useContext(X),{matches:i}=a.useContext(ee),{pathname:o}=re(),s=JSON.stringify(F(i,n.v7_relativeSplatPath)),l=a.useRef(!1);ie((()=>{l.current=!0}));let c=a.useCallback((function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let a=B(n,JSON.parse(s),o,"path"===i.relative);null==e&&"/"!==t&&(a.pathname="/"===a.pathname?t:U([t,a.pathname])),(i.replace?r.replace:r.push)(a,i.state,i)}),[t,r,s,o,e]);return c}()}function se(){let{matches:e}=a.useContext(ee),t=e[e.length-1];return t?t.params:{}}function ae(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=a.useContext(X),{matches:i}=a.useContext(ee),{pathname:o}=re(),s=JSON.stringify(F(i,r.v7_relativeSplatPath));return a.useMemo((()=>B(e,JSON.parse(s),o,"path"===n)),[e,s,o,n])}function le(e,t,n,r){ne()||f(!1);let{navigator:i}=a.useContext(X),{matches:o}=a.useContext(ee),l=o[o.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,h=re();if(t){var p;let e="string"===typeof t?b(t):t;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||f(!1),d=e}else d=h;let m=d.pathname||"/",g=m;if("/"!==u){let e=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=k(e,{pathname:g});let v=pe(y&&y.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:U([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:U([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,n,r);return t&&v?a.createElement(Q.Provider,{value:{location:G({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:s.Pop}},v):v}function ce(){let e=function(){var e;let t=a.useContext(te),n=ye(me.UseRouteError),r=ve(me.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=q(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return a.createElement(a.Fragment,null,a.createElement("h2",null,"Unexpected Application Error!"),a.createElement("h3",{style:{fontStyle:"italic"}},t),n?a.createElement("pre",{style:i},n):null,null)}const ue=a.createElement(ce,null);class de extends a.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?a.createElement(ee.Provider,{value:this.props.routeContext},a.createElement(te.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function he(e){let{routeContext:t,match:n,children:r}=e,i=a.useContext(Z);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),a.createElement(ee.Provider,{value:t},r)}function pe(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let s=e,l=null==(i=n)?void 0:i.errors;if(null!=l){let e=s.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||f(!1),s=s.slice(0,Math.min(s.length,e+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let a=0;a<s.length;a++){let e=s[a];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=a),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,s=u>=0?s.slice(0,u+1):[s[0]];break}}}return s.reduceRight(((e,r,i)=>{let o,d=!1,h=null,p=null;var f;n&&(o=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||ue,c&&(u<0&&0===i?(f="route-fallback",!1||be[f]||(be[f]=!0),d=!0,p=null):u===i&&(d=!0,p=r.route.hydrateFallbackElement||null)));let m=t.concat(s.slice(0,i+1)),g=()=>{let t;return t=o?h:d?p:r.route.Component?a.createElement(r.route.Component,null):r.route.element?r.route.element:e,a.createElement(he,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?a.createElement(de,{location:n.location,revalidation:n.revalidation,component:h,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var fe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(fe||{}),me=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(me||{});function ge(e){let t=a.useContext(Z);return t||f(!1),t}function ye(e){let t=a.useContext(Y);return t||f(!1),t}function ve(e){let t=function(){let e=a.useContext(ee);return e||f(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||f(!1),n.route.id}const be={};l.startTransition;function we(e){let{to:t,replace:n,state:r,relative:i}=e;ne()||f(!1);let{future:o,static:s}=a.useContext(X),{matches:l}=a.useContext(ee),{pathname:c}=re(),u=oe(),d=B(t,F(l,o.v7_relativeSplatPath),c,"path"===i),h=JSON.stringify(d);return a.useEffect((()=>u(JSON.parse(h),{replace:n,state:r,relative:i})),[u,h,i,n,r]),null}function xe(e){f(!1)}function ke(e){let{basename:t="/",children:n=null,location:r,navigationType:i=s.Pop,navigator:o,static:l=!1,future:c}=e;ne()&&f(!1);let u=t.replace(/^\/*/,"/"),d=a.useMemo((()=>({basename:u,navigator:o,static:l,future:G({v7_relativeSplatPath:!1},c)})),[u,c,o,l]);"string"===typeof r&&(r=b(r));let{pathname:h="/",search:p="",hash:m="",state:g=null,key:y="default"}=r,v=a.useMemo((()=>{let e=L(h,u);return null==e?null:{location:{pathname:e,search:p,hash:m,state:g,key:y},navigationType:i}}),[u,h,p,m,g,y,i]);return null==v?null:a.createElement(X.Provider,{value:d},a.createElement(Q.Provider,{children:n,value:v}))}function Se(e){let{children:t,location:n}=e;return le(_e(t),n)}new Promise((()=>{}));a.Component;function _e(e,t){void 0===t&&(t=[]);let n=[];return a.Children.forEach(e,((e,r)=>{if(!a.isValidElement(e))return;let i=[...t,r];if(e.type===a.Fragment)return void n.push.apply(n,_e(e.props.children,i));e.type!==xe&&f(!1),e.props.index&&e.props.children&&f(!1);let o={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=_e(e.props.children,i)),n.push(o)})),n}function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ee.apply(this,arguments)}function Ce(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Oe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(RN){}new Map;const Ne=l.startTransition;d.flushSync,l.useId;function Te(e){let{basename:t,children:n,future:r,window:i}=e,o=a.useRef();var s;null==o.current&&(o.current=(void 0===(s={window:i,v5Compat:!0})&&(s={}),w((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return y("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:v(t)}),null,s)));let l=o.current,[c,u]=a.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},h=a.useCallback((e=>{d&&Ne?Ne((()=>u(e))):u(e)}),[u,d]);return a.useLayoutEffect((()=>l.listen(h)),[l,h]),a.createElement(ke,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const Ae="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,je=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pe=a.forwardRef((function(e,t){let n,{onClick:r,relative:i,reloadDocument:o,replace:s,state:l,target:c,to:u,preventScrollReset:d,unstable_viewTransition:h}=e,p=Ce(e,Oe),{basename:m}=a.useContext(X),g=!1;if("string"===typeof u&&je.test(u)&&(n=u,Ae))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=L(t.pathname,m);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:g=!0}catch(RN){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;ne()||f(!1);let{basename:r,navigator:i}=a.useContext(X),{hash:o,pathname:s,search:l}=ae(e,{relative:n}),c=s;return"/"!==r&&(c="/"===s?r:U([r,s])),i.createHref({pathname:c,search:l,hash:o})}(u,{relative:i}),b=function(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:s,unstable_viewTransition:l}=void 0===t?{}:t,c=oe(),u=re(),d=ae(e,{relative:s});return a.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:v(u)===v(d);c(e,{replace:n,state:i,preventScrollReset:o,relative:s,unstable_viewTransition:l})}}),[u,c,d,r,i,n,e,o,s,l])}(u,{replace:s,state:l,target:c,preventScrollReset:d,relative:i,unstable_viewTransition:h});return a.createElement("a",Ee({},p,{href:n||y,onClick:g||o?r:function(e){r&&r(e),e.defaultPrevented||b(e)},ref:t,target:c}))}));var Ie,Re;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ie||(Ie={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Re||(Re={}));function Me(e,t){return function(){return e.apply(t,arguments)}}const{toString:$e}=Object.prototype,{getPrototypeOf:Le}=Object,De=(e=>t=>{const n=$e.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ze=e=>(e=e.toLowerCase(),t=>De(t)===e),Fe=e=>t=>typeof t===e,{isArray:Be}=Array,Ue=Fe("undefined");const He=ze("ArrayBuffer");const Ve=Fe("string"),We=Fe("function"),qe=Fe("number"),Je=e=>null!==e&&"object"===typeof e,Ke=e=>{if("object"!==De(e))return!1;const t=Le(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Ge=ze("Date"),Ze=ze("File"),Ye=ze("Blob"),Xe=ze("FileList"),Qe=ze("URLSearchParams"),[et,tt,nt,rt]=["ReadableStream","Request","Response","Headers"].map(ze);function it(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Be(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let s;for(n=0;n<o;n++)s=r[n],t.call(null,e[s],s,e)}}function ot(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const st="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,at=e=>!Ue(e)&&e!==st;const lt=(ct="undefined"!==typeof Uint8Array&&Le(Uint8Array),e=>ct&&e instanceof ct);var ct;const ut=ze("HTMLFormElement"),dt=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),ht=ze("RegExp"),pt=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};it(n,((n,i)=>{let o;!1!==(o=t(n,i,e))&&(r[i]=o||n)})),Object.defineProperties(e,r)},ft="abcdefghijklmnopqrstuvwxyz",mt="0123456789",gt={DIGIT:mt,ALPHA:ft,ALPHA_DIGIT:ft+ft.toUpperCase()+mt};const yt=ze("AsyncFunction"),vt=((e,t)=>{return e?setImmediate:t?(n=`axios@${Math.random()}`,r=[],st.addEventListener("message",(e=>{let{source:t,data:i}=e;t===st&&i===n&&r.length&&r.shift()()}),!1),e=>{r.push(e),st.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,We(st.postMessage)),bt="undefined"!==typeof queueMicrotask?queueMicrotask.bind(st):"undefined"!==typeof process&&process.nextTick||vt,wt={isArray:Be,isArrayBuffer:He,isBuffer:function(e){return null!==e&&!Ue(e)&&null!==e.constructor&&!Ue(e.constructor)&&We(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||We(e.append)&&("formdata"===(t=De(e))||"object"===t&&We(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&He(e.buffer),t},isString:Ve,isNumber:qe,isBoolean:e=>!0===e||!1===e,isObject:Je,isPlainObject:Ke,isReadableStream:et,isRequest:tt,isResponse:nt,isHeaders:rt,isUndefined:Ue,isDate:Ge,isFile:Ze,isBlob:Ye,isRegExp:ht,isFunction:We,isStream:e=>Je(e)&&We(e.pipe),isURLSearchParams:Qe,isTypedArray:lt,isFileList:Xe,forEach:it,merge:function e(){const{caseless:t}=at(this)&&this||{},n={},r=(r,i)=>{const o=t&&ot(n,i)||i;Ke(n[o])&&Ke(r)?n[o]=e(n[o],r):Ke(r)?n[o]=e({},r):Be(r)?n[o]=r.slice():n[o]=r};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&it(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return it(t,((t,r)=>{n&&We(t)?e[r]=Me(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,s;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)s=i[o],r&&!r(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==n&&Le(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:De,kindOfTest:ze,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Be(e))return e;let t=e.length;if(!qe(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:ut,hasOwnProperty:dt,hasOwnProp:dt,reduceDescriptors:pt,freezeMethods:e=>{pt(e,((t,n)=>{if(We(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];We(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return Be(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:ot,global:st,isContextDefined:at,ALPHABET:gt,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gt.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&We(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Je(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=Be(e)?[]:{};return it(e,((e,t)=>{const o=n(e,r+1);!Ue(o)&&(i[t]=o)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:yt,isThenable:e=>e&&(Je(e)||We(e))&&We(e.then)&&We(e.catch),setImmediate:vt,asap:bt};function xt(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}wt.inherits(xt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:wt.toJSONObject(this.config),code:this.code,status:this.status}}});const kt=xt.prototype,St={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{St[e]={value:e}})),Object.defineProperties(xt,St),Object.defineProperty(kt,"isAxiosError",{value:!0}),xt.from=(e,t,n,r,i,o)=>{const s=Object.create(kt);return wt.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),xt.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const _t=xt;function Et(e){return wt.isPlainObject(e)||wt.isArray(e)}function Ct(e){return wt.endsWith(e,"[]")?e.slice(0,-2):e}function Ot(e,t,n){return e?e.concat(t).map((function(e,t){return e=Ct(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Nt=wt.toFlatObject(wt,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Tt=function(e,t,n){if(!wt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=wt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!wt.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,o=n.dots,s=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&wt.isSpecCompliantForm(t);if(!wt.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(wt.isDate(e))return e.toISOString();if(!a&&wt.isBlob(e))throw new _t("Blob is not supported. Use a Buffer instead.");return wt.isArrayBuffer(e)||wt.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let a=e;if(e&&!i&&"object"===typeof e)if(wt.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(wt.isArray(e)&&function(e){return wt.isArray(e)&&!e.some(Et)}(e)||(wt.isFileList(e)||wt.endsWith(n,"[]"))&&(a=wt.toArray(e)))return n=Ct(n),a.forEach((function(e,r){!wt.isUndefined(e)&&null!==e&&t.append(!0===s?Ot([n],r,o):null===s?n:n+"[]",l(e))})),!1;return!!Et(e)||(t.append(Ot(i,n,o),l(e)),!1)}const u=[],d=Object.assign(Nt,{defaultVisitor:c,convertValue:l,isVisitable:Et});if(!wt.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!wt.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),wt.forEach(n,(function(n,o){!0===(!(wt.isUndefined(n)||null===n)&&i.call(t,n,wt.isString(o)?o.trim():o,r,d))&&e(n,r?r.concat(o):[o])})),u.pop()}}(e),t};function At(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function jt(e,t){this._pairs=[],e&&Tt(e,this,t)}const Pt=jt.prototype;Pt.append=function(e,t){this._pairs.push([e,t])},Pt.toString=function(e){const t=e?function(t){return e.call(this,t,At)}:At;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const It=jt;function Rt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Mt(e,t,n){if(!t)return e;const r=n&&n.encode||Rt,i=n&&n.serialize;let o;if(o=i?i(t,n):wt.isURLSearchParams(t)?t.toString():new It(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const $t=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){wt.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Lt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Dt={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:It,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},zt="undefined"!==typeof window&&"undefined"!==typeof document,Ft="object"===typeof navigator&&navigator||void 0,Bt=zt&&(!Ft||["ReactNative","NativeScript","NS"].indexOf(Ft.product)<0),Ut="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Ht=zt&&window.location.href||"http://localhost",Vt={...e,...Dt};const Wt=function(e){function t(e,n,r,i){let o=e[i++];if("__proto__"===o)return!0;const s=Number.isFinite(+o),a=i>=e.length;if(o=!o&&wt.isArray(r)?r.length:o,a)return wt.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!s;r[o]&&wt.isObject(r[o])||(r[o]=[]);return t(e,n,r[o],i)&&wt.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}(r[o])),!s}if(wt.isFormData(e)&&wt.isFunction(e.entries)){const n={};return wt.forEachEntry(e,((e,r)=>{t(function(e){return wt.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const qt={transitional:Lt,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=wt.isObject(e);i&&wt.isHTMLForm(e)&&(e=new FormData(e));if(wt.isFormData(e))return r?JSON.stringify(Wt(e)):e;if(wt.isArrayBuffer(e)||wt.isBuffer(e)||wt.isStream(e)||wt.isFile(e)||wt.isBlob(e)||wt.isReadableStream(e))return e;if(wt.isArrayBufferView(e))return e.buffer;if(wt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Tt(e,new Vt.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Vt.isNode&&wt.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=wt.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Tt(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(wt.isString(e))try{return(t||JSON.parse)(e),wt.trim(e)}catch(RN){if("SyntaxError"!==RN.name)throw RN}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||qt.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(wt.isResponse(e)||wt.isReadableStream(e))return e;if(e&&wt.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(RN){if(n){if("SyntaxError"===RN.name)throw _t.from(RN,_t.ERR_BAD_RESPONSE,this,null,this.response);throw RN}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Vt.classes.FormData,Blob:Vt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};wt.forEach(["delete","get","head","post","put","patch"],(e=>{qt.headers[e]={}}));const Jt=qt,Kt=wt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Gt=Symbol("internals");function Zt(e){return e&&String(e).trim().toLowerCase()}function Yt(e){return!1===e||null==e?e:wt.isArray(e)?e.map(Yt):String(e)}function Xt(e,t,n,r,i){return wt.isFunction(r)?r.call(this,t,n):(i&&(t=n),wt.isString(t)?wt.isString(r)?-1!==t.indexOf(r):wt.isRegExp(r)?r.test(t):void 0:void 0)}class Qt{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=Zt(t);if(!i)throw new Error("header name must be a non-empty string");const o=wt.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=Yt(e))}const o=(e,t)=>wt.forEach(e,((e,n)=>i(e,n,t)));if(wt.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(wt.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&Kt[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(wt.isHeaders(e))for(const[s,a]of e.entries())i(a,s,n);else null!=e&&i(t,e,n);return this}get(e,t){if(e=Zt(e)){const n=wt.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(wt.isFunction(t))return t.call(this,e,n);if(wt.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Zt(e)){const n=wt.findKey(this,e);return!(!n||void 0===this[n]||t&&!Xt(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=Zt(e)){const i=wt.findKey(n,e);!i||t&&!Xt(0,n[i],i,t)||(delete n[i],r=!0)}}return wt.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!Xt(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return wt.forEach(this,((r,i)=>{const o=wt.findKey(n,i);if(o)return t[o]=Yt(r),void delete t[i];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();s!==i&&delete t[i],t[s]=Yt(r),n[s]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return wt.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&wt.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[Gt]=this[Gt]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Zt(e);t[r]||(!function(e,t){const n=wt.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return wt.isArray(e)?e.forEach(r):r(e),this}}Qt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),wt.reduceDescriptors(Qt.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),wt.freezeMethods(Qt);const en=Qt;function tn(e,t){const n=this||Jt,r=t||n,i=en.from(r.headers);let o=r.data;return wt.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function nn(e){return!(!e||!e.__CANCEL__)}function rn(e,t,n){_t.call(this,null==e?"canceled":e,_t.ERR_CANCELED,t,n),this.name="CanceledError"}wt.inherits(rn,_t,{__CANCEL__:!0});const on=rn;function sn(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new _t("Request failed with status code "+n.status,[_t.ERR_BAD_REQUEST,_t.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const an=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,o=0,s=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=r[s];i||(i=l),n[o]=a,r[o]=l;let u=s,d=0;for(;u!==o;)d+=n[u++],u%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),l-i<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const ln=function(e,t){let n,r,i=0,o=1e3/t;const s=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=o,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-i;for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];t>=o?s(l,e):(n=l,r||(r=setTimeout((()=>{r=null,s(n)}),o-t)))},()=>n&&s(n)]},cn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=an(50,250);return ln((n=>{const o=n.loaded,s=n.lengthComputable?n.total:void 0,a=o-r,l=i(a);r=o;e({loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&o<=s?(s-o)/l:void 0,event:n,lengthComputable:null!=s,[t?"download":"upload"]:!0})}),n)},un=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},dn=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return wt.asap((()=>e(...n)))},hn=Vt.hasStandardBrowserEnv?function(){const e=Vt.navigator&&/(msie|trident)/i.test(Vt.navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=wt.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0},pn=Vt.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const s=[e+"="+encodeURIComponent(t)];wt.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),wt.isString(r)&&s.push("path="+r),wt.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function fn(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const mn=e=>e instanceof en?{...e}:e;function gn(e,t){t=t||{};const n={};function r(e,t,n){return wt.isPlainObject(e)&&wt.isPlainObject(t)?wt.merge.call({caseless:n},e,t):wt.isPlainObject(t)?wt.merge({},t):wt.isArray(t)?t.slice():t}function i(e,t,n){return wt.isUndefined(t)?wt.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function o(e,t){if(!wt.isUndefined(t))return r(void 0,t)}function s(e,t){return wt.isUndefined(t)?wt.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}const l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t)=>i(mn(e),mn(t),!0)};return wt.forEach(Object.keys(Object.assign({},e,t)),(function(r){const o=l[r]||i,s=o(e[r],t[r],r);wt.isUndefined(s)&&o!==a||(n[r]=s)})),n}const yn=e=>{const t=gn({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:s,headers:a,auth:l}=t;if(t.headers=a=en.from(a),t.url=Mt(fn(t.baseURL,t.url),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),wt.isFormData(r))if(Vt.hasStandardBrowserEnv||Vt.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(Vt.hasStandardBrowserEnv&&(i&&wt.isFunction(i)&&(i=i(t)),i||!1!==i&&hn(t.url))){const e=o&&s&&pn.read(s);e&&a.set(o,e)}return t},vn="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=yn(e);let i=r.data;const o=en.from(r.headers).normalize();let s,a,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:p}=r;function f(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=en.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());sn((function(e){t(e),f()}),(function(e){n(e),f()}),{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new _t("Request aborted",_t.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new _t("Network Error",_t.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||Lt;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new _t(t,i.clarifyTimeoutError?_t.ETIMEDOUT:_t.ECONNABORTED,e,m)),m=null},void 0===i&&o.setContentType(null),"setRequestHeader"in m&&wt.forEach(o.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),wt.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),d&&"json"!==d&&(m.responseType=r.responseType),p&&([l,u]=cn(p,!0),m.addEventListener("progress",l)),h&&m.upload&&([a,c]=cn(h),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(s=t=>{m&&(n(!t||t.type?new on(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);y&&-1===Vt.protocols.indexOf(y)?n(new _t("Unsupported protocol "+y+":",_t.ERR_BAD_REQUEST,e)):m.send(i||null)}))},bn=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;r.abort(t instanceof _t?t:new on(t instanceof Error?t.message:t))}};let o=t&&setTimeout((()=>{o=null,i(new _t(`timeout ${t} of ms exceeded`,_t.ETIMEDOUT))}),t);const s=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:a}=r;return a.unsubscribe=()=>wt.asap(s),a}},wn=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},xn=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},kn=(e,t,n,r)=>{const i=async function*(e,t){for await(const n of xn(e))yield*wn(n,t)}(e,t);let o,s=0,a=e=>{o||(o=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return a(),void e.close();let o=r.byteLength;if(n){let e=s+=o;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw a(t),t}},cancel:e=>(a(e),i.return())},{highWaterMark:2})},Sn="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,_n=Sn&&"function"===typeof ReadableStream,En=Sn&&("function"===typeof TextEncoder?(Cn=new TextEncoder,e=>Cn.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Cn;const On=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(RN){return!1}},Nn=_n&&On((()=>{let e=!1;const t=new Request(Vt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Tn=_n&&On((()=>wt.isReadableStream(new Response("").body))),An={stream:Tn&&(e=>e.body)};var jn;Sn&&(jn=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!An[e]&&(An[e]=wt.isFunction(jn[e])?t=>t[e]():(t,n)=>{throw new _t(`Response type '${e}' is not supported`,_t.ERR_NOT_SUPPORT,n)})})));const Pn=async(e,t)=>{const n=wt.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(wt.isBlob(e))return e.size;if(wt.isSpecCompliantForm(e)){const t=new Request(Vt.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return wt.isArrayBufferView(e)||wt.isArrayBuffer(e)?e.byteLength:(wt.isURLSearchParams(e)&&(e+=""),wt.isString(e)?(await En(e)).byteLength:void 0)})(t):n},In=Sn&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:o,timeout:s,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=yn(e);c=c?(c+"").toLowerCase():"text";let p,f=bn([i,o&&o.toAbortSignal()],s);const m=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(l&&Nn&&"get"!==n&&"head"!==n&&0!==(g=await Pn(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(wt.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=un(g,cn(dn(l)));r=kn(n.body,65536,e,t)}}wt.isString(d)||(d=d?"include":"omit");const i="credentials"in Request.prototype;p=new Request(t,{...h,signal:f,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:i?d:void 0});let o=await fetch(p);const s=Tn&&("stream"===c||"response"===c);if(Tn&&(a||s&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=o[t]}));const t=wt.toFiniteNumber(o.headers.get("content-length")),[n,r]=a&&un(t,cn(dn(a),!0))||[];o=new Response(kn(o.body,65536,n,(()=>{r&&r(),m&&m()})),e)}c=c||"text";let y=await An[wt.findKey(An,c)||"text"](o,e);return!s&&m&&m(),await new Promise(((t,n)=>{sn(t,n,{data:y,headers:en.from(o.headers),status:o.status,statusText:o.statusText,config:e,request:p})}))}catch(y){if(m&&m(),y&&"TypeError"===y.name&&/fetch/i.test(y.message))throw Object.assign(new _t("Network Error",_t.ERR_NETWORK,e,p),{cause:y.cause||y});throw _t.from(y,y&&y.code,e,p)}}),Rn={http:null,xhr:vn,fetch:In};wt.forEach(Rn,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(RN){}Object.defineProperty(e,"adapterName",{value:t})}}));const Mn=e=>`- ${e}`,$n=e=>wt.isFunction(e)||null===e||!1===e,Ln=e=>{e=wt.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){let t;if(n=e[o],r=n,!$n(n)&&(r=Rn[(t=String(n)).toLowerCase()],void 0===r))throw new _t(`Unknown adapter '${t}'`);if(r)break;i[t||"#"+o]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return`adapter ${t} `+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(Mn).join("\n"):" "+Mn(e[0]):"as no adapter specified";throw new _t("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function Dn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new on(null,e)}function zn(e){Dn(e),e.headers=en.from(e.headers),e.data=tn.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Ln(e.adapter||Jt.adapter)(e).then((function(t){return Dn(e),t.data=tn.call(e,e.transformResponse,t),t.headers=en.from(t.headers),t}),(function(t){return nn(t)||(Dn(e),t&&t.response&&(t.response.data=tn.call(e,e.transformResponse,t.response),t.response.headers=en.from(t.response.headers))),Promise.reject(t)}))}const Fn="1.7.7",Bn={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Bn[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Un={};Bn.transitional=function(e,t,n){function r(e,t){return"[Axios v1.7.7] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,o)=>{if(!1===e)throw new _t(r(i," has been removed"+(t?" in "+t:"")),_t.ERR_DEPRECATED);return t&&!Un[i]&&(Un[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}};const Hn={assertOptions:function(e,t,n){if("object"!==typeof e)throw new _t("options must be an object",_t.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],s=t[o];if(s){const t=e[o],n=void 0===t||s(t,o,e);if(!0!==n)throw new _t("option "+o+" must be "+n,_t.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new _t("Unknown option "+o,_t.ERR_BAD_OPTION)}},validators:Bn},Vn=Hn.validators;class Wn{constructor(e){this.defaults=e,this.interceptors={request:new $t,response:new $t}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(RN){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=gn(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&Hn.assertOptions(n,{silentJSONParsing:Vn.transitional(Vn.boolean),forcedJSONParsing:Vn.transitional(Vn.boolean),clarifyTimeoutError:Vn.transitional(Vn.boolean)},!1),null!=r&&(wt.isFunction(r)?t.paramsSerializer={serialize:r}:Hn.assertOptions(r,{encode:Vn.function,serialize:Vn.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&wt.merge(i.common,i[t.method]);i&&wt.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=en.concat(o,i);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!a){const e=[zn.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=s.length;let h=t;for(d=0;d<u;){const e=s[d++],t=s[d++];try{h=e(h)}catch(p){t.call(this,p);break}}try{c=zn.call(this,h)}catch(p){return Promise.reject(p)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return Mt(fn((e=gn(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}wt.forEach(["delete","get","head","options"],(function(e){Wn.prototype[e]=function(t,n){return this.request(gn(n||{},{method:e,url:t,data:(n||{}).data}))}})),wt.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(gn(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Wn.prototype[e]=t(),Wn.prototype[e+"Form"]=t(!0)}));const qn=Wn;class Jn{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new on(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Jn((function(t){e=t})),cancel:e}}}const Kn=Jn;const Gn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Gn).forEach((e=>{let[t,n]=e;Gn[n]=t}));const Zn=Gn;const Yn=function e(t){const n=new qn(t),r=Me(qn.prototype.request,n);return wt.extend(r,qn.prototype,n,{allOwnKeys:!0}),wt.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(gn(t,n))},r}(Jt);Yn.Axios=qn,Yn.CanceledError=on,Yn.CancelToken=Kn,Yn.isCancel=nn,Yn.VERSION=Fn,Yn.toFormData=Tt,Yn.AxiosError=_t,Yn.Cancel=Yn.CanceledError,Yn.all=function(e){return Promise.all(e)},Yn.spread=function(e){return function(t){return e.apply(null,t)}},Yn.isAxiosError=function(e){return wt.isObject(e)&&!0===e.isAxiosError},Yn.mergeConfig=gn,Yn.AxiosHeaders=en,Yn.formToJSON=e=>Wt(wt.isHTMLForm(e)?new FormData(e):e),Yn.getAdapter=Ln,Yn.HttpStatusCode=Zn,Yn.default=Yn;const Xn=Yn.create({baseURL:"http://localhost:5000/api",headers:{"Content-Type":"application/json"},timeout:15e3});Xn.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),console.log("Making request to:",`${e.baseURL}${e.url}`),e}),(e=>(console.error("Request error:",e),Promise.reject(e)))),Xn.interceptors.response.use((e=>e),(e=>("ECONNABORTED"===e.code?console.error("Request timed out"):e.response?console.error("Response error:",e.response.status,e.response.data):console.error("Network error:",e.message),Promise.reject(e))));const Qn=Xn,er=n.p+"static/media/logo-2.40911710888561ee76d2.png";var tr=n(579);const nr=(0,a.createContext)(),rr=e=>{let{children:t}=e;const[n,r]=(0,a.useState)({token:localStorage.getItem("token")||null,user:JSON.parse(localStorage.getItem("user"))||null});(0,a.useEffect)((()=>{(async()=>{if(n.token&&!n.user)try{const e=(await Qn.get("/users/profile",{headers:{Authorization:`Bearer ${n.token}`}})).data;r((t=>({...t,user:e}))),localStorage.setItem("user",JSON.stringify(e))}catch(e){console.error("Error fetching user profile:",e),r({token:null,user:null}),localStorage.removeItem("token"),localStorage.removeItem("user")}})()}),[n.token]);return(0,tr.jsx)(nr.Provider,{value:{auth:n,setAuth:r,login:(e,t)=>{localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(t)),r({token:e,user:t})},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),r({token:null,user:null})}},children:t})},ir=()=>{const e=oe(),{login:t}=(0,a.useContext)(nr),[n,r]=(0,a.useState)({email:"",password:""}),[i,o]=(0,a.useState)({}),[s,l]=(0,a.useState)(""),[c,u]=(0,a.useState)(!1),[d,h]=(0,a.useState)(""),p=e=>{r({...n,[e.target.name]:e.target.value}),i[e.target.name]&&o({...i,[e.target.name]:""}),s&&l("")};return(0,tr.jsx)("div",{className:"bg-[#9500F0] min-h-screen flex justify-center items-center",children:(0,tr.jsxs)("div",{className:"bg-white flex flex-col md:flex-row w-full max-w-4xl shadow-lg rounded-lg overflow-hidden",children:[(0,tr.jsxs)("div",{className:"flex-1 flex flex-col justify-center items-center p-6 md:p-10 bg-gray-100",children:[(0,tr.jsx)("img",{src:er,alt:"Logo",className:"w-32 h-32 md:w-48 md:h-48 object-contain"}),(0,tr.jsx)("div",{className:"font-[Mclaren] text-4xl md:text-5xl text-[#9500F0] mt-5 text-center",children:"QuillQuest"})]}),(0,tr.jsxs)("div",{className:"flex-1 flex flex-col justify-center items-center p-6 md:p-10",children:[(0,tr.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-center mb-2",children:"Welcome back!"}),(0,tr.jsx)("p",{className:"text-md text-center mb-4",children:"It's good to see you again"}),(0,tr.jsxs)("form",{onSubmit:async r=>{r.preventDefault();const i=(()=>{const e={};return n.email.trim()?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(n.email)||(e.email="Invalid email address"):e.email="Email is required",n.password||(e.password="Password is required"),e})();if(o(i),!(Object.keys(i).length>0)){u(!0),l(""),h("");try{const r=await Qn.post("/auth/login",{email:n.email,password:n.password}),{token:i,user:o}=r.data;localStorage.setItem("token",i),t(i,o),h("Login successful! Redirecting..."),e("/home")}catch(s){s.response&&s.response.data?l(s.response.data.message||"Login failed"):l("An unexpected error occurred")}finally{u(!1)}}},className:"w-full max-w-md",noValidate:!0,children:[(0,tr.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,tr.jsx)("label",{htmlFor:"email",className:"text-lg mb-2",children:"Email"}),(0,tr.jsx)("input",{type:"email",id:"email",name:"email",value:n.email,onChange:p,className:`w-full px-4 py-2 border ${i.email?"border-red-500":"border-gray-300"} rounded focus:outline-none focus:ring-2 focus:ring-purple-500`,required:!0}),i.email&&(0,tr.jsx)("span",{className:"text-red-500 text-sm mt-1",children:i.email})]}),(0,tr.jsxs)("div",{className:"flex flex-col mb-2",children:[(0,tr.jsx)("label",{htmlFor:"password",className:"text-lg mb-2",children:"Password"}),(0,tr.jsx)("input",{type:"password",id:"password",name:"password",value:n.password,onChange:p,className:`w-full px-4 py-2 border ${i.password?"border-red-500":"border-gray-300"} rounded focus:outline-none focus:ring-2 focus:ring-purple-500`,required:!0}),i.password&&(0,tr.jsx)("span",{className:"text-red-500 text-sm mt-1",children:i.password})]}),(0,tr.jsx)("div",{className:"w-full text-right mb-4",children:(0,tr.jsx)(Pe,{to:"/reset-password",className:"text-purple-700 hover:underline text-sm",children:"Forgot password?"})}),(0,tr.jsx)("button",{type:"submit",disabled:c,className:"w-full bg-[#9500F0] text-white py-3 rounded hover:bg-purple-800 transition disabled:opacity-50",children:c?"Logging in...":"Login"}),s&&(0,tr.jsx)("div",{className:"text-red-500 text-center mt-4",children:s})]}),(0,tr.jsxs)("p",{className:"text-sm text-gray-700 mt-4",children:["Don\u2019t have an account? ",(0,tr.jsx)(Pe,{to:"/register",className:"text-purple-700 hover:underline",children:"Sign up"})]})]})]})})},or=()=>{const e=oe(),{login:t}=(0,a.useContext)(nr),[n,r]=(oe(),(0,a.useState)({email:"",username:"",password:"",confirmPassword:""})),[i,o]=(0,a.useState)({}),[s,l]=(0,a.useState)(""),[c,u]=(0,a.useState)(!1),[d,h]=(0,a.useState)(""),p=e=>{r({...n,[e.target.name]:e.target.value}),i[e.target.name]&&o({...i,[e.target.name]:""}),s&&l("")};return(0,tr.jsx)("div",{className:"register-container",children:(0,tr.jsxs)("div",{className:"register-box",children:[(0,tr.jsx)("h2",{className:"title-text",children:"Create an account"}),(0,tr.jsxs)("form",{onSubmit:async r=>{r.preventDefault();const i=(()=>{const e={};return n.username.trim()?n.username.length<3&&(e.username="Username must be at least 3 characters"):e.username="Username is required",n.email.trim()?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(n.email)||(e.email="Invalid email address"):e.email="Email is required",n.password?n.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",n.confirmPassword?n.password!==n.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",e})();if(o(i),!(Object.keys(i).length>0)){u(!0),l(""),h("");try{const r=await Qn.post("/auth/register",{username:n.username,email:n.email,password:n.password}),{token:i,user:o}=r.data;localStorage.setItem("token",i),t(i,o),h("Registration successful! Redirecting..."),e("/home")}catch(s){s.response&&s.response.data?l(s.response.data.message||"Registration failed"):l("An unexpected error occurred")}finally{u(!1)}}},noValidate:!0,children:[(0,tr.jsxs)("div",{className:"signup-form",children:[(0,tr.jsx)("label",{className:"signup-label",children:"Username"}),(0,tr.jsx)("input",{type:"text",id:"username",name:"username",value:n.username,onChange:p,className:i.username?"input-error":"",required:!0}),i.username&&(0,tr.jsx)("span",{className:"error-text",children:i.username})]}),(0,tr.jsxs)("div",{className:"signup-form",children:[(0,tr.jsx)("label",{className:"signup-label",children:"Email"}),(0,tr.jsx)("input",{type:"email",id:"email",name:"email",value:n.email,onChange:p,className:i.email?"input-error":"",required:!0}),i.email&&(0,tr.jsx)("span",{className:"error-text",children:i.email})]}),(0,tr.jsxs)("div",{className:"signup-form",children:[(0,tr.jsx)("label",{className:"signup-label",children:"Password"}),(0,tr.jsx)("input",{type:"password",id:"password",name:"password",value:n.password,onChange:p,className:i.password?"input-error":"",required:!0}),i.password&&(0,tr.jsx)("span",{className:"error-text",children:i.password})]}),(0,tr.jsxs)("div",{className:"signup-form",children:[(0,tr.jsx)("label",{className:"signup-label",children:"Confirm Password"}),(0,tr.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:n.confirmPassword,onChange:p,className:i.confirmPassword?"input-error":"",required:!0}),i.confirmPassword&&(0,tr.jsx)("span",{className:"error-text",children:i.confirmPassword})]}),(0,tr.jsx)("button",{type:"signup-form",disabled:c,children:c?"Registering...":"Register"})]}),(0,tr.jsxs)("p",{className:"login-link",children:["Already have an account? ",(0,tr.jsx)(Pe,{to:"/login",children:"Log in"})]})]})})};var sr=n(1560),ar=n(4444),lr=n(3639),cr=n(5540);const ur=n.p+"static/media/logo-3.2043fc651329c6d712ab.png";var dr=n(4802);const hr=()=>{const{auth:e,logout:t}=(0,a.useContext)(nr),[n,r]=(0,a.useState)(!1),[i,o]=(0,a.useState)([]),[s,l]=(0,a.useState)(!1),[c,u]=(0,a.useState)("bg-purple-600"),d=(0,a.useRef)(null),h=(0,a.useRef)(null),[p,f]=(0,a.useState)(""),m=()=>{r(!n)};return(0,a.useEffect)((()=>{const e=e=>{d.current&&!d.current.contains(e.target)&&r(!1),h.current&&!h.current.contains(e.target)&&l(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]),(0,a.useEffect)((()=>{e.user&&(async()=>{try{const t=await Qn.get("/notifications",{headers:{Authorization:`Bearer ${e.token}`}});o(t.data)}catch(p){console.error("Error fetching notifications:",p)}})()}),[e.user,e.token]),(0,a.useEffect)((()=>{e.user&&(async()=>{try{const t=await Qn.get("/users/profile",{headers:{Authorization:`Bearer ${e.token}`}});u(t.data.avatarColor||"bg-purple-600")}catch(p){console.error("Error fetching profile data:",p)}})()}),[e.user,e.token]),(0,tr.jsxs)("nav",{className:"flex justify-between items-center bg-[white] shadow-[0_2px_5px_rgba(0,0,0,0.1)] fixed top-[-5px] z-[1000] px-5 py-[5px] rounded-[25px] inset-x-0",children:[(0,tr.jsxs)("div",{className:"flex items-center",children:[(0,tr.jsx)(Pe,{to:"/home",children:(0,tr.jsx)("img",{src:ur,alt:"Logo",className:"h-[50px] mr-2.5"})}),(0,tr.jsx)("div",{className:"text-2xl text-[#9500F0] font-['Mclaren'] hidden sm:block",children:"Quillquest"})]}),(0,tr.jsxs)("div",{className:"flex items-center justify-end w-auto space-x-2",children:[(0,tr.jsx)("button",{className:"lg:hidden bg-[#D9D9D9] mt-0 text-black px-3 py-2 rounded-md hover:text-white hover:bg-[black]",onClick:m,children:(0,tr.jsxs)(Pe,{to:"/essayguidance",className:"",children:[" Create  ",(0,tr.jsx)(cr.A,{})]})}),(0,tr.jsxs)("div",{className:"hidden lg:flex items-center ",children:[(0,tr.jsxs)(Pe,{to:"/home",className:"bg-[#D9D9D9] pl-3 pr-2 py-2 hover:bg-[#333] hover:text-[white] rounded-l-xl",children:[" Home ",(0,tr.jsx)(lr.A,{})]}),(0,tr.jsxs)(Pe,{to:"/essayguidance",className:"bg-[#D9D9D9] pl-2 pr-3 py-2 hover:bg-[#333] hover:text-[white] rounded-r-xl",children:[" Create  ",(0,tr.jsx)(cr.A,{})]})]}),(0,tr.jsxs)("div",{ref:h,className:"relative",children:[(0,tr.jsx)("button",{className:"bg-transparent text-black cursor-pointer flex items-center justify-center h-10 w-10 m-2 p-0 border-[none]","aria-label":"Notifications",onClick:()=>{l(!s)},children:i.some((e=>!e.isRead))?(0,tr.jsx)(ar.A,{fontSize:"large"}):(0,tr.jsx)(sr.A,{fontSize:"large"})}),s&&(0,tr.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg overflow-hidden z-50 top-16",children:[(0,tr.jsx)("div",{className:"p-4 border-b",children:(0,tr.jsx)("h4",{className:"text-lg font-semibold",children:"Notifications"})}),(0,tr.jsx)("div",{className:"max-h-64 overflow-y-auto",children:i.length>0?i.map(((t,n)=>(0,tr.jsx)("div",{className:"p-4 cursor-pointer "+(t.isRead?"bg-gray-100":"bg-white font-bold hover:bg-gray-200"),children:(0,tr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,tr.jsx)("span",{onClick:()=>(async t=>{try{await Qn.put(`/notifications/${t}/read`,{},{headers:{Authorization:`Bearer ${e.token}`}}),o((e=>e.map((e=>e._id===t?{...e,isRead:!0}:e))))}catch(p){console.error("Error marking notification as read:",p)}})(t._id),children:t.message}),(0,tr.jsx)("button",{className:"color-[black] w-auto h-auto bg-transparent hover:bg-[red] ml-2",onClick:()=>(async t=>{try{await Qn.delete(`/notifications/${t}`,{headers:{Authorization:`Bearer ${e.token}`}}),o((e=>e.filter((e=>e._id!==t)))),f("")}catch(p){console.error("Error deleting notification:",p)}})(t._id),children:(0,tr.jsx)(dr.A,{fontSize:"15"})})]})},n))):(0,tr.jsx)("div",{className:"p-4 text-gray-500",children:"No new notifications"})})]})]}),e.user&&(0,tr.jsxs)("div",{ref:d,className:"relative",children:[(0,tr.jsx)("button",{onClick:m,className:`${c} text-white font-bold w-10 h-10 flex items-center justify-center overflow-hidden text-xl rounded-full`,children:e.user.username.charAt(0).toUpperCase()}),n&&(0,tr.jsxs)("div",{className:"absolute right-0 mt-6 w-48 bg-white border border-gray-200 rounded-md shadow-lg z-50",children:[(0,tr.jsx)(Pe,{to:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:m,children:(0,tr.jsx)("span",{children:"Profile"})}),(0,tr.jsx)("button",{className:"block w-full text-center px-4 py-2 mt-0 text-sm text-[white] hover:bg-[black]",onClick:t,children:"Logout"})]})]})]})]})};var pr=n(1007),fr=n(3932),mr=n(1136);Math.pow(10,8);const gr=43200,yr=1440,vr=Symbol.for("constructDateFrom");function br(e,t){return"function"===typeof e?e(t):e&&"object"===typeof e&&vr in e?e[vr](t):e instanceof Date?new e.constructor(t):new Date(t)}function wr(e){return br(e,Date.now())}const xr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function kr(e){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Sr={date:kr({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:kr({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:kr({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},_r={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Er(e){return(t,n)=>{let r;if("formatting"===(n?.context?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,i=n?.width?String(n.width):t;r=e.formattingValues[i]||e.formattingValues[t]}else{const t=e.defaultWidth,i=n?.width?String(n.width):e.defaultWidth;r=e.values[i]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}const Cr={ordinalNumber:(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Er({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Er({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Er({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Er({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Er({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function Or(e){return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],o=t.match(i);if(!o)return null;const s=o[0],a=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(a)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(a,(e=>e.test(s))):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(a,(e=>e.test(s)));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(s.length)}}}const Nr={ordinalNumber:(Tr={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.match(Tr.matchPattern);if(!n)return null;const r=n[0],i=e.match(Tr.parsePattern);if(!i)return null;let o=Tr.valueCallback?Tr.valueCallback(i[0]):i[0];return o=t.valueCallback?t.valueCallback(o):o,{value:o,rest:e.slice(r.length)}}),era:Or({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Or({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Or({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Or({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Or({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var Tr;const Ar={code:"en-US",formatDistance:(e,t,n)=>{let r;const i=xr[e];return r="string"===typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r},formatLong:Sr,formatRelative:(e,t,n,r)=>_r[e],localize:Cr,match:Nr,options:{weekStartsOn:0,firstWeekContainsDate:1}};let jr={};function Pr(){return jr}function Ir(e,t){return br(t||e,e)}function Rr(e){const t=Ir(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Mr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=br.bind(null,e||n.find((e=>"object"===typeof e)));return n.map(i)}function $r(e,t){const n=+Ir(e)-+Ir(t);return n<0?-1:n>0?1:n}function Lr(e,t,n){const[r,i]=Mr(n?.in,e,t);return 12*(r.getFullYear()-i.getFullYear())+(r.getMonth()-i.getMonth())}function Dr(e,t){const n=Ir(e,t?.in);return n.setHours(23,59,59,999),n}function zr(e,t){const n=Ir(e,t?.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Fr(e,t){const n=Ir(e,t?.in);return+Dr(n,t)===+zr(n,t)}function Br(e,t,n){const[r,i,o]=Mr(n?.in,e,e,t),s=$r(i,o),a=Math.abs(Lr(i,o));if(a<1)return 0;1===i.getMonth()&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-s*a);let l=$r(i,o)===-s;Fr(r)&&1===a&&1===$r(r,o)&&(l=!1);const c=s*(a-+l);return 0===c?0:c}function Ur(e,t){return+Ir(e)-+Ir(t)}function Hr(e,t,n){const r=Ur(e,t)/1e3;return(i=n?.roundingMethod,e=>{const t=(i?Math[i]:Math.trunc)(e);return 0===t?0:t})(r);var i}function Vr(e,t,n){const r=Pr(),i=n?.locale??r.locale??Ar,o=$r(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const s=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:o}),[a,l]=Mr(n?.in,...o>0?[t,e]:[e,t]),c=Hr(l,a),u=(Rr(l)-Rr(a))/1e3,d=Math.round((c-u)/60);let h;if(d<2)return n?.includeSeconds?c<5?i.formatDistance("lessThanXSeconds",5,s):c<10?i.formatDistance("lessThanXSeconds",10,s):c<20?i.formatDistance("lessThanXSeconds",20,s):c<40?i.formatDistance("halfAMinute",0,s):c<60?i.formatDistance("lessThanXMinutes",1,s):i.formatDistance("xMinutes",1,s):0===d?i.formatDistance("lessThanXMinutes",1,s):i.formatDistance("xMinutes",d,s);if(d<45)return i.formatDistance("xMinutes",d,s);if(d<90)return i.formatDistance("aboutXHours",1,s);if(d<yr){const e=Math.round(d/60);return i.formatDistance("aboutXHours",e,s)}if(d<2520)return i.formatDistance("xDays",1,s);if(d<gr){const e=Math.round(d/yr);return i.formatDistance("xDays",e,s)}if(d<2*gr)return h=Math.round(d/gr),i.formatDistance("aboutXMonths",h,s);if(h=Br(l,a),h<12){const e=Math.round(d/gr);return i.formatDistance("xMonths",e,s)}{const e=h%12,t=Math.trunc(h/12);return e<3?i.formatDistance("aboutXYears",t,s):e<9?i.formatDistance("overXYears",t,s):i.formatDistance("almostXYears",t+1,s)}}function Wr(e,t){return Vr(e,wr(e),t)}const qr=e=>{let{post:t}=e;const{auth:n}=(0,a.useContext)(nr),[r,i]=(0,a.useState)(t.likes.length),[o,s]=(0,a.useState)(0),[l,c]=(0,a.useState)(t.likes.includes(n.user.id)),[u,d]=(0,a.useState)("bg-purple-600");(0,a.useEffect)((()=>{t.userId&&(async()=>{try{const e=await Qn.get(`/users/${t.userId._id}/profile`,{headers:{Authorization:`Bearer ${n.token}`}});d(e.data.avatarColor||"bg-purple-600")}catch(e){console.error("Error fetching profile data:",e)}})()}),[t.userId,n.token]),(0,a.useEffect)((()=>{if(t.comments){const e=t.comments.reduce(((e,t)=>{var n;return e+((null===(n=t.replies)||void 0===n?void 0:n.length)||0)}),0);s(t.comments.length+e)}}),[t.comments]);return(0,tr.jsxs)("div",{className:"rounded-[10px] bg-[white] shadow-[0_2px_8px_rgba(0,0,0,0.1)] w-[90%] max-w-[800px] mb-5 p-5 ;",children:[(0,tr.jsxs)(Pe,{to:`/posts/${t._id}`,className:"hover:no-underline",children:[(0,tr.jsx)("div",{className:"flex items-center mb-[15px]",children:(0,tr.jsxs)("div",{className:"flex",children:[(0,tr.jsx)("div",{className:`${u} text-[white] font-[bold] w-10 h-10 flex items-center justify-center mr-5 rounded-[50%]`,children:(0,tr.jsx)("span",{className:"font-sans font-bold",children:t.userId.username.charAt(0).toUpperCase()})}),(0,tr.jsxs)("div",{className:"flex flex-col items-baseline",children:[(0,tr.jsx)("span",{className:"font-semibold text-black",children:t.userId.username}),(0,tr.jsxs)("span",{className:"text-[gray] text-[0.85rem]",children:[" \u2022 ",Wr(new Date(t.createdAt),{addSuffix:!0})]})]})]})}),(0,tr.jsx)("h2",{className:"text-black font-bold text-2xl text-left mt-0 mb-[15px] mx-0",children:t.title}),(0,tr.jsxs)("div",{className:"text-base leading-normal text-[#333]",children:[(0,tr.jsx)("div",{className:"flex mb-2.5",children:t.postType&&(0,tr.jsx)("div",{className:"bg-[#9500F0] text-white text-[0.9rem] inline-block px-4 py-1 rounded-[1rem]",children:t.postType})}),(0,tr.jsx)("div",{dangerouslySetInnerHTML:{__html:t.content}})]})]}),(0,tr.jsx)("div",{className:"flex justify-between mt-5",children:(0,tr.jsxs)("span",{children:[l?(0,tr.jsx)(fr.A,{onClick:async()=>{try{const e=await Qn.put(`/posts/${t._id}/unlike`,{},{headers:{Authorization:`Bearer ${n.token}`}});i(e.data.likes),c(!1)}catch(e){console.error("Error unliking the post:",e)}},className:"bg-transparent text-base text-[#9500F0] cursor-pointer m-5 border-[none] hover:no-underline"}):(0,tr.jsx)(pr.A,{onClick:async()=>{try{const e=await Qn.put(`/posts/${t._id}/like`,{},{headers:{Authorization:`Bearer ${n.token}`}});i(e.data.likes),c(!0)}catch(e){console.error("Error liking the post:",e)}},className:"bg-transparent text-base text-[#9500F0] cursor-pointer m-5 border-[none] hover:no-underline"}),(0,tr.jsx)("span",{className:"font-mono text-lg",children:r}),(0,tr.jsx)(Pe,{to:`/posts/${t._id}`,children:(0,tr.jsx)(mr.A,{className:"bg-transparent text-base text-[#9500F0] cursor-pointer m-5 border-[none] hover:no-underline"})}),(0,tr.jsx)("span",{className:"font-mono text-lg",children:o})]})})]})},Jr=()=>{const[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)([]),[i,o]=(0,a.useState)(!0);return(0,a.useEffect)((()=>{(async()=>{try{const e=(await Qn.get("/posts")).data.sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)));t(e),o(!1)}catch(e){console.error("Error fetching posts:",e),o(!1)}})(),(async()=>{try{const e=(await Qn.get("/prompts/all")).data.map((e=>{const t=new Date,n=new Date(e.expiresAt),r=Math.ceil((n-t)/864e5);return{...e,daysRemaining:Math.max(0,r)}}));r(e)}catch(e){console.error("Error fetching prompts:",e)}})()}),[]),(0,tr.jsxs)("div",{className:"bg-[#f8f8f8] min-h-screen pt-20 pb-5 px-5",children:[(0,tr.jsx)(hr,{}),(0,tr.jsxs)("div",{className:"flex flex-col lg:flex-row gap-5 w-full max-w-6xl mx-auto mt-5",children:[(0,tr.jsxs)("div",{className:"rounded-lg w-full lg:w-[30%] bg-[#f0f0f0] overflow-y-auto p-5",children:[(0,tr.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Prompts of the Day"}),n.map(((e,t)=>(0,tr.jsxs)("div",{className:"bg-[white] shadow-[0_2px_4px_rgba(0,0,0,0.1)] mb-[15px] p-[15px] rounded-lg "+(0===e.daysRemaining?"expired":""),children:[(0,tr.jsx)("h3",{className:"text-lg mt-0",children:e.topic}),(0,tr.jsx)("p",{className:"text-sm text-[#666]",children:e.daysRemaining>0?`${e.daysRemaining} days remaining`:"Expired"})]},t)))]}),(0,tr.jsx)("div",{className:"flex flex-col gap-5 items-center flex-1 w-full",children:i?(0,tr.jsx)("p",{children:"Loading..."}):e.map((e=>(0,tr.jsx)(qr,{post:e},e._id)))})]})]})};var Kr=n(2577);const Gr=()=>{const[e,t]=(0,a.useState)(!1),[n,r]=(0,a.useState)(null),[i,o]=(0,a.useState)(null),[s,l]=(0,a.useState)(null),[c,u]=(0,a.useState)(""),[d,h]=(0,a.useState)("bg-purple-600"),[p,f]=(0,a.useState)(0),[m,g]=(0,a.useState)(0),[y,v]=(0,a.useState)(0),[b,w]=(0,a.useState)(!1),[x,k]=(0,a.useState)([]);return(0,a.useEffect)((()=>{(async()=>{try{const e=localStorage.getItem("token"),t=await Qn.get("/users/profile",{headers:{Authorization:`Bearer ${e}`}});l(t.data),r(t.data.username),o(t.data.email),h(t.data.avatarColor||"bg-purple-600")}catch(e){console.error("Error fetching profile:",e),u("Failed to load profile")}})(),(async()=>{try{const e=localStorage.getItem("token");let t=(await Qn.get("/posts/user",{headers:{Authorization:`Bearer ${e}`}})).data;t=t.sort(((e,t)=>new Date(t.createdAt)-new Date(e.createdAt))),k(t),f(t.length);const n=t.reduce(((e,t)=>e+(t.likes?t.likes.length:0)),0);g(n);const r=t.reduce(((e,t)=>e+(t.content?t.content.split(" ").length:0)),0),i=t.length>0?Math.round(r/t.length):0;v(i)}catch(e){console.error("Error fetching posts data:",e),u("Failed to load posts data")}})()}),[]),(0,a.useEffect)((()=>{!s||n===s.username&&i===s.email&&d===s.avatarColor?w(!1):w(!0)}),[n,i,d,s]),s||c?c?(0,tr.jsx)("p",{children:c}):(0,tr.jsxs)("div",{className:"bg-[white] min-h-screen pt-20 pb-5 px-5 flex flex-col items-center",children:[(0,tr.jsx)(hr,{}),(0,tr.jsxs)("div",{className:"w-full max-w-5xl rounded-lg overflow-y-auto p-5",children:[(0,tr.jsx)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden",children:(0,tr.jsxs)("div",{className:"p-8",children:[(0,tr.jsx)("div",{className:"flex flex-col md:flex-row items-center",children:(0,tr.jsxs)("div",{className:"flex flex-col md:items-start md:flex-row md:space-x-6 w-full",children:[(0,tr.jsx)("div",{className:`flex-shrink-0 ${d} w-40 h-40 rounded-full mx-auto md:mx-0`}),e&&(0,tr.jsx)("button",{onClick:()=>{const e=["bg-purple-600","bg-blue-600","bg-green-600","bg-red-600","bg-yellow-600"],t=(e.indexOf(d)+1)%e.length;h(e[t])},className:"w-auto bg-white p-2 rounded-full shadow-md hover:bg-gray-100 mt-4 md:mt-0","aria-label":"Customize avatar",children:(0,tr.jsx)(Kr.A,{className:"w-5 h-5 text-gray-600"})}),(0,tr.jsx)("div",{className:"mt-6 md:mt-0 md:ml-8 w-full",children:e?(0,tr.jsxs)(tr.Fragment,{children:[(0,tr.jsx)("input",{type:"text",value:n,onChange:e=>r(e.target.value),className:"w-full p-4 border rounded-2xl bg-[#D9D9D9] text-xl mb-4",placeholder:s.username}),(0,tr.jsx)("input",{type:"email",value:i,onChange:e=>o(e.target.value),className:"w-full p-4 border rounded-2xl bg-[#D9D9D9] text-xl",placeholder:s.email})]}):(0,tr.jsxs)("div",{className:"flex-col mt-10 ml-10",children:[(0,tr.jsx)("div",{className:"flex",children:(0,tr.jsx)("p",{className:"text-2xl font-semibold mb-4",children:s.username})}),(0,tr.jsx)("div",{className:"flex",children:(0,tr.jsx)("p",{className:"text-2xl font-semibold",children:s.email})})]})})]})}),(0,tr.jsx)("div",{className:"mt-6 flex justify-center md:justify-end",children:e?(0,tr.jsxs)("div",{className:"space-x-2",children:[(0,tr.jsx)("button",{onClick:()=>{r(s.username),o(s.email),h(s.avatarColor||"bg-purple-600"),t(!1)},className:"w-auto px-4 py-2 bg-purple-600 text-white rounded-xl hover:bg-purple-700",children:"Cancel"}),(0,tr.jsx)("button",{onClick:async()=>{try{const e=localStorage.getItem("token"),r=await Qn.put("/users/profile",{username:n||s.username,email:i||s.email,avatarColor:d},{headers:{Authorization:`Bearer ${e}`}});l(r.data),t(!1)}catch(e){console.error("Error saving profile:",e),u("Failed to save profile")}},className:"w-auto px-4 py-2 rounded-xl "+(b?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-600 cursor-not-allowed"),disabled:!b,children:"Save Changes"})]}):(0,tr.jsx)("button",{onClick:()=>t(!0),className:"w-auto px-4 py-2 bg-purple-600 text-white rounded-xl hover:bg-purple-700",children:"Edit Profile"})})]})}),(0,tr.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,tr.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow text-center",children:[(0,tr.jsx)("div",{className:"text-4xl font-bold text-purple-600",children:p}),(0,tr.jsx)("div",{className:"text-sm text-gray-600",children:"Essay Shared"})]}),(0,tr.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow text-center",children:[(0,tr.jsx)("div",{className:"text-4xl font-bold text-purple-600",children:m}),(0,tr.jsx)("div",{className:"text-sm text-gray-600",children:"Total Likes"})]}),(0,tr.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow text-center",children:[(0,tr.jsx)("div",{className:"text-4xl font-bold text-purple-600",children:y}),(0,tr.jsx)("div",{className:"text-sm text-gray-600",children:"AVG. Word Count/Essay"})]})]}),(0,tr.jsxs)("div",{className:"mt-8",children:[(0,tr.jsx)("h3",{className:"text-2xl font-semibold mb-4",children:"All Posts"}),x.length>0?(0,tr.jsx)("div",{className:"space-y-4",children:x.map((e=>(0,tr.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,tr.jsx)(Pe,{to:`/posts/${e._id}`,className:"text-xl font-bold text-purple-600 mb-2 block hover:underline",children:e.title}),(0,tr.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:new Date(e.createdAt).toLocaleString()}),(0,tr.jsx)("div",{dangerouslySetInnerHTML:{__html:e.content}})]},e._id)))}):(0,tr.jsx)("p",{children:"No posts yet."})]})]})]}):(0,tr.jsx)("p",{children:"Loading profile..."})};function Zr(e){this.content=e}Zr.prototype={constructor:Zr,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),o=r.content.slice();return-1==i?o.push(n||e,t):(o[i+1]=t,n&&(o[i]=n)),new Zr(o)},remove:function(e){var t=this.find(e);if(-1==t)return this;var n=this.content.slice();return n.splice(t,2),new Zr(n)},addToStart:function(e,t){return new Zr([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Zr(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),o=r.find(e);return i.splice(-1==o?i.length:o,0,t,n),new Zr(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=Zr.from(e)).size?new Zr(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=Zr.from(e)).size?new Zr(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Zr.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach((function(t,n){e[t]=n})),e},get size(){return this.content.length>>1}},Zr.from=function(e){if(e instanceof Zr)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Zr(t)};const Yr=Zr;function Xr(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),o=t.child(r);if(i!=o){if(!i.sameMarkup(o))return n;if(i.isText&&i.text!=o.text){for(let e=0;i.text[e]==o.text[e];e++)n++;return n}if(i.content.size||o.content.size){let e=Xr(i.content,o.content,n+1);if(null!=e)return e}n+=i.nodeSize}else n+=i.nodeSize}}function Qr(e,t,n,r){for(let i=e.childCount,o=t.childCount;;){if(0==i||0==o)return i==o?null:{a:n,b:r};let s=e.child(--i),a=t.child(--o),l=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){let e=0,t=Math.min(s.text.length,a.text.length);for(;e<t&&s.text[s.text.length-e-1]==a.text[a.text.length-e-1];)e++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){let e=Qr(s.content,a.content,n-1,r-1);if(e)return e}n-=l,r-=l}else n-=l,r-=l}}class ei{constructor(e,t){if(this.content=e,this.size=t||0,null==t)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4?arguments[4]:void 0;for(let o=0,s=0;s<t;o++){let a=this.content[o],l=s+a.nodeSize;if(l>e&&!1!==n(a,r+s,i||null,o)&&a.content.size){let i=s+1;a.nodesBetween(Math.max(0,e-i),Math.min(a.content.size,t-i),n,r+i)}s=l}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,r){let i="",o=!0;return this.nodesBetween(e,t,((s,a)=>{let l=s.isText?s.text.slice(Math.max(e,a)-a,t-a):s.isLeaf?r?"function"===typeof r?r(s):r:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&l||s.isTextblock)&&n&&(o?o=!1:i+=n),i+=l}),0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,r=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(n)&&(r[r.length-1]=t.withText(t.text+n.text),i=1);i<e.content.length;i++)r.push(e.content[i]);return new ei(r,this.size+e.size)}cut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size;if(0==e&&t==this.size)return this;let n=[],r=0;if(t>e)for(let i=0,o=0;o<t;i++){let s=this.content[i],a=o+s.nodeSize;a>e&&((o<e||a>t)&&(s=s.isText?s.cut(Math.max(0,e-o),Math.min(s.text.length,t-o)):s.cut(Math.max(0,e-o-1),Math.min(s.content.size,t-o-1))),n.push(s),r+=s.nodeSize),o=a}return new ei(n,r)}cutByIndex(e,t){return e==t?ei.empty:0==e&&t==this.content.length?this:new ei(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let r=this.content.slice(),i=this.size+t.nodeSize-n.nodeSize;return r[e]=t,new ei(r,i)}addToStart(e){return new ei([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ei(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let r=this.content[t];e(r,n,t),n+=r.nodeSize}}findDiffStart(e){return Xr(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}findDiffEnd(e){return Qr(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size,arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.size)}findIndex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0==e)return ni(0,e);if(e==this.size)return ni(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=r+this.child(n).nodeSize;if(i>=e)return i==e||t>0?ni(n+1,i):ni(n,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((e=>e.toJSON())):null}static fromJSON(e,t){if(!t)return ei.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new ei(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ei.empty;let t,n=0;for(let r=0;r<e.length;r++){let i=e[r];n+=i.nodeSize,r&&i.isText&&e[r-1].sameMarkup(i)?(t||(t=e.slice(0,r)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new ei(t||e,n)}static from(e){if(!e)return ei.empty;if(e instanceof ei)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ei([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ei.empty=new ei([],0);const ti={index:0,offset:0};function ni(e,t){return ti.index=e,ti.offset=t,ti}function ri(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!ri(e[n],t[n]))return!1}else{for(let n in e)if(!(n in t)||!ri(e[n],t[n]))return!1;for(let n in t)if(!(n in e))return!1}return!0}class ii{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let r=0;r<e.length;r++){let i=e[r];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,r));else{if(i.type.excludes(this.type))return e;!n&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,r)),t.push(this),n=!0),t&&t.push(i)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&ri(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);let r=n.create(t.attrs);return n.checkAttrs(r.attrs),r}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return ii.none;if(e instanceof ii)return[e];let t=e.slice();return t.sort(((e,t)=>e.type.rank-t.type.rank)),t}}ii.none=[];class oi extends Error{}class si{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=li(this.content,e+this.openStart,t);return n&&new si(n,this.openStart,this.openEnd)}removeBetween(e,t){return new si(ai(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return si.empty;let n=t.openStart||0,r=t.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new si(ei.fromJSON(e,t.content),n,r)}static maxOpen(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=0,r=0;for(let i=e.firstChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.firstChild)n++;for(let i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)r++;return new si(e,n,r)}}function ai(e,t,n){let{index:r,offset:i}=e.findIndex(t),o=e.maybeChild(r),{index:s,offset:a}=e.findIndex(n);if(i==t||o.isText){if(a!=n&&!e.child(s).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=s)throw new RangeError("Removing non-flat range");return e.replaceChild(r,o.copy(ai(o.content,t-i-1,n-i-1)))}function li(e,t,n,r){let{index:i,offset:o}=e.findIndex(t),s=e.maybeChild(i);if(o==t||s.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let a=li(s.content,t-o-1,n);return a&&e.replaceChild(i,s.copy(a))}function ci(e,t,n){if(n.openStart>e.depth)throw new oi("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new oi("Inconsistent open depths");return ui(e,t,n,0)}function ui(e,t,n,r){let i=e.index(r),o=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let s=ui(e,t,n,r+1);return o.copy(o.content.replaceChild(i,s))}if(n.content.size){if(n.openStart||n.openEnd||e.depth!=r||t.depth!=r){let{start:i,end:s}=function(e,t){let n=t.depth-e.openStart,r=t.node(n).copy(e.content);for(let i=n-1;i>=0;i--)r=t.node(i).copy(ei.from(r));return{start:r.resolveNoCache(e.openStart+n),end:r.resolveNoCache(r.content.size-e.openEnd-n)}}(n,e);return mi(o,gi(e,i,s,t,r))}{let r=e.parent,i=r.content;return mi(r,i.cut(0,e.parentOffset).append(n.content).append(i.cut(t.parentOffset)))}}return mi(o,yi(e,t,r))}function di(e,t){if(!t.type.compatibleContent(e.type))throw new oi("Cannot join "+t.type.name+" onto "+e.type.name)}function hi(e,t,n){let r=e.node(n);return di(r,t.node(n)),r}function pi(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function fi(e,t,n,r){let i=(t||e).node(n),o=0,s=t?t.index(n):i.childCount;e&&(o=e.index(n),e.depth>n?o++:e.textOffset&&(pi(e.nodeAfter,r),o++));for(let a=o;a<s;a++)pi(i.child(a),r);t&&t.depth==n&&t.textOffset&&pi(t.nodeBefore,r)}function mi(e,t){return e.type.checkContent(t),e.copy(t)}function gi(e,t,n,r,i){let o=e.depth>i&&hi(e,t,i+1),s=r.depth>i&&hi(n,r,i+1),a=[];return fi(null,e,i,a),o&&s&&t.index(i)==n.index(i)?(di(o,s),pi(mi(o,gi(e,t,n,r,i+1)),a)):(o&&pi(mi(o,yi(e,t,i+1)),a),fi(t,n,i,a),s&&pi(mi(s,yi(n,r,i+1)),a)),fi(r,null,i,a),new ei(a)}function yi(e,t,n){let r=[];if(fi(null,e,n,r),e.depth>n){pi(mi(hi(e,t,n+1),yi(e,t,n+1)),r)}return fi(t,null,n,r),new ei(r)}si.empty=new si(ei.empty,0,0);class vi{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return null==e?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[3*this.resolveDepth(e)]}index(e){return this.path[3*this.resolveDepth(e)+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)}start(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]}after(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=e.child(t);return n?e.child(t).cut(n):r}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[3*t],r=0==t?0:this.path[3*t-1]+1;for(let i=0;i<e;i++)r+=n.child(i).nodeSize;return r}marks(){let e=this.parent,t=this.index();if(0==e.content.size)return ii.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),r=e.maybeChild(t);if(!n){let e=n;n=r,r=e}let i=n.marks;for(var o=0;o<i.length;o++)!1!==i[o].type.spec.inclusive||r&&i[o].isInSet(r.marks)||(i=i[o--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,r=e.parent.maybeChild(e.index());for(var i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=arguments.length>1?arguments[1]:void 0;if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new ki(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],r=0,i=t;for(let o=e;;){let{index:e,offset:t}=o.content.findIndex(i),s=i-t;if(n.push(o,e,r+t),!s)break;if(o=o.child(e),o.isText)break;i=s-1,r+=t+1}return new vi(t,n,i)}static resolveCached(e,t){let n=xi.get(e);if(n)for(let i=0;i<n.elts.length;i++){let e=n.elts[i];if(e.pos==t)return e}else xi.set(e,n=new bi);let r=n.elts[n.i]=vi.resolve(e,t);return n.i=(n.i+1)%wi,r}}class bi{constructor(){this.elts=[],this.i=0}}const wi=12,xi=new WeakMap;class ki{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const Si=Object.create(null);class _i{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ii.none;this.type=e,this.attrs=t,this.marks=r,this.content=n||ei.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.content.nodesBetween(e,t,n,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,r){return this.content.textBetween(e,t,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&ri(this.attrs,t||e.defaultAttrs||Si)&&ii.sameSet(this.marks,n||ii.none)}copy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e==this.content?this:new _i(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new _i(this.type,this.attrs,this.content,e)}cut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size;return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.content.size,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e==t)return si.empty;let r=this.resolve(e),i=this.resolve(t),o=n?0:r.sharedDepth(t),s=r.start(o),a=r.node(o).content.cut(r.pos-s,i.pos-s);return new si(a,r.depth-o,i.depth-o)}replace(e,t,n){return ci(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:r}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(r==e||t.isText)return t;e-=r+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(0==e)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let r=this.content.child(t-1);return{node:r,index:t-1,offset:n-r.nodeSize}}resolve(e){return vi.resolveCached(this,e)}resolveNoCache(e){return vi.resolve(this,e)}rangeHasMark(e,t,n){let r=!1;return t>e&&this.nodesBetween(e,t,(e=>(n.isInSet(e.marks)&&(r=!0),!r))),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Ci(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ei.empty,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.childCount,o=this.contentMatchAt(e).matchFragment(n,r,i),s=o&&o.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(let a=r;a<i;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0}canReplaceWith(e,t,n,r){if(r&&!this.type.allowsMarks(r))return!1;let i=this.contentMatchAt(e).matchType(n),o=i&&i.matchFragment(this.content,t);return!!o&&o.validEnd}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=ii.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!ii.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((e=>e.type.name))}`);this.content.forEach((e=>e.check()))}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map((e=>e.toJSON()))),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let r=ei.fromJSON(e,t.content),i=e.nodeType(t.type).create(t.attrs,r,n);return i.type.checkAttrs(i.attrs),i}}_i.prototype.text=void 0;class Ei extends _i{constructor(e,t,n,r){if(super(e,t,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Ci(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Ei(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Ei(this.type,this.attrs,e,this.marks)}cut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.text.length;return 0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Ci(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class Oi{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new Ni(e,t);if(null==n.next)return Oi.empty;let r=Ti(n);n.next&&n.err("Unexpected trailing text");let i=function(e){let t=Object.create(null);return n(Mi(e,0));function n(r){let i=[];r.forEach((t=>{e[t].forEach((t=>{let n,{term:r,to:o}=t;if(r){for(let e=0;e<i.length;e++)i[e][0]==r&&(n=i[e][1]);Mi(e,o).forEach((e=>{n||i.push([r,n=[]]),-1==n.indexOf(e)&&n.push(e)}))}}))}));let o=t[r.join(",")]=new Oi(r.indexOf(e.length-1)>-1);for(let e=0;e<i.length;e++){let r=i[e][1].sort(Ri);o.next.push({type:i[e][0],next:t[r.join(",")]||n(r)})}return o}}(function(e){let t=[[]];return i(o(e,0),n()),t;function n(){return t.push([])-1}function r(e,n,r){let i={term:r,to:n};return t[e].push(i),i}function i(e,t){e.forEach((e=>e.to=t))}function o(e,t){if("choice"==e.type)return e.exprs.reduce(((e,n)=>e.concat(o(n,t))),[]);if("seq"!=e.type){if("star"==e.type){let s=n();return r(t,s),i(o(e.expr,s),s),[r(s)]}if("plus"==e.type){let s=n();return i(o(e.expr,t),s),i(o(e.expr,s),s),[r(s)]}if("opt"==e.type)return[r(t)].concat(o(e.expr,t));if("range"==e.type){let s=t;for(let t=0;t<e.min;t++){let t=n();i(o(e.expr,s),t),s=t}if(-1==e.max)i(o(e.expr,s),s);else for(let t=e.min;t<e.max;t++){let t=n();r(s,t),i(o(e.expr,s),t),s=t}return[r(s)]}if("name"==e.type)return[r(t,void 0,e.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let s=o(e.exprs[r],t);if(r==e.exprs.length-1)return s;i(s,t=n())}}}(r));return function(e,t){for(let n=0,r=[e];n<r.length;n++){let e=r[n],i=!e.validEnd,o=[];for(let t=0;t<e.next.length;t++){let{type:n,next:s}=e.next[t];o.push(n.name),!i||n.isText||n.hasRequiredAttrs()||(i=!1),-1==r.indexOf(s)&&r.push(s)}i&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(i,n),i}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.childCount,r=this;for(let i=t;r&&i<n;i++)r=r.matchType(e.child(i).type);return r}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[this];return function i(o,s){let a=o.matchFragment(e,n);if(a&&(!t||a.validEnd))return ei.from(s.map((e=>e.createAndFill())));for(let e=0;e<o.next.length;e++){let{type:t,next:n}=o.next[e];if(!t.isText&&!t.hasRequiredAttrs()&&-1==r.indexOf(n)){r.push(n);let e=i(n,s.concat(t));if(e)return e}}return null}(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),i=r.match;if(i.matchType(e)){let e=[];for(let t=r;t.type;t=t.via)e.push(t.type);return e.reverse()}for(let e=0;e<i.next.length;e++){let{type:o,next:s}=i.next[e];o.isLeaf||o.hasRequiredAttrs()||o.name in t||r.type&&!s.validEnd||(n.push({match:o.contentMatch,type:o,via:r}),t[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];return function t(n){e.push(n);for(let r=0;r<n.next.length;r++)-1==e.indexOf(n.next[r].next)&&t(n.next[r].next)}(this),e.map(((t,n)=>{let r=n+(t.validEnd?"*":" ")+" ";for(let i=0;i<t.next.length;i++)r+=(i?", ":"")+t.next[i].type.name+"->"+e.indexOf(t.next[i].next);return r})).join("\n")}}Oi.empty=new Oi(!0);class Ni{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Ti(e){let t=[];do{t.push(Ai(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function Ai(e){let t=[];do{t.push(ji(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function ji(e){let t=function(e){if(e.eat("(")){let t=Ti(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){let t=function(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let o in n){let e=n[o];e.groups.indexOf(t)>-1&&i.push(e)}0==i.length&&e.err("No node type or group '"+t+"' found");return i}(e,e.next).map((t=>(null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t})));return e.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}e.err("Unexpected token '"+e.next+"'")}(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=Ii(e,t)}return t}function Pi(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function Ii(e,t){let n=Pi(e),r=n;return e.eat(",")&&(r="}"!=e.next?Pi(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function Ri(e,t){return t-e}function Mi(e,t){let n=[];return function t(r){let i=e[r];if(1==i.length&&!i[0].term)return t(i[0].to);n.push(r);for(let e=0;e<i.length;e++){let{term:r,to:o}=i[e];r||-1!=n.indexOf(o)||t(o)}}(t),n.sort(Ri)}function $i(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function Li(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(void 0===i){let t=e[r];if(!t.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=t.default}n[r]=i}return n}function Di(e,t,n,r){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in e){let n=e[i];n.validate&&n.validate(t[i])}}function zi(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new Bi(e,r,t[r]);return n}class Fi{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=zi(e,n.attrs),this.defaultAttrs=$i(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==e),this.isText="text"==e}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Oi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Li(this.attrs,e)}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new _i(this,this.computeAttrs(e),ei.from(t),ii.setFrom(n))}createChecked(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return t=ei.from(t),this.checkContent(t),new _i(this,this.computeAttrs(e),t,ii.setFrom(n))}createAndFill(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(e=this.computeAttrs(e),t=ei.from(t),t.size){let e=this.contentMatch.fillBefore(t);if(!e)return null;t=e.append(t)}let r=this.contentMatch.matchFragment(t),i=r&&r.fillBefore(ei.empty,!0);return i?new _i(this,e,t.append(i),ii.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Di(this.attrs,e,"node",this.name)}allowsMarkType(e){return null==this.markSet||this.markSet.indexOf(e)>-1}allowsMarks(e){if(null==this.markSet)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(null==this.markSet)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:ii.none:e}static compile(e,t){let n=Object.create(null);e.forEach(((e,r)=>n[e]=new Fi(e,t,r)));let r=t.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}}class Bi{constructor(e,t,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate="string"==typeof n.validate?function(e,t,n){let r=n.split("|");return n=>{let i=null===n?"null":typeof n;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${i}`)}}(e,t,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class Ui{constructor(e,t,n,r){this.name=e,this.rank=t,this.schema=n,this.spec=r,this.attrs=zi(e,r.attrs),this.excluded=null;let i=$i(this.attrs);this.instance=i?new ii(this,i):null}create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!e&&this.instance?this.instance:new ii(this,Li(this.attrs,e))}static compile(e,t){let n=Object.create(null),r=0;return e.forEach(((e,i)=>n[e]=new Ui(e,r++,t,i))),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){Di(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Hi{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let r in e)t[r]=e[r];t.nodes=Yr.from(e.nodes),t.marks=Yr.from(e.marks||{}),this.nodes=Fi.compile(this.spec.nodes,this),this.marks=Ui.compile(this.spec.marks,this);let n=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let e=this.nodes[r],t=e.spec.content||"",i=e.spec.marks;if(e.contentMatch=n[t]||(n[t]=Oi.parse(t,this.nodes)),e.inlineContent=e.contentMatch.inlineContent,e.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!e.isInline||!e.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=e}e.markSet="_"==i?null:i?Vi(this,i.split(" ")):""!=i&&e.inlineContent?null:[]}for(let r in this.marks){let e=this.marks[r],t=e.spec.excludes;e.excluded=null==t?[e]:""==t?[]:Vi(this,t.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof Fi))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,n,r)}text(e,t){let n=this.nodes.text;return new Ei(n,n.defaultAttrs,e,ii.setFrom(t))}mark(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return _i.fromJSON(this,e)}markFromJSON(e){return ii.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Vi(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],o=e.marks[i],s=o;if(o)n.push(o);else for(let t in e.marks){let r=e.marks[t];("_"==i||r.spec.group&&r.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=r)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}class Wi{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach((e=>{if(function(e){return null!=e.tag}(e))this.tags.push(e);else if(function(e){return null!=e.style}(e)){let t=/[^=]*/.exec(e.style)[0];n.indexOf(t)<0&&n.push(t),this.styles.push(e)}})),this.normalizeLists=!this.tags.some((t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let n=e.nodes[t.node];return n.contentMatch.matchType(n)}))}parse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Yi(this,t,!1);return n.addAll(e,ii.none,t.from,t.to),n.finish()}parseSlice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new Yi(this,t,!0);return n.addAll(e,ii.none,t.from,t.to),si.maxOpen(n.finish())}matchTag(e,t,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let n=this.tags[r];if(Xi(e,n.tag)&&(void 0===n.namespace||e.namespaceURI==n.namespace)&&(!n.context||t.matchesContext(n.context))){if(n.getAttrs){let t=n.getAttrs(e);if(!1===t)continue;n.attrs=t||void 0}return n}}}matchStyle(e,t,n,r){for(let i=r?this.styles.indexOf(r)+1:0;i<this.styles.length;i++){let r=this.styles[i],o=r.style;if(!(0!=o.indexOf(e)||r.context&&!n.matchesContext(r.context)||o.length>e.length&&(61!=o.charCodeAt(e.length)||o.slice(e.length+1)!=t))){if(r.getAttrs){let e=r.getAttrs(t);if(!1===e)continue;r.attrs=e||void 0}return r}}}static schemaRules(e){let t=[];function n(e){let n=null==e.priority?50:e.priority,r=0;for(;r<t.length;r++){let e=t[r];if((null==e.priority?50:e.priority)<n)break}t.splice(r,0,e)}for(let r in e.marks){let t=e.marks[r].spec.parseDOM;t&&t.forEach((e=>{n(e=Qi(e)),e.mark||e.ignore||e.clearMark||(e.mark=r)}))}for(let r in e.nodes){let t=e.nodes[r].spec.parseDOM;t&&t.forEach((e=>{n(e=Qi(e)),e.node||e.ignore||e.mark||(e.node=r)}))}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Wi(e,Wi.schemaRules(e)))}}const qi={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ji={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Ki={ol:!0,ul:!0};function Gi(e,t,n){return null!=t?(t?1:0)|("full"===t?2:0):e&&"pre"==e.whitespace?3:-5&n}class Zi{constructor(e,t,n,r,i,o){this.type=e,this.attrs=t,this.marks=n,this.solid=r,this.options=o,this.content=[],this.activeMarks=ii.none,this.match=i||(4&o?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(ei.from(e));if(!t){let t,n=this.type.contentMatch;return(t=n.findWrapping(e.type))?(this.match=n,t):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}finish(e){if(!(1&this.options)){let e,t=this.content[this.content.length-1];if(t&&t.isText&&(e=/[ \t\r\n\u000c]+$/.exec(t.text))){let n=t;t.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length))}}let t=ei.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(ei.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!qi.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Yi{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0;let r,i=t.topNode,o=Gi(null,t.preserveWhitespace,0)|(n?4:0);r=i?new Zi(i.type,i.attrs,ii.none,!0,t.topMatch||i.type.contentMatch,o):new Zi(n?null:e.schema.topNodeType,null,ii.none,!0,null,o),this.nodes=[r],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){3==e.nodeType?this.addTextNode(e,t):1==e.nodeType&&this.addElement(e,t)}addTextNode(e,t){let n=e.nodeValue,r=this.top;if(2&r.options||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(1&r.options)n=2&r.options?n.replace(/\r\n?/g,"\n"):n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let t=r.content[r.content.length-1],i=e.previousSibling;(!t||i&&"BR"==i.nodeName||t.isText&&/[ \t\r\n\u000c]$/.test(t.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t),this.findInText(e)}else this.findInside(e)}addElement(e,t,n){let r,i=e.nodeName.toLowerCase();Ki.hasOwnProperty(i)&&this.parser.normalizeLists&&function(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let e=1==t.nodeType?t.nodeName.toLowerCase():null;e&&Ki.hasOwnProperty(e)&&n?(n.appendChild(t),t=n):"li"==e?n=t:e&&(n=null)}}(e);let o=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(r=this.parser.matchTag(e,this,n));if(o?o.ignore:Ji.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e,t);else if(!o||o.skip||o.closeParent){o&&o.closeParent?this.open=Math.max(0,this.open-1):o&&o.skip.nodeType&&(e=o.skip);let n,r=this.top,s=this.needsBlock;if(qi.hasOwnProperty(i))r.content.length&&r.content[0].isInline&&this.open&&(this.open--,r=this.top),n=!0,r.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e,t);let a=o&&o.skip?t:this.readStyles(e,t);a&&this.addAll(e,a),n&&this.sync(r),this.needsBlock=s}else{let n=this.readStyles(e,t);n&&this.addElementByRule(e,o,n,!1===o.consuming?r:void 0)}}leafFallback(e,t){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"),t)}ignoreFallback(e,t){"BR"!=e.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"),t)}readStyles(e,t){let n=e.style;if(n&&n.length)for(let r=0;r<this.parser.matchedStyles.length;r++){let e=this.parser.matchedStyles[r],i=n.getPropertyValue(e);if(i)for(let n;;){let r=this.parser.matchStyle(e,i,this,n);if(!r)break;if(r.ignore)return null;if(t=r.clearMark?t.filter((e=>!r.clearMark(e))):t.concat(this.parser.schema.marks[r.mark].create(r.attrs)),!1!==r.consuming)break;n=r}}return t}addElementByRule(e,t,n,r){let i,o;if(t.node)if(o=this.parser.schema.nodes[t.node],o.isLeaf)this.insertNode(o.create(t.attrs),n)||this.leafFallback(e,n);else{let e=this.enter(o,t.attrs||null,n,t.preserveWhitespace);e&&(i=!0,n=e)}else{let e=this.parser.schema.marks[t.mark];n=n.concat(e.create(t.attrs))}let s=this.top;if(o&&o.isLeaf)this.findInside(e);else if(r)this.addElement(e,n,r);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach((e=>this.insertNode(e,n)));else{let r=e;"string"==typeof t.contentElement?r=e.querySelector(t.contentElement):"function"==typeof t.contentElement?r=t.contentElement(e):t.contentElement&&(r=t.contentElement),this.findAround(e,r,!0),this.addAll(r,n)}i&&this.sync(s)&&this.open--}addAll(e,t,n,r){let i=n||0;for(let o=n?e.childNodes[n]:e.firstChild,s=null==r?null:e.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o,t);this.findAtPoint(e,i)}findPlace(e,t){let n,r;for(let i=this.open;i>=0;i--){let t=this.nodes[i],o=t.findWrapping(e);if(o&&(!n||n.length>o.length)&&(n=o,r=t,!o.length))break;if(t.solid)break}if(!n)return null;this.sync(r);for(let i=0;i<n.length;i++)t=this.enterInner(n[i],null,t,!1);return t}insertNode(e,t){if(e.isInline&&this.needsBlock&&!this.top.type){let e=this.textblockFromContext();e&&(t=this.enterInner(e,null,t))}let n=this.findPlace(e,t);if(n){this.closeExtra();let t=this.top;t.match&&(t.match=t.match.matchType(e.type));let r=ii.none;for(let i of n.concat(e.marks))(t.type?t.type.allowsMarkType(i.type):eo(i.type,e.type))&&(r=i.addToSet(r));return t.content.push(e.mark(r)),!0}return!1}enter(e,t,n,r){let i=this.findPlace(e.create(t),n);return i&&(i=this.enterInner(e,t,n,!0,r)),i}enterInner(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0;this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let s=Gi(e,i,o.options);4&o.options&&0==o.content.length&&(s|=4);let a=ii.none;return n=n.filter((t=>!(o.type?o.type.allowsMarkType(t.type):eo(t.type,e))||(a=t.addToSet(a),!1))),this.nodes.push(new Zi(e,t,a,r,null,s)),this.open++,n}closeExtra(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let t=this.open;t>=0;t--)if(this.nodes[t]==e)return this.open=t,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let t=n.length-1;t>=0;t--)e+=n[t].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node)){t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,r=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),i=-(n?n.depth+1:0)+(r?0:1),o=(e,s)=>{for(;e>=0;e--){let a=t[e];if(""==a){if(e==t.length-1||0==e)continue;for(;s>=i;s--)if(o(e-1,s))return!0;return!1}{let e=s>0||0==s&&r?this.nodes[s].type:n&&s>=i?n.node(s-i).type:null;if(!e||e.name!=a&&-1==e.groups.indexOf(a))return!1;s--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let e=this.parser.schema.nodes[t];if(e.isTextblock&&e.defaultAttrs)return e}}}function Xi(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function Qi(e){let t={};for(let n in e)t[n]=e[n];return t}function eo(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let o=[],s=e=>{o.push(e);for(let n=0;n<e.edgeCount;n++){let{type:r,next:i}=e.edge(n);if(r==t)return!0;if(o.indexOf(i)<0&&s(i))return!0}};if(s(i.contentMatch))return!0}}class to{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;n||(n=ro(t).createDocumentFragment());let r=n,i=[];return e.forEach((e=>{if(i.length||e.marks.length){let n=0,o=0;for(;n<i.length&&o<e.marks.length;){let t=e.marks[o];if(this.marks[t.type.name]){if(!t.eq(i[n][0])||!1===t.type.spec.spanning)break;n++,o++}else o++}for(;n<i.length;)r=i.pop()[1];for(;o<e.marks.length;){let n=e.marks[o++],s=this.serializeMark(n,e.isInline,t);s&&(i.push([n,r]),r.appendChild(s.dom),r=s.contentDOM||s.dom)}}r.appendChild(this.serializeNodeInner(e,t))})),n}serializeNodeInner(e,t){let{dom:n,contentDOM:r}=so(ro(t),this.nodes[e.type.name](e),null,e.attrs);if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,r)}return n}serializeNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.serializeNodeInner(e,t);for(let r=e.marks.length-1;r>=0;r--){let i=this.serializeMark(e.marks[r],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.marks[e.type.name];return r&&so(ro(n),r(e,t),null,e.attrs)}static renderSpec(e,t){return so(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new to(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=no(e.nodes);return t.text||(t.text=e=>e.text),t}static marksFromSchema(e){return no(e.marks)}}function no(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function ro(e){return e.document||window.document}const io=new WeakMap;function oo(e){let t=io.get(e);return void 0===t&&io.set(e,t=function(e){let t=null;function n(e){if(e&&"object"==typeof e)if(Array.isArray(e))if("string"==typeof e[0])t||(t=[]),t.push(e);else for(let t=0;t<e.length;t++)n(e[t]);else for(let t in e)n(e[t])}return n(e),t}(e)),t}function so(e,t,n,r){if("string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;let i,o=t[0];if("string"!=typeof o)throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=oo(r))&&i.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s,a=o.indexOf(" ");a>0&&(n=o.slice(0,a),o=o.slice(a+1));let l=n?e.createElementNS(n,o):e.createElement(o),c=t[1],u=1;if(c&&"object"==typeof c&&null==c.nodeType&&!Array.isArray(c)){u=2;for(let e in c)if(null!=c[e]){let t=e.indexOf(" ");t>0?l.setAttributeNS(e.slice(0,t),e.slice(t+1),c[e]):l.setAttribute(e,c[e])}}for(let d=u;d<t.length;d++){let i=t[d];if(0===i){if(d<t.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}{let{dom:t,contentDOM:o}=so(e,i,n,r);if(l.appendChild(t),o){if(s)throw new RangeError("Multiple content holes");s=o}}}return{dom:l,contentDOM:s}}const ao=Math.pow(2,16);function lo(e,t){return e+t*ao}function co(e){return 65535&e}class uo{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class ho{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.ranges=e,this.inverted=t,!e.length&&ho.empty)return ho.empty}recover(e){let t=0,n=co(e);if(!this.inverted)for(let r=0;r<n;r++)t+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+t+function(e){return(e-(65535&e))/ao}(e)}mapResult(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}map(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!0)}_map(e,t,n){let r=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let a=this.ranges[s]-(this.inverted?r:0);if(a>e)break;let l=this.ranges[s+i],c=this.ranges[s+o],u=a+l;if(e<=u){let i=a+r+((l?e==a?-1:e==u?1:t:t)<0?0:c);if(n)return i;let o=e==(t<0?a:u)?null:lo(s/3,e-a),d=e==a?2:e==u?1:4;return(t<0?e!=a:e!=u)&&(d|=8),new uo(i,d,o)}r+=c-l}return n?e+r:new uo(e+r,0,null)}touches(e,t){let n=0,r=co(t),i=this.inverted?2:1,o=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let t=this.ranges[s]-(this.inverted?n:0);if(t>e)break;let a=this.ranges[s+i];if(e<=t+a&&s==3*r)return!0;n+=this.ranges[s+o]-a}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,i=0;r<this.ranges.length;r+=3){let o=this.ranges[r],s=o-(this.inverted?i:0),a=o+(this.inverted?0:i),l=this.ranges[r+t],c=this.ranges[r+n];e(s,s+l,a,a+c),i+=c-l}}invert(){return new ho(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return 0==e?ho.empty:new ho(e<0?[0,-e,0]:[0,0,e])}}ho.empty=new ho([]);class po{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;this.maps=e,this.mirror=t,this.from=n,this.to=r}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.maps.length;return new po(this.maps,this.mirror,e,t)}copy(){return new po(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)}appendMapping(e){for(let t=0,n=this.maps.length;t<e.maps.length;t++){let r=e.getMirror(t);this.appendMap(e.maps[t],null!=r&&r<t?n+r:void 0)}}getMirror(e){if(this.mirror)for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this.maps.length+e.maps.length;t>=0;t--){let r=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=r&&r>t?n-r-1:void 0)}}invert(){let e=new po;return e.appendMappingInverted(this),e}map(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this.maps[n].map(e,t);return e}mapResult(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._map(e,t,!1)}_map(e,t,n){let r=0;for(let i=this.from;i<this.to;i++){let n=this.maps[i].mapResult(e,t);if(null!=n.recover){let t=this.getMirror(i);if(null!=t&&t>i&&t<this.to){i=t,e=this.maps[t].recover(n.recover);continue}}r|=n.delInfo,e=n.pos}return n?e:new uo(e,r,null)}}const fo=Object.create(null);class mo{getMap(){return ho.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=fo[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in fo)throw new RangeError("Duplicate use of step JSON ID "+e);return fo[e]=t,t.prototype.jsonID=e,t}}class go{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new go(e,null)}static fail(e){return new go(null,e)}static fromReplace(e,t,n,r){try{return go.ok(e.replace(t,n,r))}catch(RN){if(RN instanceof oi)return go.fail(RN.message);throw RN}}}function yo(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let o=e.child(i);o.content.size&&(o=o.copy(yo(o.content,t,o))),o.isInline&&(o=t(o,n,i)),r.push(o)}return ei.fromArray(r)}class vo extends mo{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),i=new si(yo(t.content,((e,t)=>e.isAtom&&t.type.allowsMarkType(this.mark.type)?e.mark(this.mark.addToSet(e.marks)):e),r),t.openStart,t.openEnd);return go.fromReplace(e,this.from,this.to,i)}invert(){return new bo(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new vo(t.pos,n.pos,this.mark)}merge(e){return e instanceof vo&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new vo(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new vo(t.from,t.to,e.markFromJSON(t.mark))}}mo.jsonID("addMark",vo);class bo extends mo{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new si(yo(t.content,(e=>e.mark(this.mark.removeFromSet(e.marks))),e),t.openStart,t.openEnd);return go.fromReplace(e,this.from,this.to,n)}invert(){return new vo(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new bo(t.pos,n.pos,this.mark)}merge(e){return e instanceof bo&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new bo(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new bo(t.from,t.to,e.markFromJSON(t.mark))}}mo.jsonID("removeMark",bo);class wo extends mo{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return go.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return go.fromReplace(e,this.pos,this.pos+1,new si(ei.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let e=this.mark.addToSet(t.marks);if(e.length==t.marks.length){for(let n=0;n<t.marks.length;n++)if(!t.marks[n].isInSet(e))return new wo(this.pos,t.marks[n]);return new wo(this.pos,this.mark)}}return new xo(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new wo(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new wo(t.pos,e.markFromJSON(t.mark))}}mo.jsonID("addNodeMark",wo);class xo extends mo{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return go.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return go.fromReplace(e,this.pos,this.pos+1,new si(ei.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return t&&this.mark.isInSet(t.marks)?new wo(this.pos,this.mark):this}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new xo(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new xo(t.pos,e.markFromJSON(t.mark))}}mo.jsonID("removeNodeMark",xo);class ko extends mo{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];super(),this.from=e,this.to=t,this.slice=n,this.structure=r}apply(e){return this.structure&&_o(e,this.from,this.to)?go.fail("Structure replace would overwrite content"):go.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ho([this.from,this.to-this.from,this.slice.size])}invert(e){return new ko(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new ko(t.pos,Math.max(t.pos,n.pos),this.slice)}merge(e){if(!(e instanceof ko)||e.structure||this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;{let t=this.slice.size+e.slice.size==0?si.empty:new si(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new ko(e.from,this.to,t,this.structure)}}{let t=this.slice.size+e.slice.size==0?si.empty:new si(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new ko(this.from,this.to+(e.to-e.from),t,this.structure)}}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ko(t.from,t.to,si.fromJSON(e,t.slice),!!t.structure)}}mo.jsonID("replace",ko);class So extends mo{constructor(e,t,n,r,i,o){let s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=r,this.slice=i,this.insert=o,this.structure=s}apply(e){if(this.structure&&(_o(e,this.from,this.gapFrom)||_o(e,this.gapTo,this.to)))return go.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return go.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?go.fromReplace(e,this.from,this.to,n):go.fail("Content does not fit in gap")}getMap(){return new ho([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new So(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||r<t.pos||i>n.pos?null:new So(t.pos,n.pos,r,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if("number"!=typeof t.from||"number"!=typeof t.to||"number"!=typeof t.gapFrom||"number"!=typeof t.gapTo||"number"!=typeof t.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new So(t.from,t.to,t.gapFrom,t.gapTo,si.fromJSON(e,t.slice),t.insert,!!t.structure)}}function _o(e,t,n){let r=e.resolve(t),i=n-t,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let e=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!e||e.isLeaf)return!0;e=e.firstChild,i--}}return!1}function Eo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.contentMatch,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=e.doc.nodeAt(t),s=[],a=t+1;for(let l=0;l<o.childCount;l++){let t=o.child(l),c=a+t.nodeSize,u=r.matchType(t.type);if(u){r=u;for(let r=0;r<t.marks.length;r++)n.allowsMarkType(t.marks[r].type)||e.step(new bo(a,c,t.marks[r]));if(i&&t.isText&&"pre"!=n.whitespace){let e,r,i=/\r?\n|\r/g;for(;e=i.exec(t.text);)r||(r=new si(ei.from(n.schema.text(" ",n.allowedMarks(t.marks))),0,0)),s.push(new ko(a+e.index,a+e.index+e[0].length,r))}}else s.push(new ko(a,c,si.empty));a=c}if(!r.validEnd){let t=r.fillBefore(ei.empty,!0);e.replace(a,a,new si(t,0,0))}for(let l=s.length-1;l>=0;l--)e.step(s[l])}function Co(e,t,n){return(0==t||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Oo(e){let t=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let n=e.depth;;--n){let r=e.$from.node(n),i=e.$from.index(n),o=e.$to.indexAfter(n);if(n<e.depth&&r.canReplace(i,o,t))return n;if(0==n||r.type.spec.isolating||!Co(r,i,o))break}return null}function No(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,i=function(e,t){let{parent:n,startIndex:r,endIndex:i}=e,o=n.contentMatchAt(r).findWrapping(t);if(!o)return null;let s=o.length?o[0]:t;return n.canReplaceWith(r,i,s)?o:null}(e,t),o=i&&function(e,t){let{parent:n,startIndex:r,endIndex:i}=e,o=n.child(r),s=t.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:t).contentMatch;for(let l=r;a&&l<i;l++)a=a.matchType(n.child(l).type);return a&&a.validEnd?s:null}(r,t);return o?i.map(To).concat({type:t,attrs:n}).concat(o.map(To)):null}function To(e){return{type:e,attrs:null}}function Ao(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=e.resolve(t),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>o;c--,u--){let e=i.node(c),t=i.index(c);if(e.type.spec.isolating)return!1;let n=e.content.cutByIndex(t,e.childCount),o=r&&r[u+1];o&&(n=n.replaceChild(0,o.type.create(o.attrs)));let s=r&&r[u]||e;if(!e.canReplace(t+1,e.childCount)||!s.type.validContent(n))return!1}let a=i.indexAfter(o),l=r&&r[0];return i.node(o).canReplaceWith(a,a,l?l.type:i.node(o+1).type)}function jo(e,t){let n=e.resolve(t),r=n.index();return Po(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Po(e,t){return!(!e||!t||e.isLeaf||!e.canAppend(t))}function Io(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=e.resolve(t);for(let i=r.depth;;i--){let e,o,s=r.index(i);if(i==r.depth?(e=r.nodeBefore,o=r.nodeAfter):n>0?(e=r.node(i+1),s++,o=r.node(i).maybeChild(s)):(e=r.node(i).maybeChild(s-1),o=r.node(i+1)),e&&!e.isTextblock&&Po(e,o)&&r.node(i).canReplace(s,s+1))return t;if(0==i)break;t=n<0?r.before(i):r.after(i)}}function Ro(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let o=0;o<n.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(0==n.openStart&&n.size?2:1);o++)for(let e=r.depth;e>=0;e--){let t=e==r.depth?0:r.pos<=(r.start(e+1)+r.end(e+1))/2?-1:1,n=r.index(e)+(t>0?1:0),s=r.node(e),a=!1;if(1==o)a=s.canReplace(n,n,i);else{let e=s.contentMatchAt(n).findWrapping(i.firstChild.type);a=e&&s.canReplaceWith(n,n,e[0])}if(a)return 0==t?r.pos:t<0?r.before(e+1):r.after(e+1)}return null}function Mo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:si.empty;if(t==n&&!r.size)return null;let i=e.resolve(t),o=e.resolve(n);return $o(i,o,r)?new ko(t,n,r):new Lo(i,o,r).fit()}function $o(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}mo.jsonID("replaceAround",So);class Lo{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=ei.empty;for(let r=0;r<=e.depth;r++){let t=e.node(r);this.frontier.push({type:t.type,match:t.contentMatchAt(e.indexAfter(r))})}for(let r=e.depth;r>0;r--)this.placed=ei.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(e<0?this.$to:n.doc.resolve(e));if(!r)return null;let i=this.placed,o=n.depth,s=r.depth;for(;o&&s&&1==i.childCount;)i=i.firstChild.content,o--,s--;let a=new si(i,o,s);return e>-1?new So(n.pos,e,this.$to.pos,this.$to.end(),a,t):a.size||n.pos!=this.$to.pos?new ko(n.pos,r.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,r=this.unplaced.openEnd;n<e;n++){let i=t.firstChild;if(t.childCount>1&&(r=0),i.type.spec.isolating&&r<=n){e=n;break}t=i.content}for(let t=1;t<=2;t++)for(let n=1==t?e:this.unplaced.openStart;n>=0;n--){let e,r=null;n?(r=Fo(this.unplaced.content,n-1).firstChild,e=r.content):e=this.unplaced.content;let i=e.firstChild;for(let o=this.depth;o>=0;o--){let e,{type:s,match:a}=this.frontier[o],l=null;if(1==t&&(i?a.matchType(i.type)||(l=a.fillBefore(ei.from(i),!1)):r&&s.compatibleContent(r.type)))return{sliceDepth:n,frontierDepth:o,parent:r,inject:l};if(2==t&&i&&(e=a.findWrapping(i.type)))return{sliceDepth:n,frontierDepth:o,parent:r,wrap:e};if(r&&a.matchType(r.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=Fo(e,t);return!(!r.childCount||r.firstChild.isLeaf)&&(this.unplaced=new si(e,t+1,Math.max(n,r.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,r=Fo(e,t);if(r.childCount<=1&&t>0){let i=e.size-t<=t+r.size;this.unplaced=new si(Do(e,t-1,1),t-1,i?t-1:n)}else this.unplaced=new si(Do(e,t,1),t,n)}placeNodes(e){let{sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:o}=e;for(;this.depth>n;)this.closeFrontierNode();if(o)for(let m=0;m<o.length;m++)this.openFrontierNode(o[m]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-t,c=0,u=[],{match:d,type:h}=this.frontier[n];if(i){for(let e=0;e<i.childCount;e++)u.push(i.child(e));d=d.matchFragment(i)}let p=a.size+t-(s.content.size-s.openEnd);for(;c<a.childCount;){let e=a.child(c),t=d.matchType(e.type);if(!t)break;c++,(c>1||0==l||e.content.size)&&(d=t,u.push(Bo(e.mark(h.allowedMarks(e.marks)),1==c?l:0,c==a.childCount?p:-1)))}let f=c==a.childCount;f||(p=-1),this.placed=zo(this.placed,n,ei.from(u)),this.frontier[n].match=d,f&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=a;m<p;m++){let e=g.lastChild;this.frontier.push({type:e.type,match:e.contentMatchAt(e.childCount)}),g=e.content}this.unplaced=f?0==t?si.empty:new si(Do(s.content,t-1,1),t-1,p<0?s.openEnd:t-1):new si(Do(s.content,t,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!Uo(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:r}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=Uo(e,t,r,n,i);if(o){for(let n=t-1;n>=0;n--){let{match:t,type:r}=this.frontier[n],i=Uo(e,n,r,t,!0);if(!i||i.childCount)continue e}return{depth:t,fit:o,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=zo(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let t=e.node(n),r=t.type.contentMatch.fillBefore(t.content,!0,e.index(n));this.openFrontierNode(t.type,t.attrs,r)}return e}openFrontierNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=zo(this.placed,this.depth,ei.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(ei.empty,!0);e.childCount&&(this.placed=zo(this.placed,this.frontier.length,e))}}function Do(e,t,n){return 0==t?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(Do(e.firstChild.content,t-1,n)))}function zo(e,t,n){return 0==t?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(zo(e.lastChild.content,t-1,n)))}function Fo(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function Bo(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,Bo(r.firstChild,t-1,1==r.childCount?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(ei.empty,!0)))),e.copy(r)}function Uo(e,t,n,r,i){let o=e.node(t),s=i?e.indexAfter(t):e.index(t);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=r.fillBefore(o.content,!0,s);return a&&!function(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}(n,o.content,s)?a:null}function Ho(e,t,n,r,i){if(t<n){let i=e.firstChild;e=e.replaceChild(0,i.copy(Ho(i.content,t+1,n,r,i)))}if(t>r){let t=i.contentMatchAt(0),n=t.fillBefore(e).append(e);e=n.append(t.matchFragment(n).fillBefore(ei.empty,!0))}return e}function Vo(e,t){let n=[];for(let r=Math.min(e.depth,t.depth);r>=0;r--){let i=e.start(r);if(i<e.pos-(e.depth-r)||t.end(r)>t.pos+(t.depth-r)||e.node(r).type.spec.isolating||t.node(r).type.spec.isolating)break;(i==t.start(r)||r==e.depth&&r==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&r&&t.start(r-1)==i-1)&&n.push(r)}return n}class Wo extends mo{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return go.fail("No node at attribute step's position");let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let r=t.type.create(n,null,t.marks);return go.fromReplace(e,this.pos,this.pos+1,new si(ei.from(r),0,t.isLeaf?0:1))}getMap(){return ho.empty}invert(e){return new Wo(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Wo(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if("number"!=typeof t.pos||"string"!=typeof t.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new Wo(t.pos,t.attr,t.value)}}mo.jsonID("attr",Wo);class qo extends mo{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let r in e.attrs)t[r]=e.attrs[r];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return go.ok(n)}getMap(){return ho.empty}invert(e){return new qo(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if("string"!=typeof t.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new qo(t.attr,t.value)}}mo.jsonID("docAttr",qo);let Jo=class extends Error{};Jo=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n},(Jo.prototype=Object.create(Error.prototype)).constructor=Jo,Jo.prototype.name="TransformError";class Ko{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new po}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Jo(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:si.empty,r=Mo(this.doc,e,t,n);return r&&this.step(r),this}replaceWith(e,t,n){return this.replace(e,t,new si(ei.from(n),0,0))}delete(e,t){return this.replace(e,t,si.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return function(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),o=e.doc.resolve(n);if($o(i,o,r))return e.step(new ko(t,n,r));let s=Vo(i,e.doc.resolve(n));0==s[s.length-1]&&s.pop();let a=-(i.depth+1);s.unshift(a);for(let p=i.depth,f=i.pos-1;p>0;p--,f--){let e=i.node(p).type.spec;if(e.defining||e.definingAsContext||e.isolating)break;s.indexOf(p)>-1?a=p:i.before(p)==f&&s.splice(1,0,-p)}let l=s.indexOf(a),c=[],u=r.openStart;for(let p=r.content,f=0;;f++){let e=p.firstChild;if(c.push(e),f==r.openStart)break;p=e.content}for(let p=u-1;p>=0;p--){let e=c[p],t=(d=e.type).spec.defining||d.spec.definingForContent;if(t&&!e.sameMarkup(i.node(Math.abs(a)-1)))u=p;else if(t||!e.type.isTextblock)break}var d;for(let p=r.openStart;p>=0;p--){let t=(p+u+1)%(r.openStart+1),a=c[t];if(a)for(let c=0;c<s.length;c++){let u=s[(c+l)%s.length],d=!0;u<0&&(d=!1,u=-u);let h=i.node(u-1),p=i.index(u-1);if(h.canReplaceWith(p,p,a.type,a.marks))return e.replace(i.before(u),d?o.after(u):n,new si(Ho(r.content,0,r.openStart,t),t,r.openEnd))}}let h=e.steps.length;for(let p=s.length-1;p>=0&&(e.replace(t,n,r),!(e.steps.length>h));p--){let e=s[p];e<0||(t=i.before(e),n=o.after(e))}}(this,e,t,n),this}replaceRangeWith(e,t,n){return function(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=function(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(0==r.parentOffset)for(let i=r.depth-1;i>=0;i--){let e=r.index(i);if(r.node(i).canReplaceWith(e,e,n))return r.before(i+1);if(e>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let e=r.indexAfter(i);if(r.node(i).canReplaceWith(e,e,n))return r.after(i+1);if(e<r.node(i).childCount)return null}return null}(e.doc,t,r.type);null!=i&&(t=n=i)}e.replaceRange(t,n,new si(ei.from(r),0,0))}(this,e,t,n),this}deleteRange(e,t){return function(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),o=Vo(r,i);for(let s=0;s<o.length;s++){let t=o[s],n=s==o.length-1;if(n&&0==t||r.node(t).type.contentMatch.validEnd)return e.delete(r.start(t),i.end(t));if(t>0&&(n||r.node(t-1).canReplace(r.index(t-1),i.indexAfter(t-1))))return e.delete(r.before(t),i.after(t))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(t-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s)return e.delete(r.before(s),n);e.delete(t,n)}(this,e,t),this}lift(e,t){return function(e,t,n){let{$from:r,$to:i,depth:o}=t,s=r.before(o+1),a=i.after(o+1),l=s,c=a,u=ei.empty,d=0;for(let f=o,m=!1;f>n;f--)m||r.index(f)>0?(m=!0,u=ei.from(r.node(f).copy(u)),d++):l--;let h=ei.empty,p=0;for(let f=o,m=!1;f>n;f--)m||i.after(f+1)<i.end(f)?(m=!0,h=ei.from(i.node(f).copy(h)),p++):c++;e.step(new So(l,c,s,a,new si(u.append(h),d,p),u.size-d,!0))}(this,e,t),this}join(e){return function(e,t,n){let r=new ko(t-n,t+n,si.empty,!0);e.step(r)}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this}wrap(e,t){return function(e,t,n){let r=ei.empty;for(let s=n.length-1;s>=0;s--){if(r.size){let e=n[s].type.contentMatch.matchFragment(r);if(!e||!e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ei.from(n[s].type.create(n[s].attrs,r))}let i=t.start,o=t.end;e.step(new So(i,o,i,o,new si(r,0,0),n.length,!0))}(this,e,t),this}setBlockType(e){return function(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=e.steps.length;e.doc.nodesBetween(t,n,((t,n)=>{let s="function"==typeof i?i(t):i;if(t.isTextblock&&!t.hasMarkup(r,s)&&function(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}(e.doc,e.mapping.slice(o).map(n),r)){let i=null;if(r.schema.linebreakReplacement){let e="pre"==r.whitespace,t=!!r.contentMatch.matchType(r.schema.linebreakReplacement);e&&!t?i=!1:!e&&t&&(i=!0)}!1===i&&function(e,t,n,r){t.forEach(((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let i=e.mapping.slice(r).map(n+1+o);e.replaceWith(i,i+1,t.type.schema.text("\n"))}}))}(e,t,n,o),Eo(e,e.mapping.slice(o).map(n,1),r,void 0,null===i);let a=e.mapping.slice(o),l=a.map(n,1),c=a.map(n+t.nodeSize,1);return e.step(new So(l,c,l+1,c-1,new si(ei.from(r.create(s,null,t.marks)),0,0),1,!0)),!0===i&&function(e,t,n,r){t.forEach(((i,o)=>{if(i.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(i.text);){let i=e.mapping.slice(r).map(n+1+o+s.index);e.replaceWith(i,i+1,t.type.schema.linebreakReplacement.create())}}}))}(e,t,n,o),!1}}))}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,arguments.length>2?arguments[2]:void 0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null),this}setNodeMarkup(e,t){return function(e,t,n,r,i){let o=e.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(r,null,i||o.marks);if(o.isLeaf)return e.replaceWith(t,t+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new So(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new si(ei.from(s),0,0),1,!0))}(this,e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0),this}setNodeAttribute(e,t,n){return this.step(new Wo(e,t,n)),this}setDocAttribute(e,t){return this.step(new qo(e,t)),this}addNodeMark(e,t){return this.step(new wo(e,t)),this}removeNodeMark(e,t){if(!(t instanceof ii)){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(!(t=t.isInSet(n.marks)))return this}return this.step(new xo(e,t)),this}split(e){return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=e.doc.resolve(t),o=ei.empty,s=ei.empty;for(let a=i.depth,l=i.depth-n,c=n-1;a>l;a--,c--){o=ei.from(i.node(a).copy(o));let e=r&&r[c];s=ei.from(e?e.type.create(e.attrs,s):i.node(a).copy(s))}e.step(new ko(t,t,new si(o.append(s),n,n),!0))}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2?arguments[2]:void 0),this}addMark(e,t,n){return function(e,t,n,r){let i,o,s=[],a=[];e.doc.nodesBetween(t,n,((e,l,c)=>{if(!e.isInline)return;let u=e.marks;if(!r.isInSet(u)&&c.type.allowsMarkType(r.type)){let c=Math.max(l,t),d=Math.min(l+e.nodeSize,n),h=r.addToSet(u);for(let e=0;e<u.length;e++)u[e].isInSet(h)||(i&&i.to==c&&i.mark.eq(u[e])?i.to=d:s.push(i=new bo(c,d,u[e])));o&&o.to==c?o.to=d:a.push(o=new vo(c,d,r))}})),s.forEach((t=>e.step(t))),a.forEach((t=>e.step(t)))}(this,e,t,n),this}removeMark(e,t,n){return function(e,t,n,r){let i=[],o=0;e.doc.nodesBetween(t,n,((e,s)=>{if(!e.isInline)return;o++;let a=null;if(r instanceof Ui){let t,n=e.marks;for(;t=r.isInSet(n);)(a||(a=[])).push(t),n=t.removeFromSet(n)}else r?r.isInSet(e.marks)&&(a=[r]):a=e.marks;if(a&&a.length){let r=Math.min(s+e.nodeSize,n);for(let e=0;e<a.length;e++){let n,l=a[e];for(let e=0;e<i.length;e++){let t=i[e];t.step==o-1&&l.eq(i[e].style)&&(n=t)}n?(n.to=r,n.step=o):i.push({style:l,from:Math.max(s,t),to:r,step:o})}}})),i.forEach((t=>e.step(new bo(t.from,t.to,t.style))))}(this,e,t,n),this}clearIncompatible(e,t,n){return Eo(this,e,t,n),this}}const Go=Object.create(null);class Zo{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new Yo(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:si.empty,n=t.content.lastChild,r=null;for(let s=0;s<t.openEnd;s++)r=n,n=n.lastChild;let i=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:a,$to:l}=o[s],c=e.mapping.slice(i);e.replaceRange(c.map(a.pos),c.map(l.pos),s?si.empty:t),0==s&&ls(e,i,(n?n.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){let{$from:o,$to:s}=r[i],a=e.mapping.slice(n),l=a.map(o.pos),c=a.map(s.pos);i?e.deleteRange(l,c):(e.replaceRangeWith(l,c,t),ls(e,n,t.isInline?-1:1))}}static findFrom(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.parent.inlineContent?new es(e):as(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(let i=e.depth-1;i>=0;i--){let r=t<0?as(e.node(0),e.node(i),e.before(i+1),e.index(i),t,n):as(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,n);if(r)return r}return null}static near(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.findFrom(e,t)||this.findFrom(e,-t)||new is(e.node(0))}static atStart(e){return as(e,e,0,0,1)||new is(e)}static atEnd(e){return as(e,e,e.content.size,e.childCount,-1)||new is(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=Go[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in Go)throw new RangeError("Duplicate use of selection JSON ID "+e);return Go[e]=t,t.prototype.jsonID=e,t}getBookmark(){return es.between(this.$anchor,this.$head).getBookmark()}}Zo.prototype.visible=!0;class Yo{constructor(e,t){this.$from=e,this.$to=t}}let Xo=!1;function Qo(e){Xo||e.parent.inlineContent||(Xo=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class es extends Zo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;Qo(e),Qo(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return Zo.near(n);let r=e.resolve(t.map(this.anchor));return new es(r.parent.inlineContent?r:n,n)}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:si.empty;if(super.replace(e,t),t==si.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof es&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new ts(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new es(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))}static between(e,t,n){let r=e.pos-t.pos;if(n&&!r||(n=r>=0?1:-1),!t.parent.inlineContent){let e=Zo.findFrom(t,n,!0)||Zo.findFrom(t,-n,!0);if(!e)return Zo.near(t,n);t=e.$head}return e.parent.inlineContent||(0==r||(e=(Zo.findFrom(e,-n,!0)||Zo.findFrom(e,n,!0)).$anchor).pos<t.pos!=r<0)&&(e=t),new es(e,t)}}Zo.jsonID("text",es);class ts{constructor(e,t){this.anchor=e,this.head=t}map(e){return new ts(e.map(this.anchor),e.map(this.head))}resolve(e){return es.between(e.resolve(this.anchor),e.resolve(this.head))}}class ns extends Zo{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:r}=t.mapResult(this.anchor),i=e.resolve(r);return n?Zo.near(i):new ns(i)}content(){return new si(ei.from(this.node),0,0)}eq(e){return e instanceof ns&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new rs(this.anchor)}static fromJSON(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ns(e.resolve(t.anchor))}static create(e,t){return new ns(e.resolve(t))}static isSelectable(e){return!e.isText&&!1!==e.type.spec.selectable}}ns.prototype.visible=!1,Zo.jsonID("node",ns);class rs{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new ts(n,n):new rs(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&ns.isSelectable(n)?new ns(t):Zo.near(t)}}class is extends Zo{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:si.empty;if(t==si.empty){e.delete(0,e.doc.content.size);let t=Zo.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new is(e)}map(e){return new is(e)}eq(e){return e instanceof is}getBookmark(){return ss}}Zo.jsonID("all",is);const ss={map(){return this},resolve:e=>new is(e)};function as(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(t.inlineContent)return es.create(e,n);for(let s=r-(i>0?0:1);i>0?s<t.childCount:s>=0;s+=i){let r=t.child(s);if(r.isAtom){if(!o&&ns.isSelectable(r))return ns.create(e,n-(i<0?r.nodeSize:0))}else{let t=as(e,r,n+i,i<0?r.childCount:0,i,o);if(t)return t}n+=r.nodeSize*i}return null}function ls(e,t,n){let r=e.steps.length-1;if(r<t)return;let i,o=e.steps[r];(o instanceof ko||o instanceof So)&&(e.mapping.maps[r].forEach(((e,t,n,r)=>{null==i&&(i=r)})),e.setSelection(Zo.near(e.doc.resolve(i),n)))}class cs extends Ko{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&this.updated|1,this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=2,this}ensureMarks(e){return ii.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(e,t){super.addStep(e,t),this.updated=-3&this.updated,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||ii.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let r=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(null==n&&(n=t),n=null==n?t:n,!e)return this.deleteRange(t,n);let i=this.storedMarks;if(!i){let e=this.doc.resolve(t);i=n==t?e.marks():e.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,r.text(e,i)),this.selection.empty||this.setSelection(Zo.near(this.selection.$to)),this}}setMeta(e,t){return this.meta["string"==typeof e?e:e.key]=t,this}getMeta(e){return this.meta["string"==typeof e?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function us(e,t){return t&&e?e.bind(t):e}class ds{constructor(e,t,n){this.name=e,this.init=us(t.init,n),this.apply=us(t.apply,n)}}const hs=[new ds("doc",{init:e=>e.doc||e.schema.topNodeType.createAndFill(),apply:e=>e.doc}),new ds("selection",{init:(e,t)=>e.selection||Zo.atStart(t.doc),apply:e=>e.selection}),new ds("storedMarks",{init:e=>e.storedMarks||null,apply:(e,t,n,r)=>r.selection.$cursor?e.storedMarks:null}),new ds("scrollToSelection",{init:()=>0,apply:(e,t)=>e.scrolledIntoView?t+1:t})];class ps{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=hs.slice(),t&&t.forEach((e=>{if(this.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");this.plugins.push(e),this.pluginsByKey[e.key]=e,e.spec.state&&this.fields.push(new ds(e.key,e.spec.state,e))}))}}class fs{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let t=this.config.plugins[n];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),r=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let s=this.config.plugins[o];if(s.spec.appendTransaction){let a=r?r[o].n:0,l=r?r[o].state:this,c=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,l,n);if(c&&n.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!r){r=[];for(let e=0;e<this.config.plugins.length;e++)r.push(e<o?{state:n,n:t.length}:{state:this,n:0})}t.push(c),n=n.applyInner(c),i=!0}r&&(r[o]={state:n,n:t.length})}}if(!i)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new fs(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let i=n[r];t[i.name]=i.apply(e,this[i.name],this,t)}return t}get tr(){return new cs(this)}static create(e){let t=new ps(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new fs(t);for(let r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n}reconfigure(e){let t=new ps(this.schema,e.plugins),n=t.fields,r=new fs(t);for(let i=0;i<n.length;i++){let t=n[i].name;r[t]=this.hasOwnProperty(t)?this[t]:n[i].init(e,r)}return r}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map((e=>e.toJSON()))),e&&"object"==typeof e)for(let n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[n],i=r.spec.state;i&&i.toJSON&&(t[n]=i.toJSON.call(r,this[r.key]))}return t}static fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let r=new ps(e.schema,e.plugins),i=new fs(r);return r.fields.forEach((r=>{if("doc"==r.name)i.doc=_i.fromJSON(e.schema,t.doc);else if("selection"==r.name)i.selection=Zo.fromJSON(i.doc,t.selection);else if("storedMarks"==r.name)t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let o in n){let s=n[o],a=s.spec.state;if(s.key==r.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,o))return void(i[r.name]=a.fromJSON.call(s,e,t[o],i))}i[r.name]=r.init(e,i)}})),i}}function ms(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):"handleDOMEvents"==r&&(i=ms(i,t,{})),n[r]=i}return n}class gs{constructor(e){this.spec=e,this.props={},e.props&&ms(e.props,this,this.props),this.key=e.key?e.key.key:vs("plugin")}getState(e){return e[this.key]}}const ys=Object.create(null);function vs(e){return e in ys?e+"$"+ ++ys[e]:(ys[e]=0,e+"$")}class bs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"key";this.key=vs(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const ws=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},xs=function(e){let t=e.assignedSlot||e.parentNode;return t&&11==t.nodeType?t.host:t};let ks=null;const Ss=function(e,t,n){let r=ks||(ks=document.createRange());return r.setEnd(e,null==n?e.nodeValue.length:n),r.setStart(e,t||0),r},_s=function(e,t,n,r){return n&&(Cs(e,t,n,r,-1)||Cs(e,t,n,r,1))},Es=/^(img|br|input|textarea|hr)$/i;function Cs(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:Os(e))){let n=e.parentNode;if(!n||1!=n.nodeType||Ns(e)||Es.test(e.nodeName)||"false"==e.contentEditable)return!1;t=ws(e)+(i<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(i<0?-1:0)]).contentEditable)return!1;t=i<0?Os(e):0}}}function Os(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Ns(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const Ts=function(e){return e.focusNode&&_s(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function As(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}const js="undefined"!=typeof navigator?navigator:null,Ps="undefined"!=typeof document?document:null,Is=js&&js.userAgent||"",Rs=/Edge\/(\d+)/.exec(Is),Ms=/MSIE \d/.exec(Is),$s=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Is),Ls=!!(Ms||$s||Rs),Ds=Ms?document.documentMode:$s?+$s[1]:Rs?+Rs[1]:0,zs=!Ls&&/gecko\/(\d+)/i.test(Is);zs&&(/Firefox\/(\d+)/.exec(Is)||[0,0])[1];const Fs=!Ls&&/Chrome\/(\d+)/.exec(Is),Bs=!!Fs,Us=Fs?+Fs[1]:0,Hs=!Ls&&!!js&&/Apple Computer/.test(js.vendor),Vs=Hs&&(/Mobile\/\w+/.test(Is)||!!js&&js.maxTouchPoints>2),Ws=Vs||!!js&&/Mac/.test(js.platform),qs=!!js&&/Win/.test(js.platform),Js=/Android \d/.test(Is),Ks=!!Ps&&"webkitFontSmoothing"in Ps.documentElement.style,Gs=Ks?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Zs(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Ys(e,t){return"number"==typeof e?e:e[t]}function Xs(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function Qs(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument;for(let s=n||e.dom;s;s=xs(s)){if(1!=s.nodeType)continue;let e=s,n=e==o.body,a=n?Zs(o):Xs(e),l=0,c=0;if(t.top<a.top+Ys(r,"top")?c=-(a.top-t.top+Ys(i,"top")):t.bottom>a.bottom-Ys(r,"bottom")&&(c=t.bottom-t.top>a.bottom-a.top?t.top+Ys(i,"top")-a.top:t.bottom-a.bottom+Ys(i,"bottom")),t.left<a.left+Ys(r,"left")?l=-(a.left-t.left+Ys(i,"left")):t.right>a.right-Ys(r,"right")&&(l=t.right-a.right+Ys(i,"right")),l||c)if(n)o.defaultView.scrollBy(l,c);else{let n=e.scrollLeft,r=e.scrollTop;c&&(e.scrollTop+=c),l&&(e.scrollLeft+=l);let i=e.scrollLeft-n,o=e.scrollTop-r;t={left:t.left-i,top:t.top-o,right:t.right-i,bottom:t.bottom-o}}if(n||/^(fixed|sticky)$/.test(getComputedStyle(s).position))break}}function ea(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=xs(r));return t}function ta(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:o}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=o&&(r.scrollLeft=o)}}let na=null;function ra(e,t){let n,r,i,o,s=2e8,a=0,l=t.top,c=t.top;for(let u=e.firstChild,d=0;u;u=u.nextSibling,d++){let e;if(1==u.nodeType)e=u.getClientRects();else{if(3!=u.nodeType)continue;e=Ss(u).getClientRects()}for(let h=0;h<e.length;h++){let p=e[h];if(p.top<=l&&p.bottom>=c){l=Math.max(p.bottom,l),c=Math.min(p.top,c);let e=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(e<s){n=u,s=e,r=e&&3==n.nodeType?{left:p.right<t.left?p.right:p.left,top:t.top}:t,1==u.nodeType&&e&&(a=d+(t.left>=(p.left+p.right)/2?1:0));continue}}else p.top>t.top&&!i&&p.left<=t.left&&p.right>=t.left&&(i=u,o={left:Math.max(p.left,Math.min(p.right,t.left)),top:p.top});!n&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(a=d+1)}}return!n&&i&&(n=i,r=o,s=0),n&&3==n.nodeType?function(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let n=la(r,1);if(n.top!=n.bottom&&ia(t,n))return{node:e,offset:i+(t.left>=(n.left+n.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||s&&1==n.nodeType?{node:e,offset:a}:ra(n,r)}function ia(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function oa(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),o=i;;){let n=e.childNodes[o];if(1==n.nodeType){let e=n.getClientRects();for(let r=0;r<e.length;r++){let i=e[r];if(ia(t,i))return oa(n,t,i)}}if((o=(o+1)%r)==i)break}return e}function sa(e,t){let n,r=e.dom.ownerDocument,i=0,o=function(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(Os(r.offsetNode),r.offset)}}catch(r){}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(Os(r.startContainer),r.startOffset)}}}(r,t.left,t.top);o&&({node:n,offset:i}=o);let s,a=(e.root.elementFromPoint?e.root:r).elementFromPoint(t.left,t.top);if(!a||!e.dom.contains(1!=a.nodeType?a.parentNode:a)){let n=e.dom.getBoundingClientRect();if(!ia(t,n))return null;if(a=oa(e.dom,t,n),!a)return null}if(Hs)for(let c=a;n&&c;c=xs(c))c.draggable&&(n=void 0);if(a=function(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}(a,t),n){if(zs&&1==n.nodeType&&(i=Math.min(i,n.childNodes.length),i<n.childNodes.length)){let e,r=n.childNodes[i];"IMG"==r.nodeName&&(e=r.getBoundingClientRect()).right<=t.left&&e.bottom>t.top&&i++}let r;Ks&&i&&1==n.nodeType&&1==(r=n.childNodes[i-1]).nodeType&&"false"==r.contentEditable&&r.getBoundingClientRect().top>=t.top&&i--,n==e.dom&&i==n.childNodes.length-1&&1==n.lastChild.nodeType&&t.top>n.lastChild.getBoundingClientRect().bottom?s=e.state.doc.content.size:0!=i&&1==n.nodeType&&"BR"==n.childNodes[i-1].nodeName||(s=function(e,t,n,r){let i=-1;for(let o=t,s=!1;o!=e.dom;){let t=e.docView.nearestDesc(o,!0);if(!t)return null;if(1==t.dom.nodeType&&(t.node.isBlock&&t.parent||!t.contentDOM)){let e=t.dom.getBoundingClientRect();if(t.node.isBlock&&t.parent&&(!s&&e.left>r.left||e.top>r.top?i=t.posBefore:(!s&&e.right<r.left||e.bottom<r.top)&&(i=t.posAfter),s=!0),!t.contentDOM&&i<0&&!t.node.isText)return(t.node.isBlock?r.top<(e.top+e.bottom)/2:r.left<(e.left+e.right)/2)?t.posBefore:t.posAfter}o=t.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}(e,n,i,t))}null==s&&(s=function(e,t,n){let{node:r,offset:i}=ra(t,n),o=-1;if(1==r.nodeType&&!r.firstChild){let e=r.getBoundingClientRect();o=e.left!=e.right&&n.left>(e.left+e.right)/2?1:-1}return e.docView.posFromDOM(r,i,o)}(e,a,t));let l=e.docView.nearestDesc(a,!0);return{pos:s,inside:l?l.posAtStart-l.border:-1}}function aa(e){return e.top<e.bottom||e.left<e.right}function la(e,t){let n=e.getClientRects();if(n.length){let e=n[t<0?0:n.length-1];if(aa(e))return e}return Array.prototype.find.call(n,aa)||e.getBoundingClientRect()}const ca=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function ua(e,t,n){let{node:r,offset:i,atom:o}=e.docView.domFromPos(t,n<0?-1:1),s=Ks||zs;if(3==r.nodeType){if(!s||!ca.test(r.nodeValue)&&(n<0?i:i!=r.nodeValue.length)){let e=i,t=i,o=n<0?1:-1;return n<0&&!i?(t++,o=-1):n>=0&&i==r.nodeValue.length?(e--,o=1):n<0?e--:t++,da(la(Ss(r,e,t),o),o<0)}{let e=la(Ss(r,i,i),n);if(zs&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let t=la(Ss(r,i-1,i-1),-1);if(t.top==e.top){let n=la(Ss(r,i,i+1),-1);if(n.top!=e.top)return da(n,n.left<t.left)}}return e}}if(!e.state.doc.resolve(t-(o||0)).parent.inlineContent){if(null==o&&i&&(n<0||i==Os(r))){let e=r.childNodes[i-1];if(1==e.nodeType)return ha(e.getBoundingClientRect(),!1)}if(null==o&&i<Os(r)){let e=r.childNodes[i];if(1==e.nodeType)return ha(e.getBoundingClientRect(),!0)}return ha(r.getBoundingClientRect(),n>=0)}if(null==o&&i&&(n<0||i==Os(r))){let e=r.childNodes[i-1],t=3==e.nodeType?Ss(e,Os(e)-(s?0:1)):1!=e.nodeType||"BR"==e.nodeName&&e.nextSibling?null:e;if(t)return da(la(t,1),!1)}if(null==o&&i<Os(r)){let e=r.childNodes[i];for(;e.pmViewDesc&&e.pmViewDesc.ignoreForCoords;)e=e.nextSibling;let t=e?3==e.nodeType?Ss(e,0,s?0:1):1==e.nodeType?e:null:null;if(t)return da(la(t,-1),!0)}return da(la(3==r.nodeType?Ss(r):r,-n),n>=0)}function da(e,t){if(0==e.width)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function ha(e,t){if(0==e.height)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function pa(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}const fa=/[\u0590-\u08ac]/;let ma=null,ga=null,ya=!1;function va(e,t,n){return ma==t&&ga==n?ya:(ma=t,ga=n,ya="up"==n||"down"==n?function(e,t,n){let r=t.selection,i="up"==n?r.$from:r.$to;return pa(e,t,(()=>{let{node:t}=e.docView.domFromPos(i.pos,"up"==n?-1:1);for(;;){let n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.contentDOM||n.dom;break}t=n.dom.parentNode}let r=ua(e,i.pos,1);for(let e=t.firstChild;e;e=e.nextSibling){let t;if(1==e.nodeType)t=e.getClientRects();else{if(3!=e.nodeType)continue;t=Ss(e,0,e.nodeValue.length).getClientRects()}for(let e=0;e<t.length;e++){let i=t[e];if(i.bottom>i.top+1&&("up"==n?r.top-i.top>2*(i.bottom-r.top):i.bottom-r.bottom>2*(r.bottom-i.top)))return!1}}return!0}))}(e,t,n):function(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=e.domSelection();return a?fa.test(r.parent.textContent)&&a.modify?pa(e,t,(()=>{let{focusNode:t,focusOffset:i,anchorNode:o,anchorOffset:s}=e.domSelectionRange(),l=a.caretBidiLevel;a.modify("move",n,"character");let c=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:u,focusOffset:d}=e.domSelectionRange(),h=u&&!c.contains(1==u.nodeType?u:u.parentNode)||t==u&&i==d;try{a.collapse(o,s),t&&(t!=o||i!=s)&&a.extend&&a.extend(t,i)}catch(p){}return null!=l&&(a.caretBidiLevel=l),h})):"left"==n||"backward"==n?o:s:r.pos==r.start()||r.pos==r.end()}(e,t,n))}class ba{constructor(e,t,n,r){this.parent=e,this.children=t,this.dom=n,this.contentDOM=r,this.dirty=0,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let r=this.children[t];if(r==e)return n;n+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(n<0){let n,r;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}{let n,r;if(e==this.contentDOM)n=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.nextSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.nextSibling;return n?this.posBeforeChild(r):this.posAtEnd}}let r;if(e==this.dom&&this.contentDOM)r=t>ws(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!1;break}if(t.previousSibling)break}if(null==r&&t==e.childNodes.length)for(let t=e;;t=t.parentNode){if(t==this.dom){r=!0;break}if(t.nextSibling)break}}return(null==r?n>0:r)?this.posAtEnd:this.posAtStart}nearestDesc(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(let n=!0,r=e;r;r=r.parentNode){let i,o=this.getDesc(r);if(o&&(!t||o.node)){if(!n||!(i=o.nodeDOM)||(1==i.nodeType?i.contains(1==e.nodeType?e:e.parentNode):i==e))return o;n=!1}}}getDesc(e){let t=e.pmViewDesc;for(let n=t;n;n=n.parent)if(n==this)return t}posFromDOM(e,t,n){for(let r=e;r;r=r.parentNode){let i=this.getDesc(r);if(i)return i.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let r=this.children[t],i=n+r.size;if(n==e&&i!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<i)return r.descAt(e-n-r.border);n=i}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,r=0;for(let i=0;n<this.children.length;n++){let t=this.children[n],o=i+t.size;if(o>e||t instanceof Ca){r=e-i;break}i=o}if(r)return this.children[n].domFromPos(r-this.children[n].border,t);for(let i;n&&!(i=this.children[n-1]).size&&i instanceof wa&&i.side>=0;n--);if(t<=0){let e,r=!0;for(;e=n?this.children[n-1]:null,e&&e.dom.parentNode!=this.contentDOM;n--,r=!1);return e&&t&&r&&!e.border&&!e.domAtom?e.domFromPos(e.size,t):{node:this.contentDOM,offset:e?ws(e.dom)+1:0}}{let e,r=!0;for(;e=n<this.children.length?this.children[n]:null,e&&e.dom.parentNode!=this.contentDOM;n++,r=!1);return e&&r&&!e.border&&!e.domAtom?e.domFromPos(0,t):{node:this.contentDOM,offset:e?ws(e.dom):this.contentDOM.childNodes.length}}}parseRange(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,i=-1;for(let o=n,s=0;;s++){let n=this.children[s],a=o+n.size;if(-1==r&&e<=a){let i=o+n.border;if(e>=i&&t<=a-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(e,t,i);e=o;for(let t=s;t>0;t--){let n=this.children[t-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){r=ws(n.dom)+1;break}e-=n.size}-1==r&&(r=0)}if(r>-1&&(a>t||s==this.children.length-1)){t=a;for(let e=s+1;e<this.children.length;e++){let n=this.children[e];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){i=ws(n.dom);break}t+=n.size}-1==i&&(i=this.contentDOM.childNodes.length);break}o=a}return{node:this.contentDOM,from:e,to:t,fromOffset:r,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(1!=t.nodeType||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=Math.min(e,t),o=Math.max(e,t);for(let h=0,p=0;h<this.children.length;h++){let s=this.children[h],a=p+s.size;if(i>p&&o<a)return s.setSelection(e-p-s.border,t-p-s.border,n,r);p=a}let s=this.domFromPos(e,e?-1:1),a=t==e?s:this.domFromPos(t,t?-1:1),l=n.getSelection(),c=!1;if((zs||Hs)&&e==t){let{node:e,offset:t}=s;if(3==e.nodeType){if(c=!(!t||"\n"!=e.nodeValue[t-1]),c&&t==e.nodeValue.length)for(let n,r=e;r;r=r.parentNode){if(n=r.nextSibling){"BR"==n.nodeName&&(s=a={node:n.parentNode,offset:ws(n)+1});break}let e=r.pmViewDesc;if(e&&e.node&&e.node.isBlock)break}}else{let n=e.childNodes[t-1];c=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(zs&&l.focusNode&&l.focusNode!=a.node&&1==l.focusNode.nodeType){let e=l.focusNode.childNodes[l.focusOffset];e&&"false"==e.contentEditable&&(r=!0)}if(!(r||c&&Hs)&&_s(s.node,s.offset,l.anchorNode,l.anchorOffset)&&_s(a.node,a.offset,l.focusNode,l.focusOffset))return;let u=!1;if((l.extend||e==t)&&!c){l.collapse(s.node,s.offset);try{e!=t&&l.extend(a.node,a.offset),u=!0}catch(d){}}if(!u){if(e>t){let e=s;s=a,a=e}let n=document.createRange();n.setEnd(a.node,a.offset),n.setStart(s.node,s.offset),l.removeAllRanges(),l.addRange(n)}}ignoreMutation(e){return!this.contentDOM&&"selection"!=e.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,r=0;r<this.children.length;r++){let i=this.children[r],o=n+i.size;if(n==o?e<=o&&t>=n:e<o&&t>n){let r=n+i.border,s=o-i.border;if(e>=r&&t<=s)return this.dirty=e==n||t==o?2:1,void(e!=r||t!=s||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(e-r,t-r):i.dirty=3);i.dirty=i.dom!=i.contentDOM||i.dom.parentNode!=this.contentDOM||i.children.length?3:2}n=o}this.dirty=2}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=1==e?2:1;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class wa extends ba{constructor(e,t,n,r){let i,o=t.type.toDOM;if("function"==typeof o&&(o=o(n,(()=>i?i.parent?i.parent.posBeforeChild(i):void 0:r))),!t.type.spec.raw){if(1!=o.nodeType){let e=document.createElement("span");e.appendChild(o),o=e}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,i=this}matchesWidget(e){return 0==this.dirty&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return!!t&&t(e)}ignoreMutation(e){return"selection"!=e.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class xa extends ba{constructor(e,t,n,r){super(e,[],t,null),this.textDOM=n,this.text=r}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue}}class ka extends ba{constructor(e,t,n,r){super(e,[],n,r),this.mark=t}static create(e,t,n,r){let i=r.nodeViews[t.type.name],o=i&&i(t,r,n);return o&&o.dom||(o=to.renderSpec(document,t.type.spec.toDOM(t,n),null,t.attrs)),new ka(e,t,o.dom,o.contentDOM||o.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return 3!=this.dirty&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),0!=this.dirty){let e=this.parent;for(;!e.node;)e=e.parent;e.dirty<this.dirty&&(e.dirty=this.dirty),this.dirty=0}}slice(e,t,n){let r=ka.create(this.parent,this.mark,!0,n),i=this.children,o=this.size;t<o&&(i=za(i,t,o,n)),e>0&&(i=za(i,0,e,n));for(let s=0;s<i.length;s++)i[s].parent=r;return r.children=i,r}}class Sa extends ba{constructor(e,t,n,r,i,o,s,a,l){super(e,[],i,o),this.node=t,this.outerDeco=n,this.innerDeco=r,this.nodeDOM=s}static create(e,t,n,r,i,o){let s,a=i.nodeViews[t.type.name],l=a&&a(t,i,(()=>s?s.parent?s.parent.posBeforeChild(s):void 0:o),n,r),c=l&&l.dom,u=l&&l.contentDOM;if(t.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(t.text);else if(!c){let e=to.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs);({dom:c,contentDOM:u}=e)}u||t.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),t.type.spec.draggable&&(c.draggable=!0));let d=c;return c=Ra(c,n,t),l?s=new Oa(e,t,n,r,c,u||null,d,l,i,o+1):t.isText?new Ea(e,t,n,r,c,d,i):new Sa(e,t,n,r,c,u||null,d,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(e.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>ei.empty)}else e.contentElement=this.contentDOM;else e.getContent=()=>this.node.content;return e}matchesNode(e,t,n){return 0==this.dirty&&e.eq(this.node)&&Ma(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,r=t,i=e.composing?this.localCompositionInfo(e,t):null,o=i&&i.pos>-1?i:null,s=i&&i.pos<0,a=new La(this,o&&o.node,e);!function(e,t,n,r){let i=t.locals(e),o=0;if(0==i.length){for(let n=0;n<e.childCount;n++){let s=e.child(n);r(s,i,t.forChild(o,s),n),o+=s.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let u,d,h,p;for(;s<i.length&&i[s].to==o;){let e=i[s++];e.widget&&(u?(d||(d=[u])).push(e):u=e)}if(u)if(d){d.sort(Da);for(let e=0;e<d.length;e++)n(d[e],c,!!l)}else n(u,c,!!l);if(l)p=-1,h=l,l=null;else{if(!(c<e.childCount))break;p=c,h=e.child(c++)}for(let e=0;e<a.length;e++)a[e].to<=o&&a.splice(e--,1);for(;s<i.length&&i[s].from<=o&&i[s].to>o;)a.push(i[s++]);let f=o+h.nodeSize;if(h.isText){let e=f;s<i.length&&i[s].from<e&&(e=i[s].from);for(let t=0;t<a.length;t++)a[t].to<e&&(e=a[t].to);e<f&&(l=h.cut(e-o),h=h.cut(0,e-o),f=e,p=-1)}else for(;s<i.length&&i[s].to<f;)s++;r(h,h.isInline&&!h.isLeaf?a.filter((e=>!e.inline)):a.slice(),t.forChild(o,h),p),o=f}}(this.node,this.innerDeco,((t,i,o)=>{t.spec.marks?a.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!o&&a.syncToMarks(i==this.node.childCount?ii.none:this.node.child(i).marks,n,e),a.placeWidget(t,e,r)}),((t,o,l,c)=>{let u;a.syncToMarks(t.marks,n,e),a.findNodeMatch(t,o,l,c)||s&&e.state.selection.from>r&&e.state.selection.to<r+t.nodeSize&&(u=a.findIndexWithChild(i.node))>-1&&a.updateNodeAt(t,o,l,u,e)||a.updateNextNode(t,o,l,e,c,r)||a.addNode(t,o,l,e,r),r+=t.nodeSize})),a.syncToMarks([],n,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(o&&this.protectLocalComposition(e,o),Na(this.contentDOM,this.children,e),Vs&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))}localCompositionInfo(e,t){let{from:n,to:r}=e.state.selection;if(!(e.state.selection instanceof es)||n<t||r>t+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let e=i.nodeValue,o=function(e,t,n,r){for(let i=0,o=0;i<e.childCount&&o<=r;){let s=e.child(i++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;for(;i<e.childCount;){let t=e.child(i++);if(o+=t.nodeSize,!t.isText)break;l+=t.text}if(o>=n){if(o>=r&&l.slice(r-t.length-a,r-a)==t)return r-t.length;let e=a<r?l.lastIndexOf(t,r-a-1):-1;if(e>=0&&e+t.length+a>=n)return a+e;if(n==r&&l.length>=r+t.length-a&&l.slice(r-a,r-a+t.length)==t)return r}}return-1}(this.node.content,e,n-t,r-t);return o<0?null:{node:i,pos:o,text:e}}return{node:i,pos:-1,text:""}}protectLocalComposition(e,t){let{node:n,pos:r,text:i}=t;if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new xa(this,o,n,i);e.input.compositionNodes.push(s),this.children=za(this.children,r,r+i.length,e,s)}update(e,t,n,r){return!(3==this.dirty||!e.sameMarkup(this.node))&&(this.updateInner(e,t,n,r),!0)}updateInner(e,t,n,r){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0}updateOuterDeco(e){if(Ma(e,this.outerDeco))return;let t=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Pa(this.dom,this.nodeDOM,ja(this.outerDeco,this.node,t),ja(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function _a(e,t,n,r,i){Ra(r,t,e);let o=new Sa(void 0,e,t,n,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class Ea extends Sa{constructor(e,t,n,r,i,o,s){super(e,t,n,r,i,null,o,s,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=0,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return"characterData"!=e.type&&"selection"!=e.type}slice(e,t,n){let r=this.node.cut(e,t),i=document.createTextNode(r.text);return new Ea(this.parent,r,this.outerDeco,this.innerDeco,i,i,n)}markDirty(e,t){super.markDirty(e,t),this.dom==this.nodeDOM||0!=e&&t!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Ca extends ba{parseRule(){return{ignore:!0}}matchesHack(e){return 0==this.dirty&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class Oa extends Sa{constructor(e,t,n,r,i,o,s,a,l,c){super(e,t,n,r,i,o,s,l,c),this.spec=a}update(e,t,n,r){if(3==this.dirty)return!1;if(this.spec.update){let i=this.spec.update(e,t,n);return i&&this.updateInner(e,t,n,r),i}return!(!this.contentDOM&&!e.isLeaf)&&super.update(e,t,n,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,r){this.spec.setSelection?this.spec.setSelection(e,t,n):super.setSelection(e,t,n,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Na(e,t,n){let r=e.firstChild,i=!1;for(let o=0;o<t.length;o++){let s=t[o],a=s.dom;if(a.parentNode==e){for(;a!=r;)r=$a(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(a,r);if(s instanceof ka){let t=r?r.previousSibling:e.lastChild;Na(s.contentDOM,s.children,n),r=t?t.nextSibling:e.firstChild}}for(;r;)r=$a(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const Ta=function(e){e&&(this.nodeName=e)};Ta.prototype=Object.create(null);const Aa=[new Ta];function ja(e,t,n){if(0==e.length)return Aa;let r=n?Aa[0]:new Ta,i=[r];for(let o=0;o<e.length;o++){let s=e[o].type.attrs;if(s){s.nodeName&&i.push(r=new Ta(s.nodeName));for(let e in s){let o=s[e];null!=o&&(n&&1==i.length&&i.push(r=new Ta(t.isInline?"span":"div")),"class"==e?r.class=(r.class?r.class+" ":"")+o:"style"==e?r.style=(r.style?r.style+";":"")+o:"nodeName"!=e&&(r[e]=o))}}}return i}function Pa(e,t,n,r){if(n==Aa&&r==Aa)return t;let i=t;for(let o=0;o<r.length;o++){let t=r[o],s=n[o];if(o){let n;s&&s.nodeName==t.nodeName&&i!=e&&(n=i.parentNode)&&n.nodeName.toLowerCase()==t.nodeName||(n=document.createElement(t.nodeName),n.pmIsDeco=!0,n.appendChild(i),s=Aa[0]),i=n}Ia(i,s||Aa[0],t)}return i}function Ia(e,t,n){for(let r in t)"class"==r||"style"==r||"nodeName"==r||r in n||e.removeAttribute(r);for(let r in n)"class"!=r&&"style"!=r&&"nodeName"!=r&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let t=0;t<r.length;t++)-1==i.indexOf(r[t])&&e.classList.remove(r[t]);for(let t=0;t<i.length;t++)-1==r.indexOf(i[t])&&e.classList.add(i[t]);0==e.classList.length&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let n,r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;n=r.exec(t.style);)e.style.removeProperty(n[1])}n.style&&(e.style.cssText+=n.style)}}function Ra(e,t,n){return Pa(e,e,Aa,ja(t,n,1!=e.nodeType))}function Ma(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function $a(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class La{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=function(e,t){let n=t,r=n.children.length,i=e.childCount,o=new Map,s=[];e:for(;i>0;){let a;for(;;)if(r){let e=n.children[r-1];if(!(e instanceof ka)){a=e,r--;break}n=e,r=e.children.length}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=e.child(i-1))break;--i,o.set(a,i),s.push(a)}}return{index:i,matched:o,matches:s.reverse()}}(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let r=0,i=this.stack.length>>1,o=Math.min(i,e.length);for(;r<o&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&!1!==e[r].type.spec.spanning;)r++;for(;r<i;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let r=-1;for(let t=this.index;t<Math.min(this.index+3,this.top.children.length);t++){let n=this.top.children[t];if(n.matchesMark(e[i])&&!this.isLocked(n.dom)){r=t;break}}if(r>-1)r>this.index&&(this.changed=!0,this.destroyBetween(this.index,r)),this.top=this.top.children[this.index];else{let r=ka.create(this.top,e[i],t,n);this.top.children.splice(this.index,0,r),this.top=r,this.changed=!0}this.index=0,i++}}findNodeMatch(e,t,n,r){let i,o=-1;if(r>=this.preMatch.index&&(i=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&i.matchesNode(e,t,n))o=this.top.children.indexOf(i,this.index);else for(let s=this.index,a=Math.min(this.top.children.length,s+5);s<a;s++){let r=this.top.children[s];if(r.matchesNode(e,t,n)&&!this.preMatch.matched.has(r)){o=s;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,t,n,r,i){let o=this.top.children[r];return 3==o.dirty&&o.dom==o.contentDOM&&(o.dirty=2),!!o.update(e,t,n,i)&&(this.destroyBetween(this.index,r),this.index++,!0)}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let t=e.pmViewDesc;if(t)for(let e=this.index;e<this.top.children.length;e++)if(this.top.children[e]==t)return e;return-1}e=t}}updateNextNode(e,t,n,r,i,o){for(let s=this.index;s<this.top.children.length;s++){let a=this.top.children[s];if(a instanceof Sa){let l=this.preMatch.matched.get(a);if(null!=l&&l!=i)return!1;let c,u=a.dom,d=this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&3!=a.dirty&&Ma(t,a.outerDeco));if(!d&&a.update(e,t,n,r))return this.destroyBetween(this.index,s),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!d&&(c=this.recreateWrapper(a,e,t,n,r,o)))return this.destroyBetween(this.index,s),this.top.children[this.index]=c,c.contentDOM&&(c.dirty=2,c.updateChildren(r,o+1),c.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,r,i,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Ma(n,e.outerDeco)||!r.eq(e.innerDeco))return null;let s=Sa.create(this.top,t,n,r,i,o);if(s.contentDOM){s.children=e.children,e.children=[];for(let e of s.children)e.parent=s}return e.destroy(),s}addNode(e,t,n,r,i){let o=Sa.create(this.top,e,t,n,r,i);o.contentDOM&&o.updateChildren(r,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,n){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(e)||e!=r.widget&&r.widget.type.toDOM.parentNode){let r=new wa(this.top,e,t,n);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof ka;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof Ea)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Hs||Bs)&&e&&"false"==e.dom.contentEditable&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);"IMG"==e&&(n.className="ProseMirror-separator",n.alt=""),"BR"==e&&(n.className="ProseMirror-trailingBreak");let r=new Ca(this.top,[],n,null);t!=this.top?t.children.push(r):t.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||1==e.nodeType&&e.contains(this.lock.parentNode))}}function Da(e,t){return e.type.side-t.type.side}function za(e,t,n,r,i){let o=[];for(let s=0,a=0;s<e.length;s++){let l=e[s],c=a,u=a+=l.size;c>=n||u<=t?o.push(l):(c<t&&o.push(l.slice(0,t-c,r)),i&&(o.push(i),i=void 0),u>n&&o.push(l.slice(n-c,l.size,r)))}return o}function Fa(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),o=i&&0==i.size,s=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a,l,c=r.resolve(s);if(Ts(n)){for(a=s;i&&!i.node;)i=i.parent;let e=i.node;if(i&&e.isAtom&&ns.isSelectable(e)&&i.parent&&(!e.isInline||!function(e,t,n){for(let r=0==t,i=t==Os(e);r||i;){if(e==n)return!0;let t=ws(e);if(!(e=e.parentNode))return!1;r=r&&0==t,i=i&&t==Os(e)}}(n.focusNode,n.focusOffset,i.dom))){let e=i.posBefore;l=new ns(s==e?c:r.resolve(e))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let t=s,i=s;for(let r=0;r<n.rangeCount;r++){let o=n.getRangeAt(r);t=Math.min(t,e.docView.posFromDOM(o.startContainer,o.startOffset,1)),i=Math.max(i,e.docView.posFromDOM(o.endContainer,o.endOffset,-1))}if(t<0)return null;[a,s]=i==e.state.selection.anchor?[i,t]:[t,i],c=r.resolve(s)}else a=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let u=r.resolve(a);if(!l){l=Ga(e,u,c,"pointer"==t||e.state.selection.head<c.pos&&!o?1:-1)}return l}function Ba(e){return e.editable?e.hasFocus():Ya(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Ua(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.state.selection;if(Ja(e,n),Ba(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&Bs){let t=e.domSelectionRange(),n=e.domObserver.currentSelection;if(t.anchorNode&&n.anchorNode&&_s(t.anchorNode,t.anchorOffset,n.anchorNode,n.anchorOffset))return e.input.mouseDown.delayedSelectionSync=!0,void e.domObserver.setCurSelection()}if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){let t=e.domSelection(),n=document.createRange();if(!t)return;let r=e.cursorWrapper.dom,i="IMG"==r.nodeName;i?n.setStart(r.parentNode,ws(r)+1):n.setStart(r,0);n.collapse(!0),t.removeAllRanges(),t.addRange(n),!i&&!e.state.selection.visible&&Ls&&Ds<=11&&(r.disabled=!0,r.disabled=!1)}(e);else{let r,i,{anchor:o,head:s}=n;!Ha||n instanceof es||(n.$from.parent.inlineContent||(r=Va(e,n.from)),n.empty||n.$from.parent.inlineContent||(i=Va(e,n.to))),e.docView.setSelection(o,s,e.root,t),Ha&&(r&&qa(r),i&&qa(i)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{n.anchorNode==r&&n.anchorOffset==i||(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout((()=>{Ba(e)&&!e.state.selection.visible||e.dom.classList.remove("ProseMirror-hideselection")}),20))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const Ha=Hs||Bs&&Us<63;function Va(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(Hs&&i&&"false"==i.contentEditable)return Wa(i);if((!i||"false"==i.contentEditable)&&(!o||"false"==o.contentEditable)){if(i)return Wa(i);if(o)return Wa(o)}}function Wa(e){return e.contentEditable="true",Hs&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function qa(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Ja(e,t){if(t instanceof ns){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(Ka(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else Ka(e)}function Ka(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function Ga(e,t,n,r){return e.someProp("createSelectionBetween",(r=>r(e,t,n)))||es.between(t,n,r)}function Za(e){return!(e.editable&&!e.hasFocus())&&Ya(e)}function Ya(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(n){return!1}}function Xa(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),o=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return o&&Zo.findFrom(o,t)}function Qa(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function el(e,t,n){let r=e.state.selection;if(!(r instanceof es)){if(r instanceof ns&&r.node.isInline)return Qa(e,new es(t>0?r.$to:r.$from));{let n=Xa(e.state,t);return!!n&&Qa(e,n)}}if(n.indexOf("s")>-1){let{$head:n}=r,i=n.textOffset?null:t<0?n.nodeBefore:n.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=e.state.doc.resolve(n.pos+i.nodeSize*(t<0?-1:1));return Qa(e,new es(r.$anchor,o))}if(!r.empty)return!1;if(e.endOfTextblock(t>0?"forward":"backward")){let n=Xa(e.state,t);return!!(n&&n instanceof ns)&&Qa(e,n)}if(!(Ws&&n.indexOf("m")>-1)){let n,i=r.$head,o=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText)return!1;let s=t<0?i.pos-o.nodeSize:i.pos;return!!(o.isAtom||(n=e.docView.descAt(s))&&!n.contentDOM)&&(ns.isSelectable(o)?Qa(e,new ns(t<0?e.state.doc.resolve(i.pos-o.nodeSize):i)):!!Ks&&Qa(e,new es(e.state.doc.resolve(t<0?s:s+o.nodeSize))))}}function tl(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function nl(e,t){let n=e.pmViewDesc;return n&&0==n.size&&(t<0||e.nextSibling||"BR"!=e.nodeName)}function rl(e,t){return t<0?function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,o,s=!1;zs&&1==n.nodeType&&r<tl(n)&&nl(n.childNodes[r],-1)&&(s=!0);for(;;)if(r>0){if(1!=n.nodeType)break;{let e=n.childNodes[r-1];if(nl(e,-1))i=n,o=--r;else{if(3!=e.nodeType)break;n=e,r=n.nodeValue.length}}}else{if(il(n))break;{let t=n.previousSibling;for(;t&&nl(t,-1);)i=n.parentNode,o=ws(t),t=t.previousSibling;if(t)n=t,r=tl(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}s?ol(e,n,r):i&&ol(e,i,o)}(e):function(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,o,s=tl(n);for(;;)if(r<s){if(1!=n.nodeType)break;if(!nl(n.childNodes[r],1))break;i=n,o=++r}else{if(il(n))break;{let t=n.nextSibling;for(;t&&nl(t,1);)i=t.parentNode,o=ws(t)+1,t=t.nextSibling;if(t)n=t,r=0,s=tl(n);else{if(n=n.parentNode,n==e.dom)break;r=s=0}}}i&&ol(e,i,o)}(e)}function il(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function ol(e,t,n){if(3!=t.nodeType){let e,r;(r=function(e,t){for(;e&&t==e.childNodes.length&&!Ns(e);)t=ws(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=n,t=0}}(t,n))?(t=r,n=0):(e=function(e,t){for(;e&&!t&&!Ns(e);)t=ws(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=(e=n).childNodes.length}}(t,n))&&(t=e,n=e.nodeValue.length)}let r=e.domSelection();if(!r)return;if(Ts(r)){let e=document.createRange();e.setEnd(t,n),e.setStart(t,n),r.removeAllRanges(),r.addRange(e)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout((()=>{e.state==i&&Ua(e)}),50)}function sl(e,t){let n=e.state.doc.resolve(t);if(!Bs&&!qs&&n.parent.inlineContent){let r=e.coordsAtPos(t);if(t>n.start()){let n=e.coordsAtPos(t-1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left<r.left?"ltr":"rtl"}if(t<n.end()){let n=e.coordsAtPos(t+1),i=(n.top+n.bottom)/2;if(i>r.top&&i<r.bottom&&Math.abs(n.left-r.left)>1)return n.left>r.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(e.dom).direction?"rtl":"ltr"}function al(e,t,n){let r=e.state.selection;if(r instanceof es&&!r.empty||n.indexOf("s")>-1)return!1;if(Ws&&n.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let n=Xa(e.state,t);if(n&&n instanceof ns)return Qa(e,n)}if(!i.parent.inlineContent){let n=t<0?i:o,s=r instanceof is?Zo.near(n,t):Zo.findFrom(n,t);return!!s&&Qa(e,s)}return!1}function ll(e,t){if(!(e.state.selection instanceof es))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let o=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let r=e.state.tr;return t<0?r.delete(n.pos-o.nodeSize,n.pos):r.delete(n.pos,n.pos+o.nodeSize),e.dispatch(r),!0}return!1}function cl(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function ul(e,t){let n=t.keyCode,r=function(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);if(8==n||Ws&&72==n&&"c"==r)return ll(e,-1)||rl(e,-1);if(46==n&&!t.shiftKey||Ws&&68==n&&"c"==r)return ll(e,1)||rl(e,1);if(13==n||27==n)return!0;if(37==n||Ws&&66==n&&"c"==r){let t=37==n?"ltr"==sl(e,e.state.selection.from)?-1:1:-1;return el(e,t,r)||rl(e,t)}if(39==n||Ws&&70==n&&"c"==r){let t=39==n?"ltr"==sl(e,e.state.selection.from)?1:-1:1;return el(e,t,r)||rl(e,t)}return 38==n||Ws&&80==n&&"c"==r?al(e,-1,r)||rl(e,-1):40==n||Ws&&78==n&&"c"==r?function(e){if(!Hs||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&1==t.nodeType&&0==n&&t.firstChild&&"false"==t.firstChild.contentEditable){let n=t.firstChild;cl(e,n,"true"),setTimeout((()=>cl(e,n,"false")),20)}return!1}(e)||al(e,1,r)||rl(e,1):r==(Ws?"m":"c")&&(66==n||73==n||89==n||90==n)}function dl(e,t){e.someProp("transformCopied",(n=>{t=n(t,e)}));let n=[],{content:r,openStart:i,openEnd:o}=t;for(;i>1&&o>1&&1==r.childCount&&1==r.firstChild.childCount;){i--,o--;let e=r.firstChild;n.push(e.type.name,e.attrs!=e.type.defaultAttrs?e.attrs:null),r=e.content}let s=e.someProp("clipboardSerializer")||to.fromSchema(e.state.schema),a=xl(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c,u=l.firstChild,d=0;for(;u&&1==u.nodeType&&(c=bl[u.nodeName.toLowerCase()]);){for(let e=c.length-1;e>=0;e--){let t=a.createElement(c[e]);for(;l.firstChild;)t.appendChild(l.firstChild);l.appendChild(t),d++}u=l.firstChild}return u&&1==u.nodeType&&u.setAttribute("data-pm-slice",`${i} ${o}${d?` -${d}`:""} ${JSON.stringify(n)}`),{dom:l,text:e.someProp("clipboardTextSerializer",(n=>n(t,e)))||t.content.textBetween(0,t.content.size,"\n\n"),slice:t}}function hl(e,t,n,r,i){let o,s,a=i.parent.type.spec.code;if(!n&&!t)return null;let l=t&&(r||a||!n);if(l){if(e.someProp("transformPastedText",(n=>{t=n(t,a||r,e)})),a)return t?new si(ei.from(e.state.schema.text(t.replace(/\r\n?/g,"\n"))),0,0):si.empty;let n=e.someProp("clipboardTextParser",(n=>n(t,i,r,e)));if(n)s=n;else{let n=i.marks(),{schema:r}=e.state,s=to.fromSchema(r);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach((e=>{let t=o.appendChild(document.createElement("p"));e&&t.appendChild(s.serializeNode(r.text(e,n)))}))}}else e.someProp("transformPastedHTML",(t=>{n=t(n,e)})),o=function(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n,r=xl().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(e);(n=i&&bl[i[1].toLowerCase()])&&(e=n.map((e=>"<"+e+">")).join("")+e+n.map((e=>"</"+e+">")).reverse().join(""));if(r.innerHTML=function(e){let t=window.trustedTypes;return t?t.createPolicy("detachedDocument",{createHTML:e=>e}).createHTML(e):e}(e),n)for(let o=0;o<n.length;o++)r=r.querySelector(n[o])||r;return r}(n),Ks&&function(e){let t=e.querySelectorAll(Bs?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];1==r.childNodes.length&&"\xa0"==r.textContent&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let e=o.firstChild;for(;e&&1!=e.nodeType;)e=e.nextSibling;if(!e)break;o=e}if(!s){let t=e.someProp("clipboardParser")||e.someProp("domParser")||Wi.fromSchema(e.state.schema);s=t.parseSlice(o,{preserveWhitespace:!(!l&&!u),context:i,ruleFromNode:e=>"BR"!=e.nodeName||e.nextSibling||!e.parentNode||pl.test(e.parentNode.nodeName)?null:{ignore:!0}})}if(u)s=function(e,t){if(!e.size)return e;let n,r=e.content.firstChild.type.schema;try{n=JSON.parse(t)}catch(RN){return e}let{content:i,openStart:o,openEnd:s}=e;for(let a=n.length-2;a>=0;a-=2){let e=r.nodes[n[a]];if(!e||e.hasRequiredAttrs())break;i=ei.from(e.create(n[a+1],i)),o++,s++}return new si(i,o,s)}(vl(s,+u[1],+u[2]),u[4]);else if(s=si.maxOpen(function(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let r,i=t.node(n).contentMatchAt(t.index(n)),o=[];if(e.forEach((e=>{if(!o)return;let t,n=i.findWrapping(e.type);if(!n)return o=null;if(t=o.length&&r.length&&ml(n,r,e,o[o.length-1],0))o[o.length-1]=t;else{o.length&&(o[o.length-1]=gl(o[o.length-1],r.length));let t=fl(e,n);o.push(t),i=i.matchType(t.type),r=n}})),o)return ei.from(o)}return e}(s.content,i),!0),s.openStart||s.openEnd){let e=0,t=0;for(let n=s.content.firstChild;e<s.openStart&&!n.type.spec.isolating;e++,n=n.firstChild);for(let n=s.content.lastChild;t<s.openEnd&&!n.type.spec.isolating;t++,n=n.lastChild);s=vl(s,e,t)}return e.someProp("transformPasted",(t=>{s=t(s,e)})),s}const pl=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function fl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(let r=t.length-1;r>=n;r--)e=t[r].create(null,ei.from(e));return e}function ml(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let o=ml(e,t,n,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(ei.from(fl(n,e,i+1))))}}function gl(e,t){if(0==t)return e;let n=e.content.replaceChild(e.childCount-1,gl(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(ei.empty,!0);return e.copy(n.append(r))}function yl(e,t,n,r,i,o){let s=t<0?e.firstChild:e.lastChild,a=s.content;return e.childCount>1&&(o=0),i<r-1&&(a=yl(a,t,n,r,i+1,o)),i>=n&&(a=t<0?s.contentMatchAt(0).fillBefore(a,o<=i).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(ei.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(a))}function vl(e,t,n){return t<e.openStart&&(e=new si(yl(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new si(yl(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const bl={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let wl=null;function xl(){return wl||(wl=document.implementation.createHTMLDocument("title"))}const kl={},Sl={},_l={touchstart:!0,touchmove:!0};class El{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Cl(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function Ol(e){e.someProp("handleDOMEvents",(t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=t=>Nl(e,t))}))}function Nl(e,t){return e.someProp("handleDOMEvents",(n=>{let r=n[t.type];return!!r&&(r(e,t)||t.defaultPrevented)}))}function Tl(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function Al(e){return{left:e.clientX,top:e.clientY}}function jl(e,t,n,r,i){if(-1==r)return!1;let o=e.state.doc.resolve(r);for(let s=o.depth+1;s>0;s--)if(e.someProp(t,(t=>s>o.depth?t(e,n,o.nodeAfter,o.before(s),i,!0):t(e,n,o.node(s),o.before(s),i,!1))))return!0;return!1}function Pl(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);"pointer"==n&&r.setMeta("pointer",!0),e.dispatch(r)}function Il(e,t,n,r,i){return jl(e,"handleClickOn",t,n,r)||e.someProp("handleClick",(n=>n(e,t,r)))||(i?function(e,t){if(-1==t)return!1;let n,r,i=e.state.selection;i instanceof ns&&(n=i.node);let o=e.state.doc.resolve(t);for(let s=o.depth+1;s>0;s--){let e=s>o.depth?o.nodeAfter:o.node(s);if(ns.isSelectable(e)){r=n&&i.$from.depth>0&&s>=i.$from.depth&&o.before(i.$from.depth+1)==i.$from.pos?o.before(i.$from.depth):o.before(s);break}}return null!=r&&(Pl(e,ns.create(e.state.doc,r),"pointer"),!0)}(e,n):function(e,t){if(-1==t)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return!!(r&&r.isAtom&&ns.isSelectable(r))&&(Pl(e,new ns(n),"pointer"),!0)}(e,n))}function Rl(e,t,n,r){return jl(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",(n=>n(e,t,r)))}function Ml(e,t,n,r){return jl(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",(n=>n(e,t,r)))||function(e,t,n){if(0!=n.button)return!1;let r=e.state.doc;if(-1==t)return!!r.inlineContent&&(Pl(e,es.create(r,0,r.content.size),"pointer"),!0);let i=r.resolve(t);for(let o=i.depth+1;o>0;o--){let t=o>i.depth?i.nodeAfter:i.node(o),n=i.before(o);if(t.inlineContent)Pl(e,es.create(r,n+1,n+1+t.content.size),"pointer");else{if(!ns.isSelectable(t))continue;Pl(e,ns.create(r,n),"pointer")}return!0}}(e,n,r)}function $l(e){return Vl(e)}Sl.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=16==n.keyCode||n.shiftKey,!zl(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!Js||!Bs||13!=n.keyCode))if(e.domObserver.selectionChanged(e.domSelectionRange())?e.domObserver.flush():229!=n.keyCode&&e.domObserver.forceFlush(),!Vs||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)e.someProp("handleKeyDown",(t=>t(e,n)))||ul(e,n)?n.preventDefault():Cl(e,"key");else{let t=Date.now();e.input.lastIOSEnter=t,e.input.lastIOSEnterFallbackTimeout=setTimeout((()=>{e.input.lastIOSEnter==t&&(e.someProp("handleKeyDown",(t=>t(e,As(13,"Enter")))),e.input.lastIOSEnter=0)}),200)}},Sl.keyup=(e,t)=>{16==t.keyCode&&(e.input.shiftKey=!1)},Sl.keypress=(e,t)=>{let n=t;if(zl(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ws&&n.metaKey)return;if(e.someProp("handleKeyPress",(t=>t(e,n))))return void n.preventDefault();let r=e.state.selection;if(!(r instanceof es)||!r.$from.sameParent(r.$to)){let t=String.fromCharCode(n.charCode);/[\r\n]/.test(t)||e.someProp("handleTextInput",(n=>n(e,r.$from.pos,r.$to.pos,t)))||e.dispatch(e.state.tr.insertText(t).scrollIntoView()),n.preventDefault()}};const Ll=Ws?"metaKey":"ctrlKey";kl.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=$l(e),i=Date.now(),o="singleClick";i-e.input.lastClick.time<500&&function(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}(n,e.input.lastClick)&&!n[Ll]&&("singleClick"==e.input.lastClick.type?o="doubleClick":"doubleClick"==e.input.lastClick.type&&(o="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:o};let s=e.posAtCoords(Al(n));s&&("singleClick"==o?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new Dl(e,s,n,!!r)):("doubleClick"==o?Rl:Ml)(e,s.pos,s.inside,n)?n.preventDefault():Cl(e,"pointer"))};class Dl{constructor(e,t,n,r){let i,o;if(this.view=e,this.pos=t,this.event=n,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[Ll],this.allowDefault=n.shiftKey,t.inside>-1)i=e.state.doc.nodeAt(t.inside),o=t.inside;else{let n=e.state.doc.resolve(t.pos);i=n.parent,o=n.depth?n.before():0}const s=r?null:n.target,a=s?e.docView.nearestDesc(s,!0):null;this.target=a&&1==a.dom.nodeType?a.dom:null;let{selection:l}=e.state;(0==n.button&&i.type.spec.draggable&&!1!==i.type.spec.selectable||l instanceof ns&&l.from<=o&&l.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!zs||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Cl(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((()=>Ua(this.view))),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(Al(e))),this.updateAllowDefault(e),this.allowDefault||!t?Cl(this.view,"pointer"):Il(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():0==e.button&&(this.flushed||Hs&&this.mightDrag&&!this.mightDrag.node.isAtom||Bs&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Pl(this.view,Zo.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):Cl(this.view,"pointer")}move(e){this.updateAllowDefault(e),Cl(this.view,"pointer"),0==e.buttons&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}function zl(e,t){return!!e.composing||!!(Hs&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500)&&(e.input.compositionEndedAt=-2e8,!0)}kl.touchstart=e=>{e.input.lastTouch=Date.now(),$l(e),Cl(e,"pointer")},kl.touchmove=e=>{e.input.lastTouch=Date.now(),Cl(e,"pointer")},kl.contextmenu=e=>$l(e);const Fl=Js?5e3:-1;function Bl(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout((()=>Vl(e)),t))}function Ul(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=function(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function Hl(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=function(e,t){for(;;){if(3==e.nodeType&&t)return e;if(1==e.nodeType&&t>0){if("false"==e.contentEditable)return null;t=Os(e=e.childNodes[t-1])}else{if(!e.parentNode||Ns(e))return null;t=ws(e),e=e.parentNode}}}(t.focusNode,t.focusOffset),r=function(e,t){for(;;){if(3==e.nodeType&&t<e.nodeValue.length)return e;if(1==e.nodeType&&t<e.childNodes.length){if("false"==e.contentEditable)return null;e=e.childNodes[t],t=0}else{if(!e.parentNode||Ns(e))return null;t=ws(e)+1,e=e.parentNode}}}(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let t=r.pmViewDesc,i=e.domObserver.lastChangedTextNode;if(n==i||r==i)return i;if(!t||!t.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let e=n.pmViewDesc;if(e&&e.isText(n.nodeValue))return r}}return n||r}function Vl(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(Js&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),Ul(e),t||e.docView&&e.docView.dirty){let n=Fa(e);return n&&!n.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(n)):!e.markCursor&&!t||e.state.selection.empty?e.updateState(e.state):e.dispatch(e.state.tr.deleteSelection()),!0}return!1}}Sl.compositionstart=Sl.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof es&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((e=>!1===e.type.spec.inclusive))))e.markCursor=e.state.storedMarks||n.marks(),Vl(e,!0),e.markCursor=null;else if(Vl(e,!t.selection.empty),zs&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=e.domSelectionRange();for(let n=t.focusNode,r=t.focusOffset;n&&1==n.nodeType&&0!=r;){let t=r<0?n.lastChild:n.childNodes[r-1];if(!t)break;if(3==t.nodeType){let n=e.domSelection();n&&n.collapse(t,t.nodeValue.length);break}n=t,r=-1}}e.input.composing=!0}Bl(e,Fl)},Sl.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then((()=>e.domObserver.flush())),e.input.compositionID++,Bl(e,20))};const Wl=Ls&&Ds<15||Vs&&Gs<604;function ql(e,t,n,r,i){let o=hl(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",(t=>t(e,i,o||si.empty))))return!0;if(!o)return!1;let s=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(o),a=s?e.state.tr.replaceSelectionWith(s,r):e.state.tr.replaceSelection(o);return e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Jl(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}kl.copy=Sl.cut=(e,t)=>{let n=t,r=e.state.selection,i="cut"==n.type;if(r.empty)return;let o=Wl?null:n.clipboardData,s=r.content(),{dom:a,text:l}=dl(e,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):function(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout((()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()}),50)}(e,a),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},Sl.paste=(e,t)=>{let n=t;if(e.composing&&!Js)return;let r=Wl?null:n.clipboardData,i=e.input.shiftKey&&45!=e.input.lastKeyCode;r&&ql(e,Jl(r),r.getData("text/html"),i,n)?n.preventDefault():function(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&45!=e.input.lastKeyCode;setTimeout((()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ql(e,r.value,null,i,t):ql(e,r.textContent,r.innerHTML,i,t)}),50)}(e,n)};class Kl{constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}const Gl=Ws?"altKey":"ctrlKey";kl.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i,o=e.state.selection,s=o.empty?null:e.posAtCoords(Al(n));if(s&&s.pos>=o.from&&s.pos<=(o instanceof ns?o.to-1:o.to));else if(r&&r.mightDrag)i=ns.create(e.state.doc,r.mightDrag.pos);else if(n.target&&1==n.target.nodeType){let t=e.docView.nearestDesc(n.target,!0);t&&t.node.type.spec.draggable&&t!=e.docView&&(i=ns.create(e.state.doc,t.posBefore))}let a=(i||e.state.selection).content(),{dom:l,text:c,slice:u}=dl(e,a);(!n.dataTransfer.files.length||!Bs||Us>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Wl?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Wl||n.dataTransfer.setData("text/plain",c),e.dragging=new Kl(u,!n[Gl],i)},kl.dragend=e=>{let t=e.dragging;window.setTimeout((()=>{e.dragging==t&&(e.dragging=null)}),50)},Sl.dragover=Sl.dragenter=(e,t)=>t.preventDefault(),Sl.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(Al(n));if(!i)return;let o=e.state.doc.resolve(i.pos),s=r&&r.slice;s?e.someProp("transformPasted",(t=>{s=t(s,e)})):s=hl(e,Jl(n.dataTransfer),Wl?null:n.dataTransfer.getData("text/html"),!1,o);let a=!(!r||n[Gl]);if(e.someProp("handleDrop",(t=>t(e,n,s||si.empty,a))))return void n.preventDefault();if(!s)return;n.preventDefault();let l=s?Ro(e.state.doc,o.pos,s):o.pos;null==l&&(l=o.pos);let c=e.state.tr;if(a){let{node:e}=r;e?e.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,h=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(h))return;let p=c.doc.resolve(u);if(d&&ns.isSelectable(s.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new ns(p));else{let t=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach(((e,n,r,i)=>t=i)),c.setSelection(Ga(e,p,c.doc.resolve(t)))}e.focus(),e.dispatch(c.setMeta("uiEvent","drop"))},kl.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout((()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Ua(e)}),20))},kl.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)},kl.beforeinput=(e,t)=>{if(Bs&&Js&&"deleteContentBackward"==t.inputType){e.domObserver.flushSoon();let{domChangeCount:t}=e.input;setTimeout((()=>{if(e.input.domChangeCount!=t)return;if(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",(t=>t(e,As(8,"Backspace")))))return;let{$cursor:n}=e.state.selection;n&&n.pos>0&&e.dispatch(e.state.tr.delete(n.pos-1,n.pos).scrollIntoView())}),50)}};for(let n in Sl)kl[n]=Sl[n];function Zl(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class Yl{constructor(e,t){this.toDOM=e,this.spec=t||nc,this.side=this.spec.side||0}map(e,t,n,r){let{pos:i,deleted:o}=e.mapResult(t.from+r,this.side<0?-1:1);return o?null:new ec(i-n,i-n,this)}valid(){return!0}eq(e){return this==e||e instanceof Yl&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Zl(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Xl{constructor(e,t){this.attrs=e,this.spec=t||nc}map(e,t,n,r){let i=e.map(t.from+r,this.spec.inclusiveStart?-1:1)-n,o=e.map(t.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new ec(i,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Xl&&Zl(this.attrs,e.attrs)&&Zl(this.spec,e.spec)}static is(e){return e.type instanceof Xl}destroy(){}}class Ql{constructor(e,t){this.attrs=e,this.spec=t||nc}map(e,t,n,r){let i=e.mapResult(t.from+r,1);if(i.deleted)return null;let o=e.mapResult(t.to+r,-1);return o.deleted||o.pos<=i.pos?null:new ec(i.pos-n,o.pos-n,this)}valid(e,t){let n,{index:r,offset:i}=e.content.findIndex(t.from);return i==t.from&&!(n=e.child(r)).isText&&i+n.nodeSize==t.to}eq(e){return this==e||e instanceof Ql&&Zl(this.attrs,e.attrs)&&Zl(this.spec,e.spec)}destroy(){}}class ec{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new ec(e,t,this.type)}eq(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new ec(e,e,new Yl(t,n))}static inline(e,t,n,r){return new ec(e,t,new Xl(n,r))}static node(e,t,n,r){return new ec(e,t,new Ql(n,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof Xl}get widget(){return this.type instanceof Yl}}const tc=[],nc={};class rc{constructor(e,t){this.local=e.length?e:tc,this.children=t.length?t:tc}static create(e,t){return t.length?cc(t,e,0,nc):ic}find(e,t,n){let r=[];return this.findInner(null==e?0:e,null==t?1e9:t,r,0,n),r}findInner(e,t,n,r,i){for(let o=0;o<this.local.length;o++){let s=this.local[o];s.from<=t&&s.to>=e&&(!i||i(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let s=this.children[o]+1;this.children[o+2].findInner(e-s,t-s,n,r+s,i)}}map(e,t,n){return this==ic||0==e.maps.length?this:this.mapInner(e,t,0,0,n||nc)}mapInner(e,t,n,r,i){let o;for(let s=0;s<this.local.length;s++){let a=this.local[s].map(e,n,r);a&&a.type.valid(t,a)?(o||(o=[])).push(a):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?function(e,t,n,r,i,o,s){let a=e.slice();for(let c=0,u=o;c<n.maps.length;c++){let e=0;n.maps[c].forEach(((t,n,r,i)=>{let o=i-r-(n-t);for(let s=0;s<a.length;s+=3){let r=a[s+1];if(r<0||t>r+u-e)continue;let i=a[s]+u-e;n>=i?a[s+1]=t<=i?-2:-1:t>=u&&o&&(a[s]+=o,a[s+1]+=o)}e+=o})),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(-2==a[c+1]){l=!0,a[c+1]=-1;continue}let t=n.map(e[c]+o),u=t-i;if(u<0||u>=r.content.size){l=!0;continue}let d=n.map(e[c+1]+o,-1)-i,{index:h,offset:p}=r.content.findIndex(u),f=r.maybeChild(h);if(f&&p==u&&p+f.nodeSize==d){let r=a[c+2].mapInner(n,f,t+1,e[c]+o+1,s);r!=ic?(a[c]=u,a[c+1]=d,a[c+2]=r):(a[c+1]=-2,l=!0)}else l=!0}if(l){let l=function(e,t,n,r,i,o,s){function a(e,t){for(let o=0;o<e.local.length;o++){let a=e.local[o].map(r,i,t);a?n.push(a):s.onRemove&&s.onRemove(e.local[o].spec)}for(let n=0;n<e.children.length;n+=3)a(e.children[n+2],e.children[n]+t+1)}for(let l=0;l<e.length;l+=3)-1==e[l+1]&&a(e[l+2],t[l]+o+1);return n}(a,e,t,n,i,o,s),c=cc(l,r,0,s);t=c.local;for(let e=0;e<a.length;e+=3)a[e+1]<0&&(a.splice(e,3),e-=3);for(let e=0,t=0;e<c.children.length;e+=3){let n=c.children[e];for(;t<a.length&&a[t]<n;)t+=3;a.splice(t,0,c.children[e],c.children[e+1],c.children[e+2])}}return new rc(t.sort(uc),a)}(this.children,o||[],e,t,n,r,i):o?new rc(o.sort(uc),tc):ic}add(e,t){return t.length?this==ic?rc.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let r,i=0;e.forEach(((e,o)=>{let s,a=o+n;if(s=ac(t,e,a)){for(r||(r=this.children.slice());i<r.length&&r[i]<o;)i+=3;r[i]==o?r[i+2]=r[i+2].addInner(e,s,a+1):r.splice(i,0,o,o+e.nodeSize,cc(s,e,a+1,nc)),i+=3}}));let o=sc(i?lc(t):t,-n);for(let s=0;s<o.length;s++)o[s].type.valid(e,o[s])||o.splice(s--,1);return new rc(o.length?this.local.concat(o).sort(uc):this.local,r||this.children)}remove(e){return 0==e.length||this==ic?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,r=this.local;for(let i=0;i<n.length;i+=3){let r,o=n[i]+t,s=n[i+1]+t;for(let t,n=0;n<e.length;n++)(t=e[n])&&t.from>o&&t.to<s&&(e[n]=null,(r||(r=[])).push(t));if(!r)continue;n==this.children&&(n=this.children.slice());let a=n[i+2].removeInner(r,o+1);a!=ic?n[i+2]=a:(n.splice(i,3),i-=3)}if(r.length)for(let i,o=0;o<e.length;o++)if(i=e[o])for(let e=0;e<r.length;e++)r[e].eq(i,t)&&(r==this.local&&(r=this.local.slice()),r.splice(e--,1));return n==this.children&&r==this.local?this:r.length||n.length?new rc(r,n):ic}forChild(e,t){if(this==ic)return this;if(t.isLeaf)return rc.empty;let n,r;for(let s=0;s<this.children.length;s+=3)if(this.children[s]>=e){this.children[s]==e&&(n=this.children[s+2]);break}let i=e+1,o=i+t.content.size;for(let s=0;s<this.local.length;s++){let e=this.local[s];if(e.from<o&&e.to>i&&e.type instanceof Xl){let t=Math.max(i,e.from)-i,n=Math.min(o,e.to)-i;t<n&&(r||(r=[])).push(e.copy(t,n))}}if(r){let e=new rc(r.sort(uc),tc);return n?new oc([e,n]):e}return n||ic}eq(e){if(this==e)return!0;if(!(e instanceof rc)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return dc(this.localsInner(e))}localsInner(e){if(this==ic)return tc;if(e.inlineContent||!this.local.some(Xl.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Xl||t.push(this.local[n]);return t}forEachSet(e){e(this)}}rc.empty=new rc([],[]),rc.removeOverlap=dc;const ic=rc.empty;class oc{constructor(e){this.members=e}map(e,t){const n=this.members.map((n=>n.map(e,t,nc)));return oc.from(n)}forChild(e,t){if(t.isLeaf)return rc.empty;let n=[];for(let r=0;r<this.members.length;r++){let i=this.members[r].forChild(e,t);i!=ic&&(i instanceof oc?n=n.concat(i.members):n.push(i))}return oc.from(n)}eq(e){if(!(e instanceof oc)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let r=0;r<this.members.length;r++){let i=this.members[r].localsInner(e);if(i.length)if(t){n&&(t=t.slice(),n=!1);for(let e=0;e<i.length;e++)t.push(i[e])}else t=i}return t?dc(n?t:t.sort(uc)):tc}static from(e){switch(e.length){case 0:return ic;case 1:return e[0];default:return new oc(e.every((e=>e instanceof rc))?e:e.reduce(((e,t)=>e.concat(t instanceof rc?t:t.members)),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function sc(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new ec(i.from+t,i.to+t,i.type))}return n}function ac(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let o,s=0;s<e.length;s++)(o=e[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),e[s]=null);return i}function lc(e){let t=[];for(let n=0;n<e.length;n++)null!=e[n]&&t.push(e[n]);return t}function cc(e,t,n,r){let i=[],o=!1;t.forEach(((t,s)=>{let a=ac(e,t,s+n);if(a){o=!0;let e=cc(a,t,n+s+1,r);e!=ic&&i.push(s,s+t.nodeSize,e)}}));let s=sc(o?lc(e):e,-n).sort(uc);for(let a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new rc(s,i):ic}function uc(e,t){return e.from-t.from||e.to-t.to}function dc(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let o=t[i];if(o.from!=r.from){o.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,o.from),hc(t,i,r.copy(o.from,r.to)));break}o.to!=r.to&&(t==e&&(t=e.slice()),t[i]=o.copy(o.from,r.to),hc(t,i+1,o.copy(r.to,o.to)))}}return t}function hc(e,t,n){for(;t<e.length&&uc(n,e[t])>0;)t++;e.splice(t,0,n)}function pc(e){let t=[];return e.someProp("decorations",(n=>{let r=n(e.state);r&&r!=ic&&t.push(r)})),e.cursorWrapper&&t.push(rc.create(e.state.doc,[e.cursorWrapper.deco])),oc.from(t)}const fc={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},mc=Ls&&Ds<=11;class gc{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class yc{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new gc,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver((e=>{for(let t=0;t<e.length;t++)this.queue.push(e[t]);Ls&&Ds<=11&&e.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),mc&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((()=>{this.flushingSoon=-1,this.flush()}),20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,fc)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout((()=>this.flush()),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout((()=>this.suppressingSelectionUpdates=!1),50)}onSelectionChange(){if(Za(this.view)){if(this.suppressingSelectionUpdates)return Ua(this.view);if(Ls&&Ds<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&_s(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t,n=new Set;for(let i=e.focusNode;i;i=xs(i))n.add(i);for(let i=e.anchorNode;i;i=xs(i))if(n.has(i)){t=i;break}let r=t&&this.view.docView.nearestDesc(t);return r&&r.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}selectionChanged(e){return!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&Za(this.view)&&!this.ignoreSelectionChange(e)}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let n=e.domSelectionRange(),r=this.selectionChanged(n),i=-1,o=-1,s=!1,a=[];if(e.editable)for(let c=0;c<t.length;c++){let e=this.registerMutation(t[c],a);e&&(i=i<0?e.from:Math.min(e.from,i),o=o<0?e.to:Math.max(e.to,o),e.typeOver&&(s=!0))}if(zs&&a.length){let t=a.filter((e=>"BR"==e.nodeName));if(2==t.length){let[e,n]=t;e.parentNode&&e.parentNode.parentNode==n.parentNode?n.remove():e.remove()}else{let{focusNode:n}=this.currentSelection;for(let r of t){let t=r.parentNode;!t||"LI"!=t.nodeName||n&&xc(e,n)==t||r.remove()}}}let l=null;i<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Ts(n)&&(l=Fa(e))&&l.eq(Zo.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Ua(e),this.currentSelection.set(n),e.scrollToSelection()):(i>-1||r)&&(i>-1&&(e.docView.markDirty(i,o),function(e){if(vc.has(e))return;if(vc.set(e,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)){if(e.requiresGeckoHackNode=zs,bc)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),bc=!0}}(e)),this.handleDOMChange(i,o,s,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||Ua(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(n==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(e))return null;if("childList"==e.type){for(let n=0;n<e.addedNodes.length;n++){let r=e.addedNodes[n];t.push(r),3==r.nodeType&&(this.lastChangedTextNode=r)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let r=e.previousSibling,i=e.nextSibling;if(Ls&&Ds<=11&&e.addedNodes.length)for(let t=0;t<e.addedNodes.length;t++){let{previousSibling:n,nextSibling:o}=e.addedNodes[t];(!n||Array.prototype.indexOf.call(e.addedNodes,n)<0)&&(r=n),(!o||Array.prototype.indexOf.call(e.addedNodes,o)<0)&&(i=o)}let o=r&&r.parentNode==e.target?ws(r)+1:0,s=n.localPosFromDOM(e.target,o,-1),a=i&&i.parentNode==e.target?ws(i):e.target.childNodes.length;return{from:s,to:n.localPosFromDOM(e.target,a,1)}}return"attributes"==e.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let vc=new WeakMap,bc=!1;function wc(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,o=t.endOffset,s=e.domAtPos(e.state.selection.anchor);return _s(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function xc(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let t=e.docView.nearestDesc(n,!0);if(t&&t.node.isBlock)return n}return null}function kc(e){let t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(Hs&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}if(e.parentNode.lastChild==e||Hs&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Sc=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function _c(e,t,n,r,i){let o=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let t=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,n=Fa(e,t);if(n&&!e.state.selection.eq(n)){if(Bs&&Js&&13===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",(t=>t(e,As(13,"Enter")))))return;let r=e.state.tr.setSelection(n);"pointer"==t?r.setMeta("pointer",!0):"key"==t&&r.scrollIntoView(),o&&r.setMeta("composition",o),e.dispatch(r)}return}let s=e.state.doc.resolve(t),a=s.sharedDepth(n);t=s.before(a+1),n=e.state.doc.resolve(n).after(a+1);let l,c,u=e.state.selection,d=function(e,t,n){let r,{node:i,fromOffset:o,toOffset:s,from:a,to:l}=e.docView.parseRange(t,n),c=e.domSelectionRange(),u=c.anchorNode;if(u&&e.dom.contains(1==u.nodeType?u:u.parentNode)&&(r=[{node:u,offset:c.anchorOffset}],Ts(c)||r.push({node:c.focusNode,offset:c.focusOffset})),Bs&&8===e.input.lastKeyCode)for(let g=s;g>o;g--){let e=i.childNodes[g-1],t=e.pmViewDesc;if("BR"==e.nodeName&&!t){s=g;break}if(!t||t.size)break}let d=e.state.doc,h=e.someProp("domParser")||Wi.fromSchema(e.state.schema),p=d.resolve(a),f=null,m=h.parse(i,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:o,to:s,preserveWhitespace:"pre"!=p.parent.type.whitespace||"full",findPositions:r,ruleFromNode:kc,context:p});if(r&&null!=r[0].pos){let e=r[0].pos,t=r[1]&&r[1].pos;null==t&&(t=e),f={anchor:e+a,head:t+a}}return{doc:m,sel:f,from:a,to:l}}(e,t,n),h=e.state.doc,p=h.slice(d.from,d.to);8===e.input.lastKeyCode&&Date.now()-100<e.input.lastKeyCodeTime?(l=e.state.selection.to,c="end"):(l=e.state.selection.from,c="start"),e.input.lastKeyCode=null;let f=function(e,t,n,r,i){let o=e.findDiffStart(t,n);if(null==o)return null;let{a:s,b:a}=e.findDiffEnd(t,n+e.size,n+t.size);if("end"==i){r-=s+Math.max(0,o-Math.min(s,a))-o}if(s<o&&e.size<t.size){let e=r<=o&&r>=s?o-r:0;o-=e,o&&o<t.size&&Oc(t.textBetween(o-1,o+1))&&(o+=e?1:-1),a=o+(a-s),s=o}else if(a<o){let t=r<=o&&r>=a?o-r:0;o-=t,o&&o<e.size&&Oc(e.textBetween(o-1,o+1))&&(o+=t?1:-1),s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}(p.content,d.doc.content,d.from,l,c);if(f&&e.input.domChangeCount++,(Vs&&e.input.lastIOSEnter>Date.now()-225||Js)&&i.some((e=>1==e.nodeType&&!Sc.test(e.nodeName)))&&(!f||f.endA>=f.endB)&&e.someProp("handleKeyDown",(t=>t(e,As(13,"Enter")))))return void(e.input.lastIOSEnter=0);if(!f){if(!(r&&u instanceof es&&!u.empty&&u.$head.sameParent(u.$anchor))||e.composing||d.sel&&d.sel.anchor!=d.sel.head){if(d.sel){let t=Ec(e,e.state.doc,d.sel);if(t&&!t.eq(e.state.selection)){let n=e.state.tr.setSelection(t);o&&n.setMeta("composition",o),e.dispatch(n)}}return}f={start:u.from,endA:u.to,endB:u.to}}e.state.selection.from<e.state.selection.to&&f.start==f.endB&&e.state.selection instanceof es&&(f.start>e.state.selection.from&&f.start<=e.state.selection.from+2&&e.state.selection.from>=d.from?f.start=e.state.selection.from:f.endA<e.state.selection.to&&f.endA>=e.state.selection.to-2&&e.state.selection.to<=d.to&&(f.endB+=e.state.selection.to-f.endA,f.endA=e.state.selection.to)),Ls&&Ds<=11&&f.endB==f.start+1&&f.endA==f.start&&f.start>d.from&&" \xa0"==d.doc.textBetween(f.start-d.from-1,f.start-d.from+1)&&(f.start--,f.endA--,f.endB--);let m,g=d.doc.resolveNoCache(f.start-d.from),y=d.doc.resolveNoCache(f.endB-d.from),v=h.resolve(f.start),b=g.sameParent(y)&&g.parent.inlineContent&&v.end()>=f.endA;if((Vs&&e.input.lastIOSEnter>Date.now()-225&&(!b||i.some((e=>"DIV"==e.nodeName||"P"==e.nodeName)))||!b&&g.pos<d.doc.content.size&&!g.sameParent(y)&&(m=Zo.findFrom(d.doc.resolve(g.pos+1),1,!0))&&m.head==y.pos)&&e.someProp("handleKeyDown",(t=>t(e,As(13,"Enter")))))return void(e.input.lastIOSEnter=0);if(e.state.selection.anchor>f.start&&function(e,t,n,r,i){if(n-t<=i.pos-r.pos||Cc(r,!0,!1)<i.pos)return!1;let o=e.resolve(t);if(!r.parent.isTextblock){let e=o.nodeAfter;return null!=e&&n==t+e.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=e.resolve(Cc(o,!0,!0));return!(!s.parent.isTextblock||s.pos>n||Cc(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(h,f.start,f.endA,g,y)&&e.someProp("handleKeyDown",(t=>t(e,As(8,"Backspace")))))return void(Js&&Bs&&e.domObserver.suppressSelectionUpdates());Bs&&Js&&f.endB==f.start&&(e.input.lastAndroidDelete=Date.now()),Js&&!b&&g.start()!=y.start()&&0==y.parentOffset&&g.depth==y.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==f.endA&&(f.endB-=2,y=d.doc.resolveNoCache(f.endB-d.from),setTimeout((()=>{e.someProp("handleKeyDown",(function(t){return t(e,As(13,"Enter"))}))}),20));let w,x,k,S=f.start,_=f.endA;if(b)if(g.pos==y.pos)Ls&&Ds<=11&&0==g.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout((()=>Ua(e)),20)),w=e.state.tr.delete(S,_),x=h.resolve(f.start).marksAcross(h.resolve(f.endA));else if(f.endA==f.endB&&(k=function(e,t){let n,r,i,o=e.firstChild.marks,s=t.firstChild.marks,a=o,l=s;for(let u=0;u<s.length;u++)a=s[u].removeFromSet(a);for(let u=0;u<o.length;u++)l=o[u].removeFromSet(l);if(1==a.length&&0==l.length)r=a[0],n="add",i=e=>e.mark(r.addToSet(e.marks));else{if(0!=a.length||1!=l.length)return null;r=l[0],n="remove",i=e=>e.mark(r.removeFromSet(e.marks))}let c=[];for(let u=0;u<t.childCount;u++)c.push(i(t.child(u)));if(ei.from(c).eq(e))return{mark:r,type:n}}(g.parent.content.cut(g.parentOffset,y.parentOffset),v.parent.content.cut(v.parentOffset,f.endA-v.start()))))w=e.state.tr,"add"==k.type?w.addMark(S,_,k.mark):w.removeMark(S,_,k.mark);else if(g.parent.child(g.index()).isText&&g.index()==y.index()-(y.textOffset?0:1)){let t=g.parent.textBetween(g.parentOffset,y.parentOffset);if(e.someProp("handleTextInput",(n=>n(e,S,_,t))))return;w=e.state.tr.insertText(t,S,_)}if(w||(w=e.state.tr.replace(S,_,d.doc.slice(f.start-d.from,f.endB-d.from))),d.sel){let t=Ec(e,w.doc,d.sel);t&&!(Bs&&Js&&e.composing&&t.empty&&(f.start!=f.endB||e.input.lastAndroidDelete<Date.now()-100)&&(t.head==S||t.head==w.mapping.map(_)-1)||Ls&&t.empty&&t.head==S)&&w.setSelection(t)}x&&w.ensureMarks(x),o&&w.setMeta("composition",o),e.dispatch(w.scrollIntoView())}function Ec(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:Ga(e,t.resolve(n.anchor),t.resolve(n.head))}function Cc(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let t=e.node(r).maybeChild(e.indexAfter(r));for(;t&&!t.isLeaf;)t=t.firstChild,i++}return i}function Oc(e){if(2!=e.length)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class Nc{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new El,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(Ic),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):"function"==typeof e?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=jc(this),Ac(this),this.nodeViews=Pc(this),this.docView=_a(this.state.doc,Tc(this),pc(this),this.dom,this),this.domObserver=new yc(this,((e,t,n,r)=>_c(this,e,t,n,r))),this.domObserver.start(),function(e){for(let t in kl){let n=kl[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=t=>{!Tl(e,t)||Nl(e,t)||!e.editable&&t.type in Sl||n(e,t)},_l[t]?{passive:!0}:void 0)}Hs&&e.dom.addEventListener("input",(()=>null)),Ol(e)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Ol(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Ic),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let n in this._props)t[n]=this._props[n];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var n;let r=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(Ul(this),o=!0),this.state=e;let s=r.plugins!=e.plugins||this._props.plugins!=t.plugins;if(s||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let e=Pc(this);(function(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r})(e,this.nodeViews)&&(this.nodeViews=e,i=!0)}(s||t.handleDOMEvents!=this._props.handleDOMEvents)&&Ol(this),this.editable=jc(this),Ac(this);let a=pc(this),l=Tc(this),c=r.plugins==e.plugins||r.doc.eq(e.doc)?e.scrollToSelection>r.scrollToSelection?"to selection":"preserve":"reset",u=i||!this.docView.matchesNode(e.doc,l,a);!u&&e.selection.eq(r.selection)||(o=!0);let d="preserve"==c&&o&&null==this.dom.style.overflowAnchor&&function(e){let t,n,r=e.dom.getBoundingClientRect(),i=Math.max(0,r.top);for(let o=(r.left+r.right)/2,s=i+1;s<Math.min(innerHeight,r.bottom);s+=5){let r=e.root.elementFromPoint(o,s);if(!r||r==e.dom||!e.dom.contains(r))continue;let a=r.getBoundingClientRect();if(a.top>=i-20){t=r,n=a.top;break}}return{refDOM:t,refTop:n,stack:ea(e.dom)}}(this);if(o){this.domObserver.stop();let t=u&&(Ls||Bs)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&function(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}(r.selection,e.selection);if(u){let n=Bs?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Hl(this)),!i&&this.docView.update(e.doc,l,a,this)||(this.docView.updateOuterDeco(l),this.docView.destroy(),this.docView=_a(e.doc,l,a,this.dom,this)),n&&!this.trackWrites&&(t=!0)}t||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return _s(t.node,t.offset,n.anchorNode,n.anchorOffset)}(this))?Ua(this,t):(Ja(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),(null===(n=this.dragging)||void 0===n?void 0:n.node)&&!r.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,r),"reset"==c?this.dom.scrollTop=0:"to selection"==c?this.scrollToSelection():d&&function(e){let{refDOM:t,refTop:n,stack:r}=e,i=t?t.getBoundingClientRect().top:0;ta(r,0==i?0:i-n)}(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(this.someProp("handleScrollToSelection",(e=>e(this))));else if(this.state.selection instanceof ns){let t=this.docView.domAfterPos(this.state.selection.from);1==t.nodeType&&Qs(this,t.getBoundingClientRect(),e)}else Qs(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(e&&e.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let t=this.directPlugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let t=this.state.plugins[e];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}}updateDraggedNode(e,t){let n=e.node,r=-1;if(this.state.doc.nodeAt(n.from)==n.node)r=n.from;else{let e=n.from+(this.state.doc.content.size-t.doc.content.size);(e>0&&this.state.doc.nodeAt(e))==n.node&&(r=e)}this.dragging=new Kl(e.slice,e.move,r<0?void 0:ns.create(this.state.doc,r))}someProp(e,t){let n,r=this._props&&this._props[e];if(null!=r&&(n=t?t(r):r))return n;for(let o=0;o<this.directPlugins.length;o++){let r=this.directPlugins[o].props[e];if(null!=r&&(n=t?t(r):r))return n}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let r=i[o].props[e];if(null!=r&&(n=t?t(r):r))return n}}hasFocus(){if(Ls){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if("false"==e.contentEditable)return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(na)return e.focus(na);let t=ea(e);e.focus(null==na?{get preventScroll(){return na={preventScroll:!0},!0}}:void 0),na||(na=!1,ta(t,0))}(this.dom),Ua(this),this.domObserver.start()}get root(){let e=this._root;if(null==e)for(let t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t;return e||document}updateRoot(){this._root=null}posAtCoords(e){return sa(this,e)}coordsAtPos(e){return ua(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)}domAtPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=this.docView.posFromDOM(e,t,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(e,t){return va(this,t||this.state,e)}pasteHTML(e,t){return ql(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return ql(this,e,null,!0,t||new ClipboardEvent("paste"))}destroy(){this.docView&&(!function(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],pc(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,ks=null)}get isDestroyed(){return null==this.docView}dispatchEvent(e){return function(e,t){Nl(e,t)||!kl[t.type]||!e.editable&&t.type in Sl||kl[t.type](e,t)}(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?Hs&&11===this.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e,t){if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return wc(e,n)}let n;function r(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?wc(e,n):null}(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function Tc(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",(n=>{if("function"==typeof n&&(n=n(e.state)),n)for(let e in n)"class"==e?t.class+=" "+n[e]:"style"==e?t.style=(t.style?t.style+";":"")+n[e]:t[e]||"contenteditable"==e||"nodeName"==e||(t[e]=String(n[e]))})),t.translate||(t.translate="no"),[ec.node(0,e.state.doc.content.size,t)]}function Ac(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:ec.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function jc(e){return!e.someProp("editable",(t=>!1===t(e.state)))}function Pc(e){let t=Object.create(null);function n(e){for(let n in e)Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function Ic(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}for(var Rc={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Mc={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},$c="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Lc="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Dc=0;Dc<10;Dc++)Rc[48+Dc]=Rc[96+Dc]=String(Dc);for(Dc=1;Dc<=24;Dc++)Rc[Dc+111]="F"+Dc;for(Dc=65;Dc<=90;Dc++)Rc[Dc]=String.fromCharCode(Dc+32),Mc[Dc]=String.fromCharCode(Dc);for(var zc in Rc)Mc.hasOwnProperty(zc)||(Mc[zc]=Rc[zc]);const Fc="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function Bc(e){let t,n,r,i,o=e.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(let a=0;a<o.length-1;a++){let e=o[a];if(/^(cmd|meta|m)$/i.test(e))i=!0;else if(/^a(lt)?$/i.test(e))t=!0;else if(/^(c|ctrl|control)$/i.test(e))n=!0;else if(/^s(hift)?$/i.test(e))r=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);Fc?i=!0:n=!0}}return t&&(s="Alt-"+s),n&&(s="Ctrl-"+s),i&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function Uc(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function Hc(e){let t=function(e){let t=Object.create(null);for(let n in e)t[Bc(n)]=e[n];return t}(e);return function(e,n){let r,i=function(e){var t=!($c&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||Lc&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?Mc:Rc)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(n),o=t[Uc(i,n)];if(o&&o(e.state,e.dispatch,e))return!0;if(1==i.length&&" "!=i){if(n.shiftKey){let r=t[Uc(i,n,!1)];if(r&&r(e.state,e.dispatch,e))return!0}if((n.shiftKey||n.altKey||n.metaKey||i.charCodeAt(0)>127)&&(r=Rc[n.keyCode])&&r!=i){let i=t[Uc(r,n)];if(i&&i(e.state,e.dispatch,e))return!0}}return!1}}const Vc=(e,t)=>!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function Wc(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const qc=(e,t,n)=>{let r=Wc(e,n);if(!r)return!1;let i=Zc(r);if(!i){let n=r.blockRange(),i=n&&Oo(n);return null!=i&&(t&&t(e.tr.lift(n,i).scrollIntoView()),!0)}let o=i.nodeBefore;if(lu(e,i,t,-1))return!0;if(0==r.parent.content.size&&(Kc(o,"end")||ns.isSelectable(o)))for(let s=r.depth;;s--){let n=Mo(e.doc,r.before(s),r.after(s),si.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(Kc(o,"end")?Zo.findFrom(r.doc.resolve(r.mapping.map(i.pos,-1)),-1):ns.create(r.doc,i.pos-o.nodeSize)),t(r.scrollIntoView())}return!0}if(1==s||r.node(s-1).childCount>1)break}return!(!o.isAtom||i.depth!=r.depth-1)&&(t&&t(e.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0)};function Jc(e,t,n){let r=t.nodeBefore,i=t.pos-1;for(;!r.isTextblock;i--){if(r.type.spec.isolating)return!1;let e=r.lastChild;if(!e)return!1;r=e}let o=t.nodeAfter,s=t.pos+1;for(;!o.isTextblock;s++){if(o.type.spec.isolating)return!1;let e=o.firstChild;if(!e)return!1;o=e}let a=Mo(e.doc,i,s,si.empty);if(!a||a.from!=i||a instanceof ko&&a.slice.size>=s-i)return!1;if(n){let t=e.tr.step(a);t.setSelection(es.create(t.doc,i)),n(t.scrollIntoView())}return!0}function Kc(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(let r=e;r;r="start"==t?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&1!=r.childCount)return!1}return!1}const Gc=(e,t,n)=>{let{$head:r,empty:i}=e.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;o=Zc(r)}let s=o&&o.nodeBefore;return!(!s||!ns.isSelectable(s))&&(t&&t(e.tr.setSelection(ns.create(e.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function Zc(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function Yc(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const Xc=(e,t,n)=>{let r=Yc(e,n);if(!r)return!1;let i=eu(r);if(!i)return!1;let o=i.nodeAfter;if(lu(e,i,t,1))return!0;if(0==r.parent.content.size&&(Kc(o,"start")||ns.isSelectable(o))){let n=Mo(e.doc,r.before(),r.after(),si.empty);if(n&&n.slice.size<n.to-n.from){if(t){let r=e.tr.step(n);r.setSelection(Kc(o,"start")?Zo.findFrom(r.doc.resolve(r.mapping.map(i.pos)),1):ns.create(r.doc,r.mapping.map(i.pos))),t(r.scrollIntoView())}return!0}}return!(!o.isAtom||i.depth!=r.depth-1)&&(t&&t(e.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0)},Qc=(e,t,n)=>{let{$head:r,empty:i}=e.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;o=eu(r)}let s=o&&o.nodeAfter;return!(!s||!ns.isSelectable(s))&&(t&&t(e.tr.setSelection(ns.create(e.doc,o.pos)).scrollIntoView()),!0)};function eu(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const tu=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!(!n.parent.type.spec.code||!n.sameParent(r))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)};function nu(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const ru=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),o=n.indexAfter(-1),s=nu(i.contentMatchAt(o));if(!s||!i.canReplaceWith(o,o,s))return!1;if(t){let r=n.after(),i=e.tr.replaceWith(r,r,s.createAndFill());i.setSelection(Zo.near(i.doc.resolve(r),1)),t(i.scrollIntoView())}return!0},iu=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof is||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=nu(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){let n=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,s=e.tr.insert(n,o.createAndFill());s.setSelection(es.create(s.doc,n+1)),t(s.scrollIntoView())}return!0},ou=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let r=n.before();if(Ao(e.doc,r))return t&&t(e.tr.split(r).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Oo(r);return null!=i&&(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)};const su=(e,t)=>{let{$from:n,$to:r}=e.selection;if(e.selection instanceof ns&&e.selection.node.isBlock)return!(!n.parentOffset||!Ao(e.doc,n.pos))&&(t&&t(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.parent.isBlock)return!1;if(t){let i=r.parentOffset==r.parent.content.size,o=e.tr;(e.selection instanceof es||e.selection instanceof is)&&o.deleteSelection();let s=0==n.depth?null:nu(n.node(-1).contentMatchAt(n.indexAfter(-1))),a=au&&au(r.parent,i,n),l=a?[a]:i&&s?[{type:s}]:void 0,c=Ao(o.doc,o.mapping.map(n.pos),1,l);if(l||c||!Ao(o.doc,o.mapping.map(n.pos),1,s?[{type:s}]:void 0)||(s&&(l=[{type:s}]),c=!0),c&&(o.split(o.mapping.map(n.pos),1,l),!i&&!n.parentOffset&&n.parent.type!=s)){let e=o.mapping.map(n.before()),t=o.doc.resolve(e);s&&n.node(-1).canReplaceWith(t.index(),t.index()+1,s)&&o.setNodeMarkup(o.mapping.map(n.before()),s)}t(o.scrollIntoView())}return!0};var au;function lu(e,t,n,r){let i,o,s=t.nodeBefore,a=t.nodeAfter,l=s.type.spec.isolating||a.type.spec.isolating;if(!l&&function(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,o=t.index();return!!(r&&i&&r.type.compatibleContent(i.type))&&(!r.content.size&&t.parent.canReplace(o-1,o)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!(!t.parent.canReplace(o,o+1)||!i.isTextblock&&!jo(e.doc,t.pos))&&(n&&n(e.tr.clearIncompatible(t.pos,r.type,r.contentMatchAt(r.childCount)).join(t.pos).scrollIntoView()),!0))}(e,t,n))return!0;let c=!l&&t.parent.canReplace(t.index(),t.index()+1);if(c&&(i=(o=s.contentMatchAt(s.childCount)).findWrapping(a.type))&&o.matchType(i[0]||a.type).validEnd){if(n){let r=t.pos+a.nodeSize,o=ei.empty;for(let e=i.length-1;e>=0;e--)o=ei.from(i[e].create(null,o));o=ei.from(s.copy(o));let l=e.tr.step(new So(t.pos-1,r,t.pos,r,new si(o,1,0),i.length,!0)),c=r+2*i.length;jo(l.doc,c)&&l.join(c),n(l.scrollIntoView())}return!0}let u=a.type.spec.isolating||r>0&&l?null:Zo.findFrom(t,1),d=u&&u.$from.blockRange(u.$to),h=d&&Oo(d);if(null!=h&&h>=t.depth)return n&&n(e.tr.lift(d,h).scrollIntoView()),!0;if(c&&Kc(a,"start",!0)&&Kc(s,"end")){let r=s,i=[];for(;i.push(r),!r.isTextblock;)r=r.lastChild;let o=a,l=1;for(;!o.isTextblock;o=o.firstChild)l++;if(r.canReplace(r.childCount,r.childCount,o.content)){if(n){let r=ei.empty;for(let e=i.length-1;e>=0;e--)r=ei.from(i[e].copy(r));n(e.tr.step(new So(t.pos-i.length,t.pos+a.nodeSize,t.pos+l,t.pos+a.nodeSize-l,new si(r,i.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function cu(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return!!i.node(o).isTextblock&&(n&&n(t.tr.setSelection(es.create(t.doc,e<0?i.start(o):i.end(o)))),!0)}}const uu=cu(-1),du=cu(1);function hu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){let i=!1;for(let o=0;o<n.selection.ranges.length&&!i;o++){let{$from:{pos:r},$to:{pos:s}}=n.selection.ranges[o];n.doc.nodesBetween(r,s,((r,o)=>{if(i)return!1;if(r.isTextblock&&!r.hasMarkup(e,t))if(r.type==e)i=!0;else{let t=n.doc.resolve(o),r=t.index();i=t.parent.canReplaceWith(r,r+1,e)}}))}if(!i)return!1;if(r){let i=n.tr;for(let r=0;r<n.selection.ranges.length;r++){let{$from:{pos:o},$to:{pos:s}}=n.selection.ranges[r];i.setBlockType(o,s,e,t)}r(i.scrollIntoView())}return!0}}function pu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}let fu=pu(Vc,qc,Gc),mu=pu(Vc,Xc,Qc);const gu={Enter:pu(tu,iu,ou,su),"Mod-Enter":ru,Backspace:fu,"Mod-Backspace":fu,"Shift-Backspace":fu,Delete:mu,"Mod-Delete":mu,"Mod-a":(e,t)=>(t&&t(e.tr.setSelection(new is(e.doc))),!0)},yu={"Ctrl-h":gu.Backspace,"Alt-Backspace":gu["Mod-Backspace"],"Ctrl-d":gu.Delete,"Ctrl-Alt-Backspace":gu["Mod-Delete"],"Alt-Delete":gu["Mod-Delete"],"Alt-d":gu["Mod-Delete"],"Ctrl-a":uu,"Ctrl-e":du};for(let n in gu)yu[n]=gu[n];"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&os.platform();function vu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=!1,l=s;if(!s)return!1;if(s.depth>=2&&i.node(s.depth-1).type.compatibleContent(e)&&0==s.startIndex){if(0==i.index(s.depth-1))return!1;let e=n.doc.resolve(s.start-2);l=new ki(e,e,s.depth),s.endIndex<s.parent.childCount&&(s=new ki(i,n.doc.resolve(o.end(s.depth)),s.depth)),a=!0}let c=No(l,e,t,s);return!!c&&(r&&r(function(e,t,n,r,i){let o=ei.empty;for(let u=n.length-1;u>=0;u--)o=ei.from(n[u].type.create(n[u].attrs,o));e.step(new So(t.start-(r?2:0),t.end,t.start,t.end,new si(o,0,0),n.length,!0));let s=0;for(let u=0;u<n.length;u++)n[u].type==i&&(s=u+1);let a=n.length-s,l=t.start+n.length-(r?2:0),c=t.parent;for(let u=t.startIndex,d=t.endIndex,h=!0;u<d;u++,h=!1)!h&&Ao(e.doc,l,a)&&(e.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return e}(n.tr,s,c,a,e).scrollIntoView()),!0)}}function bu(e){return function(t,n){let{$from:r,$to:i}=t.selection,o=r.blockRange(i,(t=>t.childCount>0&&t.firstChild.type==e));return!!o&&(!n||(r.node(o.depth-1).type==e?function(e,t,n,r){let i=e.tr,o=r.end,s=r.$to.end(r.depth);o<s&&(i.step(new So(o-1,s,o,s,new si(ei.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new ki(i.doc.resolve(r.$from.pos),i.doc.resolve(s),r.depth));const a=Oo(r);if(null==a)return!1;i.lift(r,a);let l=i.mapping.map(o,-1)-1;jo(i.doc,l)&&i.join(l);return t(i.scrollIntoView()),!0}(t,n,e,o):function(e,t,n){let r=e.tr,i=n.parent;for(let p=n.end,f=n.endIndex-1,m=n.startIndex;f>m;f--)p-=i.child(f).nodeSize,r.delete(p-1,p+1);let o=r.doc.resolve(n.start),s=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let a=0==n.startIndex,l=n.endIndex==i.childCount,c=o.node(-1),u=o.index(-1);if(!c.canReplace(u+(a?0:1),u+1,s.content.append(l?ei.empty:ei.from(i))))return!1;let d=o.pos,h=d+s.nodeSize;return r.step(new So(d-(a?1:0),h+(l?1:0),d+1,h-1,new si((a?ei.empty:ei.from(i.copy(ei.empty))).append(l?ei.empty:ei.from(i.copy(ei.empty))),a?0:1,l?0:1),a?0:1)),t(r.scrollIntoView()),!0}(t,n,o)))}}function wu(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:o}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,o=n.storedMarks,n}}}class xu{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){var e=this;const{rawCommands:t,editor:n,state:r}=this,{view:i}=n,{tr:o}=r,s=this.buildProps(o);return Object.fromEntries(Object.entries(t).map((t=>{let[n,r]=t;return[n,function(){const t=r(...arguments)(s);return o.getMeta("preventDispatch")||e.hasCustomState||i.dispatch(o),t}]})))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e){var t=this;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{rawCommands:r,editor:i,state:o}=this,{view:s}=i,a=[],l=!!e,c=e||o.tr,u={...Object.fromEntries(Object.entries(r).map((e=>{let[r,i]=e;return[r,function(){const e=t.buildProps(c,n),r=i(...arguments)(e);return a.push(r),u}]}))),run:()=>(l||!n||c.getMeta("preventDispatch")||this.hasCustomState||s.dispatch(c),a.every((e=>!0===e)))};return u}createCan(e){const{rawCommands:t,state:n}=this,r=!1,i=e||n.tr,o=this.buildProps(i,r),s=Object.fromEntries(Object.entries(t).map((e=>{let[t,n]=e;return[t,function(){return n(...arguments)({...o,dispatch:void 0})}]})));return{...s,chain:()=>this.createChain(i,r)}}buildProps(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const{rawCommands:n,editor:r,state:i}=this,{view:o}=r,s={tr:e,editor:r,view:o,state:wu({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map((e=>{let[t,n]=e;return[t,function(){return n(...arguments)(s)}]})))}};return s}}class ku{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=this.callbacks[e];return i&&i.forEach((e=>e.apply(this,n))),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter((e=>e!==t)):delete this.callbacks[e]),this}removeAllListeners(){this.callbacks={}}}function Su(e,t,n){if(void 0===e.config[t]&&e.parent)return Su(e.parent,t,n);if("function"===typeof e.config[t]){return e.config[t].bind({...n,parent:e.parent?Su(e.parent,t,n):null})}return e.config[t]}function _u(e){const t=e.filter((e=>"extension"===e.type)),n=e.filter((e=>"node"===e.type)),r=e.filter((e=>"mark"===e.type));return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function Eu(e){const t=[],{nodeExtensions:n,markExtensions:r}=_u(e),i=[...n,...r],o={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach((e=>{const n=Su(e,"addGlobalAttributes",{name:e.name,options:e.options,storage:e.storage,extensions:i});if(!n)return;n().forEach((e=>{e.types.forEach((n=>{Object.entries(e.attributes).forEach((e=>{let[r,i]=e;t.push({type:n,name:r,attribute:{...o,...i}})}))}))}))})),i.forEach((e=>{const n={name:e.name,options:e.options,storage:e.storage},r=Su(e,"addAttributes",n);if(!r)return;const i=r();Object.entries(i).forEach((n=>{let[r,i]=n;const s={...o,...i};"function"===typeof(null===s||void 0===s?void 0:s.default)&&(s.default=s.default()),(null===s||void 0===s?void 0:s.isRequired)&&void 0===(null===s||void 0===s?void 0:s.default)&&delete s.default,t.push({type:e.name,name:r,attribute:s})}))})),t}function Cu(e,t){if("string"===typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function Ou(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e=>!!e)).reduce(((e,t)=>{const n={...e};return Object.entries(t).forEach((e=>{let[t,r]=e;if(n[t])if("class"===t){const e=r?r.split(" "):[],i=n[t]?n[t].split(" "):[],o=e.filter((e=>!i.includes(e)));n[t]=[...i,...o].join(" ")}else if("style"===t){const e=r?r.split(";").map((e=>e.trim())).filter(Boolean):[],i=n[t]?n[t].split(";").map((e=>e.trim())).filter(Boolean):[],o=new Map;i.forEach((e=>{const[t,n]=e.split(":").map((e=>e.trim()));o.set(t,n)})),e.forEach((e=>{const[t,n]=e.split(":").map((e=>e.trim()));o.set(t,n)})),n[t]=Array.from(o.entries()).map((e=>{let[t,n]=e;return`${t}: ${n}`})).join("; ")}else n[t]=r;else n[t]=r})),n}),{})}function Nu(e,t){return t.filter((t=>t.type===e.type.name)).filter((e=>e.attribute.rendered)).map((t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]})).reduce(((e,t)=>Ou(e,t)),{})}function Tu(e){return"function"===typeof e}function Au(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(Tu(e)){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return t?e.bind(t)(...r):e(...r)}return e}function ju(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===r)return!1;const i=t.reduce(((e,t)=>{const r=t.attribute.parseHTML?t.attribute.parseHTML(n):function(e){return"string"!==typeof e?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):"true"===e||"false"!==e&&e}(n.getAttribute(t.name));return null===r||void 0===r?e:{...e,[t.name]:r}}),{});return{...r,...i}}}}function Pu(e){return Object.fromEntries(Object.entries(e).filter((e=>{let[t,n]=e;return("attrs"!==t||!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return 0===Object.keys(e).length&&e.constructor===Object}(n))&&(null!==n&&void 0!==n)})))}function Iu(e,t){var n;const r=Eu(e),{nodeExtensions:i,markExtensions:o}=_u(e),s=null===(n=i.find((e=>Su(e,"topNode"))))||void 0===n?void 0:n.name,a=Object.fromEntries(i.map((n=>{const i=r.filter((e=>e.type===n.name)),o={name:n.name,options:n.options,storage:n.storage,editor:t},s=Pu({...e.reduce(((e,t)=>{const r=Su(t,"extendNodeSchema",o);return{...e,...r?r(n):{}}}),{}),content:Au(Su(n,"content",o)),marks:Au(Su(n,"marks",o)),group:Au(Su(n,"group",o)),inline:Au(Su(n,"inline",o)),atom:Au(Su(n,"atom",o)),selectable:Au(Su(n,"selectable",o)),draggable:Au(Su(n,"draggable",o)),code:Au(Su(n,"code",o)),whitespace:Au(Su(n,"whitespace",o)),defining:Au(Su(n,"defining",o)),isolating:Au(Su(n,"isolating",o)),attrs:Object.fromEntries(i.map((e=>{var t;return[e.name,{default:null===(t=null===e||void 0===e?void 0:e.attribute)||void 0===t?void 0:t.default}]})))}),a=Au(Su(n,"parseHTML",o));a&&(s.parseDOM=a.map((e=>ju(e,i))));const l=Su(n,"renderHTML",o);l&&(s.toDOM=e=>l({node:e,HTMLAttributes:Nu(e,i)}));const c=Su(n,"renderText",o);return c&&(s.toText=c),[n.name,s]}))),l=Object.fromEntries(o.map((n=>{const i=r.filter((e=>e.type===n.name)),o={name:n.name,options:n.options,storage:n.storage,editor:t},s=Pu({...e.reduce(((e,t)=>{const r=Su(t,"extendMarkSchema",o);return{...e,...r?r(n):{}}}),{}),inclusive:Au(Su(n,"inclusive",o)),excludes:Au(Su(n,"excludes",o)),group:Au(Su(n,"group",o)),spanning:Au(Su(n,"spanning",o)),code:Au(Su(n,"code",o)),attrs:Object.fromEntries(i.map((e=>{var t;return[e.name,{default:null===(t=null===e||void 0===e?void 0:e.attribute)||void 0===t?void 0:t.default}]})))}),a=Au(Su(n,"parseHTML",o));a&&(s.parseDOM=a.map((e=>ju(e,i))));const l=Su(n,"renderHTML",o);return l&&(s.toDOM=e=>l({mark:e,HTMLAttributes:Nu(e,i)})),[n.name,s]})));return new Hi({topNode:s,nodes:a,marks:l})}function Ru(e,t){return t.nodes[e]||t.marks[e]||null}function Mu(e,t){return Array.isArray(t)?t.some((t=>("string"===typeof t?t:t.name)===e.name)):t}const $u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,((e,t,i,o)=>{var s,a;const l=(null===(a=(s=e.type.spec).toText)||void 0===a?void 0:a.call(s,{node:e,pos:t,parent:i,index:o}))||e.textContent||"%leaf%";n+=e.isAtom&&!e.isText?l:l.slice(0,Math.max(0,r-t))})),n};function Lu(e){return"[object RegExp]"===Object.prototype.toString.call(e)}class Du{constructor(e){this.find=e.find,this.handler=e.handler}}const zu=(e,t)=>{if(Lu(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Fu(e){var t;const{editor:n,from:r,to:i,text:o,rules:s,plugin:a}=e,{view:l}=n;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||(null===(t=c.nodeBefore||c.nodeAfter)||void 0===t?void 0:t.marks.find((e=>e.type.spec.code))))return!1;let u=!1;const d=$u(c)+o;return s.forEach((e=>{if(u)return;const t=zu(d,e.find);if(!t)return;const s=l.state.tr,c=wu({state:l.state,transaction:s}),h={from:r-(t[0].length-o.length),to:i},{commands:p,chain:f,can:m}=new xu({editor:n,state:c});null!==e.handler({state:c,range:h,match:t,commands:p,chain:f,can:m})&&s.steps.length&&(s.setMeta(a,{transform:s,from:r,to:i,text:o}),l.dispatch(s),u=!0)})),u}function Bu(e){const{editor:t,rules:n}=e,r=new gs({state:{init:()=>null,apply(e,i){const o=e.getMeta(r);if(o)return o;const s=e.getMeta("applyInputRules");return!!s&&setTimeout((()=>{const{from:e,text:i}=s,o=e+i.length;Fu({editor:t,from:e,to:o,text:i,rules:n,plugin:r})})),e.selectionSet||e.docChanged?null:i}},props:{handleTextInput:(e,i,o,s)=>Fu({editor:t,from:i,to:o,text:s,rules:n,plugin:r}),handleDOMEvents:{compositionend:e=>(setTimeout((()=>{const{$cursor:i}=e.state.selection;i&&Fu({editor:t,from:i.pos,to:i.pos,text:"",rules:n,plugin:r})})),!1)},handleKeyDown(e,i){if("Enter"!==i.key)return!1;const{$cursor:o}=e.state.selection;return!!o&&Fu({editor:t,from:o.pos,to:o.pos,text:"\n",rules:n,plugin:r})}},isInputRules:!0});return r}function Uu(e){return"Object"===function(e){return Object.prototype.toString.call(e).slice(8,-1)}(e)&&(e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype)}function Hu(e,t){const n={...e};return Uu(e)&&Uu(t)&&Object.keys(t).forEach((r=>{Uu(t[r])&&Uu(e[r])?n[r]=Hu(e[r],t[r]):n[r]=t[r]})),n}class Vu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Au(Su(this,"addOptions",{name:this.name}))),this.storage=Au(Su(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(){return new Vu(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.extend({...this.config,addOptions:()=>Hu(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new Vu(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Au(Su(t,"addOptions",{name:t.name})),t.storage=Au(Su(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit(e){let{editor:t,mark:n}=e;const{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const e=i.marks();if(!!!e.find((e=>(null===e||void 0===e?void 0:e.type.name)===n.name)))return!1;const o=e.find((e=>(null===e||void 0===e?void 0:e.type.name)===n.name));return o&&r.removeStoredMark(o),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}}class Wu{constructor(e){this.find=e.find,this.handler=e.handler}}const qu=(e,t,n)=>{if(Lu(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map((t=>{const n=[t.text];return n.index=t.index,n.input=e,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(t.replaceWith)),n})):[]};function Ju(e){const{editor:t,rules:n}=e;let r=null,i=!1,o=!1,s="undefined"!==typeof ClipboardEvent?new ClipboardEvent("paste"):null,a="undefined"!==typeof DragEvent?new DragEvent("drop"):null;const l=e=>{let{state:n,from:r,to:i,rule:o,pasteEvt:l}=e;const c=n.tr,u=wu({state:n,transaction:c}),d=function(e){const{editor:t,state:n,from:r,to:i,rule:o,pasteEvent:s,dropEvent:a}=e,{commands:l,chain:c,can:u}=new xu({editor:t,state:n}),d=[];return n.doc.nodesBetween(r,i,((e,t)=>{if(!e.isTextblock||e.type.spec.code)return;const h=Math.max(r,t),p=Math.min(i,t+e.content.size),f=e.textBetween(h-t,p-t,void 0,"\ufffc");qu(f,o.find,s).forEach((e=>{if(void 0===e.index)return;const t=h+e.index+1,r=t+e[0].length,i={from:n.tr.mapping.map(t),to:n.tr.mapping.map(r)},p=o.handler({state:n,range:i,match:e,commands:l,chain:c,can:u,pasteEvent:s,dropEvent:a});d.push(p)}))})),d.every((e=>null!==e))}({editor:t,state:u,from:Math.max(r-1,0),to:i.b-1,rule:o,pasteEvent:l,dropEvent:a});if(d&&c.steps.length)return a="undefined"!==typeof DragEvent?new DragEvent("drop"):null,s="undefined"!==typeof ClipboardEvent?new ClipboardEvent("paste"):null,c},c=n.map((e=>new gs({view(e){const t=t=>{var n;r=(null===(n=e.dom.parentElement)||void 0===n?void 0:n.contains(t.target))?e.dom.parentElement:null};return window.addEventListener("dragstart",t),{destroy(){window.removeEventListener("dragstart",t)}}},props:{handleDOMEvents:{drop:(e,t)=>(o=r===e.dom.parentElement,a=t,!1),paste:(e,t)=>{var n;const r=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/html");return s=t,i=!!(null===r||void 0===r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:(t,n,r)=>{const a=t[0],c="paste"===a.getMeta("uiEvent")&&!i,u="drop"===a.getMeta("uiEvent")&&!o,d=a.getMeta("applyPasteRules"),h=!!d;if(!c&&!u&&!h)return;if(h){const{from:t,text:n}=d,i=t+n.length,o=(e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return null===(t=n.clipboardData)||void 0===t||t.setData("text/html",e),n})(n);return l({rule:e,state:r,from:t,to:{b:i},pasteEvt:o})}const p=n.doc.content.findDiffStart(r.doc.content),f=n.doc.content.findDiffEnd(r.doc.content);return"number"===typeof p&&f&&p!==f.b?l({rule:e,state:r,from:p,to:f,pasteEvt:s}):void 0}})));return c}class Ku{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Ku.resolve(e),this.schema=Iu(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Ku.sort(Ku.flatten(e)),n=function(e){const t=e.filter(((t,n)=>e.indexOf(t)!==n));return Array.from(new Set(t))}(t.map((e=>e.name)));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map((e=>`'${e}'`)).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map((e=>{const t=Su(e,"addExtensions",{name:e.name,options:e.options,storage:e.storage});return t?[e,...this.flatten(t())]:e})).flat(10)}static sort(e){return e.sort(((e,t)=>{const n=Su(e,"priority")||100,r=Su(t,"priority")||100;return n>r?-1:n<r?1:0}))}get commands(){return this.extensions.reduce(((e,t)=>{const n=Su(t,"addCommands",{name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Ru(t.name,this.schema)});return n?{...e,...n()}:e}),{})}get plugins(){const{editor:e}=this,t=Ku.sort([...this.extensions].reverse()),n=[],r=[],i=t.map((t=>{const i={name:t.name,options:t.options,storage:t.storage,editor:e,type:Ru(t.name,this.schema)},o=[],s=Su(t,"addKeyboardShortcuts",i);let a={};if("mark"===t.type&&Su(t,"exitable",i)&&(a.ArrowRight=()=>Vu.handleExit({editor:e,mark:t})),s){const t=Object.fromEntries(Object.entries(s()).map((t=>{let[n,r]=t;return[n,()=>r({editor:e})]})));a={...a,...t}}const l=new gs({props:{handleKeyDown:Hc(a)}});o.push(l);const c=Su(t,"addInputRules",i);Mu(t,e.options.enableInputRules)&&c&&n.push(...c());const u=Su(t,"addPasteRules",i);Mu(t,e.options.enablePasteRules)&&u&&r.push(...u());const d=Su(t,"addProseMirrorPlugins",i);if(d){const e=d();o.push(...e)}return o})).flat();return[Bu({editor:e,rules:n}),...Ju({editor:e,rules:r}),...i]}get attributes(){return Eu(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=_u(this.extensions);return Object.fromEntries(t.filter((e=>!!Su(e,"addNodeView"))).map((t=>{const n=this.attributes.filter((e=>e.type===t.name)),r={name:t.name,options:t.options,storage:t.storage,editor:e,type:Cu(t.name,this.schema)},i=Su(t,"addNodeView",r);if(!i)return[];return[t.name,(r,o,s,a,l)=>{const c=Nu(r,n);return i()({node:r,view:o,getPos:s,decorations:a,innerDecorations:l,editor:e,extension:t,HTMLAttributes:c})}]})))}setupExtensions(){this.extensions.forEach((e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const n={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Ru(e.name,this.schema)};if("mark"===e.type){(null===(t=Au(Su(e,"keepOnSplit",n)))||void 0===t||t)&&this.splittableMarks.push(e.name)}const r=Su(e,"onBeforeCreate",n),i=Su(e,"onCreate",n),o=Su(e,"onUpdate",n),s=Su(e,"onSelectionUpdate",n),a=Su(e,"onTransaction",n),l=Su(e,"onFocus",n),c=Su(e,"onBlur",n),u=Su(e,"onDestroy",n);r&&this.editor.on("beforeCreate",r),i&&this.editor.on("create",i),o&&this.editor.on("update",o),s&&this.editor.on("selectionUpdate",s),a&&this.editor.on("transaction",a),l&&this.editor.on("focus",l),c&&this.editor.on("blur",c),u&&this.editor.on("destroy",u)}))}}class Gu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Au(Su(this,"addOptions",{name:this.name}))),this.storage=Au(Su(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(){return new Gu(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.extend({...this.config,addOptions:()=>Hu(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new Gu({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Au(Su(t,"addOptions",{name:t.name})),t.storage=Au(Su(t,"addStorage",{name:t.name,options:t.options})),t}}function Zu(e,t,n){const{from:r,to:i}=t,{blockSeparator:o="\n\n",textSerializers:s={}}=n||{};let a="";return e.nodesBetween(r,i,((e,n,l,c)=>{var u;e.isBlock&&n>r&&(a+=o);const d=null===s||void 0===s?void 0:s[e.type.name];if(d)return l&&(a+=d({node:e,pos:n,parent:l,index:c,range:t})),!1;e.isText&&(a+=null===(u=null===e||void 0===e?void 0:e.text)||void 0===u?void 0:u.slice(Math.max(r,n)-n,i-n))})),a}function Yu(e){return Object.fromEntries(Object.entries(e.nodes).filter((e=>{let[,t]=e;return t.spec.toText})).map((e=>{let[t,n]=e;return[t,n.spec.toText]})))}const Xu=Gu.create({name:"clipboardTextSerializer",addOptions:()=>({blockSeparator:void 0}),addProseMirrorPlugins(){return[new gs({key:new bs("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:o}=i,s=Math.min(...o.map((e=>e.$from.pos))),a=Math.max(...o.map((e=>e.$to.pos))),l=Yu(n);return Zu(r,{from:s,to:a},{...void 0!==this.options.blockSeparator?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}});function Qu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{strict:!0};const r=Object.keys(t);return!r.length||r.every((r=>n.strict?t[r]===e[r]:Lu(t[r])?t[r].test(e[r]):t[r]===e[r]))}function ed(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.find((e=>e.type===t&&Qu(e.attrs,n)))}function td(e,t){return!!ed(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}function nd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||!t)return;let r=e.parent.childAfter(e.parentOffset);if(e.parentOffset===r.offset&&0!==r.offset&&(r=e.parent.childBefore(e.parentOffset)),!r.node)return;const i=ed([...r.node.marks],t,n);if(!i)return;let o=r.index,s=e.start()+r.offset,a=o+1,l=s+r.node.nodeSize;for(ed([...r.node.marks],t,n);o>0&&i.isInSet(e.parent.child(o-1).marks);)o-=1,s-=e.parent.child(o).nodeSize;for(;a<e.parent.childCount&&td([...e.parent.child(a).marks],t,n);)l+=e.parent.child(a).nodeSize,a+=1;return{from:s,to:l}}function rd(e,t){if("string"===typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function id(e){return e instanceof es}function od(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.min(Math.max(e,t),n)}function sd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return null;const n=Zo.atStart(e),r=Zo.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return r;const i=n.from,o=r.to;return"all"===t?es.create(e,od(0,i,o),od(e.content.size,i,o)):es.create(e,od(t,i,o),od(t,i,o))}function ad(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const ld=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];3===r.nodeType&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):1===r.nodeType&&ld(r)}return e};function cd(e){const t=`<body>${e}</body>`,n=(new window.DOMParser).parseFromString(t,"text/html").body;return ld(n)}function ud(e,t,n){n={slice:!0,parseOptions:{},...n};const r="string"===typeof e;if("object"===typeof e&&null!==e)try{if(Array.isArray(e)&&e.length>0)return ei.fromArray(e.map((e=>t.nodeFromJSON(e))));const r=t.nodeFromJSON(e);return n.errorOnInvalidContent&&r.check(),r}catch(i){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",i),ud("",t,n)}if(r){if(n.errorOnInvalidContent){let r=!1,i="";const o=new Hi({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:e=>(r=!0,i="string"===typeof e?e:e.outerHTML,null)}]}})});if(n.slice?Wi.fromSchema(o).parseSlice(cd(e),n.parseOptions):Wi.fromSchema(o).parse(cd(e),n.parseOptions),n.errorOnInvalidContent&&r)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${i}`)})}const r=Wi.fromSchema(t);return n.slice?r.parseSlice(cd(e),n.parseOptions).content:r.parse(cd(e),n.parseOptions)}return ud("",t,n)}function dd(){return"undefined"!==typeof navigator&&/Mac/.test(navigator.platform)}function hd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{from:r,to:i,empty:o}=e.selection,s=t?Cu(t,e.schema):null,a=[];e.doc.nodesBetween(r,i,((e,t)=>{if(e.isText)return;const n=Math.max(r,t),o=Math.min(i,t+e.nodeSize);a.push({node:e,from:n,to:o})}));const l=i-r,c=a.filter((e=>!s||s.name===e.node.type.name)).filter((e=>Qu(e.node.attrs,n,{strict:!1})));if(o)return!!c.length;return c.reduce(((e,t)=>e+t.to-t.from),0)>=l}function pd(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function fd(e,t){const n="string"===typeof t?[t]:t;return Object.keys(e).reduce(((t,r)=>(n.includes(r)||(t[r]=e[r]),t)),{})}function md(e,t){return ud(e,t,{slice:!1,parseOptions:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},errorOnInvalidContent:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).errorOnInvalidContent})}function gd(e,t){const n=rd(t,e.schema),{from:r,to:i,empty:o}=e.selection,s=[];o?(e.storedMarks&&s.push(...e.storedMarks),s.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,(e=>{s.push(...e.marks)}));const a=s.find((e=>e.type.name===n.name));return a?{...a.attrs}:{}}function yd(e){return t=>function(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}(t.$from,e)}function vd(e,t){const n=to.fromSchema(t).serializeFragment(e),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}function bd(e,t){return Zu(e,{from:0,to:e.content.size},t)}function wd(e,t){const n=pd("string"===typeof t?t:t.name,e.schema);return"node"===n?function(e,t){const n=Cu(t,e.schema),{from:r,to:i}=e.selection,o=[];e.doc.nodesBetween(r,i,(e=>{o.push(e)}));const s=o.reverse().find((e=>e.type.name===n.name));return s?{...s.attrs}:{}}(e,t):"mark"===n?gd(e,t):{}}function xd(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach((t=>{const i=nd(n.resolve(e),t.type);i&&r.push({mark:t,...i})})):n.nodesBetween(e,t,((e,t)=>{e&&void 0!==(null===e||void 0===e?void 0:e.nodeSize)&&r.push(...e.marks.map((n=>({from:t,to:t+e.nodeSize,mark:n}))))})),r}function kd(e,t,n){return Object.fromEntries(Object.entries(n).filter((n=>{let[r]=n;const i=e.find((e=>e.type===t&&e.name===r));return!!i&&i.attribute.keepOnSplit})))}function Sd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{empty:r,ranges:i}=e.selection,o=t?rd(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter((e=>!o||o.name===e.type.name)).find((e=>Qu(e.attrs,n,{strict:!1})));let s=0;const a=[];if(i.forEach((t=>{let{$from:n,$to:r}=t;const i=n.pos,o=r.pos;e.doc.nodesBetween(i,o,((e,t)=>{if(!e.isText&&!e.marks.length)return;const n=Math.max(i,t),r=Math.min(o,t+e.nodeSize);s+=r-n,a.push(...e.marks.map((e=>({mark:e,from:n,to:r}))))}))})),0===s)return!1;const l=a.filter((e=>!o||o.name===e.mark.type.name)).filter((e=>Qu(e.mark.attrs,n,{strict:!1}))).reduce(((e,t)=>e+t.to-t.from),0),c=a.filter((e=>!o||e.mark.type!==o&&e.mark.type.excludes(o))).reduce(((e,t)=>e+t.to-t.from),0);return(l>0?l+c:l)>=s}function _d(e,t){const{nodeExtensions:n}=_u(t),r=n.find((t=>t.name===e));if(!r)return!1;const i=Au(Su(r,"group",{name:r.name,options:r.options,storage:r.storage}));return"string"===typeof i&&i.split(" ").includes("list")}function Ed(e){let{checkChildren:t=!0,ignoreWhitespace:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;if(n){if("hardBreak"===e.type.name)return!0;if(e.isText)return/^\s*$/m.test(null!==(r=e.text)&&void 0!==r?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(0===e.content.childCount)return!0;if(t){let r=!0;return e.content.forEach((e=>{!1!==r&&(Ed(e,{ignoreWhitespace:n,checkChildren:t})||(r=!1))})),r}return!1}function Cd(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter((e=>null===t||void 0===t?void 0:t.includes(e.type.name)));e.tr.ensureMarks(r)}}const Od=(e,t)=>{const n=yd((e=>e.type===t))(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===r)return!0;const i=e.doc.nodeAt(r);return n.node.type!==(null===i||void 0===i?void 0:i.type)||!jo(e.doc,n.pos)||(e.join(n.pos),!0)},Nd=(e,t)=>{const n=yd((e=>e.type===t))(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(void 0===r)return!0;const i=e.doc.nodeAt(r);return n.node.type!==(null===i||void 0===i?void 0:i.type)||!jo(e.doc,r)||(e.join(r),!0)};var Td=Object.freeze({__proto__:null,blur:()=>e=>{let{editor:t,view:n}=e;return requestAnimationFrame((()=>{var e;t.isDestroyed||(n.dom.blur(),null===(e=null===window||void 0===window?void 0:window.getSelection())||void 0===e||e.removeAllRanges())})),!0},clearContent:function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t=>{let{commands:n}=t;return n.setContent("",e)}},clearNodes:()=>e=>{let{state:t,tr:n,dispatch:r}=e;const{selection:i}=n,{ranges:o}=i;return!r||(o.forEach((e=>{let{$from:r,$to:i}=e;t.doc.nodesBetween(r.pos,i.pos,((e,t)=>{if(e.type.isText)return;const{doc:r,mapping:i}=n,o=r.resolve(i.map(t)),s=r.resolve(i.map(t+e.nodeSize)),a=o.blockRange(s);if(!a)return;const l=Oo(a);if(e.type.isTextblock){const{defaultType:e}=o.parent.contentMatchAt(o.index());n.setNodeMarkup(a.start,e)}(l||0===l)&&n.lift(a,l)}))})),!0)},command:e=>t=>e(t),createParagraphNear:()=>e=>{let{state:t,dispatch:n}=e;return iu(t,n)},cut:(e,t)=>n=>{let{editor:r,tr:i}=n;const{state:o}=r,s=o.doc.slice(e.from,e.to);i.deleteRange(e.from,e.to);const a=i.mapping.map(t);return i.insert(a,s.content),i.setSelection(new es(i.doc.resolve(a-1))),!0},deleteCurrentNode:()=>e=>{let{tr:t,dispatch:n}=e;const{selection:r}=t,i=r.$anchor.node();if(i.content.size>0)return!1;const o=t.selection.$anchor;for(let s=o.depth;s>0;s-=1){if(o.node(s).type===i.type){if(n){const e=o.before(s),n=o.after(s);t.delete(e,n).scrollIntoView()}return!0}}return!1},deleteNode:e=>t=>{let{tr:n,state:r,dispatch:i}=t;const o=Cu(e,r.schema),s=n.selection.$anchor;for(let e=s.depth;e>0;e-=1){if(s.node(e).type===o){if(i){const t=s.before(e),r=s.after(e);n.delete(t,r).scrollIntoView()}return!0}}return!1},deleteRange:e=>t=>{let{tr:n,dispatch:r}=t;const{from:i,to:o}=e;return r&&n.delete(i,o),!0},deleteSelection:()=>e=>{let{state:t,dispatch:n}=e;return Vc(t,n)},enter:()=>e=>{let{commands:t}=e;return t.keyboardShortcut("Enter")},exitCode:()=>e=>{let{state:t,dispatch:n}=e;return ru(t,n)},extendMarkRange:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:i,dispatch:o}=n;const s=rd(e,i.schema),{doc:a,selection:l}=r,{$from:c,from:u,to:d}=l;if(o){const e=nd(c,s,t);if(e&&e.from<=u&&e.to>=d){const t=es.create(a,e.from,e.to);r.setSelection(t)}}return!0}},first:e=>t=>{const n="function"===typeof e?e(t):e;for(let e=0;e<n.length;e+=1)if(n[e](t))return!0;return!1},focus:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{editor:r,view:i,tr:o,dispatch:s}=n;t={scrollIntoView:!0,...t};const a=()=>{ad()&&i.dom.focus(),requestAnimationFrame((()=>{r.isDestroyed||(i.focus(),(null===t||void 0===t?void 0:t.scrollIntoView)&&r.commands.scrollIntoView())}))};if(i.hasFocus()&&null===e||!1===e)return!0;if(s&&null===e&&!id(r.state.selection))return a(),!0;const l=sd(o.doc,e)||r.state.selection,c=r.state.selection.eq(l);return s&&(c||o.setSelection(l),c&&o.storedMarks&&o.setStoredMarks(o.storedMarks),a()),!0}},forEach:(e,t)=>n=>e.every(((e,r)=>t(e,{...n,index:r}))),insertContent:(e,t)=>n=>{let{tr:r,commands:i}=n;return i.insertContentAt({from:r.selection.from,to:r.selection.to},e,t)},insertContentAt:(e,t,n)=>r=>{let{tr:i,dispatch:o,editor:s}=r;var a;if(o){let r;n={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};try{r=ud(t,s.schema,{parseOptions:{preserveWhitespace:"full",...n.parseOptions},errorOnInvalidContent:null!==(a=n.errorOnInvalidContent)&&void 0!==a?a:s.options.enableContentCheck})}catch(RN){return s.emit("contentError",{editor:s,error:RN,disableCollaboration:()=>{console.error("[tiptap error]: Unable to disable collaboration at this point in time")}}),!1}let{from:o,to:l}="number"===typeof e?{from:e,to:e}:{from:e.from,to:e.to},c=!0,u=!0;if(("type"in r?[r]:r).forEach((e=>{e.check(),c=!!c&&(e.isText&&0===e.marks.length),u=!!u&&e.isBlock})),o===l&&u){const{parent:e}=i.doc.resolve(o);e.isTextblock&&!e.type.spec.code&&!e.childCount&&(o-=1,l+=1)}let d;c?(d=Array.isArray(t)?t.map((e=>e.text||"")).join(""):"object"===typeof t&&t&&t.text?t.text:t,i.insertText(d,o,l)):(d=r,i.replaceWith(o,l,d)),n.updateSelection&&function(e,t,n){const r=e.steps.length-1;if(r<t)return;const i=e.steps[r];if(!(i instanceof ko||i instanceof So))return;const o=e.mapping.maps[r];let s=0;o.forEach(((e,t,n,r)=>{0===s&&(s=r)})),e.setSelection(Zo.near(e.doc.resolve(s),n))}(i,i.steps.length-1,-1),n.applyInputRules&&i.setMeta("applyInputRules",{from:o,text:d}),n.applyPasteRules&&i.setMeta("applyPasteRules",{from:o,text:d})}return!0},joinBackward:()=>e=>{let{state:t,dispatch:n}=e;return qc(t,n)},joinDown:()=>e=>{let{state:t,dispatch:n}=e;return((e,t)=>{let n,r=e.selection;if(r instanceof ns){if(r.node.isTextblock||!jo(e.doc,r.to))return!1;n=r.to}else if(n=Io(e.doc,r.to,1),null==n)return!1;return t&&t(e.tr.join(n).scrollIntoView()),!0})(t,n)},joinForward:()=>e=>{let{state:t,dispatch:n}=e;return Xc(t,n)},joinItemBackward:()=>e=>{let{state:t,dispatch:n,tr:r}=e;try{const e=Io(t.doc,t.selection.$from.pos,-1);return null!==e&&void 0!==e&&(r.join(e,2),n&&n(r),!0)}catch(RN){return!1}},joinItemForward:()=>e=>{let{state:t,dispatch:n,tr:r}=e;try{const e=Io(t.doc,t.selection.$from.pos,1);return null!==e&&void 0!==e&&(r.join(e,2),n&&n(r),!0)}catch(RN){return!1}},joinTextblockBackward:()=>e=>{let{state:t,dispatch:n}=e;return((e,t,n)=>{let r=Wc(e,n);if(!r)return!1;let i=Zc(r);return!!i&&Jc(e,i,t)})(t,n)},joinTextblockForward:()=>e=>{let{state:t,dispatch:n}=e;return((e,t,n)=>{let r=Yc(e,n);if(!r)return!1;let i=eu(r);return!!i&&Jc(e,i,t)})(t,n)},joinUp:()=>e=>{let{state:t,dispatch:n}=e;return((e,t)=>{let n,r=e.selection,i=r instanceof ns;if(i){if(r.node.isTextblock||!jo(e.doc,r.from))return!1;n=r.from}else if(n=Io(e.doc,r.from,-1),null==n)return!1;if(t){let r=e.tr.join(n);i&&r.setSelection(ns.create(r.doc,n-e.doc.resolve(n).nodeBefore.nodeSize)),t(r.scrollIntoView())}return!0})(t,n)},keyboardShortcut:e=>t=>{let{editor:n,view:r,tr:i,dispatch:o}=t;const s=function(e){const t=e.split(/-(?!$)/);let n,r,i,o,s=t[t.length-1];"Space"===s&&(s=" ");for(let a=0;a<t.length-1;a+=1){const e=t[a];if(/^(cmd|meta|m)$/i.test(e))o=!0;else if(/^a(lt)?$/i.test(e))n=!0;else if(/^(c|ctrl|control)$/i.test(e))r=!0;else if(/^s(hift)?$/i.test(e))i=!0;else{if(!/^mod$/i.test(e))throw new Error(`Unrecognized modifier name: ${e}`);ad()||dd()?o=!0:r=!0}}return n&&(s=`Alt-${s}`),r&&(s=`Ctrl-${s}`),o&&(s=`Meta-${s}`),i&&(s=`Shift-${s}`),s}(e).split(/-(?!$)/),a=s.find((e=>!["Alt","Ctrl","Meta","Shift"].includes(e))),l=new KeyboardEvent("keydown",{key:"Space"===a?" ":a,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),c=n.captureTransaction((()=>{r.someProp("handleKeyDown",(e=>e(r,l)))}));return null===c||void 0===c||c.steps.forEach((e=>{const t=e.map(i.mapping);t&&o&&i.maybeStep(t)})),!0},lift:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:i}=n;return!!hd(r,Cu(e,r.schema),t)&&((e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),o=i&&Oo(i);return null!=o&&(t&&t(e.tr.lift(i,o).scrollIntoView()),!0)})(r,i)}},liftEmptyBlock:()=>e=>{let{state:t,dispatch:n}=e;return ou(t,n)},liftListItem:e=>t=>{let{state:n,dispatch:r}=t;return bu(Cu(e,n.schema))(n,r)},newlineInCode:()=>e=>{let{state:t,dispatch:n}=e;return tu(t,n)},resetAttributes:(e,t)=>n=>{let{tr:r,state:i,dispatch:o}=n,s=null,a=null;const l=pd("string"===typeof e?e:e.name,i.schema);return!!l&&("node"===l&&(s=Cu(e,i.schema)),"mark"===l&&(a=rd(e,i.schema)),o&&r.selection.ranges.forEach((e=>{i.doc.nodesBetween(e.$from.pos,e.$to.pos,((e,n)=>{s&&s===e.type&&r.setNodeMarkup(n,void 0,fd(e.attrs,t)),a&&e.marks.length&&e.marks.forEach((i=>{a===i.type&&r.addMark(n,n+e.nodeSize,a.create(fd(i.attrs,t)))}))}))})),!0)},scrollIntoView:()=>e=>{let{tr:t,dispatch:n}=e;return n&&t.scrollIntoView(),!0},selectAll:()=>e=>{let{tr:t,commands:n}=e;return n.setTextSelection({from:0,to:t.doc.content.size})},selectNodeBackward:()=>e=>{let{state:t,dispatch:n}=e;return Gc(t,n)},selectNodeForward:()=>e=>{let{state:t,dispatch:n}=e;return Qc(t,n)},selectParentNode:()=>e=>{let{state:t,dispatch:n}=e;return((e,t)=>{let n,{$from:r,to:i}=e.selection,o=r.sharedDepth(i);return 0!=o&&(n=r.before(o),t&&t(e.tr.setSelection(ns.create(e.doc,n))),!0)})(t,n)},selectTextblockEnd:()=>e=>{let{state:t,dispatch:n}=e;return du(t,n)},selectTextblockStart:()=>e=>{let{state:t,dispatch:n}=e;return uu(t,n)},setContent:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i=>{let{editor:o,tr:s,dispatch:a,commands:l}=i;var c,u;const{doc:d}=s;if("full"!==n.preserveWhitespace){const i=md(e,o.schema,n,{errorOnInvalidContent:null!==(c=r.errorOnInvalidContent)&&void 0!==c?c:o.options.enableContentCheck});return a&&s.replaceWith(0,d.content.size,i).setMeta("preventUpdate",!t),!0}return a&&s.setMeta("preventUpdate",!t),l.insertContentAt({from:0,to:d.content.size},e,{parseOptions:n,errorOnInvalidContent:null!==(u=r.errorOnInvalidContent)&&void 0!==u?u:o.options.enableContentCheck})}},setMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:i,dispatch:o}=n;const{selection:s}=r,{empty:a,ranges:l}=s,c=rd(e,i.schema);if(o)if(a){const e=gd(i,c);r.addStoredMark(c.create({...e,...t}))}else l.forEach((e=>{const n=e.$from.pos,o=e.$to.pos;i.doc.nodesBetween(n,o,((e,i)=>{const s=Math.max(i,n),a=Math.min(i+e.nodeSize,o),l=e.marks.find((e=>e.type===c));l?e.marks.forEach((e=>{c===e.type&&r.addMark(s,a,c.create({...e.attrs,...t}))})):r.addMark(s,a,c.create(t))}))}));return function(e,t,n){var r;const{selection:i}=t;let o=null;if(id(i)&&(o=i.$cursor),o){const t=null!==(r=e.storedMarks)&&void 0!==r?r:o.marks();return!!n.isInSet(t)||!t.some((e=>e.type.excludes(n)))}const{ranges:s}=i;return s.some((t=>{let{$from:r,$to:i}=t,o=0===r.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(r.pos,i.pos,((e,t,r)=>{if(o)return!1;if(e.isInline){const t=!r||r.type.allowsMarkType(n),i=!!n.isInSet(e.marks)||!e.marks.some((e=>e.type.excludes(n)));o=t&&i}return!o})),o}))}(i,r,c)}},setMeta:(e,t)=>n=>{let{tr:r}=n;return r.setMeta(e,t),!0},setNode:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:i,chain:o}=n;const s=Cu(e,r.schema);return s.isTextblock?o().command((e=>{let{commands:n}=e;return!!hu(s,t)(r)||n.clearNodes()})).command((e=>{let{state:n}=e;return hu(s,t)(n,i)})).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)}},setNodeSelection:e=>t=>{let{tr:n,dispatch:r}=t;if(r){const{doc:t}=n,r=od(e,0,t.content.size),i=ns.create(t,r);n.setSelection(i)}return!0},setTextSelection:e=>t=>{let{tr:n,dispatch:r}=t;if(r){const{doc:t}=n,{from:r,to:i}="number"===typeof e?{from:e,to:e}:e,o=es.atStart(t).from,s=es.atEnd(t).to,a=od(r,o,s),l=od(i,o,s),c=es.create(t,a,l);n.setSelection(c)}return!0},sinkListItem:e=>t=>{let{state:n,dispatch:r}=t;const i=Cu(e,n.schema);return(o=i,function(e,t){let{$from:n,$to:r}=e.selection,i=n.blockRange(r,(e=>e.childCount>0&&e.firstChild.type==o));if(!i)return!1;let s=i.startIndex;if(0==s)return!1;let a=i.parent,l=a.child(s-1);if(l.type!=o)return!1;if(t){let n=l.lastChild&&l.lastChild.type==a.type,r=ei.from(n?o.create():null),s=new si(ei.from(o.create(null,ei.from(a.type.create(null,r)))),n?3:1,0),c=i.start,u=i.end;t(e.tr.step(new So(c-(n?3:1),u,c,u,s,1,!0)).scrollIntoView())}return!0})(n,r);var o},splitBlock:function(){let{keepMarks:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=>{let{tr:n,state:r,dispatch:i,editor:o}=t;const{selection:s,doc:a}=n,{$from:l,$to:c}=s,u=kd(o.extensionManager.attributes,l.node().type.name,l.node().attrs);if(s instanceof ns&&s.node.isBlock)return!(!l.parentOffset||!Ao(a,l.pos))&&(i&&(e&&Cd(r,o.extensionManager.splittableMarks),n.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const d=c.parentOffset===c.parent.content.size,h=0===l.depth?void 0:function(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(l.node(-1).contentMatchAt(l.indexAfter(-1)));let p=d&&h?[{type:h,attrs:u}]:void 0,f=Ao(n.doc,n.mapping.map(l.pos),1,p);if(p||f||!Ao(n.doc,n.mapping.map(l.pos),1,h?[{type:h}]:void 0)||(f=!0,p=h?[{type:h,attrs:u}]:void 0),i){if(f&&(s instanceof es&&n.deleteSelection(),n.split(n.mapping.map(l.pos),1,p),h&&!d&&!l.parentOffset&&l.parent.type!==h)){const e=n.mapping.map(l.before()),t=n.doc.resolve(e);l.node(-1).canReplaceWith(t.index(),t.index()+1,h)&&n.setNodeMarkup(n.mapping.map(l.before()),h)}e&&Cd(r,o.extensionManager.splittableMarks),n.scrollIntoView()}return f}},splitListItem:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:i,dispatch:o,editor:s}=n;var a;const l=Cu(e,i.schema),{$from:c,$to:u}=i.selection,d=i.selection.node;if(d&&d.isBlock||c.depth<2||!c.sameParent(u))return!1;const h=c.node(-1);if(h.type!==l)return!1;const p=s.extensionManager.attributes;if(0===c.parent.content.size&&c.node(-1).childCount===c.indexAfter(-1)){if(2===c.depth||c.node(-3).type!==l||c.index(-2)!==c.node(-2).childCount-1)return!1;if(o){let e=ei.empty;const n=c.index(-1)?1:c.index(-2)?2:3;for(let t=c.depth-n;t>=c.depth-3;t-=1)e=ei.from(c.node(t).copy(e));const i=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,o={...kd(p,c.node().type.name,c.node().attrs),...t},s=(null===(a=l.contentMatch.defaultType)||void 0===a?void 0:a.createAndFill(o))||void 0;e=e.append(ei.from(l.createAndFill(null,s)||void 0));const u=c.before(c.depth-(n-1));r.replace(u,c.after(-i),new si(e,4-n,0));let d=-1;r.doc.nodesBetween(u,r.doc.content.size,((e,t)=>{if(d>-1)return!1;e.isTextblock&&0===e.content.size&&(d=t+1)})),d>-1&&r.setSelection(es.near(r.doc.resolve(d))),r.scrollIntoView()}return!0}const f=u.pos===c.end()?h.contentMatchAt(0).defaultType:null,m={...kd(p,h.type.name,h.attrs),...t},g={...kd(p,c.node().type.name,c.node().attrs),...t};r.delete(c.pos,u.pos);const y=f?[{type:l,attrs:m},{type:f,attrs:g}]:[{type:l,attrs:m}];if(!Ao(r.doc,c.pos,2))return!1;if(o){const{selection:e,storedMarks:t}=i,{splittableMarks:n}=s.extensionManager,a=t||e.$to.parentOffset&&e.$from.marks();if(r.split(c.pos,2,y).scrollIntoView(),!a||!o)return!0;const l=a.filter((e=>n.includes(e.type.name)));r.ensureMarks(l)}return!0}},toggleList:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return i=>{let{editor:o,tr:s,state:a,dispatch:l,chain:c,commands:u,can:d}=i;const{extensions:h,splittableMarks:p}=o.extensionManager,f=Cu(e,a.schema),m=Cu(t,a.schema),{selection:g,storedMarks:y}=a,{$from:v,$to:b}=g,w=v.blockRange(b),x=y||g.$to.parentOffset&&g.$from.marks();if(!w)return!1;const k=yd((e=>_d(e.type.name,h)))(g);if(w.depth>=1&&k&&w.depth-k.depth<=1){if(k.node.type===f)return u.liftListItem(m);if(_d(k.node.type.name,h)&&f.validContent(k.node.content)&&l)return c().command((()=>(s.setNodeMarkup(k.pos,f),!0))).command((()=>Od(s,f))).command((()=>Nd(s,f))).run()}return n&&x&&l?c().command((()=>{const e=d().wrapInList(f,r),t=x.filter((e=>p.includes(e.type.name)));return s.ensureMarks(t),!!e||u.clearNodes()})).wrapInList(f,r).command((()=>Od(s,f))).command((()=>Nd(s,f))).run():c().command((()=>!!d().wrapInList(f,r)||u.clearNodes())).wrapInList(f,r).command((()=>Od(s,f))).command((()=>Nd(s,f))).run()}},toggleMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=>{let{state:i,commands:o}=r;const{extendEmptyMarkRange:s=!1}=n,a=rd(e,i.schema);return Sd(i,a,t)?o.unsetMark(a,{extendEmptyMarkRange:s}):o.setMark(a,t)}},toggleNode:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=>{let{state:i,commands:o}=r;const s=Cu(e,i.schema),a=Cu(t,i.schema),l=hd(i,s,n);let c;return i.selection.$anchor.sameParent(i.selection.$head)&&(c=i.selection.$anchor.parent.attrs),l?o.setNode(a,c):o.setNode(s,{...c,...n})}},toggleWrap:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,commands:i}=n;const o=Cu(e,r.schema);return hd(r,o,t)?i.lift(o):i.wrapIn(o,t)}},undoInputRule:()=>e=>{let{state:t,dispatch:n}=e;const r=t.plugins;for(let i=0;i<r.length;i+=1){const e=r[i];let o;if(e.spec.isInputRules&&(o=e.getState(t))){if(n){const e=t.tr,n=o.transform;for(let t=n.steps.length-1;t>=0;t-=1)e.step(n.steps[t].invert(n.docs[t]));if(o.text){const n=e.doc.resolve(o.from).marks();e.replaceWith(o.from,o.to,t.schema.text(o.text,n))}else e.delete(o.from,o.to)}return!0}}return!1},unsetAllMarks:()=>e=>{let{tr:t,dispatch:n}=e;const{selection:r}=t,{empty:i,ranges:o}=r;return i||n&&o.forEach((e=>{t.removeMark(e.$from.pos,e.$to.pos)})),!0},unsetMark:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:i,dispatch:o}=n;var s;const{extendEmptyMarkRange:a=!1}=t,{selection:l}=r,c=rd(e,i.schema),{$from:u,empty:d,ranges:h}=l;if(!o)return!0;if(d&&a){let{from:e,to:t}=l;const n=null===(s=u.marks().find((e=>e.type===c)))||void 0===s?void 0:s.attrs,i=nd(u,c,n);i&&(e=i.from,t=i.to),r.removeMark(e,t,c)}else h.forEach((e=>{r.removeMark(e.$from.pos,e.$to.pos,c)}));return r.removeStoredMark(c),!0}},updateAttributes:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{tr:r,state:i,dispatch:o}=n,s=null,a=null;const l=pd("string"===typeof e?e:e.name,i.schema);return!!l&&("node"===l&&(s=Cu(e,i.schema)),"mark"===l&&(a=rd(e,i.schema)),o&&r.selection.ranges.forEach((e=>{const n=e.$from.pos,o=e.$to.pos;i.doc.nodesBetween(n,o,((e,i)=>{s&&s===e.type&&r.setNodeMarkup(i,void 0,{...e.attrs,...t}),a&&e.marks.length&&e.marks.forEach((s=>{if(a===s.type){const l=Math.max(i,n),c=Math.min(i+e.nodeSize,o);r.addMark(l,c,a.create({...s.attrs,...t}))}}))}))})),!0)}},wrapIn:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:i}=n;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n,r){let{$from:i,$to:o}=n.selection,s=i.blockRange(o),a=s&&No(s,e,t);return!!a&&(r&&r(n.tr.wrap(s,a).scrollIntoView()),!0)}}(Cu(e,r.schema),t)(r,i)}},wrapInList:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=>{let{state:r,dispatch:i}=n;return vu(Cu(e,r.schema),t)(r,i)}}});const Ad=Gu.create({name:"commands",addCommands:()=>({...Td})}),jd=Gu.create({name:"drop",addProseMirrorPlugins(){return[new gs({key:new bs("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),Pd=Gu.create({name:"editable",addProseMirrorPlugins(){return[new gs({key:new bs("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Id=Gu.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new gs({key:new bs("focusEvents"),props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),Rd=Gu.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first((e=>{let{commands:t}=e;return[()=>t.undoInputRule(),()=>t.command((e=>{let{tr:n}=e;const{selection:r,doc:i}=n,{empty:o,$anchor:s}=r,{pos:a,parent:l}=s,c=s.parent.isTextblock&&a>0?n.doc.resolve(a-1):s,u=c.parent.type.spec.isolating,d=s.pos-s.parentOffset,h=u&&1===c.parent.childCount?d===s.pos:Zo.atStart(i).from===a;return!(!o||!l.type.isTextblock||l.textContent.length||!h||h&&"paragraph"===s.parent.type.name)&&t.clearNodes()})),()=>t.deleteSelection(),()=>t.joinBackward(),()=>t.selectNodeBackward()]})),t=()=>this.editor.commands.first((e=>{let{commands:t}=e;return[()=>t.deleteSelection(),()=>t.deleteCurrentNode(),()=>t.joinForward(),()=>t.selectNodeForward()]})),n={Enter:()=>this.editor.commands.first((e=>{let{commands:t}=e;return[()=>t.newlineInCode(),()=>t.createParagraphNear(),()=>t.liftEmptyBlock(),()=>t.splitBlock()]})),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},r={...n},i={...n,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return ad()||dd()?i:r},addProseMirrorPlugins(){return[new gs({key:new bs("clearDocument"),appendTransaction:(e,t,n)=>{const r=e.some((e=>e.docChanged))&&!t.doc.eq(n.doc),i=e.some((e=>e.getMeta("preventClearDocument")));if(!r||i)return;const{empty:o,from:s,to:a}=t.selection,l=Zo.atStart(t.doc).from,c=Zo.atEnd(t.doc).to;if(o||!(s===l&&a===c))return;if(!Ed(n.doc))return;const u=n.tr,d=wu({state:n,transaction:u}),{commands:h}=new xu({editor:this.editor,state:d});return h.clearNodes(),u.steps.length?u:void 0}})]}}),Md=Gu.create({name:"paste",addProseMirrorPlugins(){return[new gs({key:new bs("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),$d=Gu.create({name:"tabindex",addProseMirrorPlugins(){return[new gs({key:new bs("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Ld{get name(){return this.node.type.name}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=t,this.currentNode=r}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return null!==(e=this.actualDepth)&&void 0!==e?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,n=this.to;if(this.isBlock){if(0===this.content.size)return void console.error(`You can\u2019t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);t=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:t,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(0===this.depth)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new Ld(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Ld(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Ld(e,this.editor)}get children(){const e=[];return this.node.content.forEach(((t,n)=>{const r=t.isBlock&&!t.isTextblock,i=this.pos+n+1,o=this.resolvedPos.doc.resolve(i);if(!r&&o.depth<=this.depth)return;const s=new Ld(o,this.editor,r,r?t:null);r&&(s.actualDepth=this.depth+1),e.push(new Ld(o,this.editor,r,r?t:null))})),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=this.parent;for(;r&&!n;){if(r.node.type.name===e)if(Object.keys(t).length>0){const e=r.node.attrs,n=Object.keys(t);for(let r=0;r<n.length;r+=1){const i=n[r];if(e[i]!==t[i])break}}else n=r;r=r.parent}return n}querySelector(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];if(!this.children||0===this.children.length)return r;const i=Object.keys(t);return this.children.forEach((o=>{if(!(n&&r.length>0)){if(o.node.type.name===e){i.every((e=>t[e]===o.node.attrs[e]))&&r.push(o)}n&&r.length>0||(r=r.concat(o.querySelectorAll(e,t,n)))}})),r}setAttribute(e){const t=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,e).setTextSelection(t.from).run()}}class Dd extends ku{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:e=>{let{error:t}=e;throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",(e=>{let{event:t,slice:n,moved:r}=e;return this.options.onDrop(t,n,r)})),this.on("paste",(e=>{let{event:t,slice:n}=e;return this.options.onPaste(t,n)})),window.setTimeout((()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)}),0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=function(e,t,n){const r=document.querySelector(`style[data-tiptap-style${n?`-${n}`:""}]`);if(null!==r)return r;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style"+(n?`-${n}`:""),""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror [contenteditable="false"] {\n  white-space: normal;\n}\n\n.ProseMirror [contenteditable="false"] [contenteditable="true"] {\n  white-space: pre-wrap;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\nimg.ProseMirror-separator {\n  display: inline !important;\n  border: none !important;\n  margin: 0 !important;\n  width: 0 !important;\n  height: 0 !important;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n  margin: 0;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.tippy-box[data-animation=fade][data-state=hidden] {\n  opacity: 0\n}',this.options.injectNonce))}setOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options={...this.options,...e},this.view&&this.state&&!this.isDestroyed&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const n=Tu(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t="string"===typeof e?`${e}$`:e.key,n=this.state.reconfigure({plugins:this.state.plugins.filter((e=>!e.key.startsWith(t)))});return this.view.updateState(n),n}createExtensionManager(){var e,t;const n=[...this.options.enableCoreExtensions?[Pd,Xu.configure({blockSeparator:null===(t=null===(e=this.options.coreExtensionOptions)||void 0===e?void 0:e.clipboardTextSerializer)||void 0===t?void 0:t.blockSeparator}),Ad,Id,Rd,$d,jd,Md].filter((e=>"object"!==typeof this.options.enableCoreExtensions||!1!==this.options.enableCoreExtensions[e.name])):[],...this.options.extensions].filter((e=>["extension","node","mark"].includes(null===e||void 0===e?void 0:e.type)));this.extensionManager=new Ku(n,this)}createCommandManager(){this.commandManager=new xu({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){let e;try{e=md(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(RN){if(!(RN instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(RN.message))throw RN;this.emit("contentError",{editor:this,error:RN,disableCollaboration:()=>{this.options.extensions=this.options.extensions.filter((e=>"collaboration"!==e.name)),this.createExtensionManager()}}),e=md(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const t=sd(e,this.options.autofocus);this.view=new Nc(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:fs.create({doc:e,selection:t||void 0})});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.createNodeViews(),this.prependClass();this.view.dom.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction)return this.capturedTransaction?void e.steps.forEach((e=>{var t;return null===(t=this.capturedTransaction)||void 0===t?void 0:t.step(e)})):void(this.capturedTransaction=e);const t=this.state.apply(e),n=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),n&&this.emit("selectionUpdate",{editor:this,transaction:e});const r=e.getMeta("focus"),i=e.getMeta("blur");r&&this.emit("focus",{editor:this,event:r.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return wd(this.state,e)}isActive(e,t){const n="string"===typeof e?e:null,r="string"===typeof e?t:e;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return hd(e,null,n)||Sd(e,null,n);const r=pd(t,e.schema);return"node"===r?hd(e,t,n):"mark"===r&&Sd(e,t,n)}(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return vd(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t="\n\n",textSerializers:n={}}=e||{};return bd(this.state.doc,{blockSeparator:t,textSerializers:{...Yu(this.schema),...n}})}get isEmpty(){return Ed(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(null===(e=this.view)||void 0===e?void 0:e.docView)}$node(e,t){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return(null===(n=this.$doc)||void 0===n?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new Ld(t,this)}get $doc(){return this.$pos(0)}}function zd(e){return new Du({find:e.find,handler:t=>{let{state:n,range:r,match:i}=t;const o=Au(e.getAttributes,void 0,i);if(!1===o||null===o)return null;const{tr:s}=n,a=i[i.length-1],l=i[0];if(a){const t=l.search(/\S/),i=r.from+l.indexOf(a),c=i+a.length;if(xd(r.from,r.to,n.doc).filter((t=>t.mark.type.excluded.find((n=>n===e.type&&n!==t.mark.type)))).filter((e=>e.to>i)).length)return null;c<r.to&&s.delete(c,r.to),i>r.from&&s.delete(r.from+t,i);const u=r.from+t+a.length;s.addMark(r.from+t,u,e.type.create(o||{})),s.removeStoredMark(e.type)}}})}function Fd(e){return new Du({find:e.find,handler:t=>{let{state:n,range:r,match:i}=t;const o=n.doc.resolve(r.from),s=Au(e.getAttributes,void 0,i)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),e.type))return null;n.tr.delete(r.from,r.to).setBlockType(r.from,r.from,e.type,s)}})}function Bd(e){return new Du({find:e.find,handler:t=>{let{state:n,range:r,match:i,chain:o}=t;const s=Au(e.getAttributes,void 0,i)||{},a=n.tr.delete(r.from,r.to),l=a.doc.resolve(r.from).blockRange(),c=l&&No(l,e.type,s);if(!c)return null;if(a.wrap(l,c),e.keepMarks&&e.editor){const{selection:t,storedMarks:r}=n,{splittableMarks:i}=e.editor.extensionManager,o=r||t.$to.parentOffset&&t.$from.marks();if(o){const e=o.filter((e=>i.includes(e.type.name)));a.ensureMarks(e)}}if(e.keepAttributes){const t="bulletList"===e.type.name||"orderedList"===e.type.name?"listItem":"taskList";o().updateAttributes(t,s).run()}const u=a.doc.resolve(r.from-1).nodeBefore;u&&u.type===e.type&&jo(a.doc,r.from-1)&&(!e.joinPredicate||e.joinPredicate(i,u))&&a.join(r.from-1)}})}class Ud{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Au(Su(this,"addOptions",{name:this.name}))),this.storage=Au(Su(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(){return new Ud(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}configure(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.extend({...this.config,addOptions:()=>Hu(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new Ud(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=Au(Su(t,"addOptions",{name:t.name})),t.storage=Au(Su(t,"addStorage",{name:t.name,options:t.options})),t}}function Hd(e){return new Wu({find:e.find,handler:t=>{let{state:n,range:r,match:i,pasteEvent:o}=t;const s=Au(e.getAttributes,void 0,i,o);if(!1===s||null===s)return null;const{tr:a}=n,l=i[i.length-1],c=i[0];let u=r.to;if(l){const t=c.search(/\S/),i=r.from+c.indexOf(l),o=i+l.length;if(xd(r.from,r.to,n.doc).filter((t=>t.mark.type.excluded.find((n=>n===e.type&&n!==t.mark.type)))).filter((e=>e.to>i)).length)return null;o<r.to&&a.delete(o,r.to),i>r.from&&a.delete(r.from+t,i),u=r.from+t+l.length,a.addMark(r.from+t,u,e.type.create(s||{})),a.removeStoredMark(e.type)}}})}function Vd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Wd,qd={exports:{}},Jd={};qd.exports=function(){if(Wd)return Jd;Wd=1;var e=a,t="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},n=e.useState,r=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function s(e){var n=e.getSnapshot;e=e.value;try{var r=n();return!t(e,r)}catch(i){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var a=t(),l=n({inst:{value:a,getSnapshot:t}}),c=l[0].inst,u=l[1];return i((function(){c.value=a,c.getSnapshot=t,s(c)&&u({inst:c})}),[e,a,t]),r((function(){return s(c)&&u({inst:c}),e((function(){s(c)&&u({inst:c})}))}),[e]),o(a),a};return Jd.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:l,Jd}();var Kd=qd.exports;const Gd=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{"function"===typeof t?t(e):t&&(t.current=e)}))}},Zd=e=>{let{contentComponent:t}=e;const n=Kd.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return a.createElement(a.Fragment,null,Object.values(n))};class Yd extends a.Component{constructor(e){var t;super(e),this.editorContentRef=a.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:Boolean(null===(t=e.editor)||void 0===t?void 0:t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=function(){const e=new Set;let t={};return{subscribe:t=>(e.add(t),()=>{e.delete(t)}),getSnapshot:()=>t,getServerSnapshot:()=>t,setRenderer(n,r){t={...t,[n]:u.createPortal(r.reactElement,r.element,n)},e.forEach((e=>e()))},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach((e=>e()))}}}(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe((()=>{this.setState((e=>e.hasContentComponentInitialized?e:{hasContentComponentInitialized:!0})),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()}))),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e)return;if(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild)return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...n}=this.props;return a.createElement(a.Fragment,null,a.createElement("div",{ref:Gd(t,this.editorContentRef),...n}),(null===e||void 0===e?void 0:e.contentComponent)&&a.createElement(Zd,{contentComponent:e.contentComponent}))}}const Xd=(0,a.forwardRef)(((e,t)=>{const n=a.useMemo((()=>Math.floor(4294967295*Math.random()).toString()),[e.editor]);return a.createElement(Yd,{key:n,innerRef:t,...e})})),Qd=a.memo(Xd);var eh,th=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;for(i of t.entries())if(!e(i[1],n.get(i[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(t[i]!==n[i])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!==i--;){var s=o[i];if(("_owner"!==s||!t.$$typeof)&&!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n},nh=Vd(th),rh={exports:{}},ih={};rh.exports=function(){if(eh)return ih;eh=1;var e=a,t=Kd,n="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},r=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,s=e.useMemo,l=e.useDebugValue;return ih.useSyncExternalStoreWithSelector=function(e,t,a,c,u){var d=i(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=s((function(){function e(e){if(!o){if(o=!0,r=e,e=c(e),void 0!==u&&h.hasValue){var t=h.value;if(u(t,e))return i=t}return i=e}if(t=i,n(r,e))return t;var s=c(e);return void 0!==u&&u(t,s)?t:(r=e,i=s)}var r,i,o=!1,s=void 0===a?null:a;return[function(){return e(t())},null===s?void 0:function(){return e(s())}]}),[t,a,c,u]);var p=r(e,d[0],d[1]);return o((function(){h.hasValue=!0,h.value=p}),[p]),l(p),p},ih}();var oh=rh.exports;class sh{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber||(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber}),this.lastSnapshot}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach((e=>e()))},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}}const ah="undefined"===typeof window,lh=ah||Boolean("undefined"!==typeof window&&window.next);class ch{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach((e=>e()))}getInitialEditor(){return void 0===this.options.current.immediatelyRender?ah||lh?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){var e=this;const t={...this.options.current,onBeforeCreate:function(){for(var t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return null===(n=(t=e.options.current).onBeforeCreate)||void 0===n?void 0:n.call(t,...i)},onBlur:function(){for(var t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return null===(n=(t=e.options.current).onBlur)||void 0===n?void 0:n.call(t,...i)},onCreate:function(){for(var t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return null===(n=(t=e.options.current).onCreate)||void 0===n?void 0:n.call(t,...i)},onDestroy:function(){for(var t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return null===(n=(t=e.options.current).onDestroy)||void 0===n?void 0:n.call(t,...i)},onFocus:function(){for(var t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return null===(n=(t=e.options.current).onFocus)||void 0===n?void 0:n.call(t,...i)},onSelectionUpdate:function(){for(var t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return null===(n=(t=e.options.current).onSelectionUpdate)||void 0===n?void 0:n.call(t,...i)},onTransaction:function(){for(var t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return null===(n=(t=e.options.current).onTransaction)||void 0===n?void 0:n.call(t,...i)},onUpdate:function(){for(var t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return null===(n=(t=e.options.current).onUpdate)||void 0===n?void 0:n.call(t,...i)},onContentError:function(){for(var t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return null===(n=(t=e.options.current).onContentError)||void 0===n?void 0:n.call(t,...i)},onDrop:function(){for(var t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return null===(n=(t=e.options.current).onDrop)||void 0===n?void 0:n.call(t,...i)},onPaste:function(){for(var t,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return null===(n=(t=e.options.current).onPaste)||void 0===n?void 0:n.call(t,...i)}};return new Dd(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&0===e.length?this.editor.setOptions(this.options.current):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(null===this.previousDeps)return void(this.previousDeps=e);const t=this.previousDeps.length===e.length&&this.previousDeps.every(((t,n)=>t===e[n]));if(t)return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout((()=>{this.isComponentMounted&&this.instanceId===e?t&&t.setOptions(this.options.current):t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))}),1)}}function uh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=(0,a.useRef)(e);n.current=e;const[r]=(0,a.useState)((()=>new ch(n))),i=Kd.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return(0,a.useDebugValue)(i),(0,a.useEffect)(r.onRender(t)),function(e){var t;const[n]=(0,a.useState)((()=>new sh(e.editor))),r=oh.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,null!==(t=e.equalityFn)&&void 0!==t?t:nh);(0,a.useEffect)((()=>n.watch(e.editor)),[e.editor,n]),(0,a.useDebugValue)(r)}({editor:i,selector:t=>{let{transactionNumber:n}=t;return!1===e.shouldRerenderOnTransaction?null:e.immediatelyRender&&0===n?0:n+1}}),i}const dh=(0,a.createContext)({editor:null});dh.Consumer;const hh=(0,a.createContext)({onDragStart:void 0}),ph=()=>(0,a.useContext)(hh);a.forwardRef(((e,t)=>{const{onDragStart:n}=ph(),r=e.as||"div";return a.createElement(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})}));const fh=/^\s*>\s$/,mh=Ud.create({name:"blockquote",addOptions:()=>({HTMLAttributes:{}}),content:"block+",group:"block",defining:!0,parseHTML:()=>[{tag:"blockquote"}],renderHTML(e){let{HTMLAttributes:t}=e;return["blockquote",Ou(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>e=>{let{commands:t}=e;return t.wrapIn(this.name)},toggleBlockquote:()=>e=>{let{commands:t}=e;return t.toggleWrap(this.name)},unsetBlockquote:()=>e=>{let{commands:t}=e;return t.lift(this.name)}}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Bd({find:fh,type:this.type})]}}),gh=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,yh=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,vh=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,bh=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,wh=Vu.create({name:"bold",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"strong"},{tag:"b",getAttrs:e=>"normal"!==e.style.fontWeight&&null},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}],renderHTML(e){let{HTMLAttributes:t}=e;return["strong",Ou(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleBold:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetBold:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[zd({find:gh,type:this.type}),zd({find:vh,type:this.type})]},addPasteRules(){return[Hd({find:yh,type:this.type}),Hd({find:bh,type:this.type})]}}),xh=Ud.create({name:"listItem",addOptions:()=>({HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}),content:"paragraph block*",defining:!0,parseHTML:()=>[{tag:"li"}],renderHTML(e){let{HTMLAttributes:t}=e;return["li",Ou(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),kh=Vu.create({name:"textStyle",priority:101,addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"span",getAttrs:e=>!!e.hasAttribute("style")&&{}}],renderHTML(e){let{HTMLAttributes:t}=e;return["span",Ou(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>e=>{let{state:t,commands:n}=e;const r=gd(t,this.type);return!!Object.entries(r).some((e=>{let[,t]=e;return!!t}))||n.unsetMark(this.name)}}}}),Sh=/^\s*([-+*])\s$/,_h=Ud.create({name:"bulletList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML:()=>[{tag:"ul"}],renderHTML(e){let{HTMLAttributes:t}=e;return["ul",Ou(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>e=>{let{commands:t,chain:n}=e;return this.options.keepAttributes?n().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(xh.name,this.editor.getAttributes(kh.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=Bd({find:Sh,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Bd({find:Sh,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(kh.name),editor:this.editor})),[e]}}),Eh=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,Ch=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,Oh=Vu.create({name:"code",addOptions:()=>({HTMLAttributes:{}}),excludes:"_",code:!0,exitable:!0,parseHTML:()=>[{tag:"code"}],renderHTML(e){let{HTMLAttributes:t}=e;return["code",Ou(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleCode:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetCode:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[zd({find:Eh,type:this.type})]},addPasteRules(){return[Hd({find:Ch,type:this.type})]}}),Nh=/^```([a-z]+)?[\s\n]$/,Th=/^~~~([a-z]+)?[\s\n]$/,Ah=Ud.create({name:"codeBlock",addOptions:()=>({languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}),content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,r=[...(null===(t=e.firstElementChild)||void 0===t?void 0:t.classList)||[]].filter((e=>e.startsWith(n))).map((e=>e.replace(n,"")))[0];return r||null},rendered:!1}}},parseHTML:()=>[{tag:"pre",preserveWhitespace:"full"}],renderHTML(e){let{node:t,HTMLAttributes:n}=e;return["pre",Ou(this.options.HTMLAttributes,n),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>t=>{let{commands:n}=t;return n.setNode(this.name,e)},toggleCodeBlock:e=>t=>{let{commands:n}=t;return n.toggleNode(this.name,"paragraph",e)}}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=1===t.pos;return!(!e||t.parent.type.name!==this.name)&&(!(!n&&t.parent.textContent.length)&&this.editor.commands.clearNodes())},Enter:e=>{let{editor:t}=e;if(!this.options.exitOnTripleEnter)return!1;const{state:n}=t,{selection:r}=n,{$from:i,empty:o}=r;if(!o||i.parent.type!==this.type)return!1;const s=i.parentOffset===i.parent.nodeSize-2,a=i.parent.textContent.endsWith("\n\n");return!(!s||!a)&&t.chain().command((e=>{let{tr:t}=e;return t.delete(i.pos-2,i.pos),!0})).exitCode().run()},ArrowDown:e=>{let{editor:t}=e;if(!this.options.exitOnArrowDown)return!1;const{state:n}=t,{selection:r,doc:i}=n,{$from:o,empty:s}=r;if(!s||o.parent.type!==this.type)return!1;if(!(o.parentOffset===o.parent.nodeSize-2))return!1;const a=o.after();if(void 0===a)return!1;return i.nodeAt(a)?t.commands.command((e=>{let{tr:t}=e;return t.setSelection(Zo.near(i.resolve(a))),!0})):t.commands.exitCode()}}},addInputRules(){return[Fd({find:Nh,type:this.type,getAttributes:e=>({language:e[1]})}),Fd({find:Th,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new gs({key:new bs("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData)return!1;if(this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,o=null===i||void 0===i?void 0:i.mode;if(!n||!o)return!1;const{tr:s,schema:a}=e.state,l=a.text(n.replace(/\r\n?/g,"\n"));return s.replaceSelectionWith(this.type.create({language:o},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(es.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),e.dispatch(s),!0}}})]}}),jh=Ud.create({name:"doc",topNode:!0,content:"block+"});function Ph(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new gs({view:t=>new Ih(t,e)})}class Ih{constructor(e,t){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(n=t.width)&&void 0!==n?n:1,this.color=!1===t.color?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map((t=>{let n=e=>{this[t](e)};return e.dom.addEventListener(t,n),{name:t,handler:n}}))}destroy(){this.handlers.forEach((e=>{let{name:t,handler:n}=e;return this.editorView.dom.removeEventListener(t,n)}))}update(e,t){null!=this.cursorPos&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,null==e?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e,t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent;if(n){let n=t.nodeBefore,r=t.nodeAfter;if(n||r){let t=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0));if(t){let i=t.getBoundingClientRect(),o=n?i.bottom:i.top;n&&r&&(o=(o+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),e={left:i.left,right:i.right,top:o-this.width/2,bottom:o+this.width/2}}}}if(!e){let t=this.editorView.coordsAtPos(this.cursorPos);e={left:t.left-this.width/2,right:t.left+this.width/2,top:t.top,bottom:t.bottom}}let r,i,o=this.editorView.dom.offsetParent;if(this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!o||o==document.body&&"static"==getComputedStyle(o).position)r=-pageXOffset,i=-pageYOffset;else{let e=o.getBoundingClientRect();r=e.left-o.scrollLeft,i=e.top-o.scrollTop}this.element.style.left=e.left-r+"px",this.element.style.top=e.top-i+"px",this.element.style.width=e.right-e.left+"px",this.element.style.height=e.bottom-e.top+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout((()=>this.setCursor(null)),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),r=n&&n.type.spec.disableDropCursor,i="function"==typeof r?r(this.editorView,t,e):r;if(t&&!i){let e=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let t=Ro(this.editorView.state.doc,e,this.editorView.dragging.slice);null!=t&&(e=t)}this.setCursor(e),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){e.target!=this.editorView.dom&&this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const Rh=Gu.create({name:"dropCursor",addOptions:()=>({color:"currentColor",width:1,class:void 0}),addProseMirrorPlugins(){return[Ph(this.options)]}});class Mh extends Zo{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return Mh.valid(n)?new Mh(n):Zo.near(n)}content(){return si.empty}eq(e){return e instanceof Mh&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new Mh(e.resolve(t.pos))}getBookmark(){return new $h(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!function(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(0!=n)for(let e=r.child(n-1);;e=e.lastChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e)||!function(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n!=r.childCount)for(let e=r.child(n);;e=e.firstChild){if(0==e.childCount&&!e.inlineContent||e.isAtom||e.type.spec.isolating)return!0;if(e.inlineContent)return!1}else if(r.type.spec.isolating)return!0}return!0}(e))return!1;let n=t.type.spec.allowGapCursor;if(null!=n)return n;let r=t.contentMatchAt(e.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e:for(;;){if(!n&&Mh.valid(e))return e;let r=e.pos,i=null;for(let n=e.depth;;n--){let o=e.node(n);if(t>0?e.indexAfter(n)<o.childCount:e.index(n)>0){i=o.child(t>0?e.indexAfter(n):e.index(n)-1);break}if(0==n)return null;r+=t;let s=e.doc.resolve(r);if(Mh.valid(s))return s}for(;;){let o=t>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!ns.isSelectable(i)){e=e.doc.resolve(r+i.nodeSize*t),n=!1;continue e}break}i=o,r+=t;let s=e.doc.resolve(r);if(Mh.valid(s))return s}return null}}}Mh.prototype.visible=!1,Mh.findFrom=Mh.findGapCursorFrom,Zo.jsonID("gapcursor",Mh);class $h{constructor(e){this.pos=e}map(e){return new $h(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Mh.valid(t)?new Mh(t):Zo.near(t)}}const Lh=Hc({ArrowLeft:Dh("horiz",-1),ArrowRight:Dh("horiz",1),ArrowUp:Dh("vert",-1),ArrowDown:Dh("vert",1)});function Dh(e,t){const n="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,r,i){let o=e.selection,s=t>0?o.$to:o.$from,a=o.empty;if(o instanceof es){if(!i.endOfTextblock(n)||0==s.depth)return!1;a=!1,s=e.doc.resolve(t>0?s.after():s.before())}let l=Mh.findGapCursorFrom(s,t,a);return!!l&&(r&&r(e.tr.setSelection(new Mh(l))),!0)}}function zh(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!Mh.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return!(i&&i.inside>-1&&ns.isSelectable(e.state.doc.nodeAt(i.inside)))&&(e.dispatch(e.state.tr.setSelection(new Mh(r))),!0)}function Fh(e,t){if("insertCompositionText"!=t.inputType||!(e.state.selection instanceof Mh))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=ei.empty;for(let s=r.length-1;s>=0;s--)i=ei.from(r[s].createAndFill(null,i));let o=e.state.tr.replace(n.pos,n.pos,new si(i,0,0));return o.setSelection(es.near(o.doc.resolve(n.pos+1))),e.dispatch(o),!1}function Bh(e){if(!(e.selection instanceof Mh))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",rc.create(e.doc,[ec.widget(e.selection.head,t,{key:"gapcursor"})])}const Uh=Gu.create({name:"gapCursor",addProseMirrorPlugins:()=>[new gs({props:{decorations:Bh,createSelectionBetween:(e,t,n)=>t.pos==n.pos&&Mh.valid(n)?new Mh(n):null,handleClick:zh,handleKeyDown:Lh,handleDOMEvents:{beforeinput:Fh}}})],extendNodeSchema(e){var t;return{allowGapCursor:null!==(t=Au(Su(e,"allowGapCursor",{name:e.name,options:e.options,storage:e.storage})))&&void 0!==t?t:null}}}),Hh=Ud.create({name:"hardBreak",addOptions:()=>({keepMarks:!0,HTMLAttributes:{}}),inline:!0,group:"inline",selectable:!1,parseHTML:()=>[{tag:"br"}],renderHTML(e){let{HTMLAttributes:t}=e;return["br",Ou(this.options.HTMLAttributes,t)]},renderText:()=>"\n",addCommands(){return{setHardBreak:()=>e=>{let{commands:t,chain:n,state:r,editor:i}=e;return t.first([()=>t.exitCode(),()=>t.command((()=>{const{selection:e,storedMarks:t}=r;if(e.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:s}=i.extensionManager,a=t||e.$to.parentOffset&&e.$from.marks();return n().insertContent({type:this.name}).command((e=>{let{tr:t,dispatch:n}=e;if(n&&a&&o){const e=a.filter((e=>s.includes(e.type.name)));t.ensureMarks(e)}return!0})).run()}))])}}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Vh=Ud.create({name:"heading",addOptions:()=>({levels:[1,2,3,4,5,6],HTMLAttributes:{}}),content:"inline*",group:"block",defining:!0,addAttributes:()=>({level:{default:1,rendered:!1}}),parseHTML(){return this.options.levels.map((e=>({tag:`h${e}`,attrs:{level:e}})))},renderHTML(e){let{node:t,HTMLAttributes:n}=e;return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Ou(this.options.HTMLAttributes,n),0]},addCommands(){return{setHeading:e=>t=>{let{commands:n}=t;return!!this.options.levels.includes(e.level)&&n.setNode(this.name,e)},toggleHeading:e=>t=>{let{commands:n}=t;return!!this.options.levels.includes(e.level)&&n.toggleNode(this.name,"paragraph",e)}}},addKeyboardShortcuts(){return this.options.levels.reduce(((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})})),{})},addInputRules(){return this.options.levels.map((e=>Fd({find:new RegExp(`^(#{1,${e}})\\s$`),type:this.type,getAttributes:{level:e}})))}});var Wh=200,qh=function(){};qh.prototype.append=function(e){return e.length?(e=qh.from(e),!this.length&&e||e.length<Wh&&this.leafAppend(e)||this.length<Wh&&e.leafPrepend(this)||this.appendInner(e)):this},qh.prototype.prepend=function(e){return e.length?qh.from(e).append(this):this},qh.prototype.appendInner=function(e){return new Kh(this,e)},qh.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?qh.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},qh.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},qh.prototype.forEach=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)},qh.prototype.map=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(t,n){return r.push(e(t,n))}),t,n),r},qh.from=function(e){return e instanceof qh?e:e&&e.length?new Jh(e):qh.empty};var Jh=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,n){return 0==e&&n==this.length?this:new t(this.values.slice(e,n))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,n,r){for(var i=t;i<n;i++)if(!1===e(this.values[i],r+i))return!1},t.prototype.forEachInvertedInner=function(e,t,n,r){for(var i=t-1;i>=n;i--)if(!1===e(this.values[i],r+i))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=Wh)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=Wh)return new t(e.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(qh);qh.empty=new Jh([]);var Kh=function(e){function t(t,n){e.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,n,r){var i=this.left.length;return!(t<i&&!1===this.left.forEachInner(e,t,Math.min(n,i),r))&&(!(n>i&&!1===this.right.forEachInner(e,Math.max(t-i,0),Math.min(this.length,n)-i,r+i))&&void 0)},t.prototype.forEachInvertedInner=function(e,t,n,r){var i=this.left.length;return!(t>i&&!1===this.right.forEachInvertedInner(e,t-i,Math.max(n,i)-i,r+i))&&(!(n<i&&!1===this.left.forEachInvertedInner(e,Math.min(t,i),n,r))&&void 0)},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var n=this.left.length;return t<=n?this.left.slice(e,t):e>=n?this.right.slice(e-n,t-n):this.left.slice(e,n).append(this.right.slice(0,t-n))},t.prototype.leafAppend=function(e){var n=this.right.leafAppend(e);if(n)return new t(this.left,n)},t.prototype.leafPrepend=function(e){var n=this.left.leafPrepend(e);if(n)return new t(n,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(qh);const Gh=qh;class Zh{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(0==this.eventCount)return null;let n,r,i=this.items.length;for(;;i--){if(this.items.get(i-1).selection){--i;break}}t&&(n=this.remapping(i,this.items.length),r=n.maps.length);let o,s,a=e.tr,l=[],c=[];return this.items.forEach(((e,t)=>{if(!e.step)return n||(n=this.remapping(i,t+1),r=n.maps.length),r--,void c.push(e);if(n){c.push(new Yh(e.map));let t,i=e.step.map(n.slice(r));i&&a.maybeStep(i).doc&&(t=a.mapping.maps[a.mapping.maps.length-1],l.push(new Yh(t,void 0,void 0,l.length+c.length))),r--,t&&n.appendMap(t,r)}else a.maybeStep(e.step);return e.selection?(o=n?e.selection.map(n.slice(r)):e.selection,s=new Zh(this.items.slice(0,i).append(c.reverse().concat(l)),this.eventCount-1),!1):void 0}),this.items.length,0),{remaining:s,transform:a,selection:o}}addTransform(e,t,n,r){let i=[],o=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null;for(let c=0;c<e.steps.length;c++){let n,l=e.steps[c].invert(e.docs[c]),u=new Yh(e.mapping.maps[c],l,t);(n=a&&a.merge(u))&&(u=n,c?i.pop():s=s.slice(0,s.length-1)),i.push(u),t&&(o++,t=void 0),r||(a=u)}let l=o-n.depth;return l>Qh&&(s=function(e,t){let n;return e.forEach(((e,r)=>{if(e.selection&&0==t--)return n=r,!1})),e.slice(n)}(s,l),o-=l),new Zh(s.append(i),o)}remapping(e,t){let n=new po;return this.items.forEach(((t,r)=>{let i=null!=t.mirrorOffset&&r-t.mirrorOffset>=e?n.maps.length-t.mirrorOffset:void 0;n.appendMap(t.map,i)}),e,t),n}addMaps(e){return 0==this.eventCount?this:new Zh(this.items.append(e.map((e=>new Yh(e)))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],r=Math.max(0,this.items.length-t),i=e.mapping,o=e.steps.length,s=this.eventCount;this.items.forEach((e=>{e.selection&&s--}),r);let a=t;this.items.forEach((t=>{let r=i.getMirror(--a);if(null==r)return;o=Math.min(o,r);let l=i.maps[r];if(t.step){let o=e.steps[r].invert(e.docs[r]),c=t.selection&&t.selection.map(i.slice(a+1,r));c&&s++,n.push(new Yh(l,o,c))}else n.push(new Yh(l))}),r);let l=[];for(let d=t;d<o;d++)l.push(new Yh(i.maps[d]));let c=this.items.slice(0,r).append(l).append(n),u=new Zh(c,s);return u.emptyItemCount()>500&&(u=u.compress(this.items.length-n.length)),u}emptyItemCount(){let e=0;return this.items.forEach((t=>{t.step||e++})),e}compress(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items.length,t=this.remapping(0,e),n=t.maps.length,r=[],i=0;return this.items.forEach(((o,s)=>{if(s>=e)r.push(o),o.selection&&i++;else if(o.step){let e=o.step.map(t.slice(n)),s=e&&e.getMap();if(n--,s&&t.appendMap(s,n),e){let a=o.selection&&o.selection.map(t.slice(n));a&&i++;let l,c=new Yh(s.invert(),e,a),u=r.length-1;(l=r.length&&r[u].merge(c))?r[u]=l:r.push(c)}}else o.map&&n--}),this.items.length,0),new Zh(Gh.from(r.reverse()),i)}}Zh.empty=new Zh(Gh.empty,0);class Yh{constructor(e,t,n,r){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Yh(t.getMap().invert(),t,this.selection)}}}class Xh{constructor(e,t,n,r,i){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=r,this.prevComposition=i}}const Qh=20;function ep(e){let t=[];for(let n=e.length-1;n>=0&&0==t.length;n--)e[n].forEach(((e,n,r,i)=>t.push(r,i)));return t}function tp(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),o=t.map(e[r+1],-1);i<=o&&n.push(i,o)}return n}let np=!1,rp=null;function ip(e){let t=e.plugins;if(rp!=t){np=!1,rp=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){np=!0;break}}return np}const op=new bs("history"),sp=new bs("closeHistory");function ap(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new gs({key:op,state:{init:()=>new Xh(Zh.empty,Zh.empty,null,0,-1),apply:(t,n,r)=>function(e,t,n,r){let i,o=n.getMeta(op);if(o)return o.historyState;n.getMeta(sp)&&(e=new Xh(e.done,e.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(0==n.steps.length)return e;if(s&&s.getMeta(op))return s.getMeta(op).redo?new Xh(e.done.addTransform(n,void 0,r,ip(t)),e.undone,ep(n.mapping.maps),e.prevTime,e.prevComposition):new Xh(e.done,e.undone.addTransform(n,void 0,r,ip(t)),null,e.prevTime,e.prevComposition);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(i=n.getMeta("rebased"))?new Xh(e.done.rebased(n,i),e.undone.rebased(n,i),tp(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new Xh(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),tp(e.prevRanges,n.mapping),e.prevTime,e.prevComposition);{let i=n.getMeta("composition"),o=0==e.prevTime||!s&&e.prevComposition!=i&&(e.prevTime<(n.time||0)-r.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach(((e,r)=>{for(let i=0;i<t.length;i+=2)e<=t[i+1]&&r>=t[i]&&(n=!0)})),n}(n,e.prevRanges)),a=s?tp(e.prevRanges,n.mapping):ep(n.mapping.maps);return new Xh(e.done.addTransform(n,o?t.selection.getBookmark():void 0,r,ip(t)),Zh.empty,a,n.time,null==i?e.prevComposition:i)}}(n,r,t,e)},config:e,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,r="historyUndo"==n?cp:"historyRedo"==n?up:null;return!!r&&(t.preventDefault(),r(e.state,e.dispatch))}}}})}function lp(e,t){return(n,r)=>{let i=op.getState(n);if(!i||0==(e?i.undone:i.done).eventCount)return!1;if(r){let o=function(e,t,n){let r=ip(t),i=op.get(t).spec.config,o=(n?e.undone:e.done).popEvent(t,r);if(!o)return null;let s=o.selection.resolve(o.transform.doc),a=(n?e.done:e.undone).addTransform(o.transform,t.selection.getBookmark(),i,r),l=new Xh(n?a:o.remaining,n?o.remaining:a,null,0,-1);return o.transform.setSelection(s).setMeta(op,{redo:n,historyState:l})}(i,n,e);o&&r(t?o.scrollIntoView():o)}return!0}}const cp=lp(!1,!0),up=lp(!0,!0);lp(!1,!1),lp(!0,!1);const dp=Gu.create({name:"history",addOptions:()=>({depth:100,newGroupDelay:500}),addCommands:()=>({undo:()=>e=>{let{state:t,dispatch:n}=e;return cp(t,n)},redo:()=>e=>{let{state:t,dispatch:n}=e;return up(t,n)}}),addProseMirrorPlugins(){return[ap(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-\u044f":()=>this.editor.commands.undo(),"Shift-Mod-\u044f":()=>this.editor.commands.redo()}}}),hp=Ud.create({name:"horizontalRule",addOptions:()=>({HTMLAttributes:{}}),group:"block",parseHTML:()=>[{tag:"hr"}],renderHTML(e){let{HTMLAttributes:t}=e;return["hr",Ou(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>e=>{let{chain:t,state:n}=e;const{selection:r}=n,{$from:i,$to:o}=r,s=t();return 0===i.parentOffset?s.insertContentAt({from:Math.max(i.pos-1,0),to:o.pos},{type:this.name}):r instanceof ns?s.insertContentAt(o.pos,{type:this.name}):s.insertContent({type:this.name}),s.command((e=>{let{tr:t,dispatch:n}=e;var r;if(n){const{$to:e}=t.selection,n=e.end();if(e.nodeAfter)e.nodeAfter.isTextblock?t.setSelection(es.create(t.doc,e.pos+1)):e.nodeAfter.isBlock?t.setSelection(ns.create(t.doc,e.pos)):t.setSelection(es.create(t.doc,e.pos));else{const i=null===(r=e.parent.type.contentMatch.defaultType)||void 0===r?void 0:r.create();i&&(t.insert(n,i),t.setSelection(es.create(t.doc,n+1)))}t.scrollIntoView()}return!0})).run()}}},addInputRules(){return[(e={find:/^(?:---|\u2014-|___\s|\*\*\*\s)$/,type:this.type},new Du({find:e.find,handler:t=>{let{state:n,range:r,match:i}=t;const o=Au(e.getAttributes,void 0,i)||{},{tr:s}=n,a=r.from;let l=r.to;const c=e.type.create(o);if(i[1]){let e=a+i[0].lastIndexOf(i[1]);e>l?e=l:l=e+i[1].length;const t=i[0][i[0].length-1];s.insertText(t,a+i[0].length-1),s.replaceWith(e,l,c)}else if(i[0]){const t=e.type.isInline?a:a-1;s.insert(t,e.type.create(o)).delete(s.mapping.map(a),s.mapping.map(l))}s.scrollIntoView()}}))];var e}}),pp=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,fp=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,mp=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,gp=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,yp=Vu.create({name:"italic",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"em"},{tag:"i",getAttrs:e=>"normal"!==e.style.fontStyle&&null},{style:"font-style=italic"}],renderHTML(e){let{HTMLAttributes:t}=e;return["em",Ou(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleItalic:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetItalic:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[zd({find:pp,type:this.type}),zd({find:mp,type:this.type})]},addPasteRules(){return[Hd({find:fp,type:this.type}),Hd({find:gp,type:this.type})]}}),vp=/^(\d+)\.\s$/,bp=Ud.create({name:"orderedList",addOptions:()=>({itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}),group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes:()=>({start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:e=>e.getAttribute("type")}}),parseHTML:()=>[{tag:"ol"}],renderHTML(e){let{HTMLAttributes:t}=e;const{start:n,...r}=t;return 1===n?["ol",Ou(this.options.HTMLAttributes,r),0]:["ol",Ou(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>e=>{let{commands:t,chain:n}=e;return this.options.keepAttributes?n().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(xh.name,this.editor.getAttributes(kh.name)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=Bd({find:vp,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Bd({find:vp,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(kh.name)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[e]}}),wp=Ud.create({name:"paragraph",priority:1e3,addOptions:()=>({HTMLAttributes:{}}),group:"block",content:"inline*",parseHTML:()=>[{tag:"p"}],renderHTML(e){let{HTMLAttributes:t}=e;return["p",Ou(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>e=>{let{commands:t}=e;return t.setNode(this.name)}}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),xp=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,kp=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Sp=Vu.create({name:"strike",addOptions:()=>({HTMLAttributes:{}}),parseHTML:()=>[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>!!e.includes("line-through")&&{}}],renderHTML(e){let{HTMLAttributes:t}=e;return["s",Ou(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>e=>{let{commands:t}=e;return t.setMark(this.name)},toggleStrike:()=>e=>{let{commands:t}=e;return t.toggleMark(this.name)},unsetStrike:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[zd({find:xp,type:this.type})]},addPasteRules(){return[Hd({find:kp,type:this.type})]}}),_p=Ud.create({name:"text",group:"inline"}),Ep=Gu.create({name:"starterKit",addExtensions(){var e,t,n,r,i,o,s,a,l,c,u,d,h,p,f,m,g,y;const v=[];return!1!==this.options.bold&&v.push(wh.configure(null===(e=this.options)||void 0===e?void 0:e.bold)),!1!==this.options.blockquote&&v.push(mh.configure(null===(t=this.options)||void 0===t?void 0:t.blockquote)),!1!==this.options.bulletList&&v.push(_h.configure(null===(n=this.options)||void 0===n?void 0:n.bulletList)),!1!==this.options.code&&v.push(Oh.configure(null===(r=this.options)||void 0===r?void 0:r.code)),!1!==this.options.codeBlock&&v.push(Ah.configure(null===(i=this.options)||void 0===i?void 0:i.codeBlock)),!1!==this.options.document&&v.push(jh.configure(null===(o=this.options)||void 0===o?void 0:o.document)),!1!==this.options.dropcursor&&v.push(Rh.configure(null===(s=this.options)||void 0===s?void 0:s.dropcursor)),!1!==this.options.gapcursor&&v.push(Uh.configure(null===(a=this.options)||void 0===a?void 0:a.gapcursor)),!1!==this.options.hardBreak&&v.push(Hh.configure(null===(l=this.options)||void 0===l?void 0:l.hardBreak)),!1!==this.options.heading&&v.push(Vh.configure(null===(c=this.options)||void 0===c?void 0:c.heading)),!1!==this.options.history&&v.push(dp.configure(null===(u=this.options)||void 0===u?void 0:u.history)),!1!==this.options.horizontalRule&&v.push(hp.configure(null===(d=this.options)||void 0===d?void 0:d.horizontalRule)),!1!==this.options.italic&&v.push(yp.configure(null===(h=this.options)||void 0===h?void 0:h.italic)),!1!==this.options.listItem&&v.push(xh.configure(null===(p=this.options)||void 0===p?void 0:p.listItem)),!1!==this.options.orderedList&&v.push(bp.configure(null===(f=this.options)||void 0===f?void 0:f.orderedList)),!1!==this.options.paragraph&&v.push(wp.configure(null===(m=this.options)||void 0===m?void 0:m.paragraph)),!1!==this.options.strike&&v.push(Sp.configure(null===(g=this.options)||void 0===g?void 0:g.strike)),!1!==this.options.text&&v.push(_p.configure(null===(y=this.options)||void 0===y?void 0:y.text)),v}}),Cp=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,Op=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,Np=Vu.create({name:"highlight",addOptions:()=>({multicolor:!1,HTMLAttributes:{}}),addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:e=>e.getAttribute("data-color")||e.style.backgroundColor,renderHTML:e=>e.color?{"data-color":e.color,style:`background-color: ${e.color}; color: inherit`}:{}}}:{}},parseHTML:()=>[{tag:"mark"}],renderHTML(e){let{HTMLAttributes:t}=e;return["mark",Ou(this.options.HTMLAttributes,t),0]},addCommands(){return{setHighlight:e=>t=>{let{commands:n}=t;return n.setMark(this.name,e)},toggleHighlight:e=>t=>{let{commands:n}=t;return n.toggleMark(this.name,e)},unsetHighlight:()=>e=>{let{commands:t}=e;return t.unsetMark(this.name)}}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[zd({find:Cp,type:this.type})]},addPasteRules(){return[Hd({find:Op,type:this.type})]}}),Tp=(0,a.forwardRef)(((e,t)=>{let{initialContent:n,onContentChange:r,className:i="",editorStyles:o}=e;const s=uh({extensions:[Ep,Np.configure({multicolor:!0,HTMLAttributes:{class:"highlight"}})],content:n,onUpdate:e=>{let{editor:t}=e;r(t.getHTML())}});return(0,a.useImperativeHandle)(t,(()=>({editor:s}))),(0,tr.jsx)("div",{className:`text-editor-wrapper ${i}`,style:o,children:(0,tr.jsx)(Qd,{editor:s})})})),Ap=Symbol("Let zodToJsonSchema decide on which parser to use"),jp={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Pp=e=>{const t=(e=>"string"===typeof e?{...jp,name:e}:{...jp,...e})(e),n=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map((e=>{let[n,r]=e;return[r._def,{def:r._def,path:[...t.basePath,t.definitionPath,n],jsonSchema:void 0}]})))}};var Ip,Rp;!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},e.getValidEnumValues=t=>{const n=e.objectKeys(t).filter((e=>"number"!==typeof t[t[e]])),r={};for(const e of n)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"===typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(const n of e)if(t(n))return n},e.isInteger="function"===typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"===typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" | ";return e.map((e=>"string"===typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"===typeof t?t.toString():t}(Ip||(Ip={})),function(e){e.mergeShapes=(e,t)=>({...e,...t})}(Rp||(Rp={}));const Mp=Ip.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),$p=e=>{switch(typeof e){case"undefined":return Mp.undefined;case"string":return Mp.string;case"number":return isNaN(e)?Mp.nan:Mp.number;case"boolean":return Mp.boolean;case"function":return Mp.function;case"bigint":return Mp.bigint;case"symbol":return Mp.symbol;case"object":return Array.isArray(e)?Mp.array:null===e?Mp.null:e.then&&"function"===typeof e.then&&e.catch&&"function"===typeof e.catch?Mp.promise:"undefined"!==typeof Map&&e instanceof Map?Mp.map:"undefined"!==typeof Set&&e instanceof Set?Mp.set:"undefined"!==typeof Date&&e instanceof Date?Mp.date:Mp.object;default:return Mp.unknown}},Lp=Ip.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Dp extends Error{constructor(e){var t;super(),t=this,this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.issues=[...t.issues,...e]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(r);else if("invalid_return_type"===i.code)r(i.returnTypeError);else if("invalid_arguments"===i.code)r(i.argumentsError);else if(0===i.path.length)n._errors.push(t(i));else{let e=n,r=0;for(;r<i.path.length;){const n=i.path[r];r===i.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(i))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}static assert(e){if(!(e instanceof Dp))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ip.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e.message;const t={},n=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}Dp.create=e=>new Dp(e);const zp=(e,t)=>{let n;switch(e.code){case Lp.invalid_type:n=e.received===Mp.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case Lp.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Ip.jsonStringifyReplacer)}`;break;case Lp.unrecognized_keys:n=`Unrecognized key(s) in object: ${Ip.joinValues(e.keys,", ")}`;break;case Lp.invalid_union:n="Invalid input";break;case Lp.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Ip.joinValues(e.options)}`;break;case Lp.invalid_enum_value:n=`Invalid enum value. Expected ${Ip.joinValues(e.options)}, received '${e.received}'`;break;case Lp.invalid_arguments:n="Invalid function arguments";break;case Lp.invalid_return_type:n="Invalid function return type";break;case Lp.invalid_date:n="Invalid date";break;case Lp.invalid_string:"object"===typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"===typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Ip.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case Lp.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case Lp.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case Lp.custom:n="Invalid input";break;case Lp.invalid_intersection_types:n="Intersection results could not be merged";break;case Lp.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Lp.not_finite:n="Number must be finite";break;default:n=t.defaultError,Ip.assertNever(e)}return{message:n}};let Fp=zp;function Bp(){return Fp}const Up=e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,o=[...n,...i.path||[]],s={...i,path:o};if(void 0!==i.message)return{...i,path:o,message:i.message};let a="";const l=r.filter((e=>!!e)).slice().reverse();for(const c of l)a=c(s,{data:t,defaultError:a}).message;return{...i,path:o,message:a}};function Hp(e,t){const n=Bp(),r=Up({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===zp?void 0:zp].filter((e=>!!e))});e.common.issues.push(r)}class Vp{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if("aborted"===r.status)return Wp;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const r of t){const e=await r.key,t=await r.value;n.push({key:e,value:t})}return Vp.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:t,value:i}=r;if("aborted"===t.status)return Wp;if("aborted"===i.status)return Wp;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||"undefined"===typeof i.value&&!r.alwaysSet||(n[t.value]=i.value)}return{status:e.value,value:n}}}const Wp=Object.freeze({status:"aborted"}),qp=e=>({status:"dirty",value:e}),Jp=e=>({status:"valid",value:e}),Kp=e=>"aborted"===e.status,Gp=e=>"dirty"===e.status,Zp=e=>"valid"===e.status,Yp=e=>"undefined"!==typeof Promise&&e instanceof Promise;function Xp(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function Qp(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}var ef,tf,nf;"function"===typeof SuppressedError&&SuppressedError,function(e){e.errToObj=e=>"string"===typeof e?{message:e}:e||{},e.toString=e=>"string"===typeof e?e:null===e||void 0===e?void 0:e.message}(ef||(ef={}));class rf{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const of=(e,t)=>{if(Zp(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Dp(e.common.issues);return this._error=t,this._error}}};function sf(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:i};return{errorMap:(t,i)=>{var o,s;const{message:a}=e;return"invalid_enum_value"===t.code?{message:null!==a&&void 0!==a?a:i.defaultError}:"undefined"===typeof i.data?{message:null!==(o=null!==a&&void 0!==a?a:r)&&void 0!==o?o:i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:null!==(s=null!==a&&void 0!==a?a:n)&&void 0!==s?s:i.defaultError}},description:i}}class af{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return $p(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:$p(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Vp,ctx:{common:e.parent.common,data:e.data,parsedType:$p(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Yp(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const r={common:{issues:[],async:null!==(n=null===t||void 0===t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null===t||void 0===t?void 0:t.errorMap},path:(null===t||void 0===t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$p(e)},i=this._parseSync({data:e,path:r.path,parent:r});return of(r,i)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null===t||void 0===t?void 0:t.errorMap,async:!0},path:(null===t||void 0===t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:$p(e)},r=this._parse({data:e,path:n.path,parent:n}),i=await(Yp(r)?r:Promise.resolve(r));return of(n,i)}refine(e,t){const n=e=>"string"===typeof t||"undefined"===typeof t?{message:t}:"function"===typeof t?t(e):t;return this._refinement(((t,r)=>{const i=e(t),o=()=>r.addIssue({code:Lp.custom,...n(t)});return"undefined"!==typeof Promise&&i instanceof Promise?i.then((e=>!!e||(o(),!1))):!!i||(o(),!1)}))}refinement(e,t){return this._refinement(((n,r)=>!!e(n)||(r.addIssue("function"===typeof t?t(n,r):t),!1)))}_refinement(e){return new nm({schema:this,typeName:fm.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return rm.create(this,this._def)}nullable(){return im.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Lf.create(this,this._def)}promise(){return tm.create(this,this._def)}or(e){return Ff.create([this,e],this._def)}and(e){return Vf.create(this,e,this._def)}transform(e){return new nm({...sf(this._def),schema:this,typeName:fm.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"===typeof e?e:()=>e;return new om({...sf(this._def),innerType:this,defaultValue:t,typeName:fm.ZodDefault})}brand(){return new cm({typeName:fm.ZodBranded,type:this,...sf(this._def)})}catch(e){const t="function"===typeof e?e:()=>e;return new sm({...sf(this._def),innerType:this,catchValue:t,typeName:fm.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return um.create(this,e)}readonly(){return dm.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const lf=/^c[^\s-]{8,}$/i,cf=/^[0-9a-z]+$/,uf=/^[0-9A-HJKMNP-TV-Z]{26}$/,df=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,hf=/^[a-z0-9_-]{21}$/i,pf=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ff=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let mf;const gf=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,yf=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,vf=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,bf="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",wf=new RegExp(`^${bf}$`);function xf(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function kf(e){return new RegExp(`^${xf(e)}$`)}function Sf(e){let t=`${bf}T${xf(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}class _f extends af{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==Mp.string){const t=this._getOrReturnCtx(e);return Hp(t,{code:Lp.invalid_type,expected:Mp.string,received:t.parsedType}),Wp}const t=new Vp;let n;for(const o of this._def.checks)if("min"===o.kind)e.data.length<o.value&&(n=this._getOrReturnCtx(e,n),Hp(n,{code:Lp.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),t.dirty());else if("max"===o.kind)e.data.length>o.value&&(n=this._getOrReturnCtx(e,n),Hp(n,{code:Lp.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),t.dirty());else if("length"===o.kind){const r=e.data.length>o.value,i=e.data.length<o.value;(r||i)&&(n=this._getOrReturnCtx(e,n),r?Hp(n,{code:Lp.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):i&&Hp(n,{code:Lp.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),t.dirty())}else if("email"===o.kind)ff.test(e.data)||(n=this._getOrReturnCtx(e,n),Hp(n,{validation:"email",code:Lp.invalid_string,message:o.message}),t.dirty());else if("emoji"===o.kind)mf||(mf=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),mf.test(e.data)||(n=this._getOrReturnCtx(e,n),Hp(n,{validation:"emoji",code:Lp.invalid_string,message:o.message}),t.dirty());else if("uuid"===o.kind)df.test(e.data)||(n=this._getOrReturnCtx(e,n),Hp(n,{validation:"uuid",code:Lp.invalid_string,message:o.message}),t.dirty());else if("nanoid"===o.kind)hf.test(e.data)||(n=this._getOrReturnCtx(e,n),Hp(n,{validation:"nanoid",code:Lp.invalid_string,message:o.message}),t.dirty());else if("cuid"===o.kind)lf.test(e.data)||(n=this._getOrReturnCtx(e,n),Hp(n,{validation:"cuid",code:Lp.invalid_string,message:o.message}),t.dirty());else if("cuid2"===o.kind)cf.test(e.data)||(n=this._getOrReturnCtx(e,n),Hp(n,{validation:"cuid2",code:Lp.invalid_string,message:o.message}),t.dirty());else if("ulid"===o.kind)uf.test(e.data)||(n=this._getOrReturnCtx(e,n),Hp(n,{validation:"ulid",code:Lp.invalid_string,message:o.message}),t.dirty());else if("url"===o.kind)try{new URL(e.data)}catch(ck){n=this._getOrReturnCtx(e,n),Hp(n,{validation:"url",code:Lp.invalid_string,message:o.message}),t.dirty()}else if("regex"===o.kind){o.regex.lastIndex=0;o.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),Hp(n,{validation:"regex",code:Lp.invalid_string,message:o.message}),t.dirty())}else if("trim"===o.kind)e.data=e.data.trim();else if("includes"===o.kind)e.data.includes(o.value,o.position)||(n=this._getOrReturnCtx(e,n),Hp(n,{code:Lp.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),t.dirty());else if("toLowerCase"===o.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===o.kind)e.data=e.data.toUpperCase();else if("startsWith"===o.kind)e.data.startsWith(o.value)||(n=this._getOrReturnCtx(e,n),Hp(n,{code:Lp.invalid_string,validation:{startsWith:o.value},message:o.message}),t.dirty());else if("endsWith"===o.kind)e.data.endsWith(o.value)||(n=this._getOrReturnCtx(e,n),Hp(n,{code:Lp.invalid_string,validation:{endsWith:o.value},message:o.message}),t.dirty());else if("datetime"===o.kind){Sf(o).test(e.data)||(n=this._getOrReturnCtx(e,n),Hp(n,{code:Lp.invalid_string,validation:"datetime",message:o.message}),t.dirty())}else if("date"===o.kind){wf.test(e.data)||(n=this._getOrReturnCtx(e,n),Hp(n,{code:Lp.invalid_string,validation:"date",message:o.message}),t.dirty())}else if("time"===o.kind){kf(o).test(e.data)||(n=this._getOrReturnCtx(e,n),Hp(n,{code:Lp.invalid_string,validation:"time",message:o.message}),t.dirty())}else"duration"===o.kind?pf.test(e.data)||(n=this._getOrReturnCtx(e,n),Hp(n,{validation:"duration",code:Lp.invalid_string,message:o.message}),t.dirty()):"ip"===o.kind?(r=e.data,("v4"!==(i=o.version)&&i||!gf.test(r))&&("v6"!==i&&i||!yf.test(r))&&(n=this._getOrReturnCtx(e,n),Hp(n,{validation:"ip",code:Lp.invalid_string,message:o.message}),t.dirty())):"base64"===o.kind?vf.test(e.data)||(n=this._getOrReturnCtx(e,n),Hp(n,{validation:"base64",code:Lp.invalid_string,message:o.message}),t.dirty()):Ip.assertNever(o);var r,i;return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement((t=>e.test(t)),{validation:t,code:Lp.invalid_string,...ef.errToObj(n)})}_addCheck(e){return new _f({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ef.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ef.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ef.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ef.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ef.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ef.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ef.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ef.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ef.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ef.errToObj(e)})}datetime(e){var t,n;return"string"===typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:"undefined"===typeof(null===e||void 0===e?void 0:e.precision)?null:null===e||void 0===e?void 0:e.precision,offset:null!==(t=null===e||void 0===e?void 0:e.offset)&&void 0!==t&&t,local:null!==(n=null===e||void 0===e?void 0:e.local)&&void 0!==n&&n,...ef.errToObj(null===e||void 0===e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"===typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:"undefined"===typeof(null===e||void 0===e?void 0:e.precision)?null:null===e||void 0===e?void 0:e.precision,...ef.errToObj(null===e||void 0===e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...ef.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ef.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null===t||void 0===t?void 0:t.position,...ef.errToObj(null===t||void 0===t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ef.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ef.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ef.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ef.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ef.errToObj(t)})}nonempty(e){return this.min(1,ef.errToObj(e))}trim(){return new _f({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new _f({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new _f({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function Ef(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}_f.create=e=>{var t;return new _f({checks:[],typeName:fm.ZodString,coerce:null!==(t=null===e||void 0===e?void 0:e.coerce)&&void 0!==t&&t,...sf(e)})};class Cf extends af{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==Mp.number){const t=this._getOrReturnCtx(e);return Hp(t,{code:Lp.invalid_type,expected:Mp.number,received:t.parsedType}),Wp}let t;const n=new Vp;for(const r of this._def.checks)if("int"===r.kind)Ip.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),Hp(t,{code:Lp.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty());else if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),Hp(t,{code:Lp.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),Hp(t,{code:Lp.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else"multipleOf"===r.kind?0!==Ef(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),Hp(t,{code:Lp.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),Hp(t,{code:Lp.not_finite,message:r.message}),n.dirty()):Ip.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ef.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ef.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ef.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ef.toString(t))}setLimit(e,t,n,r){return new Cf({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:ef.toString(r)}]})}_addCheck(e){return new Cf({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ef.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ef.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ef.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ef.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ef.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ef.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ef.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ef.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ef.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&Ip.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}Cf.create=e=>new Cf({checks:[],typeName:fm.ZodNumber,coerce:(null===e||void 0===e?void 0:e.coerce)||!1,...sf(e)});class Of extends af{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){this._def.coerce&&(e.data=BigInt(e.data));if(this._getType(e)!==Mp.bigint){const t=this._getOrReturnCtx(e);return Hp(t,{code:Lp.invalid_type,expected:Mp.bigint,received:t.parsedType}),Wp}let t;const n=new Vp;for(const r of this._def.checks)if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),Hp(t,{code:Lp.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),Hp(t,{code:Lp.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),Hp(t,{code:Lp.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):Ip.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ef.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ef.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ef.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ef.toString(t))}setLimit(e,t,n,r){return new Of({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:ef.toString(r)}]})}_addCheck(e){return new Of({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ef.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ef.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ef.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ef.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ef.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}Of.create=e=>{var t;return new Of({checks:[],typeName:fm.ZodBigInt,coerce:null!==(t=null===e||void 0===e?void 0:e.coerce)&&void 0!==t&&t,...sf(e)})};class Nf extends af{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==Mp.boolean){const t=this._getOrReturnCtx(e);return Hp(t,{code:Lp.invalid_type,expected:Mp.boolean,received:t.parsedType}),Wp}return Jp(e.data)}}Nf.create=e=>new Nf({typeName:fm.ZodBoolean,coerce:(null===e||void 0===e?void 0:e.coerce)||!1,...sf(e)});class Tf extends af{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==Mp.date){const t=this._getOrReturnCtx(e);return Hp(t,{code:Lp.invalid_type,expected:Mp.date,received:t.parsedType}),Wp}if(isNaN(e.data.getTime())){return Hp(this._getOrReturnCtx(e),{code:Lp.invalid_date}),Wp}const t=new Vp;let n;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(n=this._getOrReturnCtx(e,n),Hp(n,{code:Lp.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(n=this._getOrReturnCtx(e,n),Hp(n,{code:Lp.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):Ip.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Tf({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ef.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ef.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}Tf.create=e=>new Tf({checks:[],coerce:(null===e||void 0===e?void 0:e.coerce)||!1,typeName:fm.ZodDate,...sf(e)});class Af extends af{_parse(e){if(this._getType(e)!==Mp.symbol){const t=this._getOrReturnCtx(e);return Hp(t,{code:Lp.invalid_type,expected:Mp.symbol,received:t.parsedType}),Wp}return Jp(e.data)}}Af.create=e=>new Af({typeName:fm.ZodSymbol,...sf(e)});class jf extends af{_parse(e){if(this._getType(e)!==Mp.undefined){const t=this._getOrReturnCtx(e);return Hp(t,{code:Lp.invalid_type,expected:Mp.undefined,received:t.parsedType}),Wp}return Jp(e.data)}}jf.create=e=>new jf({typeName:fm.ZodUndefined,...sf(e)});class Pf extends af{_parse(e){if(this._getType(e)!==Mp.null){const t=this._getOrReturnCtx(e);return Hp(t,{code:Lp.invalid_type,expected:Mp.null,received:t.parsedType}),Wp}return Jp(e.data)}}Pf.create=e=>new Pf({typeName:fm.ZodNull,...sf(e)});class If extends af{constructor(){super(...arguments),this._any=!0}_parse(e){return Jp(e.data)}}If.create=e=>new If({typeName:fm.ZodAny,...sf(e)});class Rf extends af{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Jp(e.data)}}Rf.create=e=>new Rf({typeName:fm.ZodUnknown,...sf(e)});class Mf extends af{_parse(e){const t=this._getOrReturnCtx(e);return Hp(t,{code:Lp.invalid_type,expected:Mp.never,received:t.parsedType}),Wp}}Mf.create=e=>new Mf({typeName:fm.ZodNever,...sf(e)});class $f extends af{_parse(e){if(this._getType(e)!==Mp.undefined){const t=this._getOrReturnCtx(e);return Hp(t,{code:Lp.invalid_type,expected:Mp.void,received:t.parsedType}),Wp}return Jp(e.data)}}$f.create=e=>new $f({typeName:fm.ZodVoid,...sf(e)});class Lf extends af{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==Mp.array)return Hp(t,{code:Lp.invalid_type,expected:Mp.array,received:t.parsedType}),Wp;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,i=t.data.length<r.exactLength.value;(e||i)&&(Hp(t,{code:e?Lp.too_big:Lp.too_small,minimum:i?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(Hp(t,{code:Lp.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(Hp(t,{code:Lp.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map(((e,n)=>r.type._parseAsync(new rf(t,e,t.path,n))))).then((e=>Vp.mergeArray(n,e)));const i=[...t.data].map(((e,n)=>r.type._parseSync(new rf(t,e,t.path,n))));return Vp.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new Lf({...this._def,minLength:{value:e,message:ef.toString(t)}})}max(e,t){return new Lf({...this._def,maxLength:{value:e,message:ef.toString(t)}})}length(e,t){return new Lf({...this._def,exactLength:{value:e,message:ef.toString(t)}})}nonempty(e){return this.min(1,e)}}function Df(e){if(e instanceof zf){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=rm.create(Df(r))}return new zf({...e._def,shape:()=>t})}return e instanceof Lf?new Lf({...e._def,type:Df(e.element)}):e instanceof rm?rm.create(Df(e.unwrap())):e instanceof im?im.create(Df(e.unwrap())):e instanceof Wf?Wf.create(e.items.map((e=>Df(e)))):e}Lf.create=(e,t)=>new Lf({type:e,minLength:null,maxLength:null,exactLength:null,typeName:fm.ZodArray,...sf(t)});class zf extends af{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=Ip.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==Mp.object){const t=this._getOrReturnCtx(e);return Hp(t,{code:Lp.invalid_type,expected:Mp.object,received:t.parsedType}),Wp}const{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof Mf&&"strip"===this._def.unknownKeys))for(const a in n.data)i.includes(a)||o.push(a);const s=[];for(const a of i){const e=r[a],t=n.data[a];s.push({key:{status:"valid",value:a},value:e._parse(new rf(n,t,n.path,a)),alwaysSet:a in n.data})}if(this._def.catchall instanceof Mf){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of o)s.push({key:{status:"valid",value:t},value:{status:"valid",value:n.data[t]}});else if("strict"===e)o.length>0&&(Hp(n,{code:Lp.unrecognized_keys,keys:o}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of o){const r=n.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new rf(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of s){const n=await t.key,r=await t.value;e.push({key:n,value:r,alwaysSet:t.alwaysSet})}return e})).then((e=>Vp.mergeObjectSync(t,e))):Vp.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return ef.errToObj,new zf({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var r,i,o,s;const a=null!==(o=null===(i=(r=this._def).errorMap)||void 0===i?void 0:i.call(r,t,n).message)&&void 0!==o?o:n.defaultError;return"unrecognized_keys"===t.code?{message:null!==(s=ef.errToObj(e).message)&&void 0!==s?s:a}:{message:a}}}:{}})}strip(){return new zf({...this._def,unknownKeys:"strip"})}passthrough(){return new zf({...this._def,unknownKeys:"passthrough"})}extend(e){return new zf({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new zf({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:fm.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new zf({...this._def,catchall:e})}pick(e){const t={};return Ip.objectKeys(e).forEach((n=>{e[n]&&this.shape[n]&&(t[n]=this.shape[n])})),new zf({...this._def,shape:()=>t})}omit(e){const t={};return Ip.objectKeys(this.shape).forEach((n=>{e[n]||(t[n]=this.shape[n])})),new zf({...this._def,shape:()=>t})}deepPartial(){return Df(this)}partial(e){const t={};return Ip.objectKeys(this.shape).forEach((n=>{const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()})),new zf({...this._def,shape:()=>t})}required(e){const t={};return Ip.objectKeys(this.shape).forEach((n=>{if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof rm;)e=e._def.innerType;t[n]=e}})),new zf({...this._def,shape:()=>t})}keyof(){return Xf(Ip.objectKeys(this.shape))}}zf.create=(e,t)=>new zf({shape:()=>e,unknownKeys:"strip",catchall:Mf.create(),typeName:fm.ZodObject,...sf(t)}),zf.strictCreate=(e,t)=>new zf({shape:()=>e,unknownKeys:"strict",catchall:Mf.create(),typeName:fm.ZodObject,...sf(t)}),zf.lazycreate=(e,t)=>new zf({shape:e,unknownKeys:"strip",catchall:Mf.create(),typeName:fm.ZodObject,...sf(t)});class Ff extends af{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map((async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const n=e.map((e=>new Dp(e.ctx.common.issues)));return Hp(t,{code:Lp.invalid_union,unionErrors:n}),Wp}));{let e;const r=[];for(const o of n){const n={...t,common:{...t.common,issues:[]},parent:null},i=o._parseSync({data:t.data,path:t.path,parent:n});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=r.map((e=>new Dp(e)));return Hp(t,{code:Lp.invalid_union,unionErrors:i}),Wp}}get options(){return this._def.options}}Ff.create=(e,t)=>new Ff({options:e,typeName:fm.ZodUnion,...sf(t)});const Bf=e=>e instanceof Zf?Bf(e.schema):e instanceof nm?Bf(e.innerType()):e instanceof Yf?[e.value]:e instanceof Qf?e.options:e instanceof em?Ip.objectValues(e.enum):e instanceof om?Bf(e._def.innerType):e instanceof jf?[void 0]:e instanceof Pf?[null]:e instanceof rm?[void 0,...Bf(e.unwrap())]:e instanceof im?[null,...Bf(e.unwrap())]:e instanceof cm||e instanceof dm?Bf(e.unwrap()):e instanceof sm?Bf(e._def.innerType):[];class Uf extends af{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Mp.object)return Hp(t,{code:Lp.invalid_type,expected:Mp.object,received:t.parsedType}),Wp;const n=this.discriminator,r=t.data[n],i=this.optionsMap.get(r);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(Hp(t,{code:Lp.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Wp)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const r=new Map;for(const i of t){const t=Bf(i.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const n of t){if(r.has(n))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);r.set(n,i)}}return new Uf({typeName:fm.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...sf(n)})}}function Hf(e,t){const n=$p(e),r=$p(t);if(e===t)return{valid:!0,data:e};if(n===Mp.object&&r===Mp.object){const n=Ip.objectKeys(t),r=Ip.objectKeys(e).filter((e=>-1!==n.indexOf(e))),i={...e,...t};for(const o of r){const n=Hf(e[o],t[o]);if(!n.valid)return{valid:!1};i[o]=n.data}return{valid:!0,data:i}}if(n===Mp.array&&r===Mp.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<e.length;r++){const i=Hf(e[r],t[r]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}return n===Mp.date&&r===Mp.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}class Vf extends af{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(Kp(e)||Kp(r))return Wp;const i=Hf(e.value,r.value);return i.valid?((Gp(e)||Gp(r))&&t.dirty(),{status:t.value,value:i.data}):(Hp(n,{code:Lp.invalid_intersection_types}),Wp)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then((e=>{let[t,n]=e;return r(t,n)})):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Vf.create=(e,t,n)=>new Vf({left:e,right:t,typeName:fm.ZodIntersection,...sf(n)});class Wf extends af{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Mp.array)return Hp(n,{code:Lp.invalid_type,expected:Mp.array,received:n.parsedType}),Wp;if(n.data.length<this._def.items.length)return Hp(n,{code:Lp.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Wp;!this._def.rest&&n.data.length>this._def.items.length&&(Hp(n,{code:Lp.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map(((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new rf(n,e,n.path,t)):null})).filter((e=>!!e));return n.common.async?Promise.all(r).then((e=>Vp.mergeArray(t,e))):Vp.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new Wf({...this._def,rest:e})}}Wf.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Wf({items:e,typeName:fm.ZodTuple,rest:null,...sf(t)})};class qf extends af{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Mp.object)return Hp(n,{code:Lp.invalid_type,expected:Mp.object,received:n.parsedType}),Wp;const r=[],i=this._def.keyType,o=this._def.valueType;for(const s in n.data)r.push({key:i._parse(new rf(n,s,n.path,s)),value:o._parse(new rf(n,n.data[s],n.path,s)),alwaysSet:s in n.data});return n.common.async?Vp.mergeObjectAsync(t,r):Vp.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return new qf(t instanceof af?{keyType:e,valueType:t,typeName:fm.ZodRecord,...sf(n)}:{keyType:_f.create(),valueType:e,typeName:fm.ZodRecord,...sf(t)})}}class Jf extends af{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Mp.map)return Hp(n,{code:Lp.invalid_type,expected:Mp.map,received:n.parsedType}),Wp;const r=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(((e,t)=>{let[o,s]=e;return{key:r._parse(new rf(n,o,n.path,[t,"key"])),value:i._parse(new rf(n,s,n.path,[t,"value"]))}}));if(n.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const n of o){const r=await n.key,i=await n.value;if("aborted"===r.status||"aborted"===i.status)return Wp;"dirty"!==r.status&&"dirty"!==i.status||t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const n of o){const r=n.key,i=n.value;if("aborted"===r.status||"aborted"===i.status)return Wp;"dirty"!==r.status&&"dirty"!==i.status||t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}}}}Jf.create=(e,t,n)=>new Jf({valueType:t,keyType:e,typeName:fm.ZodMap,...sf(n)});class Kf extends af{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==Mp.set)return Hp(n,{code:Lp.invalid_type,expected:Mp.set,received:n.parsedType}),Wp;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(Hp(n,{code:Lp.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(Hp(n,{code:Lp.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const i=this._def.valueType;function o(e){const n=new Set;for(const r of e){if("aborted"===r.status)return Wp;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}const s=[...n.data.values()].map(((e,t)=>i._parse(new rf(n,e,n.path,t))));return n.common.async?Promise.all(s).then((e=>o(e))):o(s)}min(e,t){return new Kf({...this._def,minSize:{value:e,message:ef.toString(t)}})}max(e,t){return new Kf({...this._def,maxSize:{value:e,message:ef.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Kf.create=(e,t)=>new Kf({valueType:e,minSize:null,maxSize:null,typeName:fm.ZodSet,...sf(t)});class Gf extends af{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Mp.function)return Hp(t,{code:Lp.invalid_type,expected:Mp.function,received:t.parsedType}),Wp;function n(e,n){return Up({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Bp(),zp].filter((e=>!!e)),issueData:{code:Lp.invalid_arguments,argumentsError:n}})}function r(e,n){return Up({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Bp(),zp].filter((e=>!!e)),issueData:{code:Lp.invalid_return_type,returnTypeError:n}})}const i={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof tm){const e=this;return Jp((async function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];const l=new Dp([]),c=await e._def.args.parseAsync(s,i).catch((e=>{throw l.addIssue(n(s,e)),l})),u=await Reflect.apply(o,this,c);return await e._def.returns._def.type.parseAsync(u,i).catch((e=>{throw l.addIssue(r(u,e)),l}))}))}{const e=this;return Jp((function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];const l=e._def.args.safeParse(s,i);if(!l.success)throw new Dp([n(s,l.error)]);const c=Reflect.apply(o,this,l.data),u=e._def.returns.safeParse(c,i);if(!u.success)throw new Dp([r(c,u.error)]);return u.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Gf({...this._def,args:Wf.create(t).rest(Rf.create())})}returns(e){return new Gf({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new Gf({args:e||Wf.create([]).rest(Rf.create()),returns:t||Rf.create(),typeName:fm.ZodFunction,...sf(n)})}}class Zf extends af{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Zf.create=(e,t)=>new Zf({getter:e,typeName:fm.ZodLazy,...sf(t)});class Yf extends af{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return Hp(t,{received:t.data,code:Lp.invalid_literal,expected:this._def.value}),Wp}return{status:"valid",value:e.data}}get value(){return this._def.value}}function Xf(e,t){return new Qf({values:e,typeName:fm.ZodEnum,...sf(t)})}Yf.create=(e,t)=>new Yf({value:e,typeName:fm.ZodLiteral,...sf(t)});class Qf extends af{constructor(){super(...arguments),tf.set(this,void 0)}_parse(e){if("string"!==typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return Hp(t,{expected:Ip.joinValues(n),received:t.parsedType,code:Lp.invalid_type}),Wp}if(Xp(this,tf,"f")||Qp(this,tf,new Set(this._def.values),"f"),!Xp(this,tf,"f").has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return Hp(t,{received:t.data,code:Lp.invalid_enum_value,options:n}),Wp}return Jp(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._def;return Qf.create(e,{...this._def,...t})}exclude(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._def;return Qf.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}tf=new WeakMap,Qf.create=Xf;class em extends af{constructor(){super(...arguments),nf.set(this,void 0)}_parse(e){const t=Ip.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Mp.string&&n.parsedType!==Mp.number){const e=Ip.objectValues(t);return Hp(n,{expected:Ip.joinValues(e),received:n.parsedType,code:Lp.invalid_type}),Wp}if(Xp(this,nf,"f")||Qp(this,nf,new Set(Ip.getValidEnumValues(this._def.values)),"f"),!Xp(this,nf,"f").has(e.data)){const e=Ip.objectValues(t);return Hp(n,{received:n.data,code:Lp.invalid_enum_value,options:e}),Wp}return Jp(e.data)}get enum(){return this._def.values}}nf=new WeakMap,em.create=(e,t)=>new em({values:e,typeName:fm.ZodNativeEnum,...sf(t)});class tm extends af{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==Mp.promise&&!1===t.common.async)return Hp(t,{code:Lp.invalid_type,expected:Mp.promise,received:t.parsedType}),Wp;const n=t.parsedType===Mp.promise?t.data:Promise.resolve(t.data);return Jp(n.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}tm.create=(e,t)=>new tm({type:e,typeName:fm.ZodPromise,...sf(t)});class nm extends af{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===fm.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,i={addIssue:e=>{Hp(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===r.type){const e=r.transform(n.data,i);if(n.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return Wp;const r=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===r.status?Wp:"dirty"===r.status||"dirty"===t.value?qp(r.value):r}));{if("aborted"===t.value)return Wp;const r=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===r.status?Wp:"dirty"===r.status||"dirty"===t.value?qp(r.value):r}}if("refinement"===r.type){const e=e=>{const t=r.refinement(e,i);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?Wp:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((n=>"aborted"===n.status?Wp:("dirty"===n.status&&t.dirty(),e(n.value).then((()=>({status:t.value,value:n.value}))))))}if("transform"===r.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Zp(e))return e;const o=r.transform(e.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then((e=>Zp(e)?Promise.resolve(r.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}Ip.assertNever(r)}}nm.create=(e,t,n)=>new nm({schema:e,typeName:fm.ZodEffects,effect:t,...sf(n)}),nm.createWithPreprocess=(e,t,n)=>new nm({schema:t,effect:{type:"preprocess",transform:e},typeName:fm.ZodEffects,...sf(n)});class rm extends af{_parse(e){return this._getType(e)===Mp.undefined?Jp(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}rm.create=(e,t)=>new rm({innerType:e,typeName:fm.ZodOptional,...sf(t)});class im extends af{_parse(e){return this._getType(e)===Mp.null?Jp(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}im.create=(e,t)=>new im({innerType:e,typeName:fm.ZodNullable,...sf(t)});class om extends af{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===Mp.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}om.create=(e,t)=>new om({innerType:e,typeName:fm.ZodDefault,defaultValue:"function"===typeof t.default?t.default:()=>t.default,...sf(t)});class sm extends af{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Yp(r)?r.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new Dp(n.common.issues)},input:n.data})}))):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new Dp(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}sm.create=(e,t)=>new sm({innerType:e,typeName:fm.ZodCatch,catchValue:"function"===typeof t.catch?t.catch:()=>t.catch,...sf(t)});class am extends af{_parse(e){if(this._getType(e)!==Mp.nan){const t=this._getOrReturnCtx(e);return Hp(t,{code:Lp.invalid_type,expected:Mp.nan,received:t.parsedType}),Wp}return{status:"valid",value:e.data}}}am.create=e=>new am({typeName:fm.ZodNaN,...sf(e)});const lm=Symbol("zod_brand");class cm extends af{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class um extends af{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?Wp:"dirty"===e.status?(t.dirty(),qp(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?Wp:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new um({in:e,out:t,typeName:fm.ZodPipeline})}}class dm extends af{_parse(e){const t=this._def.innerType._parse(e),n=e=>(Zp(e)&&(e.value=Object.freeze(e.value)),e);return Yp(t)?t.then((e=>n(e))):n(t)}unwrap(){return this._def.innerType}}function hm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return e?If.create().superRefine(((r,i)=>{var o,s;if(!e(r)){const e="function"===typeof t?t(r):"string"===typeof t?{message:t}:t,a=null===(s=null!==(o=e.fatal)&&void 0!==o?o:n)||void 0===s||s,l="string"===typeof e?{message:e}:e;i.addIssue({code:"custom",...l,fatal:a})}})):If.create()}dm.create=(e,t)=>new dm({innerType:e,typeName:fm.ZodReadonly,...sf(t)});const pm={object:zf.lazycreate};var fm;!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(fm||(fm={}));const mm=_f.create,gm=Cf.create,ym=am.create,vm=Of.create,bm=Nf.create,wm=Tf.create,xm=Af.create,km=jf.create,Sm=Pf.create,_m=If.create,Em=Rf.create,Cm=Mf.create,Om=$f.create,Nm=Lf.create,Tm=zf.create,Am=zf.strictCreate,jm=Ff.create,Pm=Uf.create,Im=Vf.create,Rm=Wf.create,Mm=qf.create,$m=Jf.create,Lm=Kf.create,Dm=Gf.create,zm=Zf.create,Fm=Yf.create,Bm=Qf.create,Um=em.create,Hm=tm.create,Vm=nm.create,Wm=rm.create,qm=im.create,Jm=nm.createWithPreprocess,Km=um.create,Gm={string:e=>_f.create({...e,coerce:!0}),number:e=>Cf.create({...e,coerce:!0}),boolean:e=>Nf.create({...e,coerce:!0}),bigint:e=>Of.create({...e,coerce:!0}),date:e=>Tf.create({...e,coerce:!0})},Zm=Wp;var Ym=Object.freeze({__proto__:null,defaultErrorMap:zp,setErrorMap:function(e){Fp=e},getErrorMap:Bp,makeIssue:Up,EMPTY_PATH:[],addIssueToContext:Hp,ParseStatus:Vp,INVALID:Wp,DIRTY:qp,OK:Jp,isAborted:Kp,isDirty:Gp,isValid:Zp,isAsync:Yp,get util(){return Ip},get objectUtil(){return Rp},ZodParsedType:Mp,getParsedType:$p,ZodType:af,datetimeRegex:Sf,ZodString:_f,ZodNumber:Cf,ZodBigInt:Of,ZodBoolean:Nf,ZodDate:Tf,ZodSymbol:Af,ZodUndefined:jf,ZodNull:Pf,ZodAny:If,ZodUnknown:Rf,ZodNever:Mf,ZodVoid:$f,ZodArray:Lf,ZodObject:zf,ZodUnion:Ff,ZodDiscriminatedUnion:Uf,ZodIntersection:Vf,ZodTuple:Wf,ZodRecord:qf,ZodMap:Jf,ZodSet:Kf,ZodFunction:Gf,ZodLazy:Zf,ZodLiteral:Yf,ZodEnum:Qf,ZodNativeEnum:em,ZodPromise:tm,ZodEffects:nm,ZodTransformer:nm,ZodOptional:rm,ZodNullable:im,ZodDefault:om,ZodCatch:sm,ZodNaN:am,BRAND:lm,ZodBranded:cm,ZodPipeline:um,ZodReadonly:dm,custom:hm,Schema:af,ZodSchema:af,late:pm,get ZodFirstPartyTypeKind(){return fm},coerce:Gm,any:_m,array:Nm,bigint:vm,boolean:bm,date:wm,discriminatedUnion:Pm,effect:Vm,enum:Bm,function:Dm,instanceof:function(e){return hm((t=>t instanceof e),arguments.length>1&&void 0!==arguments[1]?arguments[1]:{message:`Input not instance of ${e.name}`})},intersection:Im,lazy:zm,literal:Fm,map:$m,nan:ym,nativeEnum:Um,never:Cm,null:Sm,nullable:qm,number:gm,object:Tm,oboolean:()=>bm().optional(),onumber:()=>gm().optional(),optional:Wm,ostring:()=>mm().optional(),pipeline:Km,preprocess:Jm,promise:Hm,record:Mm,set:Lm,strictObject:Am,string:mm,symbol:xm,transformer:Vm,tuple:Rm,undefined:km,union:jm,unknown:Em,void:Om,NEVER:Zm,ZodIssueCode:Lp,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:Dp});function Xm(e,t,n,r){r?.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function Qm(e,t,n,r,i){e[t]=n,Xm(e,t,r,i)}function eg(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map(((n,r)=>eg(e,t,n)))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return tg(e,t)}}const tg=(e,t)=>{const n={type:"integer",format:"unix-time"};if("openApi3"===t.target)return n;for(const r of e.checks)switch(r.kind){case"min":Qm(n,"minimum",r.value,r.message,t);break;case"max":Qm(n,"maximum",r.value,r.message,t)}return n};let ng;const rg={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===ng&&(ng=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),ng),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function ig(e,t){const n={type:"string"};function r(e){return"escape"===t.patternStrategy?og(e):e}if(e.checks)for(const i of e.checks)switch(i.kind){case"min":Qm(n,"minLength","number"===typeof n.minLength?Math.max(n.minLength,i.value):i.value,i.message,t);break;case"max":Qm(n,"maxLength","number"===typeof n.maxLength?Math.min(n.maxLength,i.value):i.value,i.message,t);break;case"email":switch(t.emailStrategy){case"format:email":sg(n,"email",i.message,t);break;case"format:idn-email":sg(n,"idn-email",i.message,t);break;case"pattern:zod":ag(n,rg.email,i.message,t)}break;case"url":sg(n,"uri",i.message,t);break;case"uuid":sg(n,"uuid",i.message,t);break;case"regex":ag(n,i.regex,i.message,t);break;case"cuid":ag(n,rg.cuid,i.message,t);break;case"cuid2":ag(n,rg.cuid2,i.message,t);break;case"startsWith":ag(n,RegExp(`^${r(i.value)}`),i.message,t);break;case"endsWith":ag(n,RegExp(`${r(i.value)}$`),i.message,t);break;case"datetime":sg(n,"date-time",i.message,t);break;case"date":sg(n,"date",i.message,t);break;case"time":sg(n,"time",i.message,t);break;case"duration":sg(n,"duration",i.message,t);break;case"length":Qm(n,"minLength","number"===typeof n.minLength?Math.max(n.minLength,i.value):i.value,i.message,t),Qm(n,"maxLength","number"===typeof n.maxLength?Math.min(n.maxLength,i.value):i.value,i.message,t);break;case"includes":ag(n,RegExp(r(i.value)),i.message,t);break;case"ip":"v6"!==i.version&&sg(n,"ipv4",i.message,t),"v4"!==i.version&&sg(n,"ipv6",i.message,t);break;case"emoji":ag(n,rg.emoji,i.message,t);break;case"ulid":ag(n,rg.ulid,i.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":sg(n,"binary",i.message,t);break;case"contentEncoding:base64":Qm(n,"contentEncoding","base64",i.message,t);break;case"pattern:zod":ag(n,rg.base64,i.message,t)}break;case"nanoid":ag(n,rg.nanoid,i.message,t)}return n}const og=e=>Array.from(e).map((e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`)).join(""),sg=(e,t,n,r)=>{e.format||e.anyOf?.some((e=>e.format))?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):Qm(e,"format",t,n,r)},ag=(e,t,n,r)=>{e.pattern||e.allOf?.some((e=>e.pattern))?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:lg(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):Qm(e,"pattern",lg(t,r),n,r)},lg=(e,t)=>{const n="function"===typeof e?e():e;if(!t.applyRegexFlags||!n.flags)return n.source;const r=n.flags.includes("i"),i=n.flags.includes("m"),o=n.flags.includes("s"),s=r?n.source.toLowerCase():n.source;let a="",l=!1,c=!1,u=!1;for(let d=0;d<s.length;d++)if(l)a+=s[d],l=!1;else{if(r)if(c){if(s[d].match(/[a-z]/)){u?(a+=s[d],a+=`${s[d-2]}-${s[d]}`.toUpperCase(),u=!1):"-"===s[d+1]&&s[d+2]?.match(/[a-z]/)?(a+=s[d],u=!0):a+=`${s[d]}${s[d].toUpperCase()}`;continue}}else if(s[d].match(/[a-z]/)){a+=`[${s[d]}${s[d].toUpperCase()}]`;continue}if(i){if("^"===s[d]){a+="(^|(?<=[\r\n]))";continue}if("$"===s[d]){a+="($|(?=[\r\n]))";continue}}o&&"."===s[d]?a+=c?`${s[d]}\r\n`:`[${s[d]}\r\n]`:(a+=s[d],"\\"===s[d]?l=!0:c&&"]"===s[d]?c=!1:c||"["!==s[d]||(c=!0))}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),n.source}return a};function cg(e,t){if("openApi3"===t.target&&e.keyType?._def.typeName===fm.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce(((n,r)=>({...n,[r]:pg(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",r]})??{}})),{}),additionalProperties:!1};const n={type:"object",additionalProperties:pg(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??{}};if("openApi3"===t.target)return n;if(e.keyType?._def.typeName===fm.ZodString&&e.keyType._def.checks?.length){const r=Object.entries(ig(e.keyType._def,t)).reduce(((e,t)=>{let[n,r]=t;return"type"===n?e:{...e,[n]:r}}),{});return{...n,propertyNames:r}}return e.keyType?._def.typeName===fm.ZodEnum?{...n,propertyNames:{enum:e.keyType._def.values}}:n}const ug={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};const dg=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map(((e,n)=>pg(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${n}`]}))).filter((e=>!!e&&(!t.strictUnions||"object"===typeof e&&Object.keys(e).length>0)));return n.length?{anyOf:n}:void 0};function hg(e,t){return"strict"===t.removeAdditionalStrategy?"ZodNever"===e.catchall._def.typeName?"strict"!==e.unknownKeys:pg(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0:"ZodNever"===e.catchall._def.typeName?"passthrough"===e.unknownKeys:pg(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0}function pg(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=t.seen.get(e);if(t.override){const i=t.override?.(e,t,r,n);if(i!==Ap)return i}if(r&&!n){const e=fg(r,t);if(void 0!==e)return e}const i={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,i);const o=gg(e,e.typeName,t);return o&&yg(e,t,o),i.jsonSchema=o,o}const fg=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:mg(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every(((e,n)=>t.currentPath[n]===e))?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):"seen"===t.$refStrategy?{}:void 0}},mg=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},gg=(e,t,n)=>{switch(t){case fm.ZodString:return ig(e,n);case fm.ZodNumber:return function(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",Xm(n,"type",r.message,t);break;case"min":"jsonSchema7"===t.target?r.inclusive?Qm(n,"minimum",r.value,r.message,t):Qm(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),Qm(n,"minimum",r.value,r.message,t));break;case"max":"jsonSchema7"===t.target?r.inclusive?Qm(n,"maximum",r.value,r.message,t):Qm(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),Qm(n,"maximum",r.value,r.message,t));break;case"multipleOf":Qm(n,"multipleOf",r.value,r.message,t)}return n}(e,n);case fm.ZodObject:return function(e,t){const n={type:"object",...Object.entries(e.shape()).reduce(((e,n)=>{let[r,i]=n;if(void 0===i||void 0===i._def)return e;const o=pg(i._def,{...t,currentPath:[...t.currentPath,"properties",r],propertyPath:[...t.currentPath,"properties",r]});return void 0===o?e:{properties:{...e.properties,[r]:o},required:i.isOptional()?e.required:[...e.required,r]}}),{properties:{},required:[]}),additionalProperties:hg(e,t)};return n.required.length||delete n.required,n}(e,n);case fm.ZodBigInt:return function(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":"jsonSchema7"===t.target?r.inclusive?Qm(n,"minimum",r.value,r.message,t):Qm(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),Qm(n,"minimum",r.value,r.message,t));break;case"max":"jsonSchema7"===t.target?r.inclusive?Qm(n,"maximum",r.value,r.message,t):Qm(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),Qm(n,"maximum",r.value,r.message,t));break;case"multipleOf":Qm(n,"multipleOf",r.value,r.message,t)}return n}(e,n);case fm.ZodBoolean:return{type:"boolean"};case fm.ZodDate:return eg(e,n);case fm.ZodUndefined:return{not:{}};case fm.ZodNull:return function(e){return"openApi3"===e.target?{enum:["null"],nullable:!0}:{type:"null"}}(n);case fm.ZodArray:return function(e,t){const n={type:"array"};return e.type?._def?.typeName!==fm.ZodAny&&(n.items=pg(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&Qm(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&Qm(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(Qm(n,"minItems",e.exactLength.value,e.exactLength.message,t),Qm(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}(e,n);case fm.ZodUnion:case fm.ZodDiscriminatedUnion:return function(e,t){if("openApi3"===t.target)return dg(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every((e=>e._def.typeName in ug&&(!e._def.checks||!e._def.checks.length)))){const e=n.reduce(((e,t)=>{const n=ug[t._def.typeName];return n&&!e.includes(n)?[...e,n]:e}),[]);return{type:e.length>1?e:e[0]}}if(n.every((e=>"ZodLiteral"===e._def.typeName&&!e.description))){const e=n.reduce(((e,t)=>{const n=typeof t._def.value;switch(n){case"string":case"number":case"boolean":return[...e,n];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}}),[]);if(e.length===n.length){const t=e.filter(((e,t,n)=>n.indexOf(e)===t));return{type:t.length>1?t:t[0],enum:n.reduce(((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value]),[])}}}else if(n.every((e=>"ZodEnum"===e._def.typeName)))return{type:"string",enum:n.reduce(((e,t)=>[...e,...t._def.values.filter((t=>!e.includes(t)))]),[])};return dg(e,t)}(e,n);case fm.ZodIntersection:return function(e,t){const n=[pg(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),pg(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter((e=>!!e));let r="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0;const i=[];return n.forEach((e=>{if("type"in(t=e)&&"string"===t.type||!("allOf"in t)){let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){const{additionalProperties:n,...r}=e;t=r}else r=void 0;i.push(t)}else i.push(...e.allOf),void 0===e.unevaluatedProperties&&(r=void 0);var t})),i.length?{allOf:i,...r}:void 0}(e,n);case fm.ZodTuple:return function(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map(((e,n)=>pg(e._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]}))).reduce(((e,t)=>void 0===t?e:[...e,t]),[]),additionalItems:pg(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map(((e,n)=>pg(e._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]}))).reduce(((e,t)=>void 0===t?e:[...e,t]),[])}}(e,n);case fm.ZodRecord:return cg(e,n);case fm.ZodLiteral:return function(e,t){const n=typeof e.value;return"bigint"!==n&&"number"!==n&&"boolean"!==n&&"string"!==n?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===n?"integer":n,enum:[e.value]}:{type:"bigint"===n?"integer":n,const:e.value}}(e,n);case fm.ZodEnum:return function(e){return{type:"string",enum:e.values}}(e);case fm.ZodNativeEnum:return function(e){const t=e.values,n=Object.keys(e.values).filter((e=>"number"!==typeof t[t[e]])).map((e=>t[e])),r=Array.from(new Set(n.map((e=>typeof e))));return{type:1===r.length?"string"===r[0]?"string":"number":["string","number"],enum:n}}(e);case fm.ZodNullable:return function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:ug[e.innerType._def.typeName],nullable:!0}:{type:[ug[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){const n=pg(e.innerType._def,{...t,currentPath:[...t.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}const n=pg(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}(e,n);case fm.ZodOptional:return((e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return pg(e.innerType._def,t);const n=pg(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}})(e,n);case fm.ZodMap:return function(e,t){return"record"===t.mapStrategy?cg(e,t):{type:"array",maxItems:125,items:{type:"array",items:[pg(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},pg(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}}}(e,n);case fm.ZodSet:return function(e,t){const n={type:"array",uniqueItems:!0,items:pg(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&Qm(n,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&Qm(n,"maxItems",e.maxSize.value,e.maxSize.message,t),n}(e,n);case fm.ZodLazy:return pg(e.getter()._def,n);case fm.ZodPromise:return function(e,t){return pg(e.type._def,t)}(e,n);case fm.ZodNaN:case fm.ZodNever:return{not:{}};case fm.ZodEffects:return function(e,t){return"input"===t.effectStrategy?pg(e.schema._def,t):{}}(e,n);case fm.ZodAny:case fm.ZodUnknown:return{};case fm.ZodDefault:return function(e,t){return{...pg(e.innerType._def,t),default:e.defaultValue()}}(e,n);case fm.ZodBranded:return function(e,t){return pg(e.type._def,t)}(e,n);case fm.ZodReadonly:case fm.ZodCatch:return((e,t)=>pg(e.innerType._def,t))(e,n);case fm.ZodPipeline:return((e,t)=>{if("input"===t.pipeStrategy)return pg(e.in._def,t);if("output"===t.pipeStrategy)return pg(e.out._def,t);const n=pg(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]});return{allOf:[n,pg(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]})].filter((e=>void 0!==e))}})(e,n);case fm.ZodFunction:case fm.ZodVoid:case fm.ZodSymbol:default:return}},yg=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),vg=(e,t)=>{const n=Pp(t),r="object"===typeof t&&t.definitions?Object.entries(t.definitions).reduce(((e,t)=>{let[r,i]=t;return{...e,[r]:pg(i._def,{...n,currentPath:[...n.basePath,n.definitionPath,r]},!0)??{}}}),{}):void 0,i="string"===typeof t?t:"title"===t?.nameStrategy?void 0:t?.name,o=pg(e._def,void 0===i?n:{...n,currentPath:[...n.basePath,n.definitionPath,i]},!1)??{},s="object"===typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==s&&(o.title=s);const a=void 0===i?r?{...o,[n.definitionPath]:r}:o:{$ref:[..."relative"===n.$refStrategy?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:{...r,[i]:o}};return"jsonSchema7"===n.target?a.$schema="http://json-schema.org/draft-07/schema#":"jsonSchema2019-09"===n.target&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),a};function bg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wg;e=e.trim();const n=/```(json)?(.*)```/s.exec(e);return t(n?n[2]:e)}function wg(e){if("undefined"===typeof e)return null;try{return JSON.parse(e)}catch(o){}let t="";const n=[];let r=!1,i=!1;for(let s of e){if(r)'"'!==s||i?"\n"!==s||i?i="\\"===s&&!i:s="\\n":r=!1;else if('"'===s)r=!0,i=!1;else if("{"===s)n.push("}");else if("["===s)n.push("]");else if("}"===s||"]"===s){if(!n||n[n.length-1]!==s)return null;n.pop()}t+=s}r&&(t+='"');for(let s=n.length-1;s>=0;s-=1)t+=n[s];try{return JSON.parse(t)}catch(o){return null}}var xg=n(3047);n(9894);function kg(e,t){return t?.[e]||xg(e)}function Sg(e,t,n){const r={};for(const i in e)Object.hasOwn(e,i)&&(r[t(i,n)]=e[i]);return r}function _g(e){return Array.isArray(e)?[...e]:{...e}}function Eg(e,t){const n=_g(e);for(const[r,i]of Object.entries(t)){const[e,...t]=r.split(".").reverse();let o=n;for(const n of t.reverse()){if(void 0===o[n])break;o[n]=_g(o[n]),o=o[n]}void 0!==o[e]&&(o[e]={lc:1,type:"secret",id:[i]})}return n}function Cg(e){const t=Object.getPrototypeOf(e);return"function"===typeof e.lc_name&&("function"!==typeof t.lc_name||e.lc_name()!==t.lc_name())?e.lc_name():e.name}class Og{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Cg(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_kwargs=e||{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof Og||"object"!==typeof this.lc_kwargs||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},t={},n=Object.keys(this.lc_kwargs).reduce(((e,t)=>(e[t]=t in this?this[t]:this.lc_kwargs[t],e)),{});for(let r=Object.getPrototypeOf(this);r;r=Object.getPrototypeOf(r))Object.assign(e,Reflect.get(r,"lc_aliases",this)),Object.assign(t,Reflect.get(r,"lc_secrets",this)),Object.assign(n,Reflect.get(r,"lc_attributes",this));return Object.keys(t).forEach((e=>{let t=this,r=n;const[i,...o]=e.split(".").reverse();for(const n of o.reverse()){if(!(n in t)||void 0===t[n])return;n in r&&void 0!==r[n]||("object"===typeof t[n]&&null!=t[n]?r[n]={}:Array.isArray(t[n])&&(r[n]=[])),t=t[n],r=r[n]}i in t&&void 0!==t[i]&&(r[i]=r[i]||t[i])})),{lc:1,type:"constructor",id:this.lc_id,kwargs:Sg(Object.keys(t).length?Eg(n,t):n,kg,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}function Ng(e,t){return"string"===typeof e?"string"===typeof t?e+t:[{type:"text",text:e},...t]:Array.isArray(t)?jg(e,t)??[...e,...t]:[...e,{type:"text",text:t}]}class Tg extends Og{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return"string"===typeof this.content?this.content:""}constructor(e,t){"string"===typeof e&&(e={content:e,additional_kwargs:t,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(null===e)return this;const t=(n=this._printableFields,r=Math.max(4,e),JSON.stringify(function e(t,n){if("object"!==typeof t||null===t||void 0===t)return t;if(n>=r)return Array.isArray(t)?"[Array]":"[Object]";if(Array.isArray(t))return t.map((t=>e(t,n+1)));const i={};for(const r of Object.keys(t))i[r]=e(t[r],n+1);return i}(n,0),null,2));var n,r;return`${this.constructor.lc_name()} ${t}`}}function Ag(e,t){const n={...e};for(const[r,i]of Object.entries(t))if(null==n[r])n[r]=i;else{if(null==i)continue;if(typeof n[r]!==typeof i||Array.isArray(n[r])!==Array.isArray(i))throw new Error(`field[${r}] already exists in the message chunk, but with a different type.`);if("string"===typeof n[r]){if("type"===r)continue;n[r]+=i}else if("object"!==typeof n[r]||Array.isArray(n[r]))if(Array.isArray(n[r]))n[r]=jg(n[r],i);else{if(n[r]===i)continue;console.warn(`field[${r}] already exists in this message chunk and value has unsupported type.`)}else n[r]=Ag(n[r],i)}return n}function jg(e,t){if(void 0!==e||void 0!==t){if(void 0===e||void 0===t)return e||t;{const n=[...e];for(const e of t)if("object"===typeof e&&"index"in e&&"number"===typeof e.index){const t=n.findIndex((t=>t.index===e.index));-1!==t?n[t]=Ag(n[t],e):n.push(e)}else{if("object"===typeof e&&"text"in e&&""===e.text)continue;n.push(e)}return n}}}class Pg extends Tg{}function Ig(e){return"function"===typeof e?._getType}class Rg extends Tg{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,t,n){"string"===typeof e&&(e={content:e,name:n,tool_call_id:t}),super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}_getType(){return"tool"}static isInstance(e){return"tool"===e._getType()}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}class Mg extends Tg{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,t){let n;if("string"===typeof e)n={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:t??{}};else{n=e;const t=n.additional_kwargs?.tool_calls,r=n.tool_calls;null!=t&&t.length>0&&(void 0===r||0===r.length)&&console.warn(["New LangChain packages are available that more efficiently handle","tool calling.\n\nPlease upgrade your packages to versions that set","message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(null!=t&&void 0===r){const[e,r]=function(e){const t=[],n=[];for(const i of e)if(i.function){const e=i.function.name;try{const n={name:e||"",args:JSON.parse(i.function.arguments)||{},id:i.id};t.push(n)}catch(r){n.push({name:e,args:i.function.arguments,id:i.id,error:"Malformed args."})}}return[t,n]}(t);n.tool_calls=e??[],n.invalid_tool_calls=r??[]}else n.tool_calls=n.tool_calls??[],n.invalid_tool_calls=n.invalid_tool_calls??[]}catch(RN){n.tool_calls=[],n.invalid_tool_calls=[]}}super(n),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),"string"!==typeof n&&(this.tool_calls=n.tool_calls??this.tool_calls,this.invalid_tool_calls=n.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=n.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}}function $g(e){return"ai"===e._getType()}function Lg(e){return"ai"===e._getType()}class Dg extends Pg{constructor(e){let t;if("string"===typeof e)t={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(void 0===e.tool_call_chunks)t={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[]};else{const n=[],r=[];for(const t of e.tool_call_chunks){let e={};try{if(e=wg(t.args||"{}"),null===e||"object"!==typeof e||Array.isArray(e))throw new Error("Malformed tool call chunk args.");n.push({name:t.name??"",args:e,id:t.id,type:"tool_call"})}catch(RN){r.push({name:t.name,args:t.args,id:t.id,error:"Malformed args.",type:"invalid_tool_call"})}}t={...e,tool_calls:n,invalid_tool_calls:r}}super(t),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=t.tool_call_chunks??this.tool_call_chunks,this.tool_calls=t.tool_calls??this.tool_calls,this.invalid_tool_calls=t.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=t.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){const t={content:Ng(this.content,e.content),additional_kwargs:Ag(this.additional_kwargs,e.additional_kwargs),response_metadata:Ag(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(void 0!==this.tool_call_chunks||void 0!==e.tool_call_chunks){const n=jg(this.tool_call_chunks,e.tool_call_chunks);void 0!==n&&n.length>0&&(t.tool_call_chunks=n)}if(void 0!==this.usage_metadata||void 0!==e.usage_metadata){const n=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},r=e.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},i={input_tokens:n.input_tokens+r.input_tokens,output_tokens:n.output_tokens+r.output_tokens,total_tokens:n.total_tokens+r.total_tokens};t.usage_metadata=i}return new Dg(t)}}class zg extends Tg{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return zg}constructor(e,t){"string"===typeof e&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return"generic"===e._getType()}get _printableFields(){return{...super._printableFields,role:this.role}}}class Fg extends Pg{static lc_name(){return"ChatMessageChunk"}constructor(e,t){"string"===typeof e&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new Fg({content:Ng(this.content,e.content),additional_kwargs:Ag(this.additional_kwargs,e.additional_kwargs),response_metadata:Ag(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}get _printableFields(){return{...super._printableFields,role:this.role}}}class Bg extends Pg{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new Bg({content:Ng(this.content,e.content),additional_kwargs:Ag(this.additional_kwargs,e.additional_kwargs),response_metadata:Ag(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}}class Ug extends Tg{static lc_name(){return"HumanMessage"}_getType(){return"human"}}class Hg extends Pg{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}concat(e){return new Hg({content:Ng(this.content,e.content),additional_kwargs:Ag(this.additional_kwargs,e.additional_kwargs),response_metadata:Ag(this.response_metadata,e.response_metadata),id:this.id??e.id})}}class Vg extends Tg{static lc_name(){return"SystemMessage"}_getType(){return"system"}}class Wg extends Pg{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}concat(e){return new Wg({content:Ng(this.content,e.content),additional_kwargs:Ag(this.additional_kwargs,e.additional_kwargs),response_metadata:Ag(this.response_metadata,e.response_metadata),id:this.id??e.id})}}function qg(e){return!(!e||"object"!==typeof e||!("type"in e)||"tool_call"!==e.type)}class Jg extends Error{constructor(e,t){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=t}}function Kg(e){return qg(e)?e:"string"===typeof e.id&&"function"===e.type&&"object"===typeof e.function&&null!==e.function&&"arguments"in e.function&&"string"===typeof e.function.arguments&&"name"in e.function&&"string"===typeof e.function.name?{id:e.id,args:JSON.parse(e.function.arguments),name:e.function.name,type:"tool_call"}:e}function Gg(e){const{type:t,...n}=e;if("human"===t||"user"===t)return new Ug(n);if("ai"===t||"assistant"===t){const{tool_calls:e,...t}=n;if(!Array.isArray(e))return new Mg(n);const r=e.map(Kg);return new Mg({...t,tool_calls:r})}if("system"===t)return new Vg(n);if("tool"===t&&"tool_call_id"in n)return new Rg({...n,content:n.content,tool_call_id:n.tool_call_id,name:n.name});throw new Error("Unable to coerce message from array: only human, AI, or system message coercion is currently supported.")}function Zg(e){if("string"===typeof e)return new Ug(e);if(Ig(e))return e;if(Array.isArray(e)){const[t,n]=e;return Gg({type:t,content:n})}if("string"===typeof e.role){const{role:t,...n}=e;return Gg({...n,type:t})}return Gg(e)}function Yg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Human",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"AI";const r=[];for(const i of e){let e;if("human"===i._getType())e=t;else if("ai"===i._getType())e=n;else if("system"===i._getType())e="System";else if("function"===i._getType())e="Function";else if("tool"===i._getType())e="Tool";else{if("generic"!==i._getType())throw new Error(`Got unsupported message type: ${i._getType()}`);e=i.role}const o=i.name?`${i.name}, `:"",s="string"===typeof i.content?i.content:JSON.stringify(i.content,null,2);r.push(`${e}: ${o}${s}`)}return r.join("\n")}function Xg(e){const t=e._getType();if("human"===t)return new Hg({...e});if("ai"===t){let t={...e};return"tool_calls"in t&&(t={...t,tool_call_chunks:t.tool_calls?.map((e=>({...e,type:"tool_call_chunk",index:void 0,args:JSON.stringify(e.args)})))}),new Dg({...t})}if("system"===t)return new Wg({...e});if("function"===t)return new Bg({...e});if(zg.isInstance(e))return new Fg({...e});throw new Error("Unknown message type.")}var Qg=n(6659);const ey={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var ty,ny=new Uint8Array(16);function ry(){if(!ty&&!(ty="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ty(ny)}for(var iy=[],oy=0;oy<256;++oy)iy.push((oy+256).toString(16).slice(1));function sy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(iy[e[t+0]]+iy[e[t+1]]+iy[e[t+2]]+iy[e[t+3]]+"-"+iy[e[t+4]]+iy[e[t+5]]+"-"+iy[e[t+6]]+iy[e[t+7]]+"-"+iy[e[t+8]]+iy[e[t+9]]+"-"+iy[e[t+10]]+iy[e[t+11]]+iy[e[t+12]]+iy[e[t+13]]+iy[e[t+14]]+iy[e[t+15]]).toLowerCase()}const ay=function(e,t,n){if(ey.randomUUID&&!t&&!e)return ey.randomUUID();var r=(e=e||{}).random||(e.rng||ry)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return sy(r)};const ly=Symbol.for("ls:tracing_async_local_storage"),cy=new class{getStore(){}run(e,t){return t()}};const uy=new class{getInstance(){return globalThis[ly]??cy}initializeGlobalInstance(e){void 0===globalThis[ly]&&(globalThis[ly]=e)}};Symbol.for("langsmith:traceable:root");function dy(e){return"function"===typeof e&&"langsmith:traceable"in e}const hy=Object.prototype.hasOwnProperty;function py(e,t){return hy.call(e,t)}function fy(e){if(Array.isArray(e)){const t=new Array(e.length);for(let e=0;e<t.length;e++)t[e]=""+e;return t}if(Object.keys)return Object.keys(e);let t=[];for(let n in e)py(e,n)&&t.push(n);return t}function my(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function gy(e){let t=0;const n=e.length;let r;for(;t<n;){if(r=e.charCodeAt(t),!(r>=48&&r<=57))return!1;t++}return!0}function yy(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function vy(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function by(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(by(e[n]))return!0}else if("object"===typeof e){const n=fy(e),r=n.length;for(var t=0;t<r;t++)if(by(e[n[t]]))return!0}return!1}function wy(e,t){const n=[e];for(const r in t){const e="object"===typeof t[r]?JSON.stringify(t[r],null,2):t[r];"undefined"!==typeof e&&n.push(`${r}: ${e}`)}return n.join("\n")}class xy extends Error{constructor(e,t,n,r,i){super(wy(e,{name:t,index:n,operation:r,tree:i})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.setPrototypeOf(this,new.target.prototype),this.message=wy(e,{name:t,index:n,operation:r,tree:i})}}const ky=xy,Sy=my,_y={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){let r=Cy(n,this.path);r&&(r=my(r));const i=Oy(n,{op:"remove",path:this.from}).removed;return Oy(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){const r=Cy(n,this.from);return Oy(n,{op:"add",path:this.path,value:my(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Py(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}};var Ey={add:function(e,t,n){return gy(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:_y.move,copy:_y.copy,test:_y.test,_get:_y._get};function Cy(e,t){if(""==t)return e;var n={op:"_get",path:t};return Oy(e,n),n.value}function Oy(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(n&&("function"==typeof n?n(t,0,e,t.path):Ay(t,0)),""===t.path){let r={newDocument:e};if("add"===t.op)return r.newDocument=t.value,r;if("replace"===t.op)return r.newDocument=t.value,r.removed=e,r;if("move"===t.op||"copy"===t.op)return r.newDocument=Cy(e,t.from),"move"===t.op&&(r.removed=e),r;if("test"===t.op){if(r.test=Py(e,t.value),!1===r.test)throw new ky("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return r.newDocument=e,r}if("remove"===t.op)return r.removed=e,r.newDocument=null,r;if("_get"===t.op)return t.value=e,r;if(n)throw new ky("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return r}{r||(e=my(e));const s=(t.path||"").split("/");let a,l,c,u=e,d=1,h=s.length;for(c="function"==typeof n?n:Ay;;){if(l=s[d],l&&-1!=l.indexOf("~")&&(l=vy(l)),i&&("__proto__"==l||"prototype"==l&&d>0&&"constructor"==s[d-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===a&&(void 0===u[l]?a=s.slice(0,d).join("/"):d==h-1&&(a=t.path),void 0!==a&&c(t,0,e,a)),d++,Array.isArray(u)){if("-"===l)l=u.length;else{if(n&&!gy(l))throw new ky("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);gy(l)&&(l=~~l)}if(d>=h){if(n&&"add"===t.op&&l>u.length)throw new ky("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);const r=Ey[t.op].call(t,u,l,e);if(!1===r.test)throw new ky("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return r}}else if(d>=h){const n=_y[t.op].call(t,u,l,e);if(!1===n.test)throw new ky("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return n}if(u=u[l],n&&d<h&&(!u||"object"!==typeof u))throw new ky("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function Ny(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(n&&!Array.isArray(t))throw new ky("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=my(e));const o=new Array(t.length);for(let s=0,a=t.length;s<a;s++)o[s]=Oy(e,t[s],n,!0,i,s),e=o[s].newDocument;return o.newDocument=e,o}function Ty(e,t,n){const r=Oy(e,t);if(!1===r.test)throw new ky("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function Ay(e,t,n,r){if("object"!==typeof e||null===e||Array.isArray(e))throw new ky("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!_y[e.op])throw new ky("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!==typeof e.path)throw new ky("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new ky('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!==typeof e.from)throw new ky("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new ky("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&by(e.value))throw new ky("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new ky("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new ky("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var s=jy([{op:"_get",path:e.from,value:void 0}],n);if(s&&"OPERATION_PATH_UNRESOLVABLE"===s.name)throw new ky("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function jy(e,t,n){try{if(!Array.isArray(e))throw new ky("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Ny(my(t),my(e),n||!0);else{n=n||Ay;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(RN){if(RN instanceof ky)return RN;throw RN}}function Py(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,r,i,o=Array.isArray(e),s=Array.isArray(t);if(o&&s){if((r=e.length)!=t.length)return!1;for(n=r;0!==n--;)if(!Py(e[n],t[n]))return!1;return!0}if(o!=s)return!1;var a=Object.keys(e);if((r=a.length)!==Object.keys(t).length)return!1;for(n=r;0!==n--;)if(!t.hasOwnProperty(a[n]))return!1;for(n=r;0!==n--;)if(!Py(e[i=a[n]],t[i]))return!1;return!0}return e!==e&&t!==t}new WeakMap;function Iy(e,t,n,r,i){if(t!==e){"function"===typeof t.toJSON&&(t=t.toJSON());for(var o=fy(t),s=fy(e),a=!1,l=s.length-1;l>=0;l--){var c=e[d=s[l]];if(!py(t,d)||void 0===t[d]&&void 0!==c&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+yy(d),value:my(c)}),n.push({op:"remove",path:r+"/"+yy(d)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}),!0);else{var u=t[d];"object"==typeof c&&null!=c&&"object"==typeof u&&null!=u&&Array.isArray(c)===Array.isArray(u)?Iy(c,u,n,r+"/"+yy(d),i):c!==u&&(i&&n.push({op:"test",path:r+"/"+yy(d),value:my(c)}),n.push({op:"replace",path:r+"/"+yy(d),value:my(u)}))}}if(a||o.length!=s.length)for(l=0;l<o.length;l++){var d;py(e,d=o[l])||void 0===t[d]||n.push({op:"add",path:r+"/"+yy(d),value:my(t[d])})}}}function Ry(e,t){var n=[];return Iy(e,t,n,"",arguments.length>2&&void 0!==arguments[2]&&arguments[2]),n}const My=()=>"undefined"!==typeof Deno,$y=()=>{let e;return e="undefined"!==typeof window&&"undefined"!==typeof window.document?"browser":"undefined"===typeof process||"undefined"===typeof process.versions||"undefined"===typeof process.versions.node||My()?"object"===typeof globalThis&&globalThis.constructor&&"DedicatedWorkerGlobalScope"===globalThis.constructor.name?"webworker":"undefined"!==typeof window&&"nodejs"===window.name||"undefined"!==typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"))?"jsdom":My()?"deno":"other":"node",e};let Ly;async function Dy(){if(void 0===Ly){const e=$y();Ly={library:"langchain-js",runtime:e}}return Ly}function zy(e){try{return"undefined"!==typeof process?{NODE_ENV:"production",PUBLIC_URL:"/login",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"http://localhost:5000/api",REACT_APP_GROQ_API_KEY:"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",REACT_APP_SOCKET_URL:"http://localhost:5000"}?.[e]:void 0}catch(RN){return}}class Fy{}class By extends Fy{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Cg(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:"false"===zy("LANGCHAIN_CALLBACKS_BACKGROUND")}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return Og.prototype.toJSON.call(this)}toJSONNotImplemented(){return Og.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){return new class extends By{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:ay()}),Object.assign(this,e)}}}}function Uy(e,t){return e&&!Array.isArray(e)&&"object"===typeof e?e:{[t]:e}}function Hy(e){return"function"===typeof e._addRunToRunMap}class Vy extends By{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(e){return e instanceof Error?e.message+(e?.stack?`\n\n${e.stack}`:""):"string"===typeof e?e:`${e}`}_addChildRun(e,t){e.child_runs.push(t)}_addRunToRunMap(e){const t=function(e,t,n){const r=n.toFixed(0).slice(0,3).padStart(3,"0");return`${new Date(e).toISOString().slice(0,-1)}${r}Z`.replace(/[-:.]/g,"")+t}(e.start_time,e.id,e.execution_order),n={...e};if(void 0!==n.parent_run_id){const e=this.runMap.get(n.parent_run_id);e&&(this._addChildRun(e,n),e.child_execution_order=Math.max(e.child_execution_order,n.child_execution_order),n.trace_id=e.trace_id,void 0!==e.dotted_order&&(n.dotted_order=[e.dotted_order,t].join(".")))}else n.trace_id=n.id,n.dotted_order=t;return this.runMap.set(n.id,n),n}async _endTrace(e){const t=void 0!==e.parent_run_id&&this.runMap.get(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await(this.onRunUpdate?.(e))}_getExecutionOrder(e){const t=void 0!==e&&this.runMap.get(e);return t?t.child_execution_order+1:1}_createRunForLLMStart(e,t,n,r,i,o,s,a){const l=this._getExecutionOrder(r),c=Date.now(),u=s?{...i,metadata:s}:i,d={id:n,name:a??e.id[e.id.length-1],parent_run_id:r,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{prompts:t},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:u??{},tags:o||[]};return this._addRunToRunMap(d)}async handleLLMStart(e,t,n,r,i,o,s,a){const l=this.runMap.get(n)??this._createRunForLLMStart(e,t,n,r,i,o,s,a);return await(this.onRunCreate?.(l)),await(this.onLLMStart?.(l)),l}_createRunForChatModelStart(e,t,n,r,i,o,s,a){const l=this._getExecutionOrder(r),c=Date.now(),u=s?{...i,metadata:s}:i,d={id:n,name:a??e.id[e.id.length-1],parent_run_id:r,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{messages:t},execution_order:l,child_runs:[],child_execution_order:l,run_type:"llm",extra:u??{},tags:o||[]};return this._addRunToRunMap(d)}async handleChatModelStart(e,t,n,r,i,o,s,a){const l=this.runMap.get(n)??this._createRunForChatModelStart(e,t,n,r,i,o,s,a);return await(this.onRunCreate?.(l)),await(this.onLLMStart?.(l)),l}async handleLLMEnd(e,t){const n=this.runMap.get(t);if(!n||"llm"!==n?.run_type)throw new Error("No LLM run to end.");return n.end_time=Date.now(),n.outputs=e,n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await(this.onLLMEnd?.(n)),await this._endTrace(n),n}async handleLLMError(e,t){const n=this.runMap.get(t);if(!n||"llm"!==n?.run_type)throw new Error("No LLM run to end.");return n.end_time=Date.now(),n.error=this.stringifyError(e),n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await(this.onLLMError?.(n)),await this._endTrace(n),n}_createRunForChainStart(e,t,n,r,i,o,s,a){const l=this._getExecutionOrder(r),c=Date.now(),u={id:n,name:a??e.id[e.id.length-1],parent_run_id:r,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:t,execution_order:l,child_execution_order:l,run_type:s??"chain",child_runs:[],extra:o?{metadata:o}:{},tags:i||[]};return this._addRunToRunMap(u)}async handleChainStart(e,t,n,r,i,o,s,a){const l=this.runMap.get(n)??this._createRunForChainStart(e,t,n,r,i,o,s,a);return await(this.onRunCreate?.(l)),await(this.onChainStart?.(l)),l}async handleChainEnd(e,t,n,r,i){const o=this.runMap.get(t);if(!o)throw new Error("No chain run to end.");return o.end_time=Date.now(),o.outputs=Uy(e,"output"),o.events.push({name:"end",time:new Date(o.end_time).toISOString()}),void 0!==i?.inputs&&(o.inputs=Uy(i.inputs,"input")),await(this.onChainEnd?.(o)),await this._endTrace(o),o}async handleChainError(e,t,n,r,i){const o=this.runMap.get(t);if(!o)throw new Error("No chain run to end.");return o.end_time=Date.now(),o.error=this.stringifyError(e),o.events.push({name:"error",time:new Date(o.end_time).toISOString()}),void 0!==i?.inputs&&(o.inputs=Uy(i.inputs,"input")),await(this.onChainError?.(o)),await this._endTrace(o),o}_createRunForToolStart(e,t,n,r,i,o,s){const a=this._getExecutionOrder(r),l=Date.now(),c={id:n,name:s??e.id[e.id.length-1],parent_run_id:r,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{input:t},execution_order:a,child_execution_order:a,run_type:"tool",child_runs:[],extra:o?{metadata:o}:{},tags:i||[]};return this._addRunToRunMap(c)}async handleToolStart(e,t,n,r,i,o,s){const a=this.runMap.get(n)??this._createRunForToolStart(e,t,n,r,i,o,s);return await(this.onRunCreate?.(a)),await(this.onToolStart?.(a)),a}async handleToolEnd(e,t){const n=this.runMap.get(t);if(!n||"tool"!==n?.run_type)throw new Error("No tool run to end");return n.end_time=Date.now(),n.outputs={output:e},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await(this.onToolEnd?.(n)),await this._endTrace(n),n}async handleToolError(e,t){const n=this.runMap.get(t);if(!n||"tool"!==n?.run_type)throw new Error("No tool run to end");return n.end_time=Date.now(),n.error=this.stringifyError(e),n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await(this.onToolError?.(n)),await this._endTrace(n),n}async handleAgentAction(e,t){const n=this.runMap.get(t);if(!n||"chain"!==n?.run_type)return;const r=n;r.actions=r.actions||[],r.actions.push(e),r.events.push({name:"agent_action",time:(new Date).toISOString(),kwargs:{action:e}}),await(this.onAgentAction?.(n))}async handleAgentEnd(e,t){const n=this.runMap.get(t);n&&"chain"===n?.run_type&&(n.events.push({name:"agent_end",time:(new Date).toISOString(),kwargs:{action:e}}),await(this.onAgentEnd?.(n)))}_createRunForRetrieverStart(e,t,n,r,i,o,s){const a=this._getExecutionOrder(r),l=Date.now(),c={id:n,name:s??e.id[e.id.length-1],parent_run_id:r,start_time:l,serialized:e,events:[{name:"start",time:new Date(l).toISOString()}],inputs:{query:t},execution_order:a,child_execution_order:a,run_type:"retriever",child_runs:[],extra:o?{metadata:o}:{},tags:i||[]};return this._addRunToRunMap(c)}async handleRetrieverStart(e,t,n,r,i,o,s){const a=this.runMap.get(n)??this._createRunForRetrieverStart(e,t,n,r,i,o,s);return await(this.onRunCreate?.(a)),await(this.onRetrieverStart?.(a)),a}async handleRetrieverEnd(e,t){const n=this.runMap.get(t);if(!n||"retriever"!==n?.run_type)throw new Error("No retriever run to end");return n.end_time=Date.now(),n.outputs={documents:e},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await(this.onRetrieverEnd?.(n)),await this._endTrace(n),n}async handleRetrieverError(e,t){const n=this.runMap.get(t);if(!n||"retriever"!==n?.run_type)throw new Error("No retriever run to end");return n.end_time=Date.now(),n.error=this.stringifyError(e),n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await(this.onRetrieverError?.(n)),await this._endTrace(n),n}async handleText(e,t){const n=this.runMap.get(t);n&&"chain"===n?.run_type&&(n.events.push({name:"text",time:(new Date).toISOString(),kwargs:{text:e}}),await(this.onText?.(n)))}async handleLLMNewToken(e,t,n,r,i,o){const s=this.runMap.get(n);if(!s||"llm"!==s?.run_type)throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return s.events.push({name:"new_token",time:(new Date).toISOString(),kwargs:{token:e,idx:t,chunk:o?.chunk}}),await(this.onLLMNewToken?.(s,e,{chunk:o?.chunk})),s}}const Wy={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var qy,Jy=new Uint8Array(16);function Ky(){if(!qy&&!(qy="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return qy(Jy)}for(var Gy=[],Zy=0;Zy<256;++Zy)Gy.push((Zy+256).toString(16).slice(1));function Yy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(Gy[e[t+0]]+Gy[e[t+1]]+Gy[e[t+2]]+Gy[e[t+3]]+"-"+Gy[e[t+4]]+Gy[e[t+5]]+"-"+Gy[e[t+6]]+Gy[e[t+7]]+"-"+Gy[e[t+8]]+Gy[e[t+9]]+"-"+Gy[e[t+10]]+Gy[e[t+11]]+Gy[e[t+12]]+Gy[e[t+13]]+Gy[e[t+14]]+Gy[e[t+15]]).toLowerCase()}const Xy=function(e,t,n){if(Wy.randomUUID&&!t&&!e)return Wy.randomUUID();var r=(e=e||{}).random||(e.rng||Ky)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return Yy(r)};var Qy=n(5623);const ev=function(){return fetch(...arguments)},tv=Symbol.for("ls:fetch_implementation"),nv=()=>globalThis[tv]??ev,rv=[400,401,403,404,405,406,407,408],iv=[409];class ov{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.queue=new Qy.default({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e?.onFailedResponseHook}call(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=this.onFailedResponseHook;return this.queue.add((()=>Qg((()=>e(...n).catch((e=>{throw e instanceof Error?e:new Error(e)}))),{async onFailedAttempt(e){if(e.message.startsWith("Cancel")||e.message.startsWith("TimeoutError")||e.message.startsWith("AbortError"))throw e;if("ECONNABORTED"===e?.code)throw e;const t=e?.response,n=t?.status;if(n){if(rv.includes(+n))throw e;if(iv.includes(+n))return;i&&await i(t)}},retries:this.maxRetries,randomize:!0})),{throwOnTimeout:!0})}callWithOptions(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e.signal?Promise.race([this.call(t,...r),new Promise(((t,n)=>{e.signal?.addEventListener("abort",(()=>{n(new Error("AbortError"))}))}))]):this.call(t,...r)}fetch(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.call((()=>nv()(...t).then((e=>e.ok?e:Promise.reject(e)))))}}function sv(e){return"function"===typeof e?._getType}function av(e){const t={type:e._getType(),data:{content:e.content}};return e?.additional_kwargs&&Object.keys(e.additional_kwargs).length>0&&(t.data.additional_kwargs={...e.additional_kwargs}),t}let lv;const cv=()=>"undefined"!==typeof Deno,uv=()=>lv||(lv="undefined"!==typeof window&&"undefined"!==typeof window.document?"browser":"undefined"===typeof process||"undefined"===typeof process.versions||"undefined"===typeof process.versions.node||cv()?"object"===typeof globalThis&&globalThis.constructor&&"DedicatedWorkerGlobalScope"===globalThis.constructor.name?"webworker":"undefined"!==typeof window&&"nodejs"===window.name||"undefined"!==typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"))?"jsdom":cv()?"deno":"other":"node",lv);let dv,hv;async function pv(){if(void 0===dv){const e=uv(),t=function(){if(void 0!==hv)return hv;const e=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],t={};for(const n of e){const e=mv(n);void 0!==e&&(t[n]=e)}return hv=t,t}();dv={library:"langsmith",runtime:e,sdk:"langsmith-js",sdk_version:Vv,...t}}return dv}function fv(){try{return"undefined"!==typeof process?Object.entries({NODE_ENV:"production",PUBLIC_URL:"/login",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"http://localhost:5000/api",REACT_APP_GROQ_API_KEY:"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",REACT_APP_SOCKET_URL:"http://localhost:5000"}).reduce(((e,t)=>{let[n,r]=t;return e[n]=String(r),e}),{}):void 0}catch(RN){return}}function mv(e){try{return"undefined"!==typeof process?{NODE_ENV:"production",PUBLIC_URL:"/login",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"http://localhost:5000/api",REACT_APP_GROQ_API_KEY:"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",REACT_APP_SOCKET_URL:"http://localhost:5000"}?.[e]:void 0}catch(RN){return}}function gv(e){return mv(`LANGSMITH_${e}`)||mv(`LANGCHAIN_${e}`)}const yv=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;const vv=function(e){return"string"===typeof e&&yv.test(e)};function bv(e,t){if(!vv(e)){throw new Error(void 0!==t?`Invalid UUID for ${t}: ${e}`:`Invalid UUID: ${e}`)}return e}const wv={};function xv(e){wv[e]||(console.warn(e),wv[e]=!0)}var kv=n(500);function Sv(e){if(!e||e.split("/").length>2||e.startsWith("/")||e.endsWith("/")||e.split(":").length>2)throw new Error(`Invalid identifier format: ${e}`);const[t,n]=e.split(":"),r=n||"latest";if(t.includes("/")){const[n,i]=t.split("/",2);if(!n||!i)throw new Error(`Invalid identifier format: ${e}`);return[n,i,r]}if(!t)throw new Error(`Invalid identifier format: ${e}`);return["-",t,r]}class _v extends Error{constructor(e){super(e),this.name="LangSmithConflictError"}}async function Ev(e,t,n){let r;if(e.ok)return void(n&&(r=await e.text()));r=await e.text();const i=`Failed to ${t}. Received status [${e.status}]: ${e.statusText}. Server response: ${r}`;if(409===e.status)throw new _v(i);throw new Error(i)}var Cv="[...]",Ov={result:"[Circular]"},Nv=[],Tv=[];function Av(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function jv(e,t,n,r){var i;"undefined"===typeof r&&(r=Av()),Iv(e,"",0,[],void 0,0,r);try{i=0===Tv.length?JSON.stringify(e,t,n):JSON.stringify(e,Rv(t),n)}catch(s){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==Nv.length;){var o=Nv.pop();4===o.length?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function Pv(e,t,n,r){var i=Object.getOwnPropertyDescriptor(r,n);void 0!==i.get?i.configurable?(Object.defineProperty(r,n,{value:e}),Nv.push([r,n,t,i])):Tv.push([t,n,e]):(r[n]=e,Nv.push([r,n,t]))}function Iv(e,t,n,r,i,o,s){var a;if(o+=1,"object"===typeof e&&null!==e){for(a=0;a<r.length;a++)if(r[a]===e)return void Pv(Ov,e,t,i);if("undefined"!==typeof s.depthLimit&&o>s.depthLimit)return void Pv(Cv,e,t,i);if("undefined"!==typeof s.edgesLimit&&n+1>s.edgesLimit)return void Pv(Cv,e,t,i);if(r.push(e),Array.isArray(e))for(a=0;a<e.length;a++)Iv(e[a],a,a,r,e,o,s);else{var l=Object.keys(e);for(a=0;a<l.length;a++){var c=l[a];Iv(e[c],c,a,r,e,o,s)}}r.pop()}}function Rv(e){return e="undefined"!==typeof e?e:function(e,t){return t},function(t,n){if(Tv.length>0)for(var r=0;r<Tv.length;r++){var i=Tv[r];if(i[1]===t&&i[0]===n){n=i[2],Tv.splice(r,1);break}}return e.call(this,t,n)}}async function Mv(e){const t=await pv(),n=function(){const e=fv()||{},t={},n=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION"];for(const[r,i]of Object.entries(e))!r.startsWith("LANGCHAIN_")||"string"!==typeof i||n.includes(r)||r.toLowerCase().includes("key")||r.toLowerCase().includes("secret")||r.toLowerCase().includes("token")||("LANGCHAIN_REVISION_ID"===r?t.revision_id=i:t[r]=i);return t}();return e.map((e=>{const r=e.extra??{},i=r.metadata;return e.extra={...r,runtime:{...t,...r?.runtime},metadata:{...n,...n.revision_id||e.revision_id?{revision_id:e.revision_id??n.revision_id}:{},...i}},e}))}function $v(e){if(void 0!==e)return e.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const Lv=async e=>{if(429===e?.status){const t=1e3*parseInt(e.headers.get("retry-after")??"30",10);if(t>0)return await new Promise((e=>setTimeout(e,t))),!0}return!1};class Dv{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]})}get size(){return this.items.length}push(e){return new Promise((t=>{this.items.push([e,t])}))}pop(e){if(e<1)throw new Error("Number of items to pop off may not be less than 1.");const t=[];for(;t.length<e&&this.items.length;){const e=this.items.shift();if(!e)break;t.push(e)}return[t.map((e=>e[0])),()=>t.forEach((e=>e[1]()))]}}class zv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"batchEndpointSupported",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new Dv}),Object.defineProperty(this,"pendingAutoBatchedRunLimit",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchInitialDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:50}),Object.defineProperty(this,"serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const t=zv.getDefaultClientConfig();this.tracingSampleRate=(()=>{const e=gv("TRACING_SAMPLING_RATE");if(void 0===e)return;const t=parseFloat(e);if(t<0||t>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${t}`);return t})(),this.apiUrl=$v(e.apiUrl??t.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=$v(e.apiKey??t.apiKey),this.webUrl=$v(e.webUrl??t.webUrl),this.webUrl?.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=e.timeout_ms??12e3,this.caller=new ov(e.callerOptions??{}),this.batchIngestCaller=new ov({...e.callerOptions??{},onFailedResponseHook:Lv}),this.hideInputs=e.hideInputs??e.anonymizer??t.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??t.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.pendingAutoBatchedRunLimit=e.pendingAutoBatchedRunLimit??this.pendingAutoBatchedRunLimit,this.fetchOptions=e.fetchOptions||{}}static getDefaultClientConfig(){const e=gv("API_KEY");return{apiUrl:gv("ENDPOINT")??"https://api.smith.langchain.com",apiKey:e,webUrl:void 0,hideInputs:"true"===gv("HIDE_INPUTS"),hideOutputs:"true"===gv("HIDE_OUTPUTS")}}getHostUrl(){return this.webUrl?this.webUrl:(e=>{const t=e.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return"localhost"===t||"127.0.0.1"===t||"::1"===t})(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${Vv}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}processInputs(e){return!1===this.hideInputs?e:!0===this.hideInputs?{}:"function"===typeof this.hideInputs?this.hideInputs(e):e}processOutputs(e){return!1===this.hideOutputs?e:!0===this.hideOutputs?{}:"function"===typeof this.hideOutputs?this.hideOutputs(e):e}prepareRunCreateOrUpdateInputs(e){const t={...e};return void 0!==t.inputs&&(t.inputs=this.processInputs(t.inputs)),void 0!==t.outputs&&(t.outputs=this.processOutputs(t.outputs)),t}async _getResponse(e,t){const n=t?.toString()??"",r=`${this.apiUrl}${e}?${n}`,i=await this.caller.call(nv(),r,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ev(i,`Failed to fetch ${e}`),i}async _get(e,t){return(await this._getResponse(e,t)).json()}_getPaginated(e){try{var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new URLSearchParams,r=arguments.length>2?arguments[2]:void 0;return async function*(){let i=Number(n.get("offset"))||0;const o=Number(n.get("limit"))||100;for(;;){n.set("offset",String(i)),n.set("limit",String(o));const s=`${t.apiUrl}${e}?${n}`,a=await t.caller.call(nv(),s,{method:"GET",headers:t.headers,signal:AbortSignal.timeout(t.timeout_ms),...t.fetchOptions});await Ev(a,`Failed to fetch ${e}`);const l=r?r(await a.json()):await a.json();if(0===l.length)break;if(yield l,l.length<o)break;i+=l.length}}()}catch(RN){return Promise.reject(RN)}}_getCursorPaginatedList(e){try{var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"runs";return async function*(){const o=n?{...n}:{};for(;;){const n=await t.caller.call(nv(),`${t.apiUrl}${e}`,{method:r,headers:{...t.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(t.timeout_ms),...t.fetchOptions,body:JSON.stringify(o)}),s=await n.json();if(!s)break;if(!s[i])break;yield s[i];const a=s.cursors;if(!a)break;if(!a.next)break;o.cursor=a.next}}()}catch(RN){return Promise.reject(RN)}}_filterForSampling(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(void 0===this.tracingSampleRate)return e;if(t){const t=[];for(const n of e)this.filteredPostUuids.has(n.id)?this.filteredPostUuids.delete(n.id):t.push(n);return t}{const t=[];for(const n of e)n.id!==n.trace_id&&!this.filteredPostUuids.has(n.trace_id)||Math.random()<this.tracingSampleRate?t.push(n):this.filteredPostUuids.add(n.id);return t}}async drainAutoBatchQueue(){for(;this.autoBatchQueue.size>=0;){const[e,t]=this.autoBatchQueue.pop(this.pendingAutoBatchedRunLimit);if(!e.length)return void t();try{await this.batchIngestRuns({runCreates:e.filter((e=>"create"===e.action)).map((e=>e.item)),runUpdates:e.filter((e=>"update"===e.action)).map((e=>e.item))})}finally{t()}}}async processRunOperation(e,t){const n=this.autoBatchTimeout;clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0;const r=this.autoBatchQueue.push(e);return(t||this.autoBatchQueue.size>this.pendingAutoBatchedRunLimit)&&await this.drainAutoBatchQueue().catch(console.error),this.autoBatchQueue.size>0&&(this.autoBatchTimeout=setTimeout((()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue().catch(console.error)}),n?this.autoBatchAggregationDelayMs:this.autoBatchInitialDelayMs)),r}async _getServerInfo(){const e=await nv()(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ev(e,"get server info"),e.json()}async batchEndpointIsSupported(){try{this.serverInfo=await this._getServerInfo()}catch(RN){return!1}return!0}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async createRun(e){if(!this._filterForSampling([e]).length)return;const t={...this.headers,"Content-Type":"application/json"},n=e.project_name;delete e.project_name;const r=this.prepareRunCreateOrUpdateInputs({session_name:n,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&void 0!==r.trace_id&&void 0!==r.dotted_order)return void this.processRunOperation({action:"create",item:r}).catch(console.error);const i=await Mv([r]),o=await this.caller.call(nv(),`${this.apiUrl}/runs`,{method:"POST",headers:t,body:jv(i[0]),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(o,"create run",!0)}async batchIngestRuns(e){let{runCreates:t,runUpdates:n}=e;if(void 0===t&&void 0===n)return;let r=t?.map((e=>this.prepareRunCreateOrUpdateInputs(e)))??[],i=n?.map((e=>this.prepareRunCreateOrUpdateInputs(e)))??[];if(r.length>0&&i.length>0){const e=r.reduce(((e,t)=>t.id?(e[t.id]=t,e):e),{}),t=[];for(const n of i)void 0!==n.id&&e[n.id]?e[n.id]={...e[n.id],...n}:t.push(n);r=Object.values(e),i=t}const o={post:this._filterForSampling(r),patch:this._filterForSampling(i,!0)};if(!o.post.length&&!o.patch.length)return;if(r=await Mv(r),void 0===this.batchEndpointSupported&&(this.batchEndpointSupported=await this.batchEndpointIsSupported()),!this.batchEndpointSupported){this.autoBatchTracing=!1;for(const e of o.post)await this.createRun(e);for(const e of o.patch)void 0!==e.id&&await this.updateRun(e.id,e);return}const s=this.serverInfo?.batch_ingest_config?.size_limit_bytes??20971520,a={post:[],patch:[]};let l=0;for(const c of["post","patch"]){const e=c,t=o[e].reverse();let n=t.pop();for(;void 0!==n;){const r=jv(n);l>0&&l+r.length>s&&(await this._postBatchIngestRuns(jv(a)),l=0,a.post=[],a.patch=[]),l+=r.length,a[e].push(n),n=t.pop()}}(a.post.length>0||a.patch.length>0)&&await this._postBatchIngestRuns(jv(a))}async _postBatchIngestRuns(e){const t={...this.headers,"Content-Type":"application/json",Accept:"application/json"},n=await this.batchIngestCaller.call(nv(),`${this.apiUrl}/runs/batch`,{method:"POST",headers:t,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(n,"batch create run",!0)}async updateRun(e,t){bv(e),t.inputs&&(t.inputs=this.processInputs(t.inputs)),t.outputs&&(t.outputs=this.processOutputs(t.outputs));const n={...t,id:e};if(!this._filterForSampling([n],!0).length)return;if(this.autoBatchTracing&&void 0!==n.trace_id&&void 0!==n.dotted_order)return void 0!==t.end_time&&void 0===n.parent_run_id?void await this.processRunOperation({action:"update",item:n},!0):void this.processRunOperation({action:"update",item:n}).catch(console.error);const r={...this.headers,"Content-Type":"application/json"},i=await this.caller.call(nv(),`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:r,body:jv(t),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(i,"update run",!0)}async readRun(e){let{loadChildRuns:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{loadChildRuns:!1};bv(e);let n=await this._get(`/runs/${e}`);return t&&n.child_run_ids&&(n=await this._loadChildRuns(n)),n}async getRunUrl(e){let{runId:t,run:n,projectOpts:r}=e;if(void 0!==n){let e;if(n.session_id)e=n.session_id;else if(r?.projectName)e=(await this.readProject({projectName:r?.projectName})).id;else if(r?.projectId)e=r?.projectId;else{e=(await this.readProject({projectName:gv("PROJECT")||"default"})).id}const t=await this._getTenantId();return`${this.getHostUrl()}/o/${t}/projects/p/${e}/r/${n.id}?poll=true`}if(void 0!==t){const e=await this.readRun(t);if(!e.app_path)throw new Error(`Run ${t} has no app_path`);return`${this.getHostUrl()}${e.app_path}`}throw new Error("Must provide either runId or run")}async _loadChildRuns(e){const t=await async function(e){const t=[];for await(const n of e)t.push(n);return t}(this.listRuns({id:e.child_run_ids})),n={},r={};t.sort(((e,t)=>(e?.dotted_order??"").localeCompare(t?.dotted_order??"")));for(const i of t){if(null===i.parent_run_id||void 0===i.parent_run_id)throw new Error(`Child run ${i.id} has no parent`);i.parent_run_id in n||(n[i.parent_run_id]=[]),n[i.parent_run_id].push(i),r[i.id]=i}e.child_runs=n[e.id]||[];for(const i in n)i!==e.id&&(r[i].child_runs=n[i]);return e}async*listRuns(e){const{projectId:t,projectName:n,parentRunId:r,traceId:i,referenceExampleId:o,startTime:s,executionOrder:a,isRoot:l,runType:c,error:u,id:d,query:h,filter:p,traceFilter:f,treeFilter:m,limit:g,select:y}=e;let v=[];if(t&&(v=Array.isArray(t)?t:[t]),n){const e=Array.isArray(n)?n:[n],t=await Promise.all(e.map((e=>this.readProject({projectName:e}).then((e=>e.id)))));v.push(...t)}const b={session:v.length?v:null,run_type:c,reference_example:o,query:h,filter:p,trace_filter:f,tree_filter:m,execution_order:a,parent_run:r,start_time:s?s.toISOString():null,error:u,id:d,limit:g,trace:i,select:y||["app_path","child_run_ids","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],is_root:l};let w=0;for await(const x of this._getCursorPaginatedList("/runs/query",b))if(g){if(w>=g)break;if(x.length+w>g){const e=x.slice(0,g-w);yield*e;break}w+=x.length,yield*x}else yield*x}async getRunStats(e){let{id:t,trace:n,parentRun:r,runType:i,projectNames:o,projectIds:s,referenceExampleIds:a,startTime:l,endTime:c,error:u,query:d,filter:h,traceFilter:p,treeFilter:f,isRoot:m,dataSourceType:g}=e,y=s||[];o&&(y=[...s||[],...await Promise.all(o.map((e=>this.readProject({projectName:e}).then((e=>e.id)))))]);const v={id:t,trace:n,parent_run:r,run_type:i,session:y,reference_example:a,start_time:l,end_time:c,error:u,query:d,filter:h,trace_filter:p,tree_filter:f,is_root:m,data_source_type:g},b=Object.fromEntries(Object.entries(v).filter((e=>{let[t,n]=e;return void 0!==n}))),w=await this.caller.call(nv(),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(b),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await w.json()}async shareRun(e){let{shareId:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n={run_id:e,share_token:t||Xy()};bv(e);const r=await this.caller.call(nv(),`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),i=await r.json();if(null===i||!("share_token"in i))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${i.share_token}/r`}async unshareRun(e){bv(e);const t=await this.caller.call(nv(),`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(t,"unshare run",!0)}async readRunSharedLink(e){bv(e);const t=await this.caller.call(nv(),`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),n=await t.json();if(null!==n&&"share_token"in n)return`${this.getHostUrl()}/public/${n.share_token}/r`}async listSharedRuns(e){let{runIds:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new URLSearchParams({share_token:e});if(void 0!==t)for(const i of t)n.append("id",i);bv(e);const r=await this.caller.call(nv(),`${this.apiUrl}/public/${e}/runs${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await r.json()}async readDatasetSharedSchema(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");if(!e){e=(await this.readDataset({datasetName:t})).id}bv(e);const n=await this.caller.call(nv(),`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),r=await n.json();return r.url=`${this.getHostUrl()}/public/${r.share_token}/d`,r}async shareDataset(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");if(!e){e=(await this.readDataset({datasetName:t})).id}const n={dataset_id:e};bv(e);const r=await this.caller.call(nv(),`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),i=await r.json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i}async unshareDataset(e){bv(e);const t=await this.caller.call(nv(),`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(t,"unshare dataset",!0)}async readSharedDataset(e){bv(e);const t=await this.caller.call(nv(),`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await t.json()}async listSharedExamples(e,t){const n={};t?.exampleIds&&(n.id=t.exampleIds);const r=new URLSearchParams;Object.entries(n).forEach((e=>{let[t,n]=e;Array.isArray(n)?n.forEach((e=>r.append(t,e))):r.append(t,n)}));const i=await this.caller.call(nv(),`${this.apiUrl}/public/${e}/examples?${r.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),o=await i.json();if(!i.ok){if("detail"in o)throw new Error(`Failed to list shared examples.\nStatus: ${i.status}\nMessage: ${o.detail.join("\n")}`);throw new Error(`Failed to list shared examples: ${i.status} ${i.statusText}`)}return o.map((e=>({...e,_hostUrl:this.getHostUrl()})))}async createProject(e){let{projectName:t,description:n=null,metadata:r=null,upsert:i=!1,projectExtra:o=null,referenceDatasetId:s=null}=e;const a=i?"?upsert=true":"",l=`${this.apiUrl}/sessions${a}`,c=o||{};r&&(c.metadata=r);const u={name:t,extra:c,description:n};null!==s&&(u.reference_dataset_id=s);const d=await this.caller.call(nv(),l,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(d,"create project");return await d.json()}async updateProject(e,t){let{name:n=null,description:r=null,metadata:i=null,projectExtra:o=null,endTime:s=null}=t;const a=`${this.apiUrl}/sessions/${e}`;let l=o;i&&(l={...l||{},metadata:i});const c={name:n,extra:l,description:r,end_time:s?new Date(s).toISOString():null},u=await this.caller.call(nv(),a,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(u,"update project");return await u.json()}async hasProject(e){let{projectId:t,projectName:n}=e,r="/sessions";const i=new URLSearchParams;if(void 0!==t&&void 0!==n)throw new Error("Must provide either projectName or projectId, not both");if(void 0!==t)bv(t),r+=`/${t}`;else{if(void 0===n)throw new Error("Must provide projectName or projectId");i.append("name",n)}const o=await this.caller.call(nv(),`${this.apiUrl}${r}?${i}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{const e=await o.json();return!!o.ok&&(!Array.isArray(e)||e.length>0)}catch(RN){return!1}}async readProject(e){let{projectId:t,projectName:n,includeStats:r}=e,i="/sessions";const o=new URLSearchParams;if(void 0!==t&&void 0!==n)throw new Error("Must provide either projectName or projectId, not both");if(void 0!==t)bv(t),i+=`/${t}`;else{if(void 0===n)throw new Error("Must provide projectName or projectId");o.append("name",n)}void 0!==r&&o.append("include_stats",r.toString());const s=await this._get(i,o);let a;if(Array.isArray(s)){if(0===s.length)throw new Error(`Project[id=${t}, name=${n}] not found`);a=s[0]}else a=s;return a}async getProjectUrl(e){let{projectId:t,projectName:n}=e;if(void 0===t&&void 0===n)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:t,projectName:n}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/projects/p/${r.id}`}async getDatasetUrl(e){let{datasetId:t,datasetName:n}=e;if(void 0===t&&void 0===n)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:t,datasetName:n}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/datasets/${r.id}`}async _getTenantId(){if(null!==this._tenantId)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const t of this._getPaginated("/sessions",e))return this._tenantId=t[0].tenant_id,t[0].tenant_id;throw new Error("No projects found to resolve tenant.")}listProjects(){try{var e=this;let{projectIds:t,name:n,nameContains:r,referenceDatasetId:i,referenceDatasetName:o,referenceFree:s,metadata:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const l=new URLSearchParams;if(void 0!==t)for(const e of t)l.append("id",e);if(void 0!==n&&l.append("name",n),void 0!==r&&l.append("name_contains",r),void 0!==i)l.append("reference_dataset",i);else if(void 0!==o){const t=await e.readDataset({datasetName:o});l.append("reference_dataset",t.id)}void 0!==s&&l.append("reference_free",s.toString()),void 0!==a&&l.append("metadata",JSON.stringify(a));for await(const t of e._getPaginated("/sessions",l))yield*t}()}catch(RN){return Promise.reject(RN)}}async deleteProject(e){let t,{projectId:n,projectName:r}=e;if(void 0===n&&void 0===r)throw new Error("Must provide projectName or projectId");if(void 0!==n&&void 0!==r)throw new Error("Must provide either projectName or projectId, not both");t=void 0===n?(await this.readProject({projectName:r})).id:n,bv(t);const i=await this.caller.call(nv(),`${this.apiUrl}/sessions/${t}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(i,`delete session ${t} (${r})`,!0)}async uploadCsv(e){let{csvFile:t,fileName:n,inputKeys:r,outputKeys:i,description:o,dataType:s,name:a}=e;const l=`${this.apiUrl}/datasets/upload`,c=new FormData;c.append("file",t,n),r.forEach((e=>{c.append("input_keys",e)})),i.forEach((e=>{c.append("output_keys",e)})),o&&c.append("description",o),s&&c.append("data_type",s),a&&c.append("name",a);const u=await this.caller.call(nv(),l,{method:"POST",headers:this.headers,body:c,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(u,"upload CSV");return await u.json()}async createDataset(e){let{description:t,dataType:n,inputsSchema:r,outputsSchema:i,metadata:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s={name:e,description:t,extra:o?{metadata:o}:void 0};n&&(s.data_type=n),r&&(s.inputs_schema_definition=r),i&&(s.outputs_schema_definition=i);const a=await this.caller.call(nv(),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(a,"create dataset");return await a.json()}async readDataset(e){let{datasetId:t,datasetName:n}=e,r="/datasets";const i=new URLSearchParams({limit:"1"});if(void 0!==t&&void 0!==n)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==t)bv(t),r+=`/${t}`;else{if(void 0===n)throw new Error("Must provide datasetName or datasetId");i.append("name",n)}const o=await this._get(r,i);let s;if(Array.isArray(o)){if(0===o.length)throw new Error(`Dataset[id=${t}, name=${n}] not found`);s=o[0]}else s=o;return s}async hasDataset(e){let{datasetId:t,datasetName:n}=e;try{return await this.readDataset({datasetId:t,datasetName:n}),!0}catch(RN){if(RN instanceof Error&&RN.message.toLocaleLowerCase().includes("not found"))return!1;throw RN}}async diffDatasetVersions(e){let{datasetId:t,datasetName:n,fromVersion:r,toVersion:i}=e,o=t;if(void 0===o&&void 0===n)throw new Error("Must provide either datasetName or datasetId");if(void 0!==o&&void 0!==n)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===o){o=(await this.readDataset({datasetName:n})).id}const s=new URLSearchParams({from_version:"string"===typeof r?r:r.toISOString(),to_version:"string"===typeof i?i:i.toISOString()});return await this._get(`/datasets/${o}/versions/diff`,s)}async readDatasetOpenaiFinetuning(e){let{datasetId:t,datasetName:n}=e;if(void 0!==t);else{if(void 0===n)throw new Error("Must provide datasetName or datasetId");t=(await this.readDataset({datasetName:n})).id}const r=await this._getResponse(`/datasets/${t}/openai_ft`);return(await r.text()).trim().split("\n").map((e=>JSON.parse(e)))}listDatasets(){try{var e=this;let{limit:t=100,offset:n=0,datasetIds:r,datasetName:i,datasetNameContains:o,metadata:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const a=new URLSearchParams({limit:t.toString(),offset:n.toString()});if(void 0!==r)for(const e of r)a.append("id",e);void 0!==i&&a.append("name",i),void 0!==o&&a.append("name_contains",o),void 0!==s&&a.append("metadata",JSON.stringify(s));for await(const t of e._getPaginated("/datasets",a))yield*t}()}catch(RN){return Promise.reject(RN)}}async updateDataset(e){const{datasetId:t,datasetName:n,...r}=e;if(!t&&!n)throw new Error("Must provide either datasetName or datasetId");const i=t??(await this.readDataset({datasetName:n})).id;bv(i);const o=await this.caller.call(nv(),`${this.apiUrl}/datasets/${i}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ev(o,"update dataset"),await o.json()}async deleteDataset(e){let{datasetId:t,datasetName:n}=e,r="/datasets",i=t;if(void 0!==t&&void 0!==n)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==n){i=(await this.readDataset({datasetName:n})).id}if(void 0===i)throw new Error("Must provide datasetName or datasetId");bv(i),r+=`/${i}`;const o=await this.caller.call(nv(),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(o,`delete ${r}`),await o.json()}async indexDataset(e){let{datasetId:t,datasetName:n,tag:r}=e,i=t;if(!i&&!n)throw new Error("Must provide either datasetName or datasetId");if(i&&n)throw new Error("Must provide either datasetName or datasetId, not both");if(!i){i=(await this.readDataset({datasetName:n})).id}bv(i);const o={tag:r},s=await this.caller.call(nv(),`${this.apiUrl}/datasets/${i}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(s,"index dataset"),await s.json()}async similarExamples(e,t,n){let{filter:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i={limit:n,inputs:e};void 0!==r&&(i.filter=r),bv(t);const o=await this.caller.call(nv(),`${this.apiUrl}/datasets/${t}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(o,"fetch similar examples");return(await o.json()).examples}async createExample(e,t,n){let{datasetId:r,datasetName:i,createdAt:o,exampleId:s,metadata:a,split:l,sourceRunId:c}=n,u=r;if(void 0===u&&void 0===i)throw new Error("Must provide either datasetName or datasetId");if(void 0!==u&&void 0!==i)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===u){u=(await this.readDataset({datasetName:i})).id}const d=o||new Date,h={dataset_id:u,inputs:e,outputs:t,created_at:d?.toISOString(),id:s,metadata:a,split:l,source_run_id:c},p=await this.caller.call(nv(),`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(h),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(p,"create example");return await p.json()}async createExamples(e){const{inputs:t,outputs:n,metadata:r,sourceRunIds:i,exampleIds:o,datasetId:s,datasetName:a}=e;let l=s;if(void 0===l&&void 0===a)throw new Error("Must provide either datasetName or datasetId");if(void 0!==l&&void 0!==a)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===l){const e=await this.readDataset({datasetName:a});l=e.id}const c=t.map(((t,s)=>({dataset_id:l,inputs:t,outputs:n?n[s]:void 0,metadata:r?r[s]:void 0,split:e.splits?e.splits[s]:void 0,id:o?o[s]:void 0,source_run_id:i?i[s]:void 0}))),u=await this.caller.call(nv(),`${this.apiUrl}/examples/bulk`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(u,"create examples");return await u.json()}async createLLMExample(e,t,n){return this.createExample({input:e},{output:t},n)}async createChatExample(e,t,n){const r=e.map((e=>sv(e)?av(e):e)),i=sv(t)?av(t):t;return this.createExample({input:r},{output:i},n)}async readExample(e){bv(e);const t=`/examples/${e}`;return await this._get(t)}listExamples(){try{var e=this;let{datasetId:t,datasetName:n,exampleIds:r,asOf:i,splits:o,inlineS3Urls:s,metadata:a,limit:l,offset:c,filter:u}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){let d;if(void 0!==t&&void 0!==n)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==t)d=t;else{if(void 0===n)throw new Error("Must provide a datasetName or datasetId");d=(await e.readDataset({datasetName:n})).id}const h=new URLSearchParams({dataset:d}),p=i?"string"===typeof i?i:i?.toISOString():void 0;p&&h.append("as_of",p);const f=s??!0;if(h.append("inline_s3_urls",f.toString()),void 0!==r)for(const e of r)h.append("id",e);if(void 0!==o)for(const e of o)h.append("splits",e);if(void 0!==a){const e=JSON.stringify(a);h.append("metadata",e)}void 0!==l&&h.append("limit",l.toString()),void 0!==c&&h.append("offset",c.toString()),void 0!==u&&h.append("filter",u);let m=0;for await(const t of e._getPaginated("/examples",h)){for(const e of t)yield e,m++;if(void 0!==l&&m>=l)break}}()}catch(RN){return Promise.reject(RN)}}async deleteExample(e){bv(e);const t=`/examples/${e}`,n=await this.caller.call(nv(),this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(n,`delete ${t}`),await n.json()}async updateExample(e,t){bv(e);const n=await this.caller.call(nv(),`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(n,"update example");return await n.json()}async updateExamples(e){const t=await this.caller.call(nv(),`${this.apiUrl}/examples/bulk`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(e),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(t,"update examples");return await t.json()}async listDatasetSplits(e){let t,{datasetId:n,datasetName:r,asOf:i}=e;if(void 0===n&&void 0===r)throw new Error("Must provide dataset name or ID");if(void 0!==n&&void 0!==r)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===n){t=(await this.readDataset({datasetName:r})).id}else t=n;bv(t);const o=new URLSearchParams,s=i?"string"===typeof i?i:i?.toISOString():void 0;s&&o.append("as_of",s);return await this._get(`/datasets/${t}/splits`,o)}async updateDatasetSplits(e){let t,{datasetId:n,datasetName:r,splitName:i,exampleIds:o,remove:s=!1}=e;if(void 0===n&&void 0===r)throw new Error("Must provide dataset name or ID");if(void 0!==n&&void 0!==r)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===n){t=(await this.readDataset({datasetName:r})).id}else t=n;bv(t);const a={split_name:i,examples:o.map((e=>(bv(e),e))),remove:s},l=await this.caller.call(nv(),`${this.apiUrl}/datasets/${t}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(l,"update dataset splits",!0)}async evaluateRun(e,t){let n,{sourceInfo:r,loadChildRuns:i,referenceExample:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{loadChildRuns:!1};if(xv("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead."),"string"===typeof e)n=await this.readRun(e,{loadChildRuns:i});else{if("object"!==typeof e||!("id"in e))throw new Error("Invalid run type: "+typeof e);n=e}null!==n.reference_example_id&&void 0!==n.reference_example_id&&(o=await this.readExample(n.reference_example_id));const s=await t.evaluateRun(n,o),[a,l]=await this._logEvaluationFeedback(s,n,r);return l[0]}async createFeedback(e,t,n){let{score:r,value:i,correction:o,comment:s,sourceInfo:a,feedbackSourceType:l="api",sourceRunId:c,feedbackId:u,feedbackConfig:d,projectId:h,comparativeExperimentId:p}=n;if(!e&&!h)throw new Error("One of runId or projectId must be provided");if(e&&h)throw new Error("Only one of runId or projectId can be provided");const f={type:l??"api",metadata:a??{}};void 0===c||void 0===f?.metadata||f.metadata.__run||(f.metadata.__run={run_id:c}),void 0!==f?.metadata&&void 0!==f.metadata.__run?.run_id&&bv(f.metadata.__run.run_id);const m={id:u??Xy(),run_id:e,key:t,score:r,value:i,correction:o,comment:s,feedback_source:f,comparative_experiment_id:p,feedbackConfig:d,session_id:h},g=`${this.apiUrl}/feedback`,y=await this.caller.call(nv(),g,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(m),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ev(y,"create feedback",!0),m}async updateFeedback(e,t){let{score:n,value:r,correction:i,comment:o}=t;const s={};void 0!==n&&null!==n&&(s.score=n),void 0!==r&&null!==r&&(s.value=r),void 0!==i&&null!==i&&(s.correction=i),void 0!==o&&null!==o&&(s.comment=o),bv(e);const a=await this.caller.call(nv(),`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(a,"update feedback",!0)}async readFeedback(e){bv(e);const t=`/feedback/${e}`;return await this._get(t)}async deleteFeedback(e){bv(e);const t=`/feedback/${e}`,n=await this.caller.call(nv(),this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(n,`delete ${t}`),await n.json()}listFeedback(){try{var e=this;let{runIds:t,feedbackKeys:n,feedbackSourceTypes:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const i=new URLSearchParams;if(t&&i.append("run",t.join(",")),n)for(const e of n)i.append("key",e);if(r)for(const e of r)i.append("source",e);for await(const t of e._getPaginated("/feedback",i))yield*t}()}catch(RN){return Promise.reject(RN)}}async createPresignedFeedbackToken(e,t){let{expiration:n,feedbackConfig:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i={run_id:e,feedback_key:t,feedback_config:r};n?"string"===typeof n?i.expires_at=n:(n?.hours||n?.minutes||n?.days)&&(i.expires_in=n):i.expires_in={hours:3};const o=await this.caller.call(nv(),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await o.json()}async createComparativeExperiment(e){let{name:t,experimentIds:n,referenceDatasetId:r,createdAt:i,description:o,metadata:s,id:a}=e;if(0===n.length)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:n[0]})).reference_dataset_id),null==!r)throw new Error("A reference dataset is required");const l={id:a,name:t,experiment_ids:n,reference_dataset_id:r,description:o,created_at:(i??new Date)?.toISOString(),extra:{}};s&&(l.extra.metadata=s);const c=await this.caller.call(nv(),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await c.json()}async*listPresignedFeedbackTokens(e){bv(e);const t=new URLSearchParams({run_id:e});for await(const n of this._getPaginated("/feedback/tokens",t))yield*n}_selectEvalResults(e){let t;return t="results"in e?e.results:[e],t}async _logEvaluationFeedback(e,t,n){const r=this._selectEvalResults(e),i=[];for(const o of r){let e=n||{};o.evaluatorInfo&&(e={...o.evaluatorInfo,...e});let r=null;o.targetRunId?r=o.targetRunId:t&&(r=t.id),i.push(await this.createFeedback(r,o.key,{score:o.score,value:o.value,comment:o.comment,correction:o.correction,sourceInfo:e,sourceRunId:o.sourceRunId,feedbackConfig:o.feedbackConfig,feedbackSourceType:"model"}))}return[r,i]}async logEvaluationFeedback(e,t,n){const[r]=await this._logEvaluationFeedback(e,t,n);return r}listAnnotationQueues(){try{var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async function*(){const{queueIds:n,name:r,nameContains:i,limit:o}=t,s=new URLSearchParams;n&&n.forEach(((e,t)=>{bv(e,`queueIds[${t}]`),s.append("ids",e)})),r&&s.append("name",r),i&&s.append("name_contains",i),s.append("limit",(void 0!==o?Math.min(o,100):100).toString());let a=0;for await(const t of e._getPaginated("/annotation-queues",s))if(yield*t,a++,void 0!==o&&a>=o)break}()}catch(RN){return Promise.reject(RN)}}async createAnnotationQueue(e){const{name:t,description:n,queueId:r}=e,i={name:t,description:n,id:r||Xy()},o=await this.caller.call(nv(),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(i).filter((e=>{let[t,n]=e;return void 0!==n})))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(o,"create annotation queue");return await o.json()}async readAnnotationQueue(e){const t=await this.listAnnotationQueues({queueIds:[e]}).next();if(t.done)throw new Error(`Annotation queue with ID ${e} not found`);return t.value}async updateAnnotationQueue(e,t){const{name:n,description:r}=t,i=await this.caller.call(nv(),`${this.apiUrl}/annotation-queues/${bv(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:n,description:r}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(i,"update annotation queue")}async deleteAnnotationQueue(e){const t=await this.caller.call(nv(),`${this.apiUrl}/annotation-queues/${bv(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(t,"delete annotation queue")}async addRunsToAnnotationQueue(e,t){const n=await this.caller.call(nv(),`${this.apiUrl}/annotation-queues/${bv(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t.map(((e,t)=>bv(e,`runIds[${t}]`).toString()))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(n,"add runs to annotation queue")}async getRunFromAnnotationQueue(e,t){const n=`/annotation-queues/${bv(e,"queueId")}/run`,r=await this.caller.call(nv(),`${this.apiUrl}${n}/${t}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ev(r,"get run from annotation queue"),await r.json()}async _currentTenantIsOwner(e){const t=await this._getSettings();return"-"==e||t.tenant_handle===e}async _ownerConflictError(e,t){const n=await this._getSettings();return new Error(`Cannot ${e} for another tenant.\n\n      Current tenant: ${n.tenant_handle}\n\n      Requested tenant: ${t}`)}async _getLatestCommitHash(e){const t=await this.caller.call(nv(),`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),n=await t.json();if(!t.ok){const e="string"===typeof n.detail?n.detail:JSON.stringify(n.detail),r=new Error(`Error ${t.status}: ${t.statusText}\n${e}`);throw r.statusCode=t.status,r}if(0!==n.commits.length)return n.commits[0].commit_hash}async _likeOrUnlikePrompt(e,t){const[n,r,i]=Sv(e),o=await this.caller.call(nv(),`${this.apiUrl}/likes/${n}/${r}`,{method:"POST",body:JSON.stringify({like:t}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ev(o,(t?"like":"unlike")+" prompt"),await o.json()}async _getPromptUrl(e){const[t,n,r]=Sv(e);if(await this._currentTenantIsOwner(t)){const e=await this._getSettings();return"latest"!==r?`${this.getHostUrl()}/prompts/${n}/${r.substring(0,8)}?organizationId=${e.id}`:`${this.getHostUrl()}/prompts/${n}?organizationId=${e.id}`}return"latest"!==r?`${this.getHostUrl()}/hub/${t}/${n}/${r.substring(0,8)}`:`${this.getHostUrl()}/hub/${t}/${n}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const t of this._getPaginated(`/commits/${e}/`,new URLSearchParams,(e=>e.commits)))yield*t}async*listPrompts(e){const t=new URLSearchParams;t.append("sort_field",e?.sortField??"updated_at"),t.append("sort_direction","desc"),t.append("is_archived",(!!e?.isArchived).toString()),void 0!==e?.isPublic&&t.append("is_public",e.isPublic.toString()),e?.query&&t.append("query",e.query);for await(const n of this._getPaginated("/repos",t,(e=>e.repos)))yield*n}async getPrompt(e){const[t,n,r]=Sv(e),i=await this.caller.call(nv(),`${this.apiUrl}/repos/${t}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(404===i.status)return null;await Ev(i,"get prompt");const o=await i.json();return o.repo?o.repo:null}async createPrompt(e,t){const n=await this._getSettings();if(t?.isPublic&&!n.tenant_handle)throw new Error("Cannot create a public prompt without first\n\n        creating a LangChain Hub handle. \n        You can add a handle by creating a public prompt at:\n\n        https://smith.langchain.com/prompts");const[r,i,o]=Sv(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("create a prompt",r);const s={repo_handle:i,...t?.description&&{description:t.description},...t?.readme&&{readme:t.readme},...t?.tags&&{tags:t.tags},is_public:!!t?.isPublic},a=await this.caller.call(nv(),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(a,"create prompt");const{repo:l}=await a.json();return l}async createCommit(e,t,n){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[r,i,o]=Sv(e),s="latest"!==n?.parentCommitHash&&n?.parentCommitHash?n?.parentCommitHash:await this._getLatestCommitHash(`${r}/${i}`),a={manifest:JSON.parse(JSON.stringify(t)),parent_commit:s},l=await this.caller.call(nv(),`${this.apiUrl}/commits/${r}/${i}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(l,"create commit");const c=await l.json();return this._getPromptUrl(`${r}/${i}${c.commit_hash?`:${c.commit_hash}`:""}`)}async updatePrompt(e,t){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[n,r]=Sv(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("update a prompt",n);const i={};if(void 0!==t?.description&&(i.description=t.description),void 0!==t?.readme&&(i.readme=t.readme),void 0!==t?.tags&&(i.tags=t.tags),void 0!==t?.isPublic&&(i.is_public=t.isPublic),void 0!==t?.isArchived&&(i.is_archived=t.isArchived),0===Object.keys(i).length)throw new Error("No valid update options provided");const o=await this.caller.call(nv(),`${this.apiUrl}/repos/${n}/${r}`,{method:"PATCH",body:JSON.stringify(i),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ev(o,"update prompt"),o.json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");const[t,n,r]=Sv(e);if(!await this._currentTenantIsOwner(t))throw await this._ownerConflictError("delete a prompt",t);const i=await this.caller.call(nv(),`${this.apiUrl}/repos/${t}/${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await i.json()}async pullPromptCommit(e,t){const[n,r,i]=Sv(e);let o=i;if(!function(e,t){const n=(0,kv.parse)(e),r=(0,kv.parse)(t);if(!n||!r)throw new Error("Invalid version format.");return n.compare(r)>=0}((await this._getServerInfo()).version,"0.5.23")&&"latest"===i){const e=await this._getLatestCommitHash(`${n}/${r}`);if(!e)throw new Error("No commits found");o=e}const s=await this.caller.call(nv(),`${this.apiUrl}/commits/${n}/${r}/${o}${t?.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ev(s,"pull prompt commit");const a=await s.json();return{owner:n,repo:r,commit_hash:a.commit_hash,manifest:a.manifest,examples:a.examples}}async _pullPrompt(e,t){const n=await this.pullPromptCommit(e,{includeModel:t?.includeModel});return JSON.stringify(n.manifest)}async pushPrompt(e,t){if(await this.promptExists(e)?t&&Object.keys(t).some((e=>"object"!==e))&&await this.updatePrompt(e,{description:t?.description,readme:t?.readme,tags:t?.tags,isPublic:t?.isPublic}):await this.createPrompt(e,{description:t?.description,readme:t?.readme,tags:t?.tags,isPublic:t?.isPublic}),!t?.object)return await this._getPromptUrl(e);return await this.createCommit(e,t?.object,{parentCommitHash:t?.parentCommitHash})}async clonePublicDataset(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sourceApiUrl:n=this.apiUrl,datasetName:r}=t,[i,o]=this.parseTokenOrUrl(e,n),s=new zv({apiUrl:i,apiKey:"placeholder"}),a=await s.readSharedDataset(o),l=r||a.name;try{if(await this.hasDataset({datasetId:l}))return void console.log(`Dataset ${l} already exists in your tenant. Skipping.`)}catch(d){}const c=await s.listSharedExamples(o),u=await this.createDataset(l,{description:a.description,dataType:a.data_type||"kv",inputsSchema:a.inputs_schema_definition??void 0,outputsSchema:a.outputs_schema_definition??void 0});try{await this.createExamples({inputs:c.map((e=>e.inputs)),outputs:c.flatMap((e=>e.outputs?[e.outputs]:[])),datasetId:u.id})}catch(RN){throw console.error(`An error occurred while creating dataset ${l}. You should delete it manually.`),RN}}parseTokenOrUrl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"dataset";try{return bv(e),[t,e]}catch(i){}try{const i=new URL(e).pathname.split("/").filter((e=>""!==e));if(i.length>=n){return[t,i[i.length-n]]}throw new Error(`Invalid public ${r} URL: ${e}`)}catch(o){throw new Error(`Invalid public ${r} URL or token: ${e}`)}}}class Fv{constructor(e,t){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=t}static fromHeader(e){const t=e.split(",");let n={},r=[];for(const i of t){const[e,t]=i.split("="),o=decodeURIComponent(t);"langsmith-metadata"===e?n=JSON.parse(o):"langsmith-tags"===e&&(r=o.split(","))}return new Fv(n,r)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),e.join(",")}}class Bv{constructor(e){Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const t=Bv.getDefaultConfig(),{metadata:n,...r}=e,i=r.client??Bv.getSharedClient(),o={...n,...r?.extra?.metadata};if(r.extra={...r.extra,metadata:o},Object.assign(this,{...t,...r,client:i}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.execution_order??=1,this.child_execution_order??=1,!this.dotted_order){const e=function(e,t){const n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:1).toFixed(0).slice(0,3).padStart(3,"0");return`${new Date(e).toISOString().slice(0,-1)}${n}Z`.replace(/[-:.]/g,"")+t}(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+e:this.dotted_order=e}}static getDefaultConfig(){return{id:Xy(),run_type:"chain",project_name:mv("LANGCHAIN_PROJECT")??mv("LANGCHAIN_SESSION")??"default",child_runs:[],api_url:mv("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:mv("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return Bv.sharedClient||(Bv.sharedClient=new zv),Bv.sharedClient}createChild(e){const t=this.child_execution_order+1,n=new Bv({...e,parent_run:this,project_name:this.project_name,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:t,child_execution_order:t}),r=Symbol.for("lc:child_config"),i=e.extra?.[r]??this.extra[r];if(void 0!==(o=i)&&"object"===typeof o.callbacks&&(Hv(o.callbacks?.handlers)||Hv(o.callbacks))){const e={...i},t=function(e){return"object"===typeof e&&null!=e&&Array.isArray(e.handlers)}(e.callbacks)?e.callbacks.copy?.():void 0;t&&(Object.assign(t,{_parentRunId:n.id}),t.handlers?.find(Uv)?.updateFromRunTree?.(n),e.callbacks=t),n.extra[r]=e}var o;const s=new Set;let a=this;for(;null!=a&&!s.has(a.id);)s.add(a.id),a.child_execution_order=Math.max(a.child_execution_order,t),a=a.parent_run;return this.child_runs.push(n),n}async end(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();this.outputs=this.outputs??e,this.error=this.error??t,this.end_time=this.end_time??n}_convertToCreate(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=e.extra??{};if(r.runtime||(r.runtime={}),t)for(const[s,a]of Object.entries(t))r.runtime[s]||(r.runtime[s]=a);let i,o;n?(o=e.parent_run?.id,i=[]):(i=e.child_runs.map((e=>this._convertToCreate(e,t,n))),o=void 0);return{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:r,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:i,parent_run_id:o,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags}}async postRun(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{const t=await pv(),n=await this._convertToCreate(this,t,!0);if(await this.client.createRun(n),!e){xv("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const e of this.child_runs)await e.postRun(!1)}}catch(t){console.error(`Error in postRun for run ${this.id}:`,t)}}async patchRun(){try{const e={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:this.parent_run?.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags};await this.client.updateRun(this.id,e)}catch(e){console.error(`Error in patchRun for run ${this.id}`,e)}}toJSON(){return this._convertToCreate(this,void 0,!1)}static fromRunnableConfig(e,t){const n=e?.callbacks;let r,i,o,s=(e=>void 0!==e?e:!!["TRACING_V2","TRACING"].find((e=>"true"===gv(e))))();if(n){const e=n?.getParentRunId?.()??"",t=n?.handlers?.find((e=>"langchain_tracer"==e?.name));r=t?.getRun?.(e),i=t?.projectName,o=t?.client,s=s||!!t}if(!r)return new Bv({...t,client:o,tracingEnabled:s,project_name:i});return new Bv({name:r.name,id:r.id,trace_id:r.trace_id,dotted_order:r.dotted_order,client:o,tracingEnabled:s,project_name:i,tags:[...new Set((r?.tags??[]).concat(e?.tags??[]))],extra:{metadata:{...r?.extra?.metadata,...e?.metadata}}}).createChild(t)}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,t){const n="get"in e&&"function"===typeof e.get?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,r=n["langsmith-trace"];if(!r||"string"!==typeof r)return;const i=r.trim(),o=i.split(".").map((e=>{const[t,n]=e.split("Z");return{strTime:t,time:Date.parse(t+"Z"),uuid:n}})),s=o[0].uuid,a={...t,name:t?.name??"parent",run_type:t?.run_type??"chain",start_time:t?.start_time??Date.now(),id:o.at(-1)?.uuid,trace_id:s,dotted_order:i};if(n.baggage&&"string"===typeof n.baggage){const e=Fv.fromHeader(n.baggage);a.metadata=e.metadata,a.tags=e.tags}return new Bv(a)}toHeaders(e){const t={"langsmith-trace":this.dotted_order,baggage:new Fv(this.extra?.metadata,this.tags).toHeader()};if(e)for(const[n,r]of Object.entries(t))e.set(n,r);return t}}function Uv(e){return"object"===typeof e&&null!=e&&"string"===typeof e.name&&"langchain_tracer"===e.name}function Hv(e){return Array.isArray(e)&&e.some((e=>Uv(e)))}Object.defineProperty(Bv,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});const Vv="0.1.61";var Wv=n(6503);function qv(e,t){return`${e.open}${t}${e.close}`}function Jv(e,t){try{return JSON.stringify(e,null,2)}catch(n){return t}}function Kv(e){return"string"===typeof e?e.trim():null===e||void 0===e?e:Jv(e,e.toString())}function Gv(e){if(!e.end_time)return"";const t=e.end_time-e.start_time;return t<1e3?`${t}ms`:`${(t/1e3).toFixed(2)}s`}const{color:Zv}=Wv;class Yv extends Vy{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const t=[];let n=e;for(;n.parent_run_id;){const e=this.runMap.get(n.parent_run_id);if(!e)break;t.push(e),n=e}return t}getBreadcrumbs(e){const t=[...this.getParents(e).reverse(),e].map(((e,t,n)=>{const r=`${e.execution_order}:${e.run_type}:${e.name}`;return t===n.length-1?qv(Wv.bold,r):r})).join(" > ");return qv(Zv.grey,t)}onChainStart(e){const t=this.getBreadcrumbs(e);console.log(`${qv(Zv.green,"[chain/start]")} [${t}] Entering Chain run with input: ${Jv(e.inputs,"[inputs]")}`)}onChainEnd(e){const t=this.getBreadcrumbs(e);console.log(`${qv(Zv.cyan,"[chain/end]")} [${t}] [${Gv(e)}] Exiting Chain run with output: ${Jv(e.outputs,"[outputs]")}`)}onChainError(e){const t=this.getBreadcrumbs(e);console.log(`${qv(Zv.red,"[chain/error]")} [${t}] [${Gv(e)}] Chain run errored with error: ${Jv(e.error,"[error]")}`)}onLLMStart(e){const t=this.getBreadcrumbs(e),n="prompts"in e.inputs?{prompts:e.inputs.prompts.map((e=>e.trim()))}:e.inputs;console.log(`${qv(Zv.green,"[llm/start]")} [${t}] Entering LLM run with input: ${Jv(n,"[inputs]")}`)}onLLMEnd(e){const t=this.getBreadcrumbs(e);console.log(`${qv(Zv.cyan,"[llm/end]")} [${t}] [${Gv(e)}] Exiting LLM run with output: ${Jv(e.outputs,"[response]")}`)}onLLMError(e){const t=this.getBreadcrumbs(e);console.log(`${qv(Zv.red,"[llm/error]")} [${t}] [${Gv(e)}] LLM run errored with error: ${Jv(e.error,"[error]")}`)}onToolStart(e){const t=this.getBreadcrumbs(e);console.log(`${qv(Zv.green,"[tool/start]")} [${t}] Entering Tool run with input: "${Kv(e.inputs.input)}"`)}onToolEnd(e){const t=this.getBreadcrumbs(e);console.log(`${qv(Zv.cyan,"[tool/end]")} [${t}] [${Gv(e)}] Exiting Tool run with output: "${Kv(e.outputs?.output)}"`)}onToolError(e){const t=this.getBreadcrumbs(e);console.log(`${qv(Zv.red,"[tool/error]")} [${t}] [${Gv(e)}] Tool run errored with error: ${Jv(e.error,"[error]")}`)}onRetrieverStart(e){const t=this.getBreadcrumbs(e);console.log(`${qv(Zv.green,"[retriever/start]")} [${t}] Entering Retriever run with input: ${Jv(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const t=this.getBreadcrumbs(e);console.log(`${qv(Zv.cyan,"[retriever/end]")} [${t}] [${Gv(e)}] Exiting Retriever run with output: ${Jv(e.outputs,"[outputs]")}`)}onRetrieverError(e){const t=this.getBreadcrumbs(e);console.log(`${qv(Zv.red,"[retriever/error]")} [${t}] [${Gv(e)}] Retriever run errored with error: ${Jv(e.error,"[error]")}`)}onAgentAction(e){const t=e,n=this.getBreadcrumbs(e);console.log(`${qv(Zv.blue,"[agent/action]")} [${n}] Agent selected action: ${Jv(t.actions[t.actions.length-1],"[action]")}`)}}class Xv extends Vy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{exampleId:t,projectName:n,client:r}=e;this.projectName=n??zy("LANGCHAIN_PROJECT")??zy("LANGCHAIN_SESSION"),this.exampleId=t,this.client=r??new zv({});const i=Xv.getTraceableRunTree();i&&this.updateFromRunTree(i)}async _convertToCreate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return{...e,extra:{...e.extra,runtime:await Dy()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:t}}async persistRun(e){}async onRunCreate(e){const t=await this._convertToCreate(e,this.exampleId);await this.client.createRun(t)}async onRunUpdate(e){const t={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs,trace_id:e.trace_id,dotted_order:e.dotted_order,parent_run_id:e.parent_run_id};await this.client.updateRun(e.id,t)}getRun(e){return this.runMap.get(e)}updateFromRunTree(e){let t=e;const n=new Set;for(;t.parent_run&&!n.has(t.id)&&(n.add(t.id),t.parent_run);)t=t.parent_run;n.clear();const r=[t];for(;r.length>0;){const e=r.shift();e&&!n.has(e.id)&&(n.add(e.id),this.runMap.set(e.id,e),e.child_runs&&r.push(...e.child_runs))}this.client=e.client??this.client,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}convertToRunTree(e){const t={},n=[];for(const[r,i]of this.runMap){const e=new Bv({...i,child_runs:[],parent_run:void 0,client:this.client,project_name:this.projectName,reference_example_id:this.exampleId,tracingEnabled:!0});t[r]=e,n.push([r,i.dotted_order])}n.sort(((e,t)=>e[1]&&t[1]?e[1].localeCompare(t[1]):0));for(const[r]of n){const e=this.runMap.get(r),n=t[r];if(e&&n&&e.parent_run_id){const r=t[e.parent_run_id];r&&(r.child_runs.push(n),n.parent_run=r)}}return t[e]}static getTraceableRunTree(){try{return(()=>{const e=uy.getInstance().getStore();if(void 0===e)throw new Error(["Could not get the current run tree.","","Please make sure you are calling this method within a traceable function or the tracing is enabled."].join("\n"));return e})()}catch{return}}}let Qv;async function eb(e,t){!0===t?await e():("undefined"===typeof Qv&&(Qv=new(0,Qy.default)({autoStart:!0,concurrency:1})),Qv.add(e))}class tb{setHandler(e){return this.setHandlers([e])}}class nb{constructor(e,t,n,r,i,o,s,a){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:a})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map((t=>eb((async()=>{try{await(t.handleText?.(e,this.runId,this._parentRunId,this.tags))}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleText: ${n}`),t.raiseError)throw n}}),t.awaitHandlers))))}async handleCustomEvent(e,t,n,r,i){await Promise.all(this.handlers.map((n=>eb((async()=>{try{await(n.handleCustomEvent?.(e,t,this.runId,this.tags,this.metadata))}catch(r){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleCustomEvent: ${r}`),n.raiseError)throw r}}),n.awaitHandlers))))}}class rb extends nb{getChild(e){const t=new ab(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleRetrieverEnd(e){await Promise.all(this.handlers.map((t=>eb((async()=>{if(!t.ignoreRetriever)try{await(t.handleRetrieverEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetriever`),t.raiseError)throw n}}),t.awaitHandlers))))}async handleRetrieverError(e){await Promise.all(this.handlers.map((t=>eb((async()=>{if(!t.ignoreRetriever)try{await(t.handleRetrieverError?.(e,this.runId,this._parentRunId,this.tags))}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetrieverError: ${n}`),t.raiseError)throw e}}),t.awaitHandlers))))}}class ib extends nb{async handleLLMNewToken(e,t,n,r,i,o){await Promise.all(this.handlers.map((n=>eb((async()=>{if(!n.ignoreLLM)try{await(n.handleLLMNewToken?.(e,t??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,o))}catch(r){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleLLMNewToken: ${r}`),n.raiseError)throw r}}),n.awaitHandlers))))}async handleLLMError(e){await Promise.all(this.handlers.map((t=>eb((async()=>{if(!t.ignoreLLM)try{await(t.handleLLMError?.(e,this.runId,this._parentRunId,this.tags))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleLLMError: ${e}`),t.raiseError)throw e}}),t.awaitHandlers))))}async handleLLMEnd(e){await Promise.all(this.handlers.map((t=>eb((async()=>{if(!t.ignoreLLM)try{await(t.handleLLMEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleLLMEnd: ${n}`),t.raiseError)throw n}}),t.awaitHandlers))))}}class ob extends nb{getChild(e){const t=new ab(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e,t,n,r,i){await Promise.all(this.handlers.map((t=>eb((async()=>{if(!t.ignoreChain)try{await(t.handleChainError?.(e,this.runId,this._parentRunId,this.tags,i))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleChainError: ${e}`),t.raiseError)throw e}}),t.awaitHandlers))))}async handleChainEnd(e,t,n,r,i){await Promise.all(this.handlers.map((t=>eb((async()=>{if(!t.ignoreChain)try{await(t.handleChainEnd?.(e,this.runId,this._parentRunId,this.tags,i))}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleChainEnd: ${n}`),t.raiseError)throw n}}),t.awaitHandlers))))}async handleAgentAction(e){await Promise.all(this.handlers.map((t=>eb((async()=>{if(!t.ignoreAgent)try{await(t.handleAgentAction?.(e,this.runId,this._parentRunId,this.tags))}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentAction: ${n}`),t.raiseError)throw n}}),t.awaitHandlers))))}async handleAgentEnd(e){await Promise.all(this.handlers.map((t=>eb((async()=>{if(!t.ignoreAgent)try{await(t.handleAgentEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentEnd: ${n}`),t.raiseError)throw n}}),t.awaitHandlers))))}}class sb extends nb{getChild(e){const t=new ab(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map((t=>eb((async()=>{if(!t.ignoreAgent)try{await(t.handleToolError?.(e,this.runId,this._parentRunId,this.tags))}catch(e){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolError: ${e}`),t.raiseError)throw e}}),t.awaitHandlers))))}async handleToolEnd(e){await Promise.all(this.handlers.map((t=>eb((async()=>{if(!t.ignoreAgent)try{await(t.handleToolEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(n){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolEnd: ${n}`),t.raiseError)throw n}}),t.awaitHandlers))))}}class ab extends tb{constructor(e,t){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=t?.handlers??this.handlers,this.inheritableHandlers=t?.inheritableHandlers??this.inheritableHandlers,this.tags=t?.tags??this.tags,this.inheritableTags=t?.inheritableTags??this.inheritableTags,this.metadata=t?.metadata??this.metadata,this.inheritableMetadata=t?.inheritableMetadata??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;return Promise.all(t.map((async(t,o)=>{const s=0===o&&n?n:ay();return await Promise.all(this.handlers.map((n=>{if(!n.ignoreLLM)return Hy(n)&&n._createRunForLLMStart(e,[t],s,this._parentRunId,r,this.tags,this.metadata,i),eb((async()=>{try{await(n.handleLLMStart?.(e,[t],s,this._parentRunId,r,this.tags,this.metadata,i))}catch(o){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleLLMStart: ${o}`),n.raiseError)throw o}}),n.awaitHandlers)}))),new ib(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})))}async handleChatModelStart(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,i=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;return Promise.all(t.map((async(t,o)=>{const s=0===o&&n?n:ay();return await Promise.all(this.handlers.map((n=>{if(!n.ignoreLLM)return Hy(n)&&n._createRunForChatModelStart(e,[t],s,this._parentRunId,r,this.tags,this.metadata,i),eb((async()=>{try{if(n.handleChatModelStart)await(n.handleChatModelStart?.(e,[t],s,this._parentRunId,r,this.tags,this.metadata,i));else if(n.handleLLMStart){const o=Yg(t);await(n.handleLLMStart?.(e,[o],s,this._parentRunId,r,this.tags,this.metadata,i))}}catch(o){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleLLMStart: ${o}`),n.raiseError)throw o}}),n.awaitHandlers)}))),new ib(s,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)})))}async handleChainStart(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ay(),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;return await Promise.all(this.handlers.map((o=>{if(!o.ignoreChain)return Hy(o)&&o._createRunForChainStart(e,t,n,this._parentRunId,this.tags,this.metadata,r,i),eb((async()=>{try{await(o.handleChainStart?.(e,t,n,this._parentRunId,this.tags,this.metadata,r,i))}catch(s){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleChainStart: ${s}`),o.raiseError)throw s}}),o.awaitHandlers)}))),new ob(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ay(),r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;return await Promise.all(this.handlers.map((i=>{if(!i.ignoreAgent)return Hy(i)&&i._createRunForToolStart(e,t,n,this._parentRunId,this.tags,this.metadata,r),eb((async()=>{try{await(i.handleToolStart?.(e,t,n,this._parentRunId,this.tags,this.metadata,r))}catch(o){if((i.raiseError?console.error:console.warn)(`Error in handler ${i.constructor.name}, handleToolStart: ${o}`),i.raiseError)throw o}}),i.awaitHandlers)}))),new sb(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ay(),r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;return await Promise.all(this.handlers.map((i=>{if(!i.ignoreRetriever)return Hy(i)&&i._createRunForRetrieverStart(e,t,n,this._parentRunId,this.tags,this.metadata,r),eb((async()=>{try{await(i.handleRetrieverStart?.(e,t,n,this._parentRunId,this.tags,this.metadata,r))}catch(o){if((i.raiseError?console.error:console.warn)(`Error in handler ${i.constructor.name}, handleRetrieverStart: ${o}`),i.raiseError)throw o}}),i.awaitHandlers)}))),new rb(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,t,n,r,i){await Promise.all(this.handlers.map((r=>eb((async()=>{if(!r.ignoreCustomEvent)try{await(r.handleCustomEvent?.(e,t,n,this.tags,this.metadata))}catch(i){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleCustomEvent: ${i}`),r.raiseError)throw i}}),r.awaitHandlers))))}addHandler(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.handlers.push(e),t&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter((t=>t!==e)),this.inheritableHandlers=this.inheritableHandlers.filter((t=>t!==e))}setHandlers(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.handlers=[],this.inheritableHandlers=[];for(const n of e)this.addHandler(n,t)}addTags(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.removeTags(e),this.tags.push(...e),t&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter((t=>!e.includes(t))),this.inheritableTags=this.inheritableTags.filter((t=>!e.includes(t)))}addMetadata(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.metadata={...this.metadata,...e},t&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const t of Object.keys(e))delete this.metadata[t],delete this.inheritableMetadata[t]}copy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=new ab(this._parentRunId);for(const r of this.handlers){const e=this.inheritableHandlers.includes(r);n.addHandler(r,e)}for(const r of this.tags){const e=this.inheritableTags.includes(r);n.addTags([r],e)}for(const r of Object.keys(this.metadata)){const e=Object.keys(this.inheritableMetadata).includes(r);n.addMetadata({[r]:this.metadata[r]},e)}for(const r of e)n.handlers.filter((e=>"console_callback_handler"===e.name)).some((e=>e.name===r.name))||n.addHandler(r,t);return n}static fromHandlers(e){const t=new this;return t.addHandler(new class extends By{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:ay()}),Object.assign(this,e)}}),t}static configure(e,t,n,r,i,o,s){return this._configureSync(e,t,n,r,i,o,s)}static _configureSync(e,t,n,r,i,o,s){let a;(e||t)&&(Array.isArray(e)||!e?(a=new ab,a.setHandlers(e?.map(lb)??[],!0)):a=e,a=a.copy(Array.isArray(t)?t.map(lb):t?.handlers,!1));const l="true"===zy("LANGCHAIN_VERBOSE")||s?.verbose,c=Xv.getTraceableRunTree()?.tracingEnabled||(e=>void 0!==e?e:!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find((e=>"true"===zy(e))))(),u=c||(zy("LANGCHAIN_TRACING")??!1);if(l||u){if(a||(a=new ab),l&&!a.handlers.some((e=>e.name===Yv.prototype.name))){const e=new Yv;a.addHandler(e,!0)}if(u&&!a.handlers.some((e=>"langchain_tracer"===e.name))&&c){const e=new Xv;a.addHandler(e,!0),a._parentRunId=Xv.getTraceableRunTree()?.id??a._parentRunId}}return(n||r)&&a&&(a.addTags(n??[]),a.addTags(r??[],!1)),(i||o)&&a&&(a.addMetadata(i??{}),a.addMetadata(o??{},!1)),a}}function lb(e){return"name"in e?e:By.fromMethods(e)}const cb=new class{getStore(){}run(e,t){return t()}},ub=Symbol.for("ls:tracing_async_local_storage"),db=Symbol.for("lc:child_config");const hb=new class{getInstance(){return globalThis[ub]??cb}getRunnableConfig(){const e=this.getInstance();return e.getStore()?.extra?.[db]}runWithConfig(e,t,n){const r=ab._configureSync(e?.callbacks,void 0,e?.tags,void 0,e?.metadata),i=this.getInstance(),o=r?.getParentRunId(),s=r?.handlers?.find((e=>"langchain_tracer"===e?.name));let a;return s&&o?a=s.convertToRunTree(o):n||(a=new Bv({name:"<runnable_lambda>",tracingEnabled:!1})),a&&(a.extra={...a.extra,[db]:e}),i.run(a,t)}initializeGlobalInstance(e){void 0===globalThis[ub]&&(globalThis[ub]=e)}};async function pb(e,t){if(void 0===t)return e;let n;return Promise.race([e.catch((e=>{if(!t?.aborted)throw e})),new Promise(((e,r)=>{n=()=>{r(new Error("Aborted"))},t.addEventListener("abort",n),t.aborted&&r(new Error("Aborted"))}))]).finally((()=>t.removeEventListener("abort",n)))}class fb extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(RN){throw this.reader.releaseLock(),RN}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){const t=e.getReader();return new fb({start:e=>function n(){return t.read().then((t=>{let{done:r,value:i}=t;if(!r)return e.enqueue(i),n();e.close()}))}(),cancel(){t.releaseLock()}})}static fromAsyncGenerator(e){return new fb({async pull(t){const{value:n,done:r}=await e.next();r&&t.close(),t.enqueue(n)},async cancel(t){await e.return(t)}})}}function mb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const n=Array.from({length:t},(()=>[]));return n.map((async function*(t){for(;;)if(0===t.length){const t=await e.next();for(const e of n)e.push(t)}else{if(t[0].done)return;yield t.shift().value}}))}function gb(e,t){if(Array.isArray(e)&&Array.isArray(t))return e.concat(t);if("string"===typeof e&&"string"===typeof t)return e+t;if("number"===typeof e&&"number"===typeof t)return e+t;if("concat"in e&&"function"===typeof e.concat)return e.concat(t);if("object"===typeof e&&"object"===typeof t){const n={...e};for(const[e,r]of Object.entries(t))e in n&&!Array.isArray(n[e])?n[e]=gb(n[e],r):n[e]=r;return n}throw new Error(`Cannot concat ${typeof e} and ${typeof t}`)}class yb{constructor(e){Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=e.signal??this.config?.signal,this.setup=new Promise(((t,n)=>{hb.runWithConfig(e.config,(async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(t,n):this.firstResult.then((e=>t(void 0)),n)}),!0)}))}async next(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.signal?.throwIfAborted(),this.firstResultUsed?hb.runWithConfig(this.config,this.signal?async()=>pb(this.generator.next(...t),this.signal):async()=>this.generator.next(...t),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}class vb{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){const t=this.ops.concat(e.ops),n=Ny({},t);return new bb({ops:t,state:n[n.length-1].newDocument})}}class bb extends vb{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const t=this.ops.concat(e.ops),n=Ny(this.state,e.ops);return new bb({ops:t,state:n[n.length-1].newDocument})}static fromRunLogPatch(e){const t=Ny({},e.ops);return new bb({ops:e.ops,state:t[t.length-1].newDocument})}}const wb=e=>"log_stream_tracer"===e.name;async function xb(e,t){if("original"===t)throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:n}=e;return["retriever","llm","prompt"].includes(e.run_type)?n:1!==Object.keys(n).length||""!==n?.input?n.input:void 0}async function kb(e,t){const{outputs:n}=e;return"original"===t||["retriever","llm","prompt"].includes(e.run_type)?n:void 0!==n&&1===Object.keys(n).length&&void 0!==n?.output?n.output:n}class Sb extends Vy{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this._schemaFormat=e?._schemaFormat??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=fb.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const t=e.tags??[];let n=void 0===this.includeNames&&void 0===this.includeTags&&void 0===this.includeTypes;return void 0!==this.includeNames&&(n=n||this.includeNames.includes(e.name)),void 0!==this.includeTypes&&(n=n||this.includeTypes.includes(e.run_type)),void 0!==this.includeTags&&(n=n||void 0!==t.find((e=>this.includeTags?.includes(e)))),void 0!==this.excludeNames&&(n=n&&!this.excludeNames.includes(e.name)),void 0!==this.excludeTypes&&(n=n&&!this.excludeTypes.includes(e.run_type)),void 0!==this.excludeTags&&(n=n&&t.every((e=>!this.excludeTags?.includes(e)))),n}async*tapOutputIterable(e,t){for await(const n of t){if(e!==this.rootId){const t=this.keyMapByRunId[e];t&&await this.writer.write(new vb({ops:[{op:"add",path:`/logs/${t}/streamed_output/-`,value:n}]}))}yield n}}async onRunCreate(e){if(void 0===this.rootId&&(this.rootId=e.id,await this.writer.write(new vb({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;void 0===this.counterMapByRunName[e.name]&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const t=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=1===t?e.name:`${e.name}:${t}`;const n={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:e.extra?.metadata??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};"streaming_events"===this._schemaFormat&&(n.inputs=await xb(e,this._schemaFormat)),await this.writer.write(new vb({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:n}]}))}async onRunUpdate(e){try{const t=this.keyMapByRunId[e.id];if(void 0===t)return;const n=[];"streaming_events"===this._schemaFormat&&n.push({op:"replace",path:`/logs/${t}/inputs`,value:await xb(e,this._schemaFormat)}),n.push({op:"add",path:`/logs/${t}/final_output`,value:await kb(e,this._schemaFormat)}),void 0!==e.end_time&&n.push({op:"add",path:`/logs/${t}/end_time`,value:new Date(e.end_time).toISOString()});const r=new vb({ops:n});await this.writer.write(r)}finally{if(e.id===this.rootId){const t=new vb({ops:[{op:"replace",path:"/final_output",value:await kb(e,this._schemaFormat)}]});await this.writer.write(t),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,t,n){const r=this.keyMapByRunId[e.id];if(void 0===r)return;let i;var o;void 0!==e.inputs.messages?(o=n?.chunk,i=void 0!==o&&void 0!==o.message?n?.chunk:new Dg({id:`run-${e.id}`,content:t})):i=t;const s=new vb({ops:[{op:"add",path:`/logs/${r}/streamed_output_str/-`,value:t},{op:"add",path:`/logs/${r}/streamed_output/-`,value:i}]});await this.writer.write(s)}}const _b="__run";class Eb{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new Eb({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class Cb extends Eb{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new Cb({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}function Ob(e){let{name:t,serialized:n}=e;return void 0!==t?t:void 0!==n?.name?n.name:void 0!==n?.id&&Array.isArray(n?.id)?n.id[n.id.length-1]:"Unnamed"}const Nb=e=>"event_stream_tracer"===e.name;class Tb extends Vy{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=fb.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const t=e.tags??[];let n=void 0===this.includeNames&&void 0===this.includeTags&&void 0===this.includeTypes;return void 0!==this.includeNames&&(n=n||this.includeNames.includes(e.name)),void 0!==this.includeTypes&&(n=n||this.includeTypes.includes(e.runType)),void 0!==this.includeTags&&(n=n||void 0!==t.find((e=>this.includeTags?.includes(e)))),void 0!==this.excludeNames&&(n=n&&!this.excludeNames.includes(e.name)),void 0!==this.excludeTypes&&(n=n&&!this.excludeTypes.includes(e.runType)),void 0!==this.excludeTags&&(n=n&&t.every((e=>!this.excludeTags?.includes(e)))),n}async*tapOutputIterable(e,t){const n=await t.next();if(n.done)return;const r=this.runInfoMap.get(e);if(void 0===r)return void(yield n.value);function i(e,t){return"llm"===e&&"string"===typeof t?new Eb({text:t}):t}let o=this.tappedPromises.get(e);if(void 0===o){let s;o=new Promise((e=>{s=e})),this.tappedPromises.set(e,o);try{const o={event:`on_${r.runType}_stream`,run_id:e,name:r.name,tags:r.tags,metadata:r.metadata,data:{}};await this.send({...o,data:{chunk:i(r.runType,n.value)}},r),yield n.value;for await(const e of t)"tool"!==r.runType&&"retriever"!==r.runType&&await this.send({...o,data:{chunk:i(r.runType,e)}},r),yield e}finally{s()}}else{yield n.value;for await(const e of t)yield e}}async send(e,t){this._includeRun(t)&&await this.writer.write(e)}async sendEndEvent(e,t){const n=this.tappedPromises.get(e.run_id);void 0!==n?n.then((()=>{this.send(e,t)})):await this.send(e,t)}async onLLMStart(e){const t=Ob(e),n=void 0!==e.inputs.messages?"chat_model":"llm",r={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:n,inputs:e.inputs};this.runInfoMap.set(e.id,r);const i=`on_${n}_start`;await this.send({event:i,data:{input:e.inputs},name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},r)}async onLLMNewToken(e,t,n){const r=this.runInfoMap.get(e.id);let i,o;if(void 0===r)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(1!==this.runInfoMap.size){if("chat_model"===r.runType)o="on_chat_model_stream",i=void 0===n?.chunk?new Dg({content:t,id:`run-${e.id}`}):n.chunk.message;else{if("llm"!==r.runType)throw new Error(`Unexpected run type ${r.runType}`);o="on_llm_stream",i=void 0===n?.chunk?new Eb({text:t}):n.chunk}await this.send({event:o,data:{chunk:i},run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}}async onLLMEnd(e){const t=this.runInfoMap.get(e.id);let n;if(this.runInfoMap.delete(e.id),void 0===t)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const r=e.outputs?.generations;let i;if("chat_model"===t.runType){for(const e of r??[]){if(void 0!==i)break;i=e[0]?.message}n="on_chat_model_end"}else{if("llm"!==t.runType)throw new Error(`onLLMEnd: Unexpected run type: ${t.runType}`);i={generations:r?.map((e=>e.map((e=>({text:e.text,generationInfo:e.generationInfo}))))),llmOutput:e.outputs?.llmOutput??{}},n="on_llm_end"}await this.sendEndEvent({event:n,data:{output:i,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async onChainStart(e){const t=Ob(e),n=e.run_type??"chain",r={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:e.run_type};let i={};""===e.inputs.input&&1===Object.keys(e.inputs).length?(i={},r.inputs={}):void 0!==e.inputs.input?(i.input=e.inputs.input,r.inputs=e.inputs.input):(i.input=e.inputs,r.inputs=e.inputs),this.runInfoMap.set(e.id,r),await this.send({event:`on_${n}_start`,data:i,name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},r)}async onChainEnd(e){const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),void 0===t)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const n=`on_${e.run_type}_end`,r=e.inputs??t.inputs??{},i={output:e.outputs?.output??e.outputs,input:r};r.input&&1===Object.keys(r).length&&(i.input=r.input,t.inputs=r.input),await this.sendEndEvent({event:n,data:i,run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata??{}},t)}async onToolStart(e){const t=Ob(e),n={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,n),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:t,run_id:e.id,tags:e.tags??[],metadata:e.extra?.metadata??{}},n)}async onToolEnd(e){const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),void 0===t)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(void 0===t.inputs)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const n=void 0===e.outputs?.output?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:n,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async onRetrieverStart(e){const t=Ob(e),n={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,n),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},n)}async onRetrieverEnd(e){const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),void 0===t)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:e.outputs?.documents??e.outputs,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async handleCustomEvent(e,t,n){const r=this.runInfoMap.get(n);if(void 0===r)throw new Error(`handleCustomEvent: Run ID ${n} not found in run map.`);await this.send({event:"on_custom_event",run_id:n,name:e,tags:r.tags,metadata:r.metadata,data:t},r)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally((()=>{this.writer.close()}))}}async function Ab(e){return ab._configureSync(e?.callbacks,void 0,e?.tags,void 0,e?.metadata)}function jb(){const e={};for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n.filter((e=>!!e)))for(const t of Object.keys(i))if("metadata"===t)e[t]={...e[t],...i[t]};else if("tags"===t){const n=e[t]??[];e[t]=[...new Set(n.concat(i[t]??[]))]}else if("configurable"===t)e[t]={...e[t],...i[t]};else if("timeout"===t)void 0===e.timeout?e.timeout=i.timeout:void 0!==i.timeout&&(e.timeout=Math.min(e.timeout,i.timeout));else if("signal"===t)void 0===e.signal?e.signal=i.signal:void 0!==i.signal&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,i.signal]):e.signal=i.signal);else if("callbacks"===t){const t=e.callbacks,n=i.callbacks;if(Array.isArray(n))if(t)if(Array.isArray(t))e.callbacks=t.concat(n);else{const r=t.copy();for(const e of n)r.addHandler(lb(e),!0);e.callbacks=r}else e.callbacks=n;else if(n)if(t)if(Array.isArray(t)){const r=n.copy();for(const e of t)r.addHandler(lb(e),!0);e.callbacks=r}else e.callbacks=new ab(n._parentRunId,{handlers:t.handlers.concat(n.handlers),inheritableHandlers:t.inheritableHandlers.concat(n.inheritableHandlers),tags:Array.from(new Set(t.tags.concat(n.tags))),inheritableTags:Array.from(new Set(t.inheritableTags.concat(n.inheritableTags))),metadata:{...t.metadata,...n.metadata}});else e.callbacks=n}else{const n=t;e[n]=i[n]??e[n]}return e}const Pb=new Set(["string","number","boolean"]);function Ib(e){const t=hb.getRunnableConfig();let n={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(t){const{runId:e,runName:r,...i}=t;n=Object.entries(i).reduce(((e,t)=>{let[n,r]=t;return void 0!==r&&(e[n]=r),e}),n)}if(e&&(n=Object.entries(e).reduce(((e,t)=>{let[n,r]=t;return void 0!==r&&(e[n]=r),e}),n)),n?.configurable)for(const r of Object.keys(n.configurable))Pb.has(typeof n.configurable[r])&&!n.metadata?.[r]&&(n.metadata||(n.metadata={}),n.metadata[r]=n.configurable[r]);if(void 0!==n.timeout){if(n.timeout<=0)throw new Error("Timeout must be a positive number");const e=AbortSignal.timeout(n.timeout);void 0!==n.signal?"any"in AbortSignal&&(n.signal=AbortSignal.any([n.signal,e])):n.signal=e,delete n.timeout}return n}function Rb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{callbacks:t,maxConcurrency:n,recursionLimit:r,runName:i,configurable:o,runId:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=Ib(e);return void 0!==t&&(delete a.runName,a.callbacks=t),void 0!==r&&(a.recursionLimit=r),void 0!==n&&(a.maxConcurrency=n),void 0!==i&&(a.runName=i),void 0!==o&&(a.configurable={...a.configurable,...o}),void 0!==s&&delete a.runId,a}const Mb=[400,401,402,403,404,405,406,407,409],$b=e=>{if(e.message.startsWith("Cancel")||e.message.startsWith("AbortError")||"AbortError"===e.name)throw e;if("ECONNABORTED"===e?.code)throw e;const t=e?.response?.status??e?.status;if(t&&Mb.includes(+t))throw e;if("insufficient_quota"===e?.error?.code){const t=new Error(e?.message);throw t.name="InsufficientQuotaError",t}};class Lb{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??$b;const t=Qy.default;this.queue=new t({concurrency:this.maxConcurrency})}call(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.queue.add((()=>Qg((()=>e(...n).catch((e=>{throw e instanceof Error?e:new Error(e)}))),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0})),{throwOnTimeout:!0})}callWithOptions(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e.signal?Promise.race([this.call(t,...r),new Promise(((t,n)=>{e.signal?.addEventListener("abort",(()=>{n(new Error("AbortError"))}))}))]):this.call(t,...r)}fetch(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.call((()=>fetch(...t).then((e=>e.ok?e:Promise.reject(e)))))}}class Db extends Vy{constructor(e){let{config:t,onStart:n,onEnd:r,onError:i}=e;super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=t,this.argOnStart=n,this.argOnEnd=r,this.argOnError=i}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}}function zb(e){return!!e&&e.lc_runnable}class Fb{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,t){let n=void 0===this.includeNames&&void 0===this.includeTypes&&void 0===this.includeTags;const r=e.tags??[];return void 0!==this.includeNames&&(n=n||this.includeNames.includes(e.name)),void 0!==this.includeTypes&&(n=n||this.includeTypes.includes(t)),void 0!==this.includeTags&&(n=n||r.some((e=>this.includeTags?.includes(e)))),void 0!==this.excludeNames&&(n=n&&!this.excludeNames.includes(e.name)),void 0!==this.excludeTypes&&(n=n&&!this.excludeTypes.includes(t)),void 0!==this.excludeTags&&(n=n&&r.every((e=>!this.excludeTags?.includes(e)))),n}}const Bb=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;const Ub=function(e){return"string"===typeof e&&Bb.test(e)};function Hb(e){return e.replace(/[^a-zA-Z-_0-9]/g,"_")}function Vb(e,t){return[t[e.source]??e.source,t[e.target]??e.target]}function Wb(e,t,n){const{firstNodeLabel:r,lastNodeLabel:i,nodeColors:o,withStyles:s=!0,curveStyle:a="linear",wrapLabelNWords:l=9}=n??{};let c=s?`%%{init: {'flowchart': {'curve': '${a}'}}}%%\ngraph TD;\n`:"graph TD;\n";if(s){const t="default",n={[t]:"{0}([{1}]):::otherclass"};void 0!==r&&(n[r]="{0}[{0}]:::startclass"),void 0!==i&&(n[i]="{0}[{0}]:::endclass");for(const r of Object.values(e)){const e=n[r]??n[t],i=Hb(r),o=r.split(":"),s=o[o.length-1];c+=`\t${e.replace(/\{0\}/g,i).replace(/\{1\}/g,s)};\n`}}let u="";for(const d of t){const t=d.source.includes(":")?d.source.split(":")[0]:void 0,n=d.target.includes(":")?d.target.split(":")[0]:void 0;""===u||u===t&&u===n||(c+="\tend\n",u=""),""===u&&void 0!==t&&t===n&&(c=`\tsubgraph ${t}\n`,u=t);const[r,i]=Vb(d,e);let o="";if(void 0!==d.data){let e=d.data;const t=e.split(" ");t.length>l&&(e=t.reduce(((e,t,n)=>(n%l===0&&e.push(""),e[e.length-1]+=` ${t}`,e)),[]).join("<br>")),o=d.conditional?` -. ${e} .-> `:` -- ${e} --\x3e `}else o=d.conditional?" -.-> ":" --\x3e ";c+=`\t${Hb(r)}${o}${Hb(i)};\n`}return""!==u&&(c+="end\n"),s&&void 0!==o&&(c+=function(e){let t="";for(const[n,r]of Object.entries(e))t+=`\tclassDef ${n}class fill:${r};\n`;return t}(o)),c}function qb(e){if(!Ub(e.id))return e.id;if(!zb(e.data))return e.data.name??"UnknownSchema";try{let t=e.data.getName();return t=t.startsWith("Runnable")?t.slice(8):t,t.length>42&&(t=`${t.substring(0,42)}...`),t}catch(t){return e.data.getName()}}function Jb(e){return zb(e.data)?{type:"runnable",data:{id:e.data.lc_id,name:e.data.getName()}}:{type:"schema",data:{...vg(e.data.schema),title:e.data.name}}}class Kb{constructor(){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]})}toJSON(){const e={};return Object.values(this.nodes).forEach(((t,n)=>{e[t.id]=Ub(t.id)?n:t.id})),{nodes:Object.values(this.nodes).map((t=>({id:e[t.id],...Jb(t)}))),edges:this.edges.map((t=>{const n={source:e[t.source],target:e[t.target]};return"undefined"!==typeof t.data&&(n.data=t.data),"undefined"!==typeof t.conditional&&(n.conditional=t.conditional),n}))}}addNode(e,t){if(void 0!==t&&void 0!==this.nodes[t])throw new Error(`Node with id ${t} already exists`);const n=t||ay(),r={id:n,data:e};return this.nodes[n]=r,r}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter((t=>t.source!==e.id&&t.target!==e.id))}addEdge(e,t,n,r){if(void 0===this.nodes[e.id])throw new Error(`Source node ${e.id} not in graph`);if(void 0===this.nodes[t.id])throw new Error(`Target node ${t.id} not in graph`);const i={source:e.id,target:t.id,data:n,conditional:r};return this.edges.push(i),i}firstNode(){const e=new Set(this.edges.map((e=>e.target))),t=[];return Object.values(this.nodes).forEach((n=>{e.has(n.id)||t.push(n)})),t[0]}lastNode(){const e=new Set(this.edges.map((e=>e.source))),t=[];return Object.values(this.nodes).forEach((n=>{e.has(n.id)||t.push(n)})),t[0]}extend(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=Object.values(e.nodes).map((e=>e.id));n.every(Ub)&&(t="");const r=e=>t?`${t}:${e}`:e;Object.entries(e.nodes).forEach((e=>{let[t,n]=e;this.nodes[r(t)]={...n,id:r(t)}}));const i=e.edges.map((e=>({...e,source:r(e.source),target:r(e.target)})));this.edges=[...this.edges,...i];const o=e.firstNode(),s=e.lastNode();return[o?{id:r(o.id),data:o.data}:void 0,s?{id:r(s.id),data:s.data}:void 0]}trimFirstNode(){const e=this.firstNode();if(e){const t=this.edges.filter((t=>t.source===e.id));1!==Object.keys(this.nodes).length&&1!==t.length||this.removeNode(e)}}trimLastNode(){const e=this.lastNode();if(e){const t=this.edges.filter((t=>t.target===e.id));1!==Object.keys(this.nodes).length&&1!==t.length||this.removeNode(e)}}drawMermaid(e){const{withStyles:t,curveStyle:n,nodeColors:r={start:"#ffdfba",end:"#baffc9",other:"#fad7de"},wrapLabelNWords:i}=e??{},o={};for(const u of Object.values(this.nodes))o[u.id]=qb(u);const s=this.firstNode(),a=s?qb(s):void 0,l=this.lastNode(),c=l?qb(l):void 0;return Wb(o,this.edges,{firstNodeLabel:a,lastNodeLabel:c,withStyles:t,curveStyle:n,nodeColors:r,wrapLabelNWords:i})}async drawMermaidPng(e){return async function(e,t){let{backgroundColor:n="white"}=t??{};const r=btoa(e);void 0!==n&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(n)||(n=`!${n}`));const i=`https://mermaid.ink/img/${r}?bgColor=${n}`,o=await fetch(i);if(!o.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${o.status}`,`Status text: ${o.statusText}`].join("\n"));return await o.blob()}(this.drawMermaid(e),{backgroundColor:e?.backgroundColor})}}function Gb(e){return"object"===typeof e&&null!==e&&"function"===typeof e[Symbol.iterator]&&"function"===typeof e.next}function Zb(e){return"object"===typeof e&&null!==e&&"function"===typeof e[Symbol.asyncIterator]}function*Yb(e,t){for(;;){const{value:n,done:r}=hb.runWithConfig(e,t.next.bind(t),!0);if(r)break;yield n}}async function*Xb(e,t){const n=t[Symbol.asyncIterator]();for(;;){const{value:r,done:i}=await hb.runWithConfig(e,n.next.bind(t),!0);if(i)break;yield r}}function Qb(e,t){return!e||Array.isArray(e)||e instanceof Date||"object"!==typeof e?{[t]:e}:e}class ew extends Og{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){const t=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${t}${e}`:t}bind(e){return new tw({bound:this,kwargs:e,config:{}})}map(){return new nw({bound:this})}withRetry(e){return new rw({bound:this,kwargs:{},config:{},maxAttemptNumber:e?.stopAfterAttempt,...e})}withConfig(e){return new tw({bound:this,config:e,kwargs:{}})}withFallbacks(e){const t=Array.isArray(e)?e:e.fallbacks;return new lw({runnable:this,fallbacks:t})}_getOptionsList(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(Array.isArray(e)&&e.length!==t)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${t} inputs`);if(Array.isArray(e))return e.map(Ib);if(t>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const n=Object.fromEntries(Object.entries(e).filter((e=>{let[t]=e;return"runId"!==t})));return Array.from({length:t},((t,r)=>Ib(0===r?e:n)))}return Array.from({length:t},(()=>Ib(e)))}async batch(e,t,n){const r=this._getOptionsList(t??{},e.length),i=r[0]?.maxConcurrency??n?.maxConcurrency,o=new Lb({maxConcurrency:i,onFailedAttempt:e=>{throw e}}),s=e.map(((e,t)=>o.call((async()=>{try{return await this.invoke(e,r[t])}catch(RN){if(n?.returnExceptions)return RN;throw RN}}))));return Promise.all(s)}async*_streamIterator(e,t){yield this.invoke(e,t)}async stream(e,t){const n=Ib(t),r=new yb({generator:this._streamIterator(e,n),config:n});return await r.setup,fb.fromAsyncGenerator(r)}_separateRunnableConfigFromCallOptions(e){let t;t=Ib(void 0===e?e:{callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const n={...e};return delete n.callbacks,delete n.tags,delete n.metadata,delete n.runName,delete n.configurable,delete n.recursionLimit,delete n.maxConcurrency,delete n.runId,delete n.timeout,delete n.signal,[t,n]}async _callWithConfig(e,t,n){const r=Ib(n),i=await Ab(r),o=await(i?.handleChainStart(this.toJSON(),Qb(t,"input"),r.runId,r?.runType,void 0,void 0,r?.runName??this.getName()));let s;delete r.runId;try{const i=e.call(this,t,r,o);s=await pb(i,n?.signal)}catch(RN){throw await(o?.handleChainError(RN)),RN}return await(o?.handleChainEnd(Qb(s,"output"))),s}async _batchWithConfig(e,t,n,r){const i=this._getOptionsList(n??{},t.length),o=await Promise.all(i.map(Ab)),s=await Promise.all(o.map((async(e,n)=>{const r=await(e?.handleChainStart(this.toJSON(),Qb(t[n],"input"),i[n].runId,i[n].runType,void 0,void 0,i[n].runName??this.getName()));return delete i[n].runId,r})));let a;try{const n=e.call(this,t,i,s,r);a=await pb(n,i?.[0]?.signal)}catch(RN){throw await Promise.all(s.map((t=>t?.handleChainError(RN)))),RN}return await Promise.all(s.map((e=>e?.handleChainEnd(Qb(a,"output"))))),a}async*_transformStreamWithConfig(e,t,n){let r,i,o=!0,s=!0;const a=Ib(n),l=await Ab(a);let c;try{const u=await async function(e,t,n,r){const i=new yb({generator:t,startSetup:n,signal:r}),o=await i.setup;for(var s=arguments.length,a=new Array(s>4?s-4:0),l=4;l<s;l++)a[l-4]=arguments[l];return{output:e(i,o,...a),setup:o}}(t.bind(this),async function*(){for await(const t of e){if(o)if(void 0===r)r=t;else try{r=gb(r,t)}catch{r=void 0,o=!1}yield t}}(),(async()=>l?.handleChainStart(this.toJSON(),{input:""},a.runId,a.runType,void 0,void 0,a.runName??this.getName())),n?.signal,a);delete a.runId,c=u.setup;const d=c?.handlers.find(Nb);let h=u.output;void 0!==d&&void 0!==c&&(h=d.tapOutputIterable(c.runId,h));const p=c?.handlers.find(wb);void 0!==p&&void 0!==c&&(h=p.tapOutputIterable(c.runId,h));for await(const e of h)if(yield e,s)if(void 0===i)i=e;else try{i=gb(i,e)}catch{i=void 0,s=!1}}catch(RN){throw await(c?.handleChainError(RN,void 0,void 0,void 0,{inputs:Qb(r,"input")})),RN}await(c?.handleChainEnd(i??{},void 0,void 0,void 0,{inputs:Qb(r,"input")}))}getGraph(e){const t=new Kb,n=t.addNode({name:`${this.getName()}Input`,schema:Ym.any()}),r=t.addNode(this),i=t.addNode({name:`${this.getName()}Output`,schema:Ym.any()});return t.addEdge(n,r),t.addEdge(r,i),t}pipe(e){return new iw({first:this,last:cw(e)})}pick(e){return this.pipe(new dw(e))}assign(e){return this.pipe(new uw(new ow({steps:e})))}async*transform(e,t){let n;for await(const r of e)n=void 0===n?r:gb(n,r);yield*this._streamIterator(n,Ib(t))}async*streamLog(e,t,n){const r=new Sb({...n,autoClose:!1,_schemaFormat:"original"}),i=Ib(t);yield*this._streamLog(e,r,i)}async*_streamLog(e,t,n){const{callbacks:r}=n;if(void 0===r)n.callbacks=[t];else if(Array.isArray(r))n.callbacks=r.concat([t]);else{const e=r.copy();e.addHandler(t,!0),n.callbacks=e}const i=this.stream(e,n);const o=async function(){try{const e=await i;for await(const n of e){const e=new vb({ops:[{op:"add",path:"/streamed_output/-",value:n}]});await t.writer.write(e)}}finally{await t.writer.close()}}();try{for await(const e of t)yield e}finally{await o}}streamEvents(e,t,n){let r;if("v1"===t.version)r=this._streamEventsV1(e,t,n);else{if("v2"!==t.version)throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');r=this._streamEventsV2(e,t,n)}return"text/event-stream"===t.encoding?function(e){const t=new TextEncoder,n=new ReadableStream({async start(n){for await(const r of e)n.enqueue(t.encode(`event: data\ndata: ${JSON.stringify(r)}\n\n`));n.enqueue(t.encode("event: end\n\n")),n.close()}});return fb.fromReadableStream(n)}(r):fb.fromAsyncGenerator(r)}async*_streamEventsV2(e,t,n){const r=new Tb({...n,autoClose:!1}),i=Ib(t),o=i.runId??ay();i.runId=o;const s=i.callbacks;if(void 0===s)i.callbacks=[r];else if(Array.isArray(s))i.callbacks=s.concat(r);else{const e=s.copy();e.addHandler(r,!0),i.callbacks=e}const a=this;const l=async function(){try{const t=await a.stream(e,i),n=r.tapOutputIterable(o,t);for await(const e of n);}finally{await r.finish()}}();let c,u=!1;try{for await(const t of r)u?(t.run_id===c&&t.event.endsWith("_end")&&t.data?.input&&delete t.data.input,yield t):(t.data.input=e,u=!0,c=t.run_id,yield t)}finally{await l}}async*_streamEventsV1(e,t,n){let r,i=!1;const o=Ib(t),s=o.tags??[],a=o.metadata??{},l=o.runName??this.getName(),c=new Sb({...n,autoClose:!1,_schemaFormat:"streaming_events"}),u=new Fb({...n}),d=this._streamLog(e,c,o);for await(const p of d){if(r=r?r.concat(p):bb.fromRunLogPatch(p),void 0===r.state)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!i){i=!0;const t={...r.state},n={run_id:t.id,event:`on_${t.type}_start`,name:l,tags:s,metadata:a,data:{input:e}};u.includeEvent(n,t.type)&&(yield n)}const t=p.ops.filter((e=>e.path.startsWith("/logs/"))).map((e=>e.path.split("/")[2])),n=[...new Set(t)];for(const e of n){let t,n={};const i=r.state.logs[e];if(t=void 0===i.end_time?i.streamed_output.length>0?"stream":"start":"end","start"===t)void 0!==i.inputs&&(n.input=i.inputs);else if("end"===t)void 0!==i.inputs&&(n.input=i.inputs),n.output=i.final_output;else if("stream"===t){const e=i.streamed_output.length;if(1!==e)throw new Error(`Expected exactly one chunk of streamed output, got ${e} instead. Encountered in: "${i.name}"`);n={chunk:i.streamed_output[0]},i.streamed_output=[]}yield{event:`on_${i.type}_${t}`,name:i.name,run_id:i.id,tags:i.tags,metadata:i.metadata,data:n}}const{state:o}=r;if(o.streamed_output.length>0){const e=o.streamed_output.length;if(1!==e)throw new Error(`Expected exactly one chunk of streamed output, got ${e} instead. Encountered in: "${o.name}"`);const t={chunk:o.streamed_output[0]};o.streamed_output=[];const n={event:`on_${o.type}_stream`,run_id:o.id,tags:s,metadata:a,name:l,data:t};u.includeEvent(n,o.type)&&(yield n)}}const h=r?.state;if(void 0!==h){const e={event:`on_${h.type}_end`,name:l,run_id:h.id,tags:s,metadata:a,data:{output:h.final_output}};u.includeEvent(e,h.type)&&(yield e)}}static isRunnable(e){return zb(e)}withListeners(e){let{onStart:t,onEnd:n,onError:r}=e;return new tw({bound:this,config:{},configFactories:[e=>({callbacks:[new Db({config:e,onStart:t,onEnd:n,onError:r})]})]})}asTool(e){return function(e,t){const n=t.name??e.getName(),r=t.description??t.schema?.description;if(t.schema.constructor===Ym.ZodString)return new hw({name:n,description:r,schema:Ym.object({input:Ym.string()}).transform((e=>e.input)),bound:e});return new hw({name:n,description:r,schema:t.schema,bound:e})}(this,e)}}class tw extends ew{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=jb(this.config,...t);return jb(r,...this.configFactories?await Promise.all(this.configFactories.map((async e=>await e(r)))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new this.constructor({bound:this.bound.withRetry(e),kwargs:this.kwargs,config:this.config})}async invoke(e,t){return this.bound.invoke(e,await this._mergeConfig(Ib(t),this.kwargs))}async batch(e,t,n){const r=Array.isArray(t)?await Promise.all(t.map((async e=>this._mergeConfig(Ib(e),this.kwargs)))):await this._mergeConfig(Ib(t),this.kwargs);return this.bound.batch(e,r,n)}async*_streamIterator(e,t){yield*this.bound._streamIterator(e,await this._mergeConfig(Ib(t),this.kwargs))}async stream(e,t){return this.bound.stream(e,await this._mergeConfig(Ib(t),this.kwargs))}async*transform(e,t){yield*this.bound.transform(e,await this._mergeConfig(Ib(t),this.kwargs))}streamEvents(e,t,n){const r=this;return fb.fromAsyncGenerator(async function*(){yield*r.bound.streamEvents(e,{...await r._mergeConfig(Ib(t),r.kwargs),version:t.version},n)}())}static isRunnableBinding(e){return e.bound&&ew.isRunnable(e.bound)}withListeners(e){let{onStart:t,onEnd:n,onError:r}=e;return new tw({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[e=>({callbacks:[new Db({config:e,onStart:t,onEnd:n,onError:r})]})]})}}class nw extends ew{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new nw({bound:this.bound.bind(e)})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async _invoke(e,t,n){return this.bound.batch(e,Rb(t,{callbacks:n?.getChild()}))}withListeners(e){let{onStart:t,onEnd:n,onError:r}=e;return new nw({bound:this.bound.withListeners({onStart:t,onEnd:n,onError:r})})}}class rw extends tw{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,t,n){const r=e>1?`retry:attempt:${e}`:void 0;return Rb(t,{callbacks:n?.getChild(r)})}async _invoke(e,t,n){return Qg((r=>super.invoke(e,this._patchConfigForRetry(r,t,n))),{onFailedAttempt:t=>this.onFailedAttempt(t,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async _batch(e,t,n,r){const i={};try{await Qg((async o=>{const s=e.map(((e,t)=>t)).filter((e=>void 0===i[e.toString()]||i[e.toString()]instanceof Error)),a=s.map((t=>e[t])),l=s.map((e=>this._patchConfigForRetry(o,t?.[e],n?.[e]))),c=await super.batch(a,l,{...r,returnExceptions:!0});let u;for(let e=0;e<c.length;e+=1){const t=c[e],n=s[e];t instanceof Error&&void 0===u&&(u=t,u.input=a[e]),i[n.toString()]=t}if(u)throw u;return c}),{onFailedAttempt:e=>this.onFailedAttempt(e,e.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(RN){if(!0!==r?.returnExceptions)throw RN}return Object.keys(i).sort(((e,t)=>parseInt(e,10)-parseInt(t,10))).map((e=>i[parseInt(e,10)]))}async batch(e,t,n){return this._batchWithConfig(this._batch.bind(this),e,t,n)}}class iw extends ew{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,t){const n=Ib(t),r=await Ab(n),i=await(r?.handleChainStart(this.toJSON(),Qb(e,"input"),n.runId,void 0,void 0,void 0,n?.runName));delete n.runId;let o,s=e;try{const e=[this.first,...this.middle];for(let r=0;r<e.length;r+=1){const o=e[r].invoke(s,Rb(n,{callbacks:i?.getChild(`seq:step:${r+1}`)}));s=await pb(o,t?.signal)}if(t?.signal?.aborted)throw new Error("Aborted");o=await this.last.invoke(s,Rb(n,{callbacks:i?.getChild(`seq:step:${this.steps.length}`)}))}catch(RN){throw await(i?.handleChainError(RN)),RN}return await(i?.handleChainEnd(Qb(o,"output"))),o}async batch(e,t,n){const r=this._getOptionsList(t??{},e.length),i=await Promise.all(r.map(Ab)),o=await Promise.all(i.map((async(t,n)=>{const i=await(t?.handleChainStart(this.toJSON(),Qb(e[n],"input"),r[n].runId,void 0,void 0,void 0,r[n].runName));return delete r[n].runId,i})));let s=e;try{for(let e=0;e<this.steps.length;e+=1){const t=this.steps[e].batch(s,o.map(((t,n)=>{const i=t?.getChild(`seq:step:${e+1}`);return Rb(r[n],{callbacks:i})})),n);s=await pb(t,r[0]?.signal)}}catch(RN){throw await Promise.all(o.map((t=>t?.handleChainError(RN)))),RN}return await Promise.all(o.map((e=>e?.handleChainEnd(Qb(s,"output"))))),s}async*_streamIterator(e,t){const n=await Ab(t),{runId:r,...i}=t??{},o=await(n?.handleChainStart(this.toJSON(),Qb(e,"input"),r,void 0,void 0,void 0,i?.runName)),s=[this.first,...this.middle,this.last];let a,l=!0;try{let n=s[0].transform(async function*(){yield e}(),Rb(i,{callbacks:o?.getChild("seq:step:1")}));for(let e=1;e<s.length;e+=1){const t=s[e];n=await t.transform(n,Rb(i,{callbacks:o?.getChild(`seq:step:${e+1}`)}))}for await(const e of n)if(t?.signal?.throwIfAborted(),yield e,l)if(void 0===a)a=e;else try{a=gb(a,e)}catch(RN){a=void 0,l=!1}}catch(RN){throw await(o?.handleChainError(RN)),RN}await(o?.handleChainEnd(Qb(a,"output")))}getGraph(e){const t=new Kb;let n=null;return this.steps.forEach(((r,i)=>{const o=r.getGraph(e);0!==i&&o.trimFirstNode(),i!==this.steps.length-1&&o.trimLastNode(),t.extend(o);const s=o.firstNode();if(!s)throw new Error(`Runnable ${r} has no first node`);n&&t.addEdge(n,s),n=o.lastNode()})),t}pipe(e){return iw.isRunnableSequence(e)?new iw({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new iw({first:this.first,middle:[...this.middle,this.last],last:cw(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&ew.isRunnable(e)}static from(e,t){let[n,...r]=e;return new iw({first:cw(n),middle:r.slice(0,-1).map(cw),last:cw(r[r.length-1]),name:t})}}class ow extends ew{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[t,n]of Object.entries(e.steps))this.steps[t]=cw(n)}static from(e){return new ow({steps:e})}async invoke(e,t){const n=Ib(t),r=await Ab(n),i=await(r?.handleChainStart(this.toJSON(),{input:e},n.runId,void 0,void 0,void 0,n?.runName));delete n.runId;const o={};try{const r=Object.entries(this.steps).map((async t=>{let[r,s]=t;o[r]=await s.invoke(e,Rb(n,{callbacks:i?.getChild(`map:key:${r}`)}))}));await pb(Promise.all(r),t?.signal)}catch(RN){throw await(i?.handleChainError(RN)),RN}return await(i?.handleChainEnd(o)),o}async*_transform(e,t,n){const r={...this.steps},i=mb(e,Object.keys(r).length),o=new Map(Object.entries(r).map(((e,r)=>{let[o,s]=e;const a=s.transform(i[r],Rb(n,{callbacks:t?.getChild(`map:key:${o}`)}));return[o,a.next().then((e=>({key:o,gen:a,result:e})))]})));for(;o.size;){const e=Promise.race(o.values()),{key:t,result:r,gen:i}=await pb(e,n?.signal);o.delete(t),r.done||(yield{[t]:r.value},o.set(t,i.next().then((e=>({key:t,gen:i,result:e})))))}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){const n=Ib(t),r=new yb({generator:this.transform(async function*(){yield e}(),n),config:n});return await r.setup,fb.fromAsyncGenerator(r)}}class sw extends ew{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!dy(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,t){const[n]=this._getOptionsList(t??{},1),r=await Ab(n);return pb(this.func(Rb(n,{callbacks:r}),e),n?.signal)}async*_streamIterator(e,t){const[n]=this._getOptionsList(t??{},1),r=await this.invoke(e,t);var i;if(Zb(r))for await(const o of r)n?.signal?.throwIfAborted(),yield o;else if(null!=(i=r)&&"object"===typeof i&&"next"in i&&"function"===typeof i.next)for(;;){n?.signal?.throwIfAborted();const e=r.next();if(e.done)break;yield e.value}else yield r}static from(e){return new sw({func:e})}}class aw extends ew{static lc_name(){return"RunnableLambda"}constructor(e){if(dy(e.func))return sw.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),function(e){if(dy(e))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}(e.func),this.func=e.func}static from(e){return new aw({func:e})}async _invoke(e,t,n){return new Promise(((r,i)=>{const o=Rb(t,{callbacks:n?.getChild(),recursionLimit:(t?.recursionLimit??25)-1});hb.runWithConfig(o,(async()=>{try{let n=await this.func(e,{...o});if(n&&ew.isRunnable(n)){if(0===t?.recursionLimit)throw new Error("Recursion limit reached.");n=await n.invoke(e,{...o,recursionLimit:(o.recursionLimit??25)-1})}else if(Zb(n)){let e;for await(const r of Xb(o,n))if(t?.signal?.throwIfAborted(),void 0===e)e=r;else try{e=gb(e,r)}catch(RN){e=r}n=e}else if(Gb(n)){let e;for(const r of Yb(o,n))if(t?.signal?.throwIfAborted(),void 0===e)e=r;else try{e=gb(e,r)}catch(RN){e=r}n=e}r(n)}catch(RN){i(RN)}}))}))}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async*_transform(e,t,n){let r;for await(const s of e)if(void 0===r)r=s;else try{r=gb(r,s)}catch(RN){r=s}const i=Rb(n,{callbacks:t?.getChild(),recursionLimit:(n?.recursionLimit??25)-1}),o=await new Promise(((e,t)=>{hb.runWithConfig(i,(async()=>{try{const t=await this.func(r,{...i,config:i});e(t)}catch(RN){t(RN)}}))}));if(o&&ew.isRunnable(o)){if(0===n?.recursionLimit)throw new Error("Recursion limit reached.");const e=await o.stream(r,i);for await(const t of e)yield t}else if(Zb(o))for await(const s of Xb(i,o))n?.signal?.throwIfAborted(),yield s;else if(Gb(o))for(const s of Yb(i,o))n?.signal?.throwIfAborted(),yield s;else yield o}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){const n=Ib(t),r=new yb({generator:this.transform(async function*(){yield e}(),n),config:n});return await r.setup,fb.fromAsyncGenerator(r)}}class lw extends ew{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,t){const n=Ib(t),r=await Ab(t),{runId:i,...o}=n,s=await(r?.handleChainStart(this.toJSON(),Qb(e,"input"),i,void 0,void 0,void 0,o?.runName));let a;for(const l of this.runnables()){n?.signal?.throwIfAborted();try{const t=await l.invoke(e,Rb(o,{callbacks:s?.getChild()}));return await(s?.handleChainEnd(Qb(t,"output"))),t}catch(RN){void 0===a&&(a=RN)}}if(void 0===a)throw new Error("No error stored at end of fallback.");throw await(s?.handleChainError(a)),a}async*_streamIterator(e,t){const n=Ib(t),r=await Ab(t),{runId:i,...o}=n,s=await(r?.handleChainStart(this.toJSON(),Qb(e,"input"),i,void 0,void 0,void 0,o?.runName));let a,l,c;for(const u of this.runnables()){n?.signal?.throwIfAborted();const t=Rb(o,{callbacks:s?.getChild()});try{l=await u.stream(e,t);break}catch(RN){void 0===a&&(a=RN)}}if(void 0===l){const e=a??new Error("No error stored at end of fallback.");throw await(s?.handleChainError(e)),e}try{for await(const e of l){yield e;try{c=void 0===c?c:gb(c,e)}catch(RN){c=void 0}}}catch(RN){throw await(s?.handleChainError(RN)),RN}await(s?.handleChainEnd(Qb(c,"output")))}async batch(e,t,n){if(n?.returnExceptions)throw new Error("Not implemented.");const r=this._getOptionsList(t??{},e.length),i=await Promise.all(r.map((e=>Ab(e)))),o=await Promise.all(i.map((async(t,n)=>{const i=await(t?.handleChainStart(this.toJSON(),Qb(e[n],"input"),r[n].runId,void 0,void 0,void 0,r[n].runName));return delete r[n].runId,i})));let s;for(const a of this.runnables()){r[0].signal?.throwIfAborted();try{const t=await a.batch(e,o.map(((e,t)=>Rb(r[t],{callbacks:e?.getChild()}))),n);return await Promise.all(o.map(((e,n)=>e?.handleChainEnd(Qb(t[n],"output"))))),t}catch(RN){void 0===s&&(s=RN)}}if(!s)throw new Error("No error stored at end of fallbacks.");throw await Promise.all(o.map((e=>e?.handleChainError(s)))),s}}function cw(e){if("function"===typeof e)return new aw({func:e});if(ew.isRunnable(e))return e;if(Array.isArray(e)||"object"!==typeof e)throw new Error("Expected a Runnable, function or object.\nInstead got an unsupported type.");{const t={};for(const[n,r]of Object.entries(e))t[n]=cw(r);return new ow({steps:t})}}class uw extends ew{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof ow&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,t){const n=await this.mapper.invoke(e,t);return{...e,...n}}async*_transform(e,t,n){const r=this.mapper.getStepsKeys(),[i,o]=mb(e),s=this.mapper.transform(o,Rb(n,{callbacks:t?.getChild()})),a=s.next();for await(const l of i){if("object"!==typeof l||Array.isArray(l))throw new Error("RunnableAssign can only be used with objects as input, got "+typeof l);const e=Object.fromEntries(Object.entries(l).filter((e=>{let[t]=e;return!r.includes(t)})));Object.keys(e).length>0&&(yield e)}yield(await a).value;for await(const l of s)yield l}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){const n=Ib(t),r=new yb({generator:this.transform(async function*(){yield e}(),n),config:n});return await r.setup,fb.fromAsyncGenerator(r)}}class dw extends ew{static lc_name(){return"RunnablePick"}constructor(e){("string"===typeof e||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if("string"===typeof this.keys)return e[this.keys];{const t=this.keys.map((t=>[t,e[t]])).filter((e=>void 0!==e[1]));return 0===t.length?void 0:Object.fromEntries(t)}}async invoke(e,t){return this._callWithConfig(this._pick.bind(this),e,t)}async*_transform(e){for await(const t of e){const e=await this._pick(t);void 0!==e&&(yield e)}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){const n=Ib(t),r=new yb({generator:this.transform(async function*(){yield e}(),n),config:n});return await r.setup,fb.fromAsyncGenerator(r)}}class hw extends tw{constructor(e){super({bound:iw.from([aw.from((async e=>{let t;if(qg(e))try{t=await this.schema.parseAsync(e.args)}catch(RN){throw new Jg("Received tool input did not match expected schema",JSON.stringify(e.args))}else t=e;return t})).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name}),config:e.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}}var pw="object"===typeof window?window:{},fw="0123456789abcdef".split(""),mw=[-2147483648,8388608,32768,128],gw=[24,16,8,0],yw=[];function vw(e){e?(yw[0]=yw[16]=yw[1]=yw[2]=yw[3]=yw[4]=yw[5]=yw[6]=yw[7]=yw[8]=yw[9]=yw[10]=yw[11]=yw[12]=yw[13]=yw[14]=yw[15]=0,this.blocks=yw):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}vw.prototype.update=function(e){if(!this.finalized){var t="string"!==typeof e;t&&e.constructor===pw.ArrayBuffer&&(e=new Uint8Array(e));for(var n,r,i=0,o=e.length||0,s=this.blocks;i<o;){if(this.hashed&&(this.hashed=!1,s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)for(r=this.start;i<o&&r<64;++i)s[r>>2]|=e[i]<<gw[3&r++];else for(r=this.start;i<o&&r<64;++i)(n=e.charCodeAt(i))<128?s[r>>2]|=n<<gw[3&r++]:n<2048?(s[r>>2]|=(192|n>>6)<<gw[3&r++],s[r>>2]|=(128|63&n)<<gw[3&r++]):n<55296||n>=57344?(s[r>>2]|=(224|n>>12)<<gw[3&r++],s[r>>2]|=(128|n>>6&63)<<gw[3&r++],s[r>>2]|=(128|63&n)<<gw[3&r++]):(n=65536+((1023&n)<<10|1023&e.charCodeAt(++i)),s[r>>2]|=(240|n>>18)<<gw[3&r++],s[r>>2]|=(128|n>>12&63)<<gw[3&r++],s[r>>2]|=(128|n>>6&63)<<gw[3&r++],s[r>>2]|=(128|63&n)<<gw[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,r>=64?(this.block=s[16],this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296|0,this.bytes=this.bytes%4294967296),this}},vw.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=mw[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},vw.prototype.hash=function(){var e,t,n=this.h0,r=this.h1,i=this.h2,o=this.h3,s=this.h4,a=this.blocks;for(e=16;e<80;++e)t=a[e-3]^a[e-8]^a[e-14]^a[e-16],a[e]=t<<1|t>>>31;for(e=0;e<20;e+=5)n=(t=(r=(t=(i=(t=(o=(t=(s=(t=n<<5|n>>>27)+(r&i|~r&o)+s+1518500249+a[e]|0)<<5|s>>>27)+(n&(r=r<<30|r>>>2)|~n&i)+o+1518500249+a[e+1]|0)<<5|o>>>27)+(s&(n=n<<30|n>>>2)|~s&r)+i+1518500249+a[e+2]|0)<<5|i>>>27)+(o&(s=s<<30|s>>>2)|~o&n)+r+1518500249+a[e+3]|0)<<5|r>>>27)+(i&(o=o<<30|o>>>2)|~i&s)+n+1518500249+a[e+4]|0,i=i<<30|i>>>2;for(;e<40;e+=5)n=(t=(r=(t=(i=(t=(o=(t=(s=(t=n<<5|n>>>27)+(r^i^o)+s+1859775393+a[e]|0)<<5|s>>>27)+(n^(r=r<<30|r>>>2)^i)+o+1859775393+a[e+1]|0)<<5|o>>>27)+(s^(n=n<<30|n>>>2)^r)+i+1859775393+a[e+2]|0)<<5|i>>>27)+(o^(s=s<<30|s>>>2)^n)+r+1859775393+a[e+3]|0)<<5|r>>>27)+(i^(o=o<<30|o>>>2)^s)+n+1859775393+a[e+4]|0,i=i<<30|i>>>2;for(;e<60;e+=5)n=(t=(r=(t=(i=(t=(o=(t=(s=(t=n<<5|n>>>27)+(r&i|r&o|i&o)+s-1894007588+a[e]|0)<<5|s>>>27)+(n&(r=r<<30|r>>>2)|n&i|r&i)+o-1894007588+a[e+1]|0)<<5|o>>>27)+(s&(n=n<<30|n>>>2)|s&r|n&r)+i-1894007588+a[e+2]|0)<<5|i>>>27)+(o&(s=s<<30|s>>>2)|o&n|s&n)+r-1894007588+a[e+3]|0)<<5|r>>>27)+(i&(o=o<<30|o>>>2)|i&s|o&s)+n-1894007588+a[e+4]|0,i=i<<30|i>>>2;for(;e<80;e+=5)n=(t=(r=(t=(i=(t=(o=(t=(s=(t=n<<5|n>>>27)+(r^i^o)+s-899497514+a[e]|0)<<5|s>>>27)+(n^(r=r<<30|r>>>2)^i)+o-899497514+a[e+1]|0)<<5|o>>>27)+(s^(n=n<<30|n>>>2)^r)+i-899497514+a[e+2]|0)<<5|i>>>27)+(o^(s=s<<30|s>>>2)^n)+r-899497514+a[e+3]|0)<<5|r>>>27)+(i^(o=o<<30|o>>>2)^s)+n-899497514+a[e+4]|0,i=i<<30|i>>>2;this.h0=this.h0+n|0,this.h1=this.h1+r|0,this.h2=this.h2+i|0,this.h3=this.h3+o|0,this.h4=this.h4+s|0},vw.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,i=this.h4;return fw[e>>28&15]+fw[e>>24&15]+fw[e>>20&15]+fw[e>>16&15]+fw[e>>12&15]+fw[e>>8&15]+fw[e>>4&15]+fw[15&e]+fw[t>>28&15]+fw[t>>24&15]+fw[t>>20&15]+fw[t>>16&15]+fw[t>>12&15]+fw[t>>8&15]+fw[t>>4&15]+fw[15&t]+fw[n>>28&15]+fw[n>>24&15]+fw[n>>20&15]+fw[n>>16&15]+fw[n>>12&15]+fw[n>>8&15]+fw[n>>4&15]+fw[15&n]+fw[r>>28&15]+fw[r>>24&15]+fw[r>>20&15]+fw[r>>16&15]+fw[r>>12&15]+fw[r>>8&15]+fw[r>>4&15]+fw[15&r]+fw[i>>28&15]+fw[i>>24&15]+fw[i>>20&15]+fw[i>>16&15]+fw[i>>12&15]+fw[i>>8&15]+fw[i>>4&15]+fw[15&i]},vw.prototype.toString=vw.prototype.hex,vw.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,n=this.h2,r=this.h3,i=this.h4;return[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24&255,n>>16&255,n>>8&255,255&n,r>>24&255,r>>16&255,r>>8&255,255&r,i>>24&255,i>>16&255,i>>8&255,255&i]},vw.prototype.array=vw.prototype.digest,vw.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),e};const bw=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=t.join("_"),new vw(!0).update(r).hex();var r};class ww{}const xw=new Map;class kw extends ww{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,t){return Promise.resolve(this.cache.get(bw(e,t))??null)}async update(e,t,n){this.cache.set(bw(e,t),n)}static global(){return new kw(xw)}}class Sw extends Og{}class _w extends Sw{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new Ug(this.value)]}}class Ew extends Sw{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return Yg(this.messages)}toChatMessages(){return this.messages}}var Cw=n(4445),Ow=Object.defineProperty;function Nw(e,t){return 1===e.length?[t.get(e.join(","))]:function(e,t){let n=Array.from({length:e.length},((e,t)=>({start:t,end:t+1})));for(;n.length>1;){let r=null;for(let i=0;i<n.length-1;i++){const o=e.slice(n[i].start,n[i+1].end),s=t.get(o.join(","));null!=s&&(null==r||s<r[0])&&(r=[s,i])}if(null==r)break;{const e=r[1];n[e]={start:n[e].start,end:n[e+1].end},n.splice(e+1,1)}}return n}(e,t).map((n=>t.get(e.slice(n.start,n.end).join(",")))).filter((e=>null!=e))}var Tw,Aw,jw=class{specialTokens;inverseSpecialTokens;patStr;textEncoder=(()=>new TextEncoder)();textDecoder=(()=>new TextDecoder("utf-8"))();rankMap=(()=>new Map)();textMap=(()=>new Map)();constructor(e,t){this.patStr=e.pat_str;const n=e.bpe_ranks.split("\n").filter(Boolean).reduce(((e,t)=>{const[n,r,...i]=t.split(" "),o=Number.parseInt(r,10);return i.forEach(((t,n)=>e[t]=o+n)),e}),{});for(const[r,i]of Object.entries(n)){const e=Cw.toByteArray(r);this.rankMap.set(e.join(","),i),this.textMap.set(i,e)}this.specialTokens={...e.special_tokens,...t},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce(((e,t)=>{let[n,r]=t;return e[r]=this.textEncoder.encode(n),e}),{})}encode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all";const r=new RegExp(this.patStr,"ug"),i=jw.specialTokenRegex(Object.keys(this.specialTokens)),o=[],s=new Set("all"===t?Object.keys(this.specialTokens):t),a=new Set("all"===n?Object.keys(this.specialTokens).filter((e=>!s.has(e))):n);if(a.size>0){const t=jw.specialTokenRegex([...a]),n=e.match(t);if(null!=n)throw new Error(`The text contains a special token that is not allowed: ${n[0]}`)}let l=0;for(;;){let t=null,n=l;for(;i.lastIndex=n,t=i.exec(e),null!=t&&!s.has(t[0]);)n=t.index+1;const a=t?.index??e.length;for(const i of e.substring(l,a).matchAll(r)){const e=this.textEncoder.encode(i[0]),t=this.rankMap.get(e.join(","));null==t?o.push(...Nw(e,this.rankMap)):o.push(t)}if(null==t)break;let c=this.specialTokens[t[0]];o.push(c),l=t.index+t[0].length}return o}decode(e){const t=[];let n=0;for(let o=0;o<e.length;++o){const r=e[o],i=this.textMap.get(r)??this.inverseSpecialTokens[r];null!=i&&(t.push(i),n+=i.length)}const r=new Uint8Array(n);let i=0;for(const o of t)r.set(o,i),i+=o.length;return this.textDecoder.decode(r)}},Pw=jw;Aw=e=>new RegExp(e.map((e=>e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"))).join("|"),"g"),((e,t,n)=>{t in e?Ow(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(Pw,"symbol"!==typeof(Tw="specialTokenRegex")?Tw+"":Tw,Aw);const Iw={},Rw=new Lb({});async function Mw(e){return async function(e){return e in Iw||(Iw[e]=Rw.fetch(`https://tiktoken.pages.dev/js/${e}.json`).then((e=>e.json())).then((e=>new Pw(e))).catch((t=>{throw delete Iw[e],t}))),await Iw[e]}(function(e){switch(e){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":return"o200k_base";default:throw new Error("Unknown model")}}(e))}const $w=e=>e.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":e.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":e.startsWith("gpt-4-32k")?"gpt-4-32k":e.startsWith("gpt-4-")?"gpt-4":e.startsWith("gpt-4o")?"gpt-4o":e;class Lw extends ew{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??!1,this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class Dw extends Lw{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor(e){let{callbacks:t,callbackManager:n,...r}=e;super({callbacks:t??n,...r}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),"object"===typeof r.cache?this.cache=r.cache:r.cache?this.cache=kw.global():this.cache=void 0,this.caller=new Lb(r??{})}async getNumTokens(e){if("string"!==typeof e)return 0;let t=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await Mw("modelName"in this?$w(this.modelName):"gpt2")}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}if(this._encoding)try{t=this._encoding.encode(e).length}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}return t}static _convertInputToPromptValue(e){return"string"===typeof e?new _w(e):Array.isArray(e)?new Ew(e.map(Zg)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall(e){let{config:t,...n}=e;const r={...this._identifyingParams(),...n,_type:this._llmType(),_model:this._modelType()},i=Object.entries(r).filter((e=>{let[t,n]=e;return void 0!==n})),o=i.map((e=>{let[t,n]=e;return`${t}:${JSON.stringify(n)}`})).sort().join(",");return o}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}class zw extends ew{static lc_name(){return"RunnablePassthrough"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e&&(this.func=e.func)}async invoke(e,t){const n=Ib(t);return this.func&&await this.func(e,n),this._callWithConfig((e=>Promise.resolve(e)),e,n)}async*transform(e,t){const n=Ib(t);let r,i=!0;for await(const o of this._transformStreamWithConfig(e,(e=>e),n))if(yield o,i)if(void 0===r)r=o;else try{r=gb(r,o)}catch{r=void 0,i=!1}this.func&&void 0!==r&&await this.func(r,n)}static assign(e){return new uw(new ow({steps:e}))}}function Fw(e){return"function"===typeof e?.parse}class Bw extends Dw{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]})}_separateRunnableConfigFromCallOptionsCompat(e){const[t,n]=super._separateRunnableConfigFromCallOptions(e);return n.signal=t.signal,[t,n]}async invoke(e,t){const n=Bw._convertInputToPromptValue(e);return(await this.generatePrompt([n],t,t?.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,t,n){throw new Error("Not implemented.")}async*_streamIterator(e,t){if(this._streamResponseChunks===Bw.prototype._streamResponseChunks)yield this.invoke(e,t);else{const r=Bw._convertInputToPromptValue(e).toChatMessages(),[i,o]=this._separateRunnableConfigFromCallOptionsCompat(t),s={...i.metadata,...this.getLsParams(o)},a=await ab.configure(i.callbacks,this.callbacks,i.tags,this.tags,s,this.metadata,{verbose:this.verbose}),l={options:o,invocation_params:this?.invocationParams(o),batch_size:1},c=await(a?.handleChatModelStart(this.toJSON(),[r],i.runId,void 0,l,void 0,void 0,i.runName));let u,d;try{for await(const e of this._streamResponseChunks(r,o,c?.[0])){if(null==e.message.id){const t=c?.at(0)?.runId;null!=t&&e.message._updateId(`run-${t}`)}e.message.response_metadata={...e.generationInfo,...e.message.response_metadata},yield e.message,u=u?u.concat(e):e,Lg(e.message)&&void 0!==e.message.usage_metadata&&(d={tokenUsage:{promptTokens:e.message.usage_metadata.input_tokens,completionTokens:e.message.usage_metadata.output_tokens,totalTokens:e.message.usage_metadata.total_tokens}})}}catch(n){throw await Promise.all((c??[]).map((e=>e?.handleLLMError(n)))),n}await Promise.all((c??[]).map((e=>e?.handleLLMEnd({generations:[[u]],llmOutput:d}))))}}getLsParams(e){return{ls_model_type:"chat",ls_stop:e.stop}}async _generateUncached(e,t,n){const r=e.map((e=>e.map(Zg))),i={...n.metadata,...this.getLsParams(t)},o=await ab.configure(n.callbacks,this.callbacks,n.tags,this.tags,i,this.metadata,{verbose:this.verbose}),s={options:t,invocation_params:this?.invocationParams(t),batch_size:1},a=await(o?.handleChatModelStart(this.toJSON(),r,n.runId,void 0,s,void 0,void 0,n.runName)),l=[],c=[];if(!!a?.[0].handlers.find((e=>Nb(e)||wb(e)))&&1===r.length&&this._streamResponseChunks!==Bw.prototype._streamResponseChunks)try{const e=await this._streamResponseChunks(r[0],t,a?.[0]);let n,i;for await(const t of e){if(null==t.message.id){const e=a?.at(0)?.runId;null!=e&&t.message._updateId(`run-${e}`)}n=void 0===n?t:gb(n,t),Lg(t.message)&&void 0!==t.message.usage_metadata&&(i={tokenUsage:{promptTokens:t.message.usage_metadata.input_tokens,completionTokens:t.message.usage_metadata.output_tokens,totalTokens:t.message.usage_metadata.total_tokens}})}if(void 0===n)throw new Error("Received empty response from chat model call.");l.push([n]),await(a?.[0].handleLLMEnd({generations:l,llmOutput:i}))}catch(RN){throw await(a?.[0].handleLLMError(RN)),RN}else{const e=await Promise.allSettled(r.map(((e,n)=>this._generate(e,{...t,promptIndex:n},a?.[n]))));await Promise.all(e.map((async(e,t)=>{if("fulfilled"===e.status){const n=e.value;for(const e of n.generations){if(null==e.message.id){const t=a?.at(0)?.runId;null!=t&&e.message._updateId(`run-${t}`)}e.message.response_metadata={...e.generationInfo,...e.message.response_metadata}}return 1===n.generations.length&&(n.generations[0].message.response_metadata={...n.llmOutput,...n.generations[0].message.response_metadata}),l[t]=n.generations,c[t]=n.llmOutput,a?.[t]?.handleLLMEnd({generations:[n.generations],llmOutput:n.llmOutput})}return await(a?.[t]?.handleLLMError(e.reason)),Promise.reject(e.reason)})))}const u={generations:l,llmOutput:c.length?this._combineLLMOutput?.(...c):void 0};return Object.defineProperty(u,_b,{value:a?{runIds:a?.map((e=>e.runId))}:void 0,configurable:!0}),u}async _generateCached(e){let{messages:t,cache:n,llmStringKey:r,parsedOptions:i,handledOptions:o}=e;const s=t.map((e=>e.map(Zg))),a={...o.metadata,...this.getLsParams(i)},l=await ab.configure(o.callbacks,this.callbacks,o.tags,this.tags,a,this.metadata,{verbose:this.verbose}),c={options:i,invocation_params:this?.invocationParams(i),batch_size:1,cached:!0},u=await(l?.handleChatModelStart(this.toJSON(),s,o.runId,void 0,c,void 0,void 0,o.runName)),d=[],h=await Promise.allSettled(s.map((async(e,t)=>{const i=Bw._convertInputToPromptValue(e).toString(),o=await n.lookup(i,r);return null==o&&d.push(t),o}))),p=h.map(((e,t)=>({result:e,runManager:u?.[t]}))).filter((e=>{let{result:t}=e;return"fulfilled"===t.status&&null!=t.value||"rejected"===t.status})),f=[];await Promise.all(p.map((async(e,t)=>{let{result:n,runManager:r}=e;if("fulfilled"===n.status){const e=n.value;return f[t]=e,e.length&&await(r?.handleLLMNewToken(e[0].text)),r?.handleLLMEnd({generations:[e]})}return await(r?.handleLLMError(n.reason)),Promise.reject(n.reason)})));const m={generations:f,missingPromptIndices:d};return Object.defineProperty(m,_b,{value:u?{runIds:u?.map((e=>e.runId))}:void 0,configurable:!0}),m}async generate(e,t,n){let r;r=Array.isArray(t)?{stop:t}:t;const i=e.map((e=>e.map(Zg))),[o,s]=this._separateRunnableConfigFromCallOptionsCompat(r);if(o.callbacks=o.callbacks??n,!this.cache)return this._generateUncached(i,s,o);const{cache:a}=this,l=this._getSerializedCacheKeyParametersForCall(s),{generations:c,missingPromptIndices:u}=await this._generateCached({messages:i,cache:a,llmStringKey:l,parsedOptions:s,handledOptions:o});let d={};if(u.length>0){const e=await this._generateUncached(u.map((e=>i[e])),s,o);await Promise.all(e.generations.map((async(e,t)=>{const n=u[t];c[n]=e;const r=Bw._convertInputToPromptValue(i[n]).toString();return a.update(r,l,e)}))),d=e.llmOutput??{}}return{generations:c,llmOutput:d}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,t,n){const r=e.map((e=>e.toChatMessages()));return this.generate(r,t,n)}async call(e,t,n){return(await this.generate([e.map(Zg)],t,n)).generations[0][0].message}async callPrompt(e,t,n){const r=e.toChatMessages();return this.call(r,t,n)}async predictMessages(e,t,n){return this.call(e,t,n)}async predict(e,t,n){const r=new Ug(e),i=await this.call([r],t,n);if("string"!==typeof i.content)throw new Error("Cannot use predict when output is not a string.");return i.content}withStructuredOutput(e,t){if("function"!==typeof this.bindTools)throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');const n=e,r=t?.name,i=n.description??"A function available to call.",o=t?.method,s=t?.includeRaw;if("jsonMode"===o)throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let a,l=r??"extract";Fw(n)?a=[{type:"function",function:{name:l,description:i,parameters:vg(n)}}]:("name"in n&&(l=n.name),a=[{type:"function",function:{name:l,description:i,parameters:n}}]);const c=this.bindTools(a),u=aw.from((e=>{if(!e.tool_calls||0===e.tool_calls.length)throw new Error("No tool calls found in the response.");const t=e.tool_calls.find((e=>e.name===l));if(!t)throw new Error(`No tool call found with name ${l}.`);return t.args}));if(!s)return c.pipe(u).withConfig({runName:"StructuredOutput"});const d=zw.assign({parsed:(e,t)=>u.invoke(e.raw,t)}),h=zw.assign({parsed:()=>null}),p=d.withFallbacks({fallbacks:[h]});return iw.from([{raw:c},p]).withConfig({runName:"StructuredOutputRunnable"})}}const Uw="0.5.0";let Hw,Vw,Ww,qw,Jw,Kw,Gw,Zw,Yw,Xw=!1,Qw=null,ex=null,tx=null,nx=null;class rx{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}Hw||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{auto:!1};if(Xw)throw new Error(`you must \`import 'groq-sdk/shims/${e.kind}'\` before importing anything else from groq-sdk`);if(Hw)throw new Error(`can't \`import 'groq-sdk/shims/${e.kind}'\` after \`import 'groq-sdk/shims/${Hw}'\``);Xw=t.auto,Hw=e.kind,Vw=e.fetch,Qw=e.Request,ex=e.Response,tx=e.Headers,Ww=e.FormData,nx=e.Blob,qw=e.File,Jw=e.ReadableStream,Kw=e.getMultipartRequestOptions,Gw=e.getDefaultAgent,Zw=e.fileFromPath,Yw=e.isFsReadStream}(function(){let{manuallyImported:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e?"You may need to use polyfills":"Add one of these imports before your first `import \u2026 from 'groq-sdk'`:\n- `import 'groq-sdk/shims/node'` (if you're running on Node)\n- `import 'groq-sdk/shims/web'` (otherwise)\n";let n,r,i,o;try{n=fetch,r=Request,i=Response,o=Headers}catch(s){throw new Error(`this environment is missing the following Web Fetch API type: ${s.message}. ${t}`)}return{kind:"web",fetch:n,Request:r,Response:i,Headers:o,FormData:"undefined"!==typeof FormData?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:"undefined"!==typeof Blob?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:"undefined"!==typeof File?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:"undefined"!==typeof ReadableStream?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(e,t)=>({...t,body:new rx(e)}),getDefaultAgent:e=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/groq/groq-typescript#file-uploads")},isFsReadStream:e=>!1}}(),{auto:!0});class ix extends Error{}class ox extends ix{constructor(e,t,n,r){super(`${ox.makeMessage(e,t,n)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,n){const r=t?.message?"string"===typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,n,r){if(!e)return new ax({cause:Jx(t)});const i=t;return 400===e?new cx(e,i,n,r):401===e?new ux(e,i,n,r):403===e?new dx(e,i,n,r):404===e?new hx(e,i,n,r):409===e?new px(e,i,n,r):422===e?new fx(e,i,n,r):429===e?new mx(e,i,n,r):e>=500?new gx(e,i,n,r):new ox(e,i,n,r)}}class sx extends ox{constructor(){let{message:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class ax extends ox{constructor(e){let{message:t,cause:n}=e;super(void 0,void 0,t||"Connection error.",void 0),this.status=void 0,n&&(this.cause=n)}}class lx extends ax{constructor(){let{message:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({message:e??"Request timed out."})}}class cx extends ox{constructor(){super(...arguments),this.status=400}}class ux extends ox{constructor(){super(...arguments),this.status=401}}class dx extends ox{constructor(){super(...arguments),this.status=403}}class hx extends ox{constructor(){super(...arguments),this.status=404}}class px extends ox{constructor(){super(...arguments),this.status=409}}class fx extends ox{constructor(){super(...arguments),this.status=422}}class mx extends ox{constructor(){super(...arguments),this.status=429}}class gx extends ox{}class yx{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let n=!1;const r=new vx;return new yx((async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let i=!1;try{for await(const n of async function*(){if(!e.body)throw t.abort(),new ix("Attempted to iterate over a response with no body");const n=new bx,i=wx(e.body);for await(const e of i)for(const t of n.decode(e)){const e=r.decode(t);e&&(yield e)}for(const e of n.flush()){const t=r.decode(e);t&&(yield t)}}())if(!i)if(n.data.startsWith("[DONE]"))i=!0;else if(null===n.event){let e;try{e=JSON.parse(n.data)}catch(RN){throw console.error("Could not parse message into JSON:",n.data),console.error("From chunk:",n.raw),RN}if(e&&e.error)throw new ox(void 0,e.error,void 0,void 0);yield e}i=!0}catch(RN){if(RN instanceof Error&&"AbortError"===RN.name)return;throw RN}finally{i||t.abort()}}),t)}static fromReadableStream(e,t){let n=!1;return new yx((async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const t of async function*(){const t=new bx,n=wx(e);for await(const e of n)for(const n of t.decode(e))yield n;for(const e of t.flush())yield e}())r||t&&(yield JSON.parse(t));r=!0}catch(RN){if(RN instanceof Error&&"AbortError"===RN.name)return;throw RN}finally{r||t.abort()}}),t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),r=r=>({next:()=>{if(0===r.length){const r=n.next();e.push(r),t.push(r)}return r.shift()}});return[new yx((()=>r(e)),this.controller),new yx((()=>r(t)),this.controller)]}toReadableStream(){const e=this;let t;const n=new TextEncoder;return new Jw({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:r,done:i}=await t.next();if(i)return e.close();const o=n.encode(JSON.stringify(r)+"\n");e.enqueue(o)}catch(r){e.error(r)}},async cancel(){await(t.return?.())}})}}class vx{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,r]=function(e,t){const n=e.indexOf(t);if(-1!==n)return[e.substring(0,n),t,e.substring(n+t.length)];return[e,"",""]}(e,":");return r.startsWith(" ")&&(r=r.substring(1)),"event"===t?this.event=r:"data"===t&&this.data.push(r),null}}class bx{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];const n=bx.NEWLINE_CHARS.has(t[t.length-1]||"");let r=t.split(bx.NEWLINE_REGEXP);return 1!==r.length||n?(this.buffer.length>0&&(r=[this.buffer.join("")+r[0],...r.slice(1)],this.buffer=[]),n||(this.buffer=[r.pop()||""]),r):(this.buffer.push(r[0]),[])}decodeText(e){if(null==e)return"";if("string"===typeof e)return e;if("undefined"!==typeof Buffer){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new ix(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if("undefined"!==typeof TextDecoder){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new ix(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new ix("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}function wx(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return e?.done&&t.releaseLock(),e}catch(RN){throw t.releaseLock(),RN}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}bx.NEWLINE_CHARS=new Set(["\n","\r","\v","\f","\x1c","\x1d","\x1e","\x85","\u2028","\u2029"]),bx.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;const xx=e=>null!=e&&"object"===typeof e&&"string"===typeof e.url&&"function"===typeof e.blob,kx=e=>null!=e&&"object"===typeof e&&"string"===typeof e.name&&"number"===typeof e.lastModified&&Sx(e),Sx=e=>null!=e&&"object"===typeof e&&"number"===typeof e.size&&"string"===typeof e.type&&"function"===typeof e.text&&"function"===typeof e.slice&&"function"===typeof e.arrayBuffer,_x=e=>kx(e)||xx(e)||Yw(e);async function Ex(e,t,n){if(e=await e,n??(n=kx(e)?{lastModified:e.lastModified,type:e.type}:{}),xx(e)){const r=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new qw([r],t,n)}const r=await async function(e){let t=[];if("string"===typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(Sx(e))t.push(await e.arrayBuffer());else{if(!Ox(e))throw new Error(`Unexpected data type: ${typeof e}; constructor: ${e?.constructor?.name}; props: ${function(e){const t=Object.getOwnPropertyNames(e);return`[${t.map((e=>`"${e}"`)).join(", ")}]`}(e)}`);for await(const n of e)t.push(n)}return t}(e);if(t||(t=function(e){return Cx(e.name)||Cx(e.filename)||Cx(e.path)?.split(/[\\/]/).pop()}(e)??"unknown_file"),!n.type){const e=r[0]?.type;"string"===typeof e&&(n={...n,type:e})}return new qw(r,t,n)}const Cx=e=>"string"===typeof e?e:"undefined"!==typeof Buffer&&e instanceof Buffer?String(e):void 0,Ox=e=>null!=e&&"object"===typeof e&&"function"===typeof e[Symbol.asyncIterator],Nx=e=>e&&"object"===typeof e&&e.body&&"MultipartBody"===e[Symbol.toStringTag],Tx=async e=>{const t=await Ax(e.body);return Kw(t,e)},Ax=async e=>{const t=new Ww;return await Promise.all(Object.entries(e||{}).map((e=>{let[n,r]=e;return jx(t,n,r)}))),t},jx=async(e,t,n)=>{if(void 0!==n){if(null==n)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"===typeof n||"number"===typeof n||"boolean"===typeof n)e.append(t,String(n));else if(_x(n)){const r=await Ex(n);e.append(t,r)}else if(Array.isArray(n))await Promise.all(n.map((n=>jx(e,t+"[]",n))));else{if("object"!==typeof n)throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`);await Promise.all(Object.entries(n).map((n=>{let[r,i]=n;return jx(e,`${t}[${r}]`,i)})))}}};async function Px(e){const{response:t}=e;if(e.options.stream)return Xx("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller):yx.fromSSEResponse(t,e.controller);if(204===t.status)return null;if(e.options.__binaryResponse)return t;const n=t.headers.get("content-type");if(n?.includes("application/json")||n?.includes("application/vnd.api+json")){const e=await t.json();return Xx("response",t.status,t.url,t.headers,e),e}const r=await t.text();return Xx("response",t.status,t.url,t.headers,r),r}class Ix extends Promise{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Px;super((e=>{e(null)})),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new Ix(this.responsePromise,(async t=>e(await this.parseResponse(t))))}asResponse(){return this.responsePromise.then((e=>e.response))}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class Rx{constructor(e){let{baseURL:t,maxRetries:n=2,timeout:r=6e4,httpAgent:i,fetch:o}=e;this.baseURL=t,this.maxRetries=qx("maxRetries",n),this.timeout=qx("timeout",r),this.httpAgent=i,this.fetch=o??Vw}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...Bx(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${Qx()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then((async n=>{const r=n&&Sx(n?.body)?new DataView(await n.body.arrayBuffer()):n?.body instanceof DataView?n.body:n?.body instanceof ArrayBuffer?new DataView(n.body):n&&ArrayBuffer.isView(n?.body)?new DataView(n.body.buffer):n?.body;return{method:e,path:t,...n,body:r}})))}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}calculateContentLength(e){if("string"===typeof e){if("undefined"!==typeof Buffer)return Buffer.byteLength(e,"utf8").toString();if("undefined"!==typeof TextEncoder){return(new TextEncoder).encode(e).length.toString()}}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e){const{method:t,path:n,query:r,headers:i={}}=e,o=ArrayBuffer.isView(e.body)||e.__binaryRequest&&"string"===typeof e.body?e.body:Nx(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,s=this.calculateContentLength(o),a=this.buildURL(n,r);"timeout"in e&&qx("timeout",e.timeout);const l=e.timeout??this.timeout,c=e.httpAgent??this.httpAgent??Gw(a),u=l+1e3;"number"===typeof c?.options?.timeout&&u>(c.options.timeout??0)&&(c.options.timeout=u),this.idempotencyHeader&&"get"!==t&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),i[this.idempotencyHeader]=e.idempotencyKey);return{req:{method:t,...o&&{body:o},headers:this.buildHeaders({options:e,headers:i,contentLength:s}),...c&&{agent:c},signal:e.signal??null},url:a,timeout:l}}buildHeaders(e){let{options:t,headers:n,contentLength:r}=e;const i={};r&&(i["content-length"]=r);return Yx(i,this.defaultHeaders(t)),Yx(i,n),Nx(t.body)&&"node"!==Hw&&delete i["content-type"],this.validateHeaders(i,n),i}async prepareOptions(e){}async prepareRequest(e,t){let{url:n,options:r}=t}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map((e=>[...e]))):{...e}:{}}makeStatusError(e,t,n,r){return ox.generate(e,t,n,r)}request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Ix(this.makeRequest(e,t))}async makeRequest(e,t){const n=await e;null==t&&(t=n.maxRetries??this.maxRetries),await this.prepareOptions(n);const{req:r,url:i,timeout:o}=this.buildRequest(n);if(await this.prepareRequest(r,{url:i,options:n}),Xx("request",i,n,r.headers),n.signal?.aborted)throw new sx;const s=new AbortController,a=await this.fetchWithTimeout(i,r,o,s).catch(Jx);if(a instanceof Error){if(n.signal?.aborted)throw new sx;if(t)return this.retryRequest(n,t);if("AbortError"===a.name)throw new lx;throw new ax({cause:a})}const l=$x(a.headers);if(!a.ok){if(t&&this.shouldRetry(a)){return Xx(`response (error; ${`retrying, ${t} attempts remaining`})`,a.status,i,l),this.retryRequest(n,t,l)}const e=await a.text().catch((e=>Jx(e).message)),r=Ux(e),o=r?void 0:e;Xx(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,a.status,i,l,o);throw this.makeStatusError(a.status,r,o,l)}return{response:a,options:n,controller:s}}requestAPIList(e,t){const n=this.makeRequest(t,null);return new Mx(this,n,e)}buildURL(e,t){const n=Vx(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return Gx(r)||(t={...r,...t}),"object"===typeof t&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}stringifyQuery(e){return Object.entries(e).filter((e=>{let[t,n]=e;return"undefined"!==typeof n})).map((e=>{let[t,n]=e;if("string"===typeof n||"number"===typeof n||"boolean"===typeof n)return`${encodeURIComponent(t)}=${encodeURIComponent(n)}`;if(null===n)return`${encodeURIComponent(t)}=`;throw new ix(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)})).join("&")}async fetchWithTimeout(e,t,n,r){const{signal:i,...o}=t||{};i&&i.addEventListener("abort",(()=>r.abort()));const s=setTimeout((()=>r.abort()),n);return this.getRequestClient().fetch.call(void 0,e,{signal:r.signal,...o}).finally((()=>{clearTimeout(s)}))}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||(409===e.status||(429===e.status||e.status>=500)))}async retryRequest(e,t,n){let r;const i=n?.["retry-after-ms"];if(i){const e=parseFloat(i);Number.isNaN(e)||(r=e)}const o=n?.["retry-after"];if(o&&!r){const e=parseFloat(o);r=Number.isNaN(e)?Date.parse(o)-Date.now():1e3*e}if(!(r&&0<=r&&r<6e4)){const n=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(t,n)}return await Wx(r),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const n=t-e;return Math.min(.5*Math.pow(2,n),8)*(1-.25*Math.random())*1e3}getUserAgent(){return`${this.constructor.name}/JS ${Uw}`}}new WeakMap,Symbol.asyncIterator;class Mx extends Ix{constructor(e,t,n){super(t,(async t=>new n(e,t.response,await Px(t),t.options)))}async*[Symbol.asyncIterator](){const e=await(this);for await(const t of e)yield t}}const $x=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){const n=t.toString();return e[n.toLowerCase()]||e[n]}}),Lx=()=>{if("undefined"!==typeof Deno&&null!=Deno.build)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Uw,"X-Stainless-OS":zx(Deno.build.os),"X-Stainless-Arch":Dx(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"===typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!==typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Uw,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if("[object process]"===Object.prototype.toString.call("undefined"!==typeof process?process:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Uw,"X-Stainless-OS":zx(process.platform),"X-Stainless-Arch":Dx(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=function(){if("undefined"===typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const e=n.exec(navigator.userAgent);if(e){return{browser:t,version:`${e[1]||0}.${e[2]||0}.${e[3]||0}`}}}return null}();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Uw,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Uw,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};const Dx=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",zx=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";let Fx;const Bx=()=>Fx??(Fx=Lx()),Ux=e=>{try{return JSON.parse(e)}catch(t){return}},Hx=new RegExp("^(?:[a-z]+:)?//","i"),Vx=e=>Hx.test(e),Wx=e=>new Promise((t=>setTimeout(t,e))),qx=(e,t)=>{if("number"!==typeof t||!Number.isInteger(t))throw new ix(`${e} must be an integer`);if(t<0)throw new ix(`${e} must be a positive integer`);return t},Jx=e=>e instanceof Error?e:new Error(e),Kx=e=>"undefined"!==typeof process?{NODE_ENV:"production",PUBLIC_URL:"/login",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"http://localhost:5000/api",REACT_APP_GROQ_API_KEY:"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",REACT_APP_SOCKET_URL:"http://localhost:5000"}?.[e]?.trim()??void 0:"undefined"!==typeof Deno?Deno.env?.get?.(e)?.trim():void 0;function Gx(e){if(!e)return!0;for(const t in e)return!1;return!0}function Zx(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Yx(e,t){for(const n in t){if(!Zx(t,n))continue;const r=n.toLowerCase();if(!r)continue;const i=t[n];null===i?delete e[r]:void 0!==i&&(e[r]=i)}}function Xx(e){if("undefined"!==typeof process&&"true"==={NODE_ENV:"production",PUBLIC_URL:"/login",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"http://localhost:5000/api",REACT_APP_GROQ_API_KEY:"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",REACT_APP_SOCKET_URL:"http://localhost:5000"}?.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];console.log(`Groq:DEBUG:${e}`,...n)}}const Qx=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));class ek{constructor(e){this._client=e}}class tk extends ek{}tk||(tk={});class nk extends ek{create(e,t){return this._client.post("/openai/v1/chat/completions",{body:e,...t,stream:e.stream??!1})}}nk||(nk={});class rk extends ek{constructor(){super(...arguments),this.completions=new nk(this._client)}}!function(e){e.Completions=nk}(rk||(rk={}));class ik extends ek{create(e,t){return this._client.post("/openai/v1/embeddings",{body:e,...t})}}ik||(ik={});class ok extends ek{create(e,t){return this._client.post("/openai/v1/audio/transcriptions",Tx({body:e,...t}))}}ok||(ok={});class sk extends ek{create(e,t){return this._client.post("/openai/v1/audio/translations",Tx({body:e,...t}))}}sk||(sk={});class ak extends ek{constructor(){super(...arguments),this.transcriptions=new ok(this._client),this.translations=new sk(this._client)}}!function(e){e.Transcriptions=ok,e.Translations=sk}(ak||(ak={}));class lk extends ek{retrieve(e,t){return this._client.get(`/openai/v1/models/${e}`,t)}list(e){return this._client.get("/openai/v1/models",e)}delete(e,t){return this._client.delete(`/openai/v1/models/${e}`,t)}}var ck;lk||(lk={});class uk extends Rx{constructor(){let{baseURL:e=Kx("GROQ_BASE_URL"),apiKey:t=Kx("GROQ_API_KEY"),...n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(void 0===t)throw new ix("The GROQ_API_KEY environment variable is missing or empty; either provide it, or instantiate the Groq client with an apiKey option, like new Groq({ apiKey: 'My API Key' }).");const r={apiKey:t,...n,baseURL:e||"https://api.groq.com"};if(!r.dangerouslyAllowBrowser&&"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof navigator)throw new ix("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew Groq({ apiKey, dangerouslyAllowBrowser: true })");super({baseURL:r.baseURL,timeout:r.timeout??6e4,httpAgent:r.httpAgent,maxRetries:r.maxRetries,fetch:r.fetch}),this.completions=new tk(this),this.chat=new rk(this),this.embeddings=new ik(this),this.audio=new ak(this),this.models=new lk(this),this._options=r,this.apiKey=t}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}ck=uk,uk.Groq=ck,uk.GroqError=ix,uk.APIError=ox,uk.APIConnectionError=ax,uk.APIConnectionTimeoutError=lx,uk.APIUserAbortError=sx,uk.NotFoundError=hx,uk.ConflictError=px,uk.RateLimitError=mx,uk.BadRequestError=cx,uk.AuthenticationError=ux,uk.InternalServerError=gx,uk.PermissionDeniedError=dx,uk.UnprocessableEntityError=fx,uk.toFile=Ex,uk.fileFromPath=Zw;const{i7:dk,LG:hk,xX:pk,qA:fk,cH:mk,m_:gk,fK:yk,OE:vk,v7:bk,v3:wk,PO:xk,Ll:kk,Is:Sk}=r;!function(e){e.Completions=tk,e.Chat=rk,e.Embeddings=ik,e.Audio=ak,e.Models=lk}(uk||(uk={}));const _k=uk;class Ek extends ew{parseResultWithPrompt(e,t,n){return this.parseResult(e,n)}_baseMessageToString(e){return"string"===typeof e.content?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}async invoke(e,t){return"string"===typeof e?this._callWithConfig((async(e,t)=>this.parseResult([{text:e}],t?.callbacks)),e,{...t,runType:"parser"}):this._callWithConfig((async(e,t)=>this.parseResult([{message:e,text:this._baseMessageToString(e)}],t?.callbacks)),e,{...t,runType:"parser"})}}class Ck extends Ek{parseResult(e,t){return this.parse(e[0].text,t)}async parseWithPrompt(e,t,n){return this.parse(e,n)}_type(){throw new Error("_type not implemented")}}class Ok extends Error{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(super(e),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=t,this.observation=n,this.sendToLLM=r,r&&(void 0===n||void 0===t))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true")}}function Nk(e,t){const n=typeof e;if(n!==typeof t)return!1;if(Array.isArray(e)){if(!Array.isArray(t))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(!Nk(e[r],t[r]))return!1;return!0}if("object"===n){if(!e||!t)return e===t;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const i of n)if(!Nk(e[i],t[i]))return!1;return!0}return e===t}"undefined"!==typeof self&&self.location&&"null"!==self.location.origin&&(self.location.origin,self.location.pathname,location.search);const Tk=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Ak=[0,31,28,31,30,31,30,31,31,30,31,30,31],jk=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,Pk=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,Ik=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,Rk=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,Mk=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)(?:\.(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,$k=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,Lk=/^(?:\/(?:[^~/]|~0|~1)*)*$/,Dk=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,zk=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,Fk=/^\d\d\d\d-[0-1]\d-[0-3]\d$/,Bk=/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,Uk=/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,Hk=/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,Vk=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,Wk=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i;function qk(e){return e.test.bind(e)}function Jk(e){const t=e.match(Tk);if(!t)return!1;const n=+t[1],r=+t[2],i=+t[3];return r>=1&&r<=12&&i>=1&&i<=(2==r&&function(e){return e%4===0&&(e%100!==0||e%400===0)}(n)?29:Ak[r])}function Kk(e,t){const n=t.match(jk);if(!n)return!1;const r=+n[1],i=+n[2],o=+n[3],s=!!n[5];return(r<=23&&i<=59&&o<=59||23==r&&59==i&&60==o)&&(!e||s)}const Gk=/t|\s/i;const Zk=/\/|:/,Yk=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;const Xk=/[^\\]\\Z/;class Qk extends Ck{async*_transform(e){for await(const t of e)"string"===typeof t?yield this.parseResult([{text:t}]):yield this.parseResult([{message:t,text:this._baseMessageToString(t)}])}async*transform(e,t){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...t,runType:"parser"})}}class eS extends Qk{constructor(e){super(e),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=e?.diff??this.diff}async*_transform(e){let t,n;for await(const i of e){if("string"!==typeof i&&"string"!==typeof i.content)throw new Error("Cannot handle non-string output.");let e;if(Ig(r=i)&&"function"===typeof r.concat){if("string"!==typeof i.content)throw new Error("Cannot handle non-string message output.");e=new Cb({message:i,text:i.content})}else if(Ig(i)){if("string"!==typeof i.content)throw new Error("Cannot handle non-string message output.");e=new Cb({message:Xg(i),text:i.content})}else e=new Eb({text:i});n=void 0===n?e:n.concat(e);const o=await this.parsePartialResult([n]);void 0===o||null===o||Nk(o,t)||(this.diff?yield this._diff(t,o):yield o,t=o)}var r}getFormatInstructions(){return""}}class tS extends Ck{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){return new this(Ym.object(Object.fromEntries(Object.entries(e).map((e=>{let[t,n]=e;return[t,Ym.string().describe(n)]})))))}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.\n\n"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.\n\nFor example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}}}\nwould match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.\nThus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.\n\nYour output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!\n\nHere is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:\n\`\`\`json\n${JSON.stringify(vg(this.schema))}\n\`\`\`\n`}async parse(e){try{const t=(e.includes("```")?e.trim().split(/```(?:json)?/)[1]:e.trim()).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,((e,t)=>`"${t.replace(/\n/g,"\\n")}"`)).replace(/\n/g,"");return await this.schema.parseAsync(JSON.parse(t))}catch(RN){throw new Ok(`Failed to parse. Text: "${e}". Error: ${RN}`,e)}}}class nS extends eS{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputParser"}_diff(e,t){if(t)return e?Ry(e,t):[{op:"replace",path:"",value:t}]}async parsePartialResult(e){return bg(e[0].text)}async parse(e){return bg(e,JSON.parse)}getFormatInstructions(){return""}}function rS(e,t){if(void 0===e.function)return;let n;if(t?.partial)try{n=wg(e.function.arguments??"{}")}catch(RN){return}else try{n=JSON.parse(e.function.arguments)}catch(RN){throw new Ok([`Function "${e.function.name}" arguments:`,"",e.function.arguments,"","are not valid JSON.",`Error: ${RN.message}`].join("\n"))}const r={name:e.function.name,args:n,type:"tool_call"};return t?.returnId&&(r.id=e.id),r}function iS(e){if(void 0===e.id)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:e.id,type:"function",function:{name:e.name,arguments:JSON.stringify(e.args)}}}function oS(e,t){return{name:e.function?.name,args:e.function?.arguments,id:e.id,error:t,type:"invalid_tool_call"}}class sS extends eS{static lc_name(){return"JsonOutputToolsParser"}constructor(e){super(e),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.returnId=e?.returnId??this.returnId}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=e[0].message;let r;if($g(n)&&n.tool_calls?.length)r=n.tool_calls.map((e=>{const{id:t,...n}=e;return this.returnId?{id:t,...n}:n}));else if(void 0!==n.additional_kwargs.tool_calls){r=JSON.parse(JSON.stringify(n.additional_kwargs.tool_calls)).map((e=>rS(e,{returnId:this.returnId,partial:t})))}if(!r)return[];const i=[];for(const o of r)if(void 0!==o){const e={type:o.name,args:o.args,id:o.id};i.push(e)}return i}}class aS extends sS{static lc_name(){return"JsonOutputKeyToolsParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){if(void 0===this.zodSchema)return e;const t=await this.zodSchema.safeParseAsync(e);if(t.success)return t.data;throw new Ok(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(t.error.errors)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){const t=(await super.parsePartialResult(e)).filter((e=>e.type===this.keyName));let n=t;if(t.length)return this.returnId||(n=t.map((e=>e.args))),this.returnSingle?n[0]:n}async parseResult(e){const t=(await super.parsePartialResult(e,!1)).filter((e=>e.type===this.keyName));let n=t;if(!t.length)return;if(this.returnId||(n=t.map((e=>e.args))),this.returnSingle)return this._validateResult(n[0]);const r=await Promise.all(n.map((e=>this._validateResult(e))));return r}}function lS(e,t){const n="number"===typeof t?void 0:t;return{name:e.name,description:e.description,parameters:vg(e.schema),...void 0!==n?.strict?{strict:n.strict}:{}}}function cS(e,t){const n="number"===typeof t?void 0:t;let r;return r=function(e){return function(e){return!!e&&"object"===typeof e&&"name"in e&&"schema"in e&&Fw(e.schema)}(e)||function(e){return void 0!==e&&ew.isRunnable(e)&&"lc_name"in e.constructor&&"function"===typeof e.constructor.lc_name&&"RunnableToolLike"===e.constructor.lc_name()}(e)||function(e){return void 0!==e&&Array.isArray(e.lc_namespace)}(e)}(e)?{type:"function",function:lS(e)}:e,void 0!==n?.strict&&(r.function.strict=n.strict),r}function uS(e){const t=e._getType();switch(t){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";default:throw new Error(`Unknown message type: ${t}`)}}function dS(e){return e.map((e=>{if("string"!==typeof e.content)throw new Error("Non string message content not supported");const t={role:uS(e),content:e.content,name:e.name,function_call:e.additional_kwargs.function_call,tool_calls:e.additional_kwargs.tool_calls,tool_call_id:e.tool_call_id};return $g(e)&&e.tool_calls?.length?t.tool_calls=e.tool_calls.map(iS):(null!=e.additional_kwargs.tool_calls&&(t.tool_calls=e.additional_kwargs.tool_calls),null!=e.tool_call_id&&(t.tool_call_id=e.tool_call_id)),t}))}function hS(e,t){const n=e.tool_calls;if("assistant"===e.role){const r=[],i=[];for(const e of n??[])try{r.push(rS(e,{returnId:!0}))}catch(RN){i.push(oS(e,RN.message))}return new Mg({content:e.content||"",additional_kwargs:{tool_calls:n},tool_calls:r,invalid_tool_calls:i,usage_metadata:t})}return new zg(e.content||"",e.role??"unknown")}function pS(e,t,n){const{role:r}=e,i=e.content??"";let o,s,a;if(o=e.function_call?{function_call:e.function_call}:e.tool_calls?{tool_calls:e.tool_calls}:{},n?.usage&&(s={input_tokens:n.usage.prompt_tokens,output_tokens:n.usage.completion_tokens,total_tokens:n.usage.total_tokens},a=n.id),"user"===r)return{message:new Hg({content:i})};if("assistant"===r){const n=function(e,t){if(e?.length)return e.map((e=>({id:e.id,name:e.function?.name,args:e.function?.arguments,type:"tool_call_chunk",index:t})))}(e.tool_calls,t);return{message:new Dg({content:i,additional_kwargs:o,tool_call_chunks:n?n.map((e=>({type:e.type,args:e.args,index:e.index}))):void 0,usage_metadata:s,id:a}),toolCallData:n?n.map((e=>({id:e.id??"",name:e.name??"",index:e.index??t,type:"tool_call_chunk"}))):void 0}}return"system"===r?{message:new Wg({content:i})}:{message:new Fg({content:i,role:r})}}class fS extends Bw{static lc_name(){return"ChatGroq"}_llmType(){return"groq"}get lc_secrets(){return{apiKey:"GROQ_API_KEY"}}constructor(e){super(e??{}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models","groq"]}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:"mixtral-8x7b-32768"}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"mixtral-8x7b-32768"}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:.7}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0});const t=e?.apiKey||zy("GROQ_API_KEY");if(!t)throw new Error('Groq API key not found. Please set the GROQ_API_KEY environment variable or provide the key into "apiKey"');this.client=new _k({apiKey:t,dangerouslyAllowBrowser:!0}),this.apiKey=t,this.temperature=e?.temperature??this.temperature,this.modelName=e?.model??e?.modelName??this.model,this.model=this.modelName,this.streaming=e?.streaming??this.streaming,this.stop=e?.stopSequences??("string"===typeof e?.stop?[e.stop]:e?.stop)??[],this.stopSequences=this.stop,this.maxTokens=e?.maxTokens}getLsParams(e){const t=this.invocationParams(e);return{ls_provider:"groq",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:t.temperature??this.temperature,ls_max_tokens:t.max_tokens??this.maxTokens,ls_stop:e.stop}}async completionWithRetry(e,t){return this.caller.call((async()=>this.client.chat.completions.create(e,t)))}invocationParams(e){const t=super.invocationParams(e);return void 0!==e.tool_choice&&(t.tool_choice=e.tool_choice),void 0!==e.tools&&(t.tools=e.tools),void 0!==e.response_format&&(t.response_format=e.response_format),{...t,stop:e.stop??this.stopSequences,model:this.model,temperature:this.temperature,max_tokens:this.maxTokens}}bindTools(e,t){return this.bind({tools:e.map((e=>cS(e))),...t})}async*_streamResponseChunks(e,t,n){const r=this.invocationParams(t),i=dS(e),o=await this.completionWithRetry({...r,messages:i,stream:!0},{signal:t?.signal,headers:t?.headers});let s="";const a=[];let l;for await(const c of o){l=c;const e=c?.choices[0];if(!e)continue;e.delta?.role&&(s=e.delta.role);const{message:t,toolCallData:r}=pS({...e.delta,role:s}??{},e.index,c.x_groq);if(r){const e=r.filter((e=>a.every((t=>t.id!==e.id))));a.push(...e),yield new Cb({message:new Dg({content:"",tool_call_chunks:e}),text:""})}const i=new Cb({message:t,text:e.delta.content??"",generationInfo:{finishReason:e.finish_reason}});yield i,n?.handleLLMNewToken(i.text??"")}if(l&&("choices"in l&&delete l.choices,yield new Cb({message:new Dg({content:"",response_metadata:l}),text:""})),t.signal?.aborted)throw new Error("AbortError")}async _generate(e,t,n){if(this.streaming){const r={},i=this._streamResponseChunks(e,t,n),o={};for await(const e of i){const t=e.generationInfo?.completion??0;void 0===o[t]?o[t]=e:o[t]=o[t].concat(e)}const s=Object.entries(o).sort(((e,t)=>{let[n]=e,[r]=t;return parseInt(n,10)-parseInt(r,10)})).map((e=>{let[t,n]=e;return n}));return{generations:s,llmOutput:{estimatedTokenUsage:r}}}return this._generateNonStreaming(e,t,n)}async _generateNonStreaming(e,t,n){const r={},i=this.invocationParams(t),o=dS(e),s=await this.completionWithRetry({...i,stream:!1,messages:o},{signal:t?.signal,headers:t?.headers});if("usage"in s&&s.usage){const{completion_tokens:e,prompt_tokens:t,total_tokens:n}=s.usage;e&&(r.completionTokens=(r.completionTokens??0)+e),t&&(r.promptTokens=(r.promptTokens??0)+t),n&&(r.totalTokens=(r.totalTokens??0)+n)}const a=[];if("choices"in s&&s.choices)for(const l of s.choices){const e=l.message?.content??"";let t;void 0!==r.totalTokens&&(t={input_tokens:r.promptTokens??0,output_tokens:r.completionTokens??0,total_tokens:r.totalTokens});const n={text:e,message:hS(l.message??{role:"assistant"},t)};n.generationInfo={...l.finish_reason?{finish_reason:l.finish_reason}:{},...l.logprobs?{logprobs:l.logprobs}:{}},a.push(n)}return{generations:a,llmOutput:{tokenUsage:r}}}withStructuredOutput(e,t){const n=e,r=t?.name,i=t?.method,o=t?.includeRaw;let s,a,l=r??"extract";if("jsonMode"===i)a=this.bind({response_format:{type:"json_object"}}),s=Fw(n)?tS.fromZodSchema(n):new nS;else if(Fw(n)){const e=vg(n);a=this.bind({tools:[{type:"function",function:{name:l,description:e.description,parameters:e}}],tool_choice:{type:"function",function:{name:l}}}),s=new aS({returnSingle:!0,keyName:l,zodSchema:n})}else{let e;"string"===typeof n.name&&"object"===typeof n.parameters&&null!=n.parameters?(e=n,l=n.name):(l=n.title??l,e={name:l,description:n.description??"",parameters:n}),a=this.bind({tools:[{type:"function",function:e}],tool_choice:{type:"function",function:{name:l}}}),s=new aS({returnSingle:!0,keyName:l})}if(!o)return a.pipe(s).withConfig({runName:"ChatGroqStructuredOutput"});const c=zw.assign({parsed:(e,t)=>s.invoke(e.raw,t)}),u=zw.assign({parsed:()=>null}),d=c.withFallbacks({fallbacks:[u]});return iw.from([{raw:a},d]).withConfig({runName:"ChatGroqStructuredOutput"})}}var mS=n(1929),gS=n.n(mS);const yS=()=>{const e=oe(),[t,n]=(0,a.useState)(!1),[r,i]=(0,a.useState)(!1),[o,s]=(0,a.useState)(""),[l,c]=(0,a.useState)(""),u=(0,a.useRef)(null),[d,h]=(0,a.useState)(null),[p,f]=(0,a.useState)("discussion"),[m]=(0,a.useState)("100%"),[g,y]=(0,a.useState)(""),[v,b]=(0,a.useState)(""),[w,x]=(0,a.useState)(!1),[k,S]=(0,a.useState)(!1),[_,E]=(0,a.useState)([]),[C,O]=(0,a.useState)(!1),N=(0,a.useRef)(null),[T,A]=(0,a.useState)([]),[j,P]=(0,a.useState)(!1),I=(e,t)=>{const n=e.replace(/<[^>]*>/g,"").trim(),r=n.length,i=n.split(/\s+/).filter((e=>e.length>0)),o=i.length,s=n.split(/[.!?]+/).filter((e=>e.trim().length>0)).length,a=o>0?r/o:0,l=s>0?o/s:0,c=i.reduce(((e,t)=>e+(e=>{if((e=e.toLowerCase()).length<=3)return 1;const t=(e=(e=e.replace(/(?:[^laeiouy]es|ed|[^laeiouy]e)$/,"")).replace(/^y/,"")).match(/[aeiouy]{1,2}/g);return t?t.length:1})(t)),0),u=s>0&&o>0?o/s*.39+c/o*11.8-15.59:0;let d;return d=u<=5?"5th grade (Very easy to read)":u<=8?"8th grade (Easy to read)":u<=12?"12th grade (Fairly difficult to read)":u<=16?"College level (Difficult to read)":"Graduate level (Very difficult to read)",{characters:r,words:o,sentences:s,averageWordLength:a.toFixed(1),averageSentenceLength:l.toFixed(1),syllables:c,gradeLevel:u.toFixed(1),readabilityLevel:d,errorCount:t||0}},[R,M]=(0,a.useState)(I(""));(0,a.useEffect)((()=>{M(I(o,_.length))}),[o,_]);const $=e=>{let{statistics:t}=e;return(0,tr.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md",children:[(0,tr.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Text Statistics"}),(0,tr.jsxs)("p",{children:["Characters: ",t.characters]}),(0,tr.jsxs)("p",{children:["Words: ",t.words]}),(0,tr.jsxs)("p",{children:["Sentences: ",t.sentences]}),(0,tr.jsxs)("p",{children:["Average Word Length: ",t.averageWordLength," characters"]}),(0,tr.jsxs)("p",{children:["Average Sentence Length: ",t.averageSentenceLength," words"]}),(0,tr.jsxs)("p",{children:["Readability: Grade ",t.gradeLevel," (",t.readabilityLevel,")"]}),(0,tr.jsxs)("p",{children:["Errors Found: ",t.errorCount]})]})};(0,a.useEffect)((()=>{if(0===T.length){(async()=>{try{const e=await Qn.get("/prompts/all");A(e.data)}catch(e){console.error("Error fetching prompts:",e)}})()}}),[T]);const L=e=>{f(e)},D=(0,a.useCallback)((async()=>{if(l.trim())try{const e="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";if(!e)throw new Error("Groq API key not found");const t=new fS({apiKey:e,model:"llama3-8b-8192",temperature:0,maxTokens:void 0,maxRetries:2}),n=await t.invoke([{role:"system",content:"Generate an outline of an essay based on the user's title or topic. Only generate an essay outline, no greetings. Ensure the outline only guides the user to think. Use a simple structure with Roman numerals for main points and letters for subpoints."},{role:"user",content:l}]);console.log("Generated outline:",n.content);const r=n.content.split("\n").map((e=>e.trim().match(/^[IVX]+\./)?`<h2>${e.trim()}</h2>`:e.trim().match(/^[A-Z]\./)?`<p style="margin-left: 20px;">${e.trim()}</p>`:`<p>${e.trim()}</p>`)).join("");if(N.current&&N.current.editor){N.current.editor.commands.setContent(r)}s(r),i(!1)}catch(e){console.error("Outline generation error:",e),e.message.includes("API key")?i(!0):s("<p>Error: Outline generation failed</p>")}else alert("Please enter a title or topic before generating an outline.")}),[l]),z=(0,a.useCallback)((async e=>{if("argument"!==e||l.trim())if("sentence"!==e||o.trim())try{const t="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";if(!t)throw new Error("Groq API key not found");const n=new fS({apiKey:t,model:"llama3-8b-8192",temperature:.7,maxTokens:150,maxRetries:2});let r,i;"argument"===e?(r='You are an expert essay writer and critical thinker. Your task is to generate a list 3 options of strong, relevant arguments based on the given essay title. Follow these guidelines:\n        1. Analyze the title to identify the main topic and potential stance.\n        2. Propose a logical, well-reasoned argument that could support a position related to the title.\n        3. Ensure the argument is specific and could be supported by potential evidence or examples and is in question form. The argument should be to guide the users and make them think not allow to copy paste it into the essay.\n        4. Keep the suggestion concise, around 2-3 sentences max 100 words.\n        5. Use language that would flow well in an academic essay.\n        6. Never show greetings, never show anything EXCEPT the list of sentences, no "Here are three potential arguments that could be used in an essay on the topic:".\n        Example:\n        User: Animals hunt other animals, that is life.\n        You: \n        1. Physical Adaptations: \n        Do the unique physical adaptations of cats, such as their retractable claws and flexible spine, provide a distinct advantage in their ability to stalk and capture prey?\n\n        2. Enviromental Adapation and Hunting Instincts: \n        Can the success of feral cat populations in controlling pest populations be attributed to their natural hunting instincts and ability to adapt to their environment?\n\n        3. Stealth and Intelligence: \n        Is the stealth and patience required for hunting a key factor in the development of cats\' intelligence and problem-solving abilities, making them formidable predators?\n        ',i=`Here's the essay title:\n\n        "${l}"\n\n        Based on this title, suggest a strong argument that could be used in the essay.`):(r='You are an expert in essay writing and maintaining logical flow. Your task is to generate a list 3 options of logical next sentences that continues the essay\'s flow seamlessly. Follow these guidelines:\n        1. Analyze the current content and identify the direction of the argument or narrative.\n        2. Propose a sentence that naturally follows from the last paragraph or sentence.\n        3. Ensure the suggested sentence adds value, either by extending an idea, providing a transition, or introducing a new related point.\n        4. Match the tone and style of the existing content.\n        5. Keep the suggestion concise and impactful.\n        6. No greetings, no explanations, only show the list of sentences, no "here are the sentences".\n        Example:\n        User: Animals hunt other animals, that is life.\n        You: \n        1. This primal instinct has shaped the evolution of species, driving the development of unique adaptations and strategies for survival.\n\n        2. The hierarchical structure of the food chain, with predators at the top and prey at the bottom, is a direct result of this fundamental drive. \n\n        3. From the majestic lioness stalking her prey to the industrious ant working together to capture its own, hunting is a ubiquitous and fascinating aspect of the animal kingdom.',i=`Here's the current essay content:\n\n        "${o}"\n\n        Based on this, suggest a logical next sentence to continue the essay's flow.`);const s=await n.invoke([{role:"system",content:r},{role:"user",content:i}]);"argument"===e?(y(s.content),x(!0)):(b(s.content),S(!0))}catch(t){console.error(`${e} suggestion generation error:`,t),t.message.includes("API key")?i(!0):alert(`Error: ${e} suggestion generation failed`)}else alert("Please enter some content before generating a next sentence suggestion.");else alert("Please enter a title before generating an argument suggestion.")}),[l,o]),F=(e,t)=>{let n=-1,r=-1;const i=new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");return e.descendants(((e,t)=>{if(e.isText){let o;for(;null!==(o=i.exec(e.text));)return n=t+o.index,r=n+o[0].length,!1}})),{from:n,to:r}},B=(0,a.useCallback)((async()=>{if(o.trim()&&!C){console.log("Checking content:",o),O(!0);try{const t="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";if(!t)throw new Error("Groq API key not found");const n=new fS({apiKey:t,model:"llama3-8b-8192",temperature:0,maxTokens:3e3,maxRetries:2});console.log("Sending request to LLM...");const r=await n.invoke([{role:"system",content:"You are an expert proofreader and editor with a keen eye for detail. Your task is to perform an exhaustive check of the given text, identifying EVERY SINGLE issue including but not limited to:\n          1. Spelling errors (pay extra attention to commonly misspelled words)\n          2. Grammatical mistakes\n          3. Punctuation errors\n          4. Sentence structure problems\n          5. Clarity and coherence issues\n          6. Redundancy or wordiness\n          7. Inconsistencies in tense or voice\n          8. Improper word choice\n          Be extremely thorough and identify every single error, no matter how minor. Do not overlook any misspellings, even if they might be proper nouns. For each issue, provide:\n          - 'text': the exact problematic text (word, phrase, or complete sentence including punctuation)\n          - 'message': detailed description of the error and suggestion for improvement\n          - 'suggestion': the corrected text\n          Provide your response in JSON format with an array of objects. If no errors are found, return an empty array. Always return a valid JSON array."},{role:"user",content:o}]);let i;console.log("Raw LLM response:",r.content);try{if(i=JSON.parse(r.content),!Array.isArray(i))throw new Error("Parsed result is not an array")}catch(e){console.error("Error parsing LLM response:",e),i=[]}if(console.log("Parsed errors:",i),N.current&&N.current.editor){const e=N.current.editor;e.chain().focus().unsetAllMarks().run(),i.forEach((t=>{const{from:n,to:r}=F(e.state.doc,t.text);-1!==n&&-1!==r&&e.chain().focus().setTextSelection({from:n,to:r}).setMark("highlight").run()})),e.commands.setTextSelection({from:0,to:0})}E(i),0===i.length&&console.log("No errors detected by LLM")}catch(t){console.error("Error checking content:",t),E([])}finally{O(!1)}}}),[o,C]),U=(0,a.useCallback)((e=>{const t=_[e];if(!t||!N.current||!N.current.editor)return;const n=N.current.editor,{from:r,to:i}=F(n.state.doc,t.text);if(-1!==r&&-1!==i){n.chain().focus().setTextSelection({from:r,to:i}).unsetMark("highlight").deleteSelection().insertContent(t.suggestion).run();const o=n.getHTML();s(o),E((t=>t.filter(((t,n)=>n!==e))))}}),[_]),H=()=>{if(!t&&0===T.length){(async()=>{try{const e=await Qn.get("/prompts/all");A(e.data)}catch(e){console.error("Error fetching prompts:",e)}})()}n(!t)},V=e=>{let{show:t,onClose:n,title:r,content:i}=e;return t&&(0,tr.jsx)(gS(),{handle:".handle",defaultPosition:{x:-320,y:0},bounds:"parent",children:(0,tr.jsx)("div",{className:"absolute right-0 top-0 w-80 z-20",children:(0,tr.jsxs)("div",{className:"bg-white border border-gray-300 rounded shadow-lg",children:[(0,tr.jsx)("div",{className:"handle bg-gray-200 p-2 cursor-move flex justify-between items-center",children:(0,tr.jsx)("h3",{className:"font-bold",children:r})}),(0,tr.jsx)("div",{className:"p-4 text-left",children:i?i.split("\n").map(((e,t)=>(0,tr.jsxs)(a.Fragment,{children:[e,t<i.split("\n").length-1&&(0,tr.jsx)("br",{})]},t))):(0,tr.jsx)("p",{children:"No suggestion available"})}),(0,tr.jsx)("button",{onClick:n,className:"text-gray-600 hover:text-gray-800 text-white",children:"Close"})]})})})};return(0,tr.jsxs)("div",{className:"flex w-full h-screen",children:[(0,tr.jsxs)("div",{className:"flex flex-col w-full relative",children:[(0,tr.jsxs)("div",{className:"flex items-center h-12 p-2 bg-gray-300 text-center border-b border-gray-400",children:[(0,tr.jsx)("div",{className:"w-1/12 ",children:(0,tr.jsx)(Pe,{to:"/home",className:"rounded-full w-auto px-4 py-1 text-sm bg-purple-600 bg-opacity-100 text-white hover:no-underline hover:bg-opacity-80",children:"Home"})}),(0,tr.jsx)("div",{className:"w-9/12 flex flex-col flex-grow text-left ml-4 mt-6",children:(0,tr.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),className:"w-full border-0 shadow-none bg-white placeholder-gray-700 font-bold py-1 px-3 focus:outline-none focus:bg-gray-100 hover:bg-gray-100",id:"title",placeholder:"Enter your essay title or topic"})}),(0,tr.jsx)("div",{className:"w-2/12",children:(0,tr.jsx)("button",{type:"button",className:"w-auto px-4 py-1 text-sm bg-purple-600 bg-opacity-100 text-white hover:bg-opacity-80",children:"Writing Assistant"})})]}),(0,tr.jsx)("div",{className:"flex w-full flex-grow overflow-hidden",children:(0,tr.jsx)("div",{ref:u,className:"flex-grow overflow-y-auto overflow-x-hidden p-4",children:(0,tr.jsxs)("div",{style:{width:m,maxWidth:"100%"},children:[(0,tr.jsx)(Tp,{ref:N,initialContent:o,onContentChange:e=>{s(e)},errors:_,className:"overflow-x-hidden",editorStyles:{width:"100%",maxWidth:"100%",overflowX:"hidden"}}),r&&(0,tr.jsx)("p",{className:"text-red-500 mt-2",children:"Error: Groq API key not found. Please set the REACT_APP_GROQ_API_KEY environment variable."})]})})}),(0,tr.jsx)("div",{className:"p-2 bg-gray-200 text-center border-t border-gray-300",children:(0,tr.jsxs)("div",{className:"flex mt-auto",children:[(0,tr.jsxs)("div",{className:"w-6/12 inline-flex border-4 border-black-600 rounded-md",role:"group",children:[(0,tr.jsx)("button",{type:"button",className:"text-sm font-medium border-4 "+("discussion"===p?"bg-purple-600 text-white":"bg-white text-purple-600 hover:bg-purple-400 hover:text-white"),onClick:()=>L("discussion"),children:"Discussion"}),(0,tr.jsx)("button",{type:"button",className:"text-sm font-medium border-4 "+("advice"===p?"bg-purple-600 text-white":"bg-white text-purple-600 hover:bg-purple-400 hover:text-white"),onClick:()=>L("advice"),children:"Advice and Feedback"})]}),(0,tr.jsxs)("div",{className:"flex-grow text-right relative",children:[(0,tr.jsxs)("button",{onClick:H,className:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center inline-flex items-center",type:"button",children:[d?d.topic:"Select Prompt",(0,tr.jsx)("svg",{className:"w-2.5 h-2.5 ms-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 10 6",children:(0,tr.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 4 4 4-4"})})]}),t&&(0,tr.jsx)("div",{className:"absolute right-0 bottom-full mb-2 z-10 bg-white divide-y divide-gray-100 rounded-lg shadow w-64 max-h-60 overflow-y-auto",children:(0,tr.jsx)("ul",{className:"py-2 text-sm text-gray-700",children:T.length>0?T.map(((e,t)=>(0,tr.jsx)("li",{children:(0,tr.jsx)("button",{onClick:()=>(e=>{h(e),H()})(e),className:"block w-full text-left px-4 py-2 hover:bg-gray-100",children:e.topic})},t))):(0,tr.jsx)("li",{children:(0,tr.jsx)("p",{className:"px-4 py-2",children:"No prompts available"})})})})]}),(0,tr.jsx)("div",{className:"flex-grow text-right",children:(0,tr.jsx)("button",{type:"button",className:"w-auto px-4 py-1 text-sm mr-4 bg-purple-600 bg-opacity-100 text-white hover:bg-opacity-80 transition",onClick:async()=>{try{const t=localStorage.getItem("token"),n={title:l,content:o,postType:p,prompt:d?d._id:null,createdAt:new Date},r=await Qn.post("/posts",n,{headers:{Authorization:`Bearer ${t}`}});console.log("Post created successfully:",r.data),s(""),e("/home")}catch(t){console.error("Error creating post:",t)}},children:"Post"})})]})}),(0,tr.jsx)(V,{show:w,onClose:()=>x(!1),title:"Argument Suggestion",content:g}),(0,tr.jsx)(V,{show:k,onClose:()=>S(!1),title:"Next Sentence Suggestion",content:v})]}),(0,tr.jsx)("div",{className:"w-2/12 min-w-[200px] border-l border-gray-400 p-4 overflow-y-auto relative z-10",children:(0,tr.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,tr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tr.jsx)("p",{children:"Outline Insertion"}),(0,tr.jsx)("button",{type:"button",onClick:D,className:"btn hover:bg-purple-400 w-auto text-sm px-2 py-1",children:"Insert"})]}),(0,tr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tr.jsx)("p",{children:"Argument Suggestion"}),(0,tr.jsx)("button",{type:"button",onClick:()=>z("argument"),className:"btn hover:bg-purple-400 w-auto text-sm px-2 py-1",children:"Suggest"})]}),(0,tr.jsxs)("div",{className:"flex items-center justify-between relative",children:[(0,tr.jsx)("p",{children:"Next Sentence Suggestion"}),(0,tr.jsx)("button",{type:"button",onClick:()=>z("sentence"),className:"btn hover:bg-purple-400 w-auto text-sm px-2 py-1",children:"Suggest"})]}),(0,tr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,tr.jsx)("p",{children:"Text Statistics"}),(0,tr.jsxs)("button",{onClick:()=>{P(!j)},className:"btn hover:bg-purple-400 w-auto text-sm px-2 py-1",children:[j?"Hide":"Show"," Statistics"]})]}),j&&(0,tr.jsx)($,{statistics:R}),(0,tr.jsxs)("div",{className:"mt-4",children:[(0,tr.jsx)("h3",{className:"font-bold mb-2",children:"Error Correction"}),(0,tr.jsx)("button",{onClick:B,className:"mb-2 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Check for Errors"}),C?(0,tr.jsx)("p",{children:"Checking for errors..."}):_.length>0?_.map(((e,t)=>(0,tr.jsxs)("div",{className:"mb-2 p-2 bg-red-100 rounded",children:[(0,tr.jsx)("p",{children:e.message}),(0,tr.jsx)("button",{onClick:()=>U(t),className:"mt-1 text-sm text-blue-600 hover:text-blue-800",children:"Apply Suggestion"})]},t))):(0,tr.jsx)("p",{children:"No errors detected. If you believe this is incorrect, please try again or report this issue."})]})]})})]})},vS=e=>{let{onConfirm:t,onCancel:n}=e;return(0,tr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center",children:(0,tr.jsxs)("div",{className:"bg-white p-8 rounded-md shadow-md w-80",children:[(0,tr.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Are you sure?"}),(0,tr.jsx)("p",{className:"mb-8",children:"Do you really want to delete? This action cannot be undone."}),(0,tr.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,tr.jsx)("button",{onClick:n,className:"px-4 py-2 bg-gray-300 text-black rounded-md hover:bg-gray-400",children:"Cancel"}),(0,tr.jsx)("button",{onClick:t,className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600",children:"Delete"})]})]})})};var bS=n(3471);const wS=e=>{let{commentId:t,onCommentsUpdate:n,onReplyUpdate:r}=e;const{auth:i}=(0,a.useContext)(nr),[o,s]=(0,a.useState)([]),[l,c]=(0,a.useState)(""),[u,d]=(0,a.useState)(!1),[h,p]=(0,a.useState)(""),[f,m]=(0,a.useState)({}),[g,y]=(0,a.useState)(null),[v,b]=(0,a.useState)(""),[w,x]=(0,a.useState)(""),[k,S]=(0,a.useState)(!1),[_,E]=(0,a.useState)(!1),[C,O]=(0,a.useState)(null);(0,a.useEffect)((()=>{(async()=>{try{d(!0);const e=await Qn.get(`/comments/${t}/replies`,{headers:{Authorization:`Bearer ${i.token}`}});s(e.data),d(!1)}catch(e){p("Error loading replies"),d(!1)}})()}),[t,i.token]),(0,a.useEffect)((()=>{o.length>0&&(async()=>{try{const e=[...new Set(o.map((e=>e.userId._id)))],t={};await Promise.all(e.map((async e=>{const n=await Qn.get(`/users/${e}/profile`,{headers:{Authorization:`Bearer ${i.token}`}});t[e]=n.data.avatarColor||"bg-purple-600"}))),m(t)}catch(e){console.error("Error fetching avatar colors:",e)}})()}),[o,i.token]);const N=()=>{E(!1),O(null)},T=async e=>{if(e.preventDefault(),v.trim())try{d(!0);const e=await Qn.put(`/replies/${g}`,{content:v},{headers:{Authorization:`Bearer ${i.token}`}});s((t=>t.map((t=>t._id===g?{...t,content:e.data.content}:t)))),y(null),d(!1)}catch(t){p("Failed to edit reply"),d(!1)}else p("Reply cannot be empty")},A=()=>{y(null),b("")};(0,a.useEffect)((()=>{S(v!==w)}),[v,w]);return(0,tr.jsxs)("div",{className:"reply-section bg-white p-4 shadow-md rounded-lg",children:[(0,tr.jsx)("h4",{className:"text-md font-semibold mb-4",children:"Replies"}),h&&(0,tr.jsx)("p",{className:"text-red-500",children:h}),(0,tr.jsxs)("div",{className:"reply-list space-y-4",children:[u&&(0,tr.jsx)("p",{children:"Loading replies..."}),o.length>0?o.map((e=>{var t;return(0,tr.jsxs)("div",{className:"reply-item p-2 bg-[transparent] rounded-md",children:[(0,tr.jsxs)("div",{className:"flex mt-0",children:[(0,tr.jsx)("div",{className:`${f[e.userId._id]||"bg-purple-600"} text-[white] font-[bold] w-10 h-10 flex items-center justify-center mr-5 rounded-[50%]`,children:(0,tr.jsx)("span",{className:"font-sans font-bold",children:e.userId.username.charAt(0).toUpperCase()})}),(0,tr.jsxs)("div",{className:"flex flex-col items-baseline",children:[(0,tr.jsx)("p",{className:"font-semibold",children:null===(t=e.userId)||void 0===t?void 0:t.username}),(0,tr.jsxs)("p",{className:"text-xs text-gray-500",children:[" \u2022 ",Wr(new Date(e.createdAt),{addSuffix:!0})]}),g===e._id?(0,tr.jsxs)("form",{onSubmit:T,className:"mt-2 mb-5",children:[(0,tr.jsx)("textarea",{className:"w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400",rows:"2",value:v,onChange:e=>b(e.target.value)}),(0,tr.jsxs)("div",{className:"flex mt-2 space-x-2",children:[(0,tr.jsx)("button",{type:"submit",className:"w-auto px-4 py-2 rounded-xl "+(k?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-600 cursor-not-allowed"),disabled:u||!k,children:u?"Saving...":"Save"}),(0,tr.jsx)("button",{type:"button",onClick:A,className:"w-auto px-4 py-2 bg-purple-600 text-white rounded-xl hover:bg-purple-700",disabled:u,children:"Cancel"})]})]}):(0,tr.jsx)("p",{className:"my-5",children:e.content})]})]}),(0,tr.jsxs)("div",{className:"flex items-center mt-0 ml-5 space-x-5",children:[e.likes&&e.likes.includes(i.user.id)?(0,tr.jsx)(fr.A,{onClick:()=>(async e=>{try{const t=await Qn.put(`/replies/${e}/unlike`,{},{headers:{Authorization:`Bearer ${i.token}`}});s((n=>n.map((n=>n._id===e?{...n,likes:t.data.likes}:n))))}catch(t){console.error("Error unliking the reply:",t)}})(e._id),className:"bg-transparent text-base text-[#9500F0] cursor-pointer border-[none] hover:no-underline"}):(0,tr.jsx)(pr.A,{onClick:()=>(async e=>{try{const t=await Qn.put(`/replies/${e}/like`,{},{headers:{Authorization:`Bearer ${i.token}`}});s((n=>n.map((n=>n._id===e?{...n,likes:t.data.likes}:n))))}catch(t){console.error("Error liking the reply:",t)}})(e._id),className:"bg-transparent text-base text-[#9500F0] cursor-pointer border-[none] hover:no-underline"}),(0,tr.jsx)("span",{className:"text-lg font-mono",children:e.likes?e.likes.length:0}),e.userId._id===i.user.id&&(0,tr.jsxs)(tr.Fragment,{children:[(0,tr.jsx)(cr.A,{onClick:()=>{return t=e._id,n=e.content,y(t),b(n),void x(n);var t,n},className:"text-blue-500 cursor-pointer mx-5 hover:bg-gray-100 hover:rounded-lg"}),(0,tr.jsx)(bS.A,{onClick:()=>{return t=e._id,E(!0),void O(t);var t},className:"text-red-500 cursor-pointer mx-5 hover:bg-gray-400 hover:rounded-lg"})]})]})]},e._id)})):(0,tr.jsx)("p",{children:"No replies yet. Be the first to reply!"})]}),(0,tr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),l.trim())try{d(!0);const e={...(await Qn.post(`/comments/${t}/replies`,{content:l,parentCommentId:t},{headers:{Authorization:`Bearer ${i.token}`}})).data,userId:{_id:i.user.id,username:i.user.username}},n=[...o,e];s(n),r(),c(""),d(!1)}catch(n){p("Failed to submit reply"),d(!1)}else p("Reply cannot be empty")},className:"mb-4 mt-4",children:[(0,tr.jsx)("textarea",{className:"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400",rows:"2",value:l,onChange:e=>c(e.target.value),placeholder:"Add your reply..."}),(0,tr.jsx)("button",{type:"submit",className:"w-auto mt-2 px-4 py-1 bg-blue-500 text-white rounded-md hover:bg-blue-600",disabled:u,children:u?"Posting...":"Post Reply"})]}),_&&(0,tr.jsx)(vS,{onConfirm:async()=>{try{await Qn.delete(`/replies/${C}`,{headers:{Authorization:`Bearer ${i.token}`}}),s((e=>e.filter((e=>e._id!==C)))),r(),N()}catch(e){p("Failed to delete reply")}},onCancel:N})]})};var xS=n(5473);const kS=e=>{let{postId:t,onCommentsUpdate:n,onReplyUpdate:r}=e;const{auth:i}=(0,a.useContext)(nr),[o,s]=(0,a.useState)([]),[l,c]=(0,a.useState)(""),[u,d]=(0,a.useState)(!1),[h,p]=(0,a.useState)(""),[f,m]=(0,a.useState)({}),[g,y]=(0,a.useState)({}),[v,b]=(0,a.useState)(!1),[w,x]=(0,a.useState)(null),[k,S]=(0,a.useState)(null),[_,E]=(0,a.useState)(""),[C,O]=(0,a.useState)(""),[N,T]=(0,a.useState)(!1);(0,a.useEffect)((()=>{(async()=>{try{d(!0);const e=await Qn.get(`/comments/posts/${t}/comments`,{headers:{Authorization:`Bearer ${i.token}`}});s(e.data),n(e.data),d(!1)}catch(e){p("Error loading comments"),d(!1)}})()}),[t,i.token]),(0,a.useEffect)((()=>{o.length>0&&(async()=>{try{const e=[...new Set(o.map((e=>e.userId._id)))],t={};await Promise.all(e.map((async e=>{const n=await Qn.get(`/users/${e}/profile`,{headers:{Authorization:`Bearer ${i.token}`}});t[e]=n.data.avatarColor||"bg-purple-600"}))),y(t)}catch(e){console.error("Error fetching avatar colors:",e)}})()}),[o,i.token]);const A=()=>{b(!1),x(null)},j=async e=>{if(e.preventDefault(),_.trim())try{d(!0);const e=await Qn.put(`/comments/${k}`,{content:_},{headers:{Authorization:`Bearer ${i.token}`}}),t=o.map((t=>t._id===k?{...t,content:e.data.content}:t));s(t),n(t),S(null),d(!1)}catch(t){p("Failed to edit comment"),d(!1)}else p("Comment cannot be empty")},P=()=>{S(null),E("")};return(0,a.useEffect)((()=>{T(_!==C)}),[_,C]),(0,tr.jsxs)("div",{className:"comment-section bg-white p-4 shadow-lg rounded-lg",children:[(0,tr.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Comments"}),h&&(0,tr.jsx)("p",{className:"text-red-500",children:h}),(0,tr.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),l.trim())try{d(!0);const e={...(await Qn.post(`/comments/posts/${t}/comments`,{content:l},{headers:{Authorization:`Bearer ${i.token}`}})).data,userId:{_id:i.user.id,username:i.user.username}},r=[...o,e];s(r),n(r),c(""),d(!1)}catch(r){p("Failed to submit comment"),d(!1)}else p("Comment cannot be empty")},className:"mb-4",children:[(0,tr.jsx)("textarea",{className:"w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400",rows:"3",value:l,onChange:e=>c(e.target.value),placeholder:"Add your comment..."}),(0,tr.jsx)("button",{type:"submit",className:"w-auto mt-2 px-4 py-1 bg-blue-500 text-white rounded-md hover:bg-blue-600",disabled:u,children:u?"Posting...":"Post Comment"})]}),(0,tr.jsxs)("div",{className:"comment-list space-y-4 mb-4",children:[u&&(0,tr.jsx)("p",{children:"Loading comments..."}),o.length>0?o.map((e=>{var t;return(0,tr.jsxs)("div",{className:"flex flex-col p-2 bg-[transparent] rounded-md hover:bg-gray-50",children:[(0,tr.jsxs)("div",{className:"flex mt-3",children:[(0,tr.jsx)("div",{className:`${g[e.userId._id]||"bg-purple-600"} text-[white] font-[bold] w-10 h-10 flex items-center justify-center mr-5 rounded-[50%]`,children:(0,tr.jsx)("span",{className:"font-sans font-bold",children:e.userId.username.charAt(0).toUpperCase()})}),(0,tr.jsxs)("div",{className:"flex flex-col items-baseline",children:[(0,tr.jsx)("p",{className:"font-semibold",children:null===(t=e.userId)||void 0===t?void 0:t.username}),(0,tr.jsxs)("p",{className:"text-xs text-gray-500",children:[" \u2022 ",Wr(new Date(e.createdAt),{addSuffix:!0})]}),k===e._id?(0,tr.jsxs)("form",{onSubmit:j,className:"mt-2",children:[(0,tr.jsx)("textarea",{className:"w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400",rows:"2",value:_,onChange:e=>E(e.target.value)}),(0,tr.jsxs)("div",{className:"flex mt-2 space-x-2",children:[(0,tr.jsx)("button",{type:"submit",className:"w-auto px-4 py-2 rounded-xl "+(N?"bg-purple-600 text-white hover:bg-purple-700":"bg-gray-300 text-gray-600 cursor-not-allowed"),disabled:u||!N,children:u?"Saving...":"Save"}),(0,tr.jsx)("button",{type:"button",onClick:P,className:"w-auto px-4 py-2 bg-purple-600 text-white rounded-xl hover:bg-purple-700",disabled:u,children:"Cancel"})]})]}):(0,tr.jsx)("p",{className:"mt-5",children:e.content})]})]}),(0,tr.jsxs)("div",{className:"flex mt-5 ml-5 space-x-5",children:[(0,tr.jsxs)("div",{className:"flex space-x-2",children:[(0,tr.jsxs)("div",{className:"space-x-2",children:[e.likes.includes(i.user.id)?(0,tr.jsx)(fr.A,{onClick:()=>(async e=>{try{const t=await Qn.put(`/comments/${e}/unlike`,{},{headers:{Authorization:`Bearer ${i.token}`}});s((n=>n.map((n=>n._id===e?{...n,likes:t.data.likes}:n))))}catch(t){console.error("Error unliking the comment:",t)}})(e._id),className:"bg-transparent text-base text-[#9500F0] cursor-pointer border-[none] hover:no-underline"}):(0,tr.jsx)(pr.A,{onClick:()=>(async e=>{try{const t=await Qn.put(`/comments/${e}/like`,{},{headers:{Authorization:`Bearer ${i.token}`}});s((n=>n.map((n=>n._id===e?{...n,likes:t.data.likes}:n))))}catch(t){console.error("Error liking the comment:",t)}})(e._id),className:"bg-transparent text-base text-[#9500F0] cursor-pointer border-[none] hover:no-underline"}),(0,tr.jsx)("span",{className:"text-lg font-mono mt-5 mr-0 p-2",children:e.likes.length})]}),(0,tr.jsx)("div",{className:"flex",children:(0,tr.jsxs)("button",{className:"w-auto h-auto ml-3 p-0 m-0 bg-[transparent] text-black text-sm",onClick:()=>{return t=e._id,void m((e=>({...e,[t]:!e[t]})));var t},children:[f[e._id]?(0,tr.jsx)(xS.A,{}):(0,tr.jsxs)("div",{className:"space-x-2 ",children:[(0,tr.jsx)(mr.A,{className:"bg-transparent text-base text-[#9500F0] cursor-pointer border-[none]"}),(0,tr.jsx)("span",{className:"text-lg font-mono mt-5 mr-0 p-2",children:e.replies.length})]}),f[e._id]?" Collapse":""]})})]}),(0,tr.jsx)("div",{className:"flex",children:e.userId._id===i.user.id&&(0,tr.jsxs)("div",{className:"space-x-5",children:[(0,tr.jsx)(cr.A,{onClick:()=>{return t=e._id,n=e.content,S(t),E(n),void O(n);var t,n},className:"text-blue-500 cursor-pointer hover:bg-gray-100 hover:rounded-lg"}),(0,tr.jsx)(bS.A,{onClick:()=>{return t=e._id,b(!0),void x(t);var t},className:"text-red-500 cursor-pointer hover:bg-gray-400 hover:rounded-lg"})]})})]}),f[e._id]&&(0,tr.jsx)("div",{className:"flex flex-col",children:(0,tr.jsx)(wS,{commentId:e._id,onCommentsUpdate:s,onReplyUpdate:r})})]},e._id)})):(0,tr.jsx)("p",{children:"No comments yet. Be the first to comment!"})]}),v&&(0,tr.jsx)(vS,{onConfirm:async()=>{try{await Qn.delete(`/comments/${w}`,{headers:{Authorization:`Bearer ${i.token}`}});const e=o.filter((e=>e._id!==w));s(e),n(e),A()}catch(e){p("Failed to delete the comment"),console.error("Error deleting the comment:",e)}},onCancel:A})]})};var SS=n(697);const _S=()=>{var e;const{id:t}=se(),n=oe(),[r,i]=(0,a.useState)(null),[o,s]=(0,a.useState)(!0),[l,c]=(0,a.useState)(null),{auth:u}=(0,a.useContext)(nr),[d,h]=(0,a.useState)(0),[p,f]=(0,a.useState)(!1),[m,g]=(0,a.useState)(0),[y,v]=(0,a.useState)({}),[b,w]=(0,a.useState)("bg-purple-600"),[x,k]=(0,a.useState)(!1),[S,_]=(0,a.useState)(""),[E,C]=(0,a.useState)(""),[O,N]=(0,a.useState)(!1),T=async()=>{try{const e=await Qn.get(`/posts/${t}`);i(e.data),h(e.data.likes.length),f(e.data.likes.includes(u.user.id));const n=e.data.comments.length+e.data.comments.reduce(((e,t)=>e+(t.replies?t.replies.length:0)),0);g(n),_(e.data.title),C(e.data.content),s(!1);const r=await Qn.get(`/users/${e.data.userId._id}/profile`,{headers:{Authorization:`Bearer ${u.token}`}});w(r.data.avatarColor||"bg-purple-600")}catch(l){console.error("Error fetching post:",l),c("Failed to load the post"),s(!1)}};(0,a.useEffect)((()=>{T()}),[t]);return o?(0,tr.jsx)("p",{children:"Loading post..."}):l?(0,tr.jsx)("p",{children:l}):r?(0,tr.jsxs)("div",{className:"bg-[white] min-h-screen pt-20 pb-5 px-5",children:[(0,tr.jsx)(hr,{}),(0,tr.jsxs)("div",{className:"w-full max-w-5xl mx-auto mt-5",children:[(0,tr.jsx)(Pe,{to:"/home",className:"block text-purple-600 mb-5",children:"\u2190 Back to Home"}),(0,tr.jsxs)("div",{className:"bg-white p-5 rounded-lg",children:[(0,tr.jsxs)("div",{className:"flex items-center mb-5",children:[(0,tr.jsx)("div",{className:`${b} text-white font-bold w-10 h-10 flex items-center justify-center overflow-hidden text-xl rounded-full mr-5`,children:r.userId.username.charAt(0).toUpperCase()}),(0,tr.jsxs)("div",{className:"flex flex-col",children:[(0,tr.jsx)("div",{className:"flex",children:(0,tr.jsx)("span",{className:"font-semibold text-black",children:(null===(e=r.userId)||void 0===e?void 0:e.username)||"Unknown"})}),(0,tr.jsxs)("span",{className:"text-gray-500 text-sm",children:["Posted on: ",new Date(r.createdAt).toLocaleString()]})]})]}),x?(0,tr.jsxs)("div",{className:"flex flex-col mb-5",children:[(0,tr.jsx)("input",{type:"text",value:S,onChange:e=>_(e.target.value),className:"bg-white w-full p-2 border rounded-md mb-4"}),(0,tr.jsx)("textarea",{value:E,onChange:e=>C(e.target.value),className:"w-full h-full p-2 border rounded-md",rows:"20"}),(0,tr.jsxs)("div",{className:"flex space-x-2 mt-0 justify-end",children:[(0,tr.jsx)("button",{onClick:async()=>{try{const e=localStorage.getItem("token");await Qn.put(`/posts/${t}`,{title:S,content:E},{headers:{Authorization:`Bearer ${e}`}}),i({...r,title:S,content:E}),k(!1)}catch(e){console.error("Error saving post:",e),c("Failed to save the post")}},className:"w-auto px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"Save Changes"}),(0,tr.jsx)("button",{onClick:()=>{k(!1),_(r.title),C(r.content)},className:"w-auto px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:"Cancel"})]})]}):(0,tr.jsxs)(tr.Fragment,{children:[(0,tr.jsx)("div",{className:"flex",children:(0,tr.jsx)("h2",{className:"text-black font-bold text-2xl mb-4",children:r.title})}),(0,tr.jsx)("div",{className:"flex mb-4",children:r.postType&&(0,tr.jsx)("div",{className:"bg-[#9500F0] text-white text-sm inline-block px-4 py-1 rounded-full",children:r.postType})}),(0,tr.jsx)("div",{className:"mb-5",dangerouslySetInnerHTML:{__html:r.content}})]}),(0,tr.jsxs)("div",{className:"flex items-center justify-between mb-5",children:[(0,tr.jsxs)("div",{className:"flex items-center",children:[p?(0,tr.jsx)(fr.A,{onClick:async()=>{try{const e=await Qn.put(`/posts/${r._id}/unlike`,{},{headers:{Authorization:`Bearer ${u.token}`}});h(e.data.likes),f(!1)}catch(e){console.error("Error unliking the post:",e)}},className:"text-[#9500F0] cursor-pointer mr-3"}):(0,tr.jsx)(pr.A,{onClick:async()=>{try{const e=await Qn.put(`/posts/${r._id}/like`,{},{headers:{Authorization:`Bearer ${u.token}`}});h(e.data.likes),f(!0)}catch(e){console.error("Error liking the post:",e)}},className:"text-[#9500F0] cursor-pointer mr-3"}),(0,tr.jsx)("span",{className:"mr-5 font-mono",children:d}),(0,tr.jsx)(mr.A,{className:"text-[#9500F0] cursor-pointer mr-3"}),(0,tr.jsx)("span",{className:"mr-5 font-mono",children:m})]}),!x&&u.user.id===r.userId._id&&(0,tr.jsxs)("div",{className:"flex items-center",children:[(0,tr.jsx)("button",{onClick:()=>{k(!0)},className:"mr-5 h-[50px] text-md w-auto mt-0 px-2 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"Edit"}),(0,tr.jsx)("button",{onClick:()=>{N(!0)},className:"h-[50px] text-md w-auto mt-0 px-2 py-2 bg-red-400 text-white rounded-md hover:bg-black",children:(0,tr.jsx)(SS.A,{})})]})]}),(0,tr.jsx)("hr",{className:"my-5"}),(0,tr.jsx)(kS,{postId:r._id,onCommentsUpdate:e=>{const t=e.length+e.reduce(((e,t)=>e+(t.replies?t.replies.length:0)),0);g(t)},onReplyUpdate:()=>{T()}})]}),O&&(0,tr.jsx)(vS,{onConfirm:async()=>{try{const e=localStorage.getItem("token");await Qn.delete(`/posts/${t}`,{headers:{Authorization:`Bearer ${e}`}}),n("/home")}catch(e){console.error("Error deleting post:",e),c("Failed to delete the post")}},onCancel:()=>{N(!1)}})]})]}):(0,tr.jsx)("p",{children:"Post not found."})},ES=e=>{let{children:t}=e;const{auth:n}=(0,a.useContext)(nr);return n.token?t:(0,tr.jsx)(we,{to:"/login"})},CS=e=>{let{children:t}=e;return!!localStorage.getItem("token")?(0,tr.jsx)(we,{to:"/home"}):t},OS=()=>{const[e,t]=(0,a.useState)(""),[n,r]=(0,a.useState)(!1),[i,o]=(0,a.useState)(""),[s,l]=(0,a.useState)("");return(0,tr.jsx)("div",{className:"bg-purple-700 min-h-screen flex justify-center items-center",children:(0,tr.jsxs)("div",{className:"bg-white w-full max-w-md shadow-lg rounded-lg p-8",children:[(0,tr.jsx)("h2",{className:"text-2xl font-bold text-center text-purple-700 mb-6",children:"Reset Password"}),(0,tr.jsx)("p",{className:"text-center text-gray-600 mb-4",children:"Enter your email address and we'll send you a link to reset your password."}),(0,tr.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),r(!0),l(""),o("");try{await Qn.post("/auth/reset-password",{email:e}),o("Password reset link has been sent to your email address. Please check your inbox.")}catch(n){n.response&&n.response.data?l(n.response.data.message||"Unable to send reset link. Please try again later."):l("An unexpected error occurred.")}finally{r(!1)}},className:"w-full",noValidate:!0,children:[(0,tr.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,tr.jsx)("label",{htmlFor:"email",className:"text-lg mb-2",children:"Email"}),(0,tr.jsx)("input",{type:"email",id:"email",name:"email",value:e,onChange:e=>{t(e.target.value),s&&l(""),i&&o("")},className:`w-full px-4 py-2 border ${s?"border-red-500":"border-gray-300"} rounded focus:outline-none focus:ring-2 focus:ring-purple-500`,required:!0})]}),s&&(0,tr.jsx)("div",{className:"text-red-500 text-sm mb-4 text-center",children:s}),i&&(0,tr.jsx)("div",{className:"text-green-500 text-sm mb-4 text-center",children:i}),(0,tr.jsx)("button",{type:"submit",disabled:n,className:"w-full bg-purple-700 text-white py-3 rounded hover:bg-purple-800 transition disabled:opacity-50",children:n?"Sending...":"Send Reset Link"})]}),(0,tr.jsxs)("p",{className:"text-sm text-gray-700 mt-4 text-center",children:["Remembered your password? ",(0,tr.jsx)(Pe,{to:"/login",className:"text-purple-700 hover:underline",children:"Login"})]})]})})},NS=()=>{const{token:e}=se(),[t,n]=(0,a.useState)(""),[r,i]=(0,a.useState)(""),[o,s]=(0,a.useState)(!1),[l,c]=(0,a.useState)(""),u=oe();return(0,tr.jsx)("div",{className:"bg-purple-700 min-h-screen flex justify-center items-center",children:(0,tr.jsxs)("div",{className:"bg-white w-full max-w-md shadow-lg rounded-lg p-8",children:[(0,tr.jsx)("h2",{className:"text-2xl font-bold text-center text-purple-700 mb-6",children:"Set New Password"}),(0,tr.jsxs)("form",{onSubmit:async n=>{if(n.preventDefault(),t===r){s(!0),c("");try{console.log("Token being used for reset:",e),await Qn.post(`/auth/reset-password/${e}`,{password:t}),c("Password reset successful. Redirecting to login..."),setTimeout((()=>{u("/login")}),3e3)}catch(i){c(i.response&&i.response.data?i.response.data.message:"An unexpected error occurred.")}finally{s(!1)}}else c("Passwords do not match.")},className:"w-full",children:[(0,tr.jsxs)("div",{className:"flex flex-col mb-4",children:[(0,tr.jsx)("label",{htmlFor:"password",className:"text-lg mb-2",children:"New Password"}),(0,tr.jsx)("input",{type:"password",id:"password",value:t,onChange:e=>n(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),(0,tr.jsxs)("div",{className:"flex flex-col mb-6",children:[(0,tr.jsx)("label",{htmlFor:"confirmPassword",className:"text-lg mb-2",children:"Confirm New Password"}),(0,tr.jsx)("input",{type:"password",id:"confirmPassword",value:r,onChange:e=>i(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),l&&(0,tr.jsx)("div",{className:"text-center text-sm mb-4 "+(l.includes("successful")?"text-green-500":"text-red-500"),children:l}),(0,tr.jsx)("button",{type:"submit",disabled:o,className:"w-full bg-purple-700 text-white py-3 rounded hover:bg-purple-800 transition disabled:opacity-50",children:o?"Submitting...":"Set New Password"})]})]})})};const TS=a.forwardRef((function(e,t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),a.createElement("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"}))}));function AS(){const[e,t]=(0,a.useState)(""),[n,r]=(0,a.useState)("discussion"),[i,o]=(0,a.useState)([]),[s,l]=(0,a.useState)(""),[c,u]=(0,a.useState)(!0),[d,h]=(0,a.useState)(null),p=oe();(0,a.useEffect)((()=>{(async()=>{try{u(!0),console.log("Attempting to fetch prompts...");const e=await Qn.get("/prompts/all");console.log("Prompts received:",e.data),o(e.data),h(null)}catch(d){var e,t,n,r,i,s;console.error("Error fetching prompts:",{message:(null===d||void 0===d?void 0:d.message)||"Unknown error",status:null===d||void 0===d||null===(e=d.response)||void 0===e?void 0:e.status,statusText:null===d||void 0===d||null===(t=d.response)||void 0===t?void 0:t.statusText,data:null===d||void 0===d||null===(n=d.response)||void 0===n?void 0:n.data,config:{url:null===d||void 0===d||null===(r=d.config)||void 0===r?void 0:r.url,method:null===d||void 0===d||null===(i=d.config)||void 0===i?void 0:i.method,baseURL:null===d||void 0===d||null===(s=d.config)||void 0===s?void 0:s.baseURL}}),h("Failed to load prompts. Please try again later.")}finally{u(!1)}})()}),[]),(0,a.useEffect)((()=>{localStorage.removeItem("essaySections"),localStorage.removeItem("essayInfo");for(let e of Object.keys(localStorage))(e.startsWith("essayContent_")||e.startsWith("sectionRequirements_")||e.startsWith("essay_")||e.includes("section"))&&localStorage.removeItem(e)}),[]);const f=e=>{r(e)};return(0,tr.jsxs)("div",{className:"flex-col space-y-5 min-h-screen flex items-center justify-center bg-purple-600 p-4",children:[(0,tr.jsx)(hr,{}),(0,tr.jsxs)("div",{className:"w-full max-w-md bg-white rounded-lg shadow-lg p-6 space-y-6",children:[(0,tr.jsxs)("div",{className:"space-y-2",children:[(0,tr.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700",children:"Title"}),(0,tr.jsx)("input",{type:"text",id:"title",value:e,onChange:e=>{t(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,tr.jsxs)("div",{className:"space-y-2",children:[(0,tr.jsx)("span",{className:"block text-sm font-medium text-gray-700",children:"Post Type"}),(0,tr.jsxs)("div",{className:"flex rounded-md shadow-sm",children:[(0,tr.jsx)("button",{type:"button",onClick:()=>f("discussion"),className:"w-1/2 py-2 px-4 text-sm font-medium rounded-l-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:z-10 "+("discussion"===n?"bg-purple-100 text-purple-600":"bg-white text-gray-700 hover:bg-gray-50"),children:"Discussion"}),(0,tr.jsx)("button",{type:"button",onClick:()=>f("advice"),className:"w-1/2 py-2 px-4 text-sm font-medium rounded-r-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:z-10 "+("advice"===n?"bg-purple-100 text-purple-600":"bg-white text-gray-700 hover:bg-gray-50"),children:"Advice and Feedback"})]})]}),(0,tr.jsxs)("div",{className:"space-y-2",children:[(0,tr.jsx)("label",{htmlFor:"prompt",className:"block text-sm font-medium text-gray-700",children:"Prompt"}),d&&(0,tr.jsx)("div",{className:"text-sm text-red-600 bg-red-50 p-2 rounded-md",children:d}),(0,tr.jsx)("div",{className:"relative",children:c?(0,tr.jsx)("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-md text-gray-500",children:"Loading prompts..."}):(0,tr.jsxs)(tr.Fragment,{children:[(0,tr.jsxs)("select",{id:"prompt",value:s,onChange:e=>{l(e.target.value)},className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm rounded-md appearance-none",children:[(0,tr.jsx)("option",{value:"",children:"Select Prompt"}),i.map((e=>(0,tr.jsx)("option",{value:e._id,children:e.topic},e._id)))]}),(0,tr.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:(0,tr.jsx)(TS,{className:"h-4 w-4","aria-hidden":"true"})})]})}),0===i.length&&!c&&!d&&(0,tr.jsx)("p",{className:"text-sm text-gray-500",children:"No prompts available"})]}),(0,tr.jsx)("button",{type:"button",onClick:()=>{var t;const r={title:e,postType:n,prompt:(null===(t=i.find((e=>e._id===s)))||void 0===t?void 0:t.topic)||""};p("/essaybuilder",{state:{essayInfo:r}})},disabled:c||!s,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white "+(c||!s?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500"),children:c?"Loading...":"Next"})]})]})}const jS=a.forwardRef((function(e,t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),a.createElement("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"}))}));const PS=a.forwardRef((function(e,t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),a.createElement("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"}))})),IS=e=>{let{percentage:t}=e;return(0,tr.jsxs)("div",{className:"relative w-8 h-8",children:[(0,tr.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 36 36",children:[(0,tr.jsx)("circle",{cx:"18",cy:"18",r:"16",fill:"none",className:"stroke-current text-purple-200",strokeWidth:"2"}),(0,tr.jsx)("circle",{cx:"18",cy:"18",r:"16",fill:"none",className:"stroke-current text-purple-600",strokeWidth:"2",strokeDasharray:"100",strokeDashoffset:100-t,transform:"rotate(-90 18 18)"})]}),(0,tr.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-medium text-purple-600",children:[t,"%"]})]})},RS=e=>{let{title:t,percentage:n,isLast:r,onClick:i,onDelete:o,showDelete:s}=e;const a=t.toLowerCase().includes("conclusion");return(0,tr.jsxs)("div",{className:"relative",children:[(0,tr.jsxs)("div",{className:"flex items-center mb-4",children:[(0,tr.jsxs)("button",{onClick:i,className:"flex-grow flex items-center justify-between bg-purple-600 text-white \r rounded-full py-2 px-4 z-10 relative hover:bg-purple-700 transition-colors",children:[(0,tr.jsx)("span",{children:t}),(0,tr.jsx)(IS,{percentage:n})]}),s&&(0,tr.jsx)("button",{onClick:o,className:"ml-2 bg-red-500 text-white rounded-full p-2 hover:bg-red-600","aria-label":"Delete paragraph",children:(0,tr.jsx)(jS,{className:"h-5 w-5"})})]}),!a&&(0,tr.jsx)("div",{className:"absolute left-1/2 top-full w-0.5 h-4 bg-purple-600 -translate-x-1/2"})]})};function MS(){const e=oe(),t=re(),[n,r]=(0,a.useState)((()=>{var e,n;if(null!==(e=t.state)&&void 0!==e&&e.allSections){return t.state.allSections.map((e=>{const t=localStorage.getItem(`essayContent_${e.id}`),n=null!==t&&void 0!==t&&t.trim()?e.percentage||50:0;return{...e,percentage:n}}))}const r=localStorage.getItem("essaySections");if(r){return JSON.parse(r).map((e=>{const t=localStorage.getItem(`essayContent_${e.id}`),n=null!==t&&void 0!==t&&t.trim()?e.percentage||50:0;return{...e,percentage:n}}))}if(null===(n=t.state)||void 0===n||!n.essayInfo){localStorage.removeItem("essaySections"),localStorage.removeItem("essayInfo");for(let e of Object.keys(localStorage))(e.startsWith("essayContent_")||e.startsWith("sectionRequirements_")||e.startsWith("essay_")||e.includes("section"))&&localStorage.removeItem(e)}return[{id:"intro",title:"Introduction",percentage:0},{id:"conclusion",title:"Conclusion",percentage:0}]})),[i,o]=(0,a.useState)((()=>{var e;if(null!==(e=t.state)&&void 0!==e&&e.essayInfo)return t.state.essayInfo;const n=localStorage.getItem("essayInfo");return n?JSON.parse(n):{prompt:"",title:"",postType:""}}));(0,a.useEffect)((()=>{localStorage.setItem("essaySections",JSON.stringify(n))}),[n]),(0,a.useEffect)((()=>{localStorage.setItem("essayInfo",JSON.stringify(i))}),[i]),(0,a.useEffect)((()=>{const e=setInterval((()=>{r((e=>{const t=e.map((e=>{const t=localStorage.getItem(`essayContent_${e.id}`),n=null!==t&&void 0!==t&&t.trim()?e.percentage||50:0;return{...e,percentage:n}}));return JSON.stringify(t)!==JSON.stringify(e)?t:e}))}),1e3);return()=>clearInterval(e)}),[]);const s=()=>{const e={id:`body-${Date.now()}`,title:`Body Paragraph ${n.filter((e=>e.title.toLowerCase().includes("body paragraph"))).length+1}`,percentage:0,type:"body"},t=n.findIndex((e=>e.title.toLowerCase().includes("conclusion"))),i=[...n.slice(0,t),e,...n.slice(t)];r(i),localStorage.setItem("essaySections",JSON.stringify(i))};return(0,tr.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-purple-600 p-4",children:(0,tr.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[(0,tr.jsx)("h1",{className:"text-2xl font-bold text-purple-600 mb-6",children:"Essay Builder"}),(0,tr.jsxs)("div",{className:"mb-4 text-sm bg-gray-100 p-3 rounded-md",children:[(0,tr.jsxs)("p",{children:[(0,tr.jsx)("strong",{children:"Prompt:"})," ",i.prompt]}),(0,tr.jsxs)("p",{children:[(0,tr.jsx)("strong",{children:"Title:"})," ",i.title]}),(0,tr.jsxs)("p",{children:[(0,tr.jsx)("strong",{children:"Post Type:"})," ",i.postType]})]}),(0,tr.jsx)("div",{className:"space-y-4",children:n.map(((t,o)=>{var l;const c=t.title.toLowerCase().includes("body paragraph"),u=t.title.toLowerCase().includes("introduction"),d=t.title.toLowerCase().includes("conclusion");return(0,tr.jsxs)(a.Fragment,{children:[(0,tr.jsx)(RS,{title:t.title,percentage:t.percentage,onClick:()=>(t=>{e(`/essayblock/${n[t].id}`,{state:{section:n[t],allSections:n,sectionIndex:t,essayInfo:i}})})(o),onDelete:()=>c?(e=>{const t=n[e];localStorage.removeItem(`essayContent_${t.id}`),localStorage.removeItem(`sectionRequirements_${t.id}`);const i=n.filter(((t,n)=>n!==e)).map(((e,t)=>e.title.toLowerCase().includes("body paragraph")?{...e,title:"Body Paragraph "+(t-1)}:e));r(i),localStorage.setItem("essaySections",JSON.stringify(i))})(o):null,showDelete:c}),!d&&n.filter((e=>e.title.toLowerCase().includes("body paragraph"))).length<5&&(u&&!n.some((e=>e.title.toLowerCase().includes("body paragraph")))||c&&(null===(l=n[o+1])||void 0===l?void 0:l.title.toLowerCase().includes("conclusion")))&&(0,tr.jsxs)("div",{className:"relative",children:[(0,tr.jsxs)("button",{onClick:s,className:"w-full bg-white text-purple-600 border-2 border-dashed \r border-purple-600 rounded-full py-2 px-4 font-medium \r hover:bg-purple-100 transition-colors mb-4 flex items-center \r justify-center focus:outline-none focus:ring-2 focus:ring-purple-500 \r focus:ring-opacity-50",children:[(0,tr.jsx)(PS,{className:"w-5 h-5 mr-2"}),"Add Body Paragraph"]}),(0,tr.jsx)("div",{className:"absolute left-1/2 top-full w-0.5 h-4 bg-purple-600 -translate-x-1/2"})]})]},t.id)}))}),(0,tr.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,tr.jsx)("button",{onClick:()=>{n.forEach((e=>{localStorage.removeItem(`essayContent_${e.id}`),localStorage.removeItem(`sectionRequirements_${e.id}`)})),localStorage.removeItem("essaySections"),localStorage.removeItem("essayInfo");for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);t&&(t.startsWith("essay")||t.startsWith("section")||t.includes("Requirements")||t.includes("Analysis"))&&localStorage.removeItem(t)}e("/essayguidance")},className:"bg-red-500 text-white px-4 py-2 rounded-full hover:bg-red-600 \r transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 \r focus:ring-opacity-50",children:"Cancel"}),(0,tr.jsx)("button",{onClick:()=>{e("/essayreview",{state:{allSections:n,essayInfo:i}})},className:"bg-purple-600 text-white px-4 py-2 rounded-full hover:bg-purple-700 \r transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500 \r focus:ring-opacity-50",children:"Next"})]})]})})}const $S=a.forwardRef((function(e,t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),a.createElement("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"}))}));const LS=a.forwardRef((function(e,t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),a.createElement("path",{d:"M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z"}),a.createElement("path",{d:"M15 7v2a4 4 0 01-4 4H9.828l-1.766 1.767c.28.149.599.233.938.233h2l3 3v-3h2a2 2 0 002-2V9a2 2 0 00-2-2h-1z"}))}));const DS=a.forwardRef((function(e,t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),a.createElement("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z",clipRule:"evenodd"}),a.createElement("path",{d:"M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"}))}));const zS=a.forwardRef((function(e,t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),a.createElement("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),a.createElement("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"}))}));const FS=a.forwardRef((function(e,t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),a.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"}))}));const BS=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,US=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,HS={};function VS(e,t){return((t||HS).jsx?US:BS).test(e)}const WS=/[ \t\n\f\r]/g;function qS(e){return""===e.replace(WS,"")}class JS{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}}function KS(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new JS(n,r,t)}function GS(e){return e.toLowerCase()}JS.prototype.property={},JS.prototype.normal={},JS.prototype.space=null;class ZS{constructor(e,t){this.property=e,this.attribute=t}}ZS.prototype.space=null,ZS.prototype.boolean=!1,ZS.prototype.booleanish=!1,ZS.prototype.overloadedBoolean=!1,ZS.prototype.number=!1,ZS.prototype.commaSeparated=!1,ZS.prototype.spaceSeparated=!1,ZS.prototype.commaOrSpaceSeparated=!1,ZS.prototype.mustUseProperty=!1,ZS.prototype.defined=!1;let YS=0;const XS=o_(),QS=o_(),e_=o_(),t_=o_(),n_=o_(),r_=o_(),i_=o_();function o_(){return 2**++YS}const s_=Object.keys(i);class a_ extends ZS{constructor(e,t,n,r){let o=-1;if(super(e,t),l_(this,"space",r),"number"===typeof n)for(;++o<s_.length;){const e=s_[o];l_(this,s_[o],(n&i[e])===i[e])}}}function l_(e,t,n){n&&(e[t]=n)}a_.prototype.defined=!0;const c_={}.hasOwnProperty;function u_(e){const t={},n={};let r;for(r in e.properties)if(c_.call(e.properties,r)){const i=e.properties[r],o=new a_(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[GS(r)]=r,n[GS(o.attribute)]=r}return new JS(t,n,e.space)}const d_=u_({space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),h_=u_({space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function p_(e,t){return t in e?e[t]:t}function f_(e,t){return p_(e,t.toLowerCase())}const m_=u_({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:f_,properties:{xmlns:null,xmlnsXLink:null}}),g_=u_({transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:QS,ariaAutoComplete:null,ariaBusy:QS,ariaChecked:QS,ariaColCount:t_,ariaColIndex:t_,ariaColSpan:t_,ariaControls:n_,ariaCurrent:null,ariaDescribedBy:n_,ariaDetails:null,ariaDisabled:QS,ariaDropEffect:n_,ariaErrorMessage:null,ariaExpanded:QS,ariaFlowTo:n_,ariaGrabbed:QS,ariaHasPopup:null,ariaHidden:QS,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:n_,ariaLevel:t_,ariaLive:null,ariaModal:QS,ariaMultiLine:QS,ariaMultiSelectable:QS,ariaOrientation:null,ariaOwns:n_,ariaPlaceholder:null,ariaPosInSet:t_,ariaPressed:QS,ariaReadOnly:QS,ariaRelevant:null,ariaRequired:QS,ariaRoleDescription:n_,ariaRowCount:t_,ariaRowIndex:t_,ariaRowSpan:t_,ariaSelected:QS,ariaSetSize:t_,ariaSort:null,ariaValueMax:t_,ariaValueMin:t_,ariaValueNow:t_,ariaValueText:null,role:null}}),y_=u_({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:f_,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:r_,acceptCharset:n_,accessKey:n_,action:null,allow:null,allowFullScreen:XS,allowPaymentRequest:XS,allowUserMedia:XS,alt:null,as:null,async:XS,autoCapitalize:null,autoComplete:n_,autoFocus:XS,autoPlay:XS,blocking:n_,capture:null,charSet:null,checked:XS,cite:null,className:n_,cols:t_,colSpan:null,content:null,contentEditable:QS,controls:XS,controlsList:n_,coords:t_|r_,crossOrigin:null,data:null,dateTime:null,decoding:null,default:XS,defer:XS,dir:null,dirName:null,disabled:XS,download:e_,draggable:QS,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:XS,formTarget:null,headers:n_,height:t_,hidden:XS,high:t_,href:null,hrefLang:null,htmlFor:n_,httpEquiv:n_,id:null,imageSizes:null,imageSrcSet:null,inert:XS,inputMode:null,integrity:null,is:null,isMap:XS,itemId:null,itemProp:n_,itemRef:n_,itemScope:XS,itemType:n_,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:XS,low:t_,manifest:null,max:null,maxLength:t_,media:null,method:null,min:null,minLength:t_,multiple:XS,muted:XS,name:null,nonce:null,noModule:XS,noValidate:XS,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:XS,optimum:t_,pattern:null,ping:n_,placeholder:null,playsInline:XS,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:XS,referrerPolicy:null,rel:n_,required:XS,reversed:XS,rows:t_,rowSpan:t_,sandbox:n_,scope:null,scoped:XS,seamless:XS,selected:XS,shadowRootClonable:XS,shadowRootDelegatesFocus:XS,shadowRootMode:null,shape:null,size:t_,sizes:null,slot:null,span:t_,spellCheck:QS,src:null,srcDoc:null,srcLang:null,srcSet:null,start:t_,step:null,style:null,tabIndex:t_,target:null,title:null,translate:null,type:null,typeMustMatch:XS,useMap:null,value:QS,width:t_,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:n_,axis:null,background:null,bgColor:null,border:t_,borderColor:null,bottomMargin:t_,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:XS,declare:XS,event:null,face:null,frame:null,frameBorder:null,hSpace:t_,leftMargin:t_,link:null,longDesc:null,lowSrc:null,marginHeight:t_,marginWidth:t_,noResize:XS,noHref:XS,noShade:XS,noWrap:XS,object:null,profile:null,prompt:null,rev:null,rightMargin:t_,rules:null,scheme:null,scrolling:QS,standby:null,summary:null,text:null,topMargin:t_,valueType:null,version:null,vAlign:null,vLink:null,vSpace:t_,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:XS,disableRemotePlayback:XS,prefix:null,property:null,results:t_,security:null,unselectable:null}}),v_=u_({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:p_,properties:{about:i_,accentHeight:t_,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:t_,amplitude:t_,arabicForm:null,ascent:t_,attributeName:null,attributeType:null,azimuth:t_,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:t_,by:null,calcMode:null,capHeight:t_,className:n_,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:t_,diffuseConstant:t_,direction:null,display:null,dur:null,divisor:t_,dominantBaseline:null,download:XS,dx:null,dy:null,edgeMode:null,editable:null,elevation:t_,enableBackground:null,end:null,event:null,exponent:t_,externalResourcesRequired:null,fill:null,fillOpacity:t_,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:r_,g2:r_,glyphName:r_,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:t_,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:t_,horizOriginX:t_,horizOriginY:t_,id:null,ideographic:t_,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:t_,k:t_,k1:t_,k2:t_,k3:t_,k4:t_,kernelMatrix:i_,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:t_,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:t_,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:t_,overlineThickness:t_,paintOrder:null,panose1:null,path:null,pathLength:t_,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:n_,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:t_,pointsAtY:t_,pointsAtZ:t_,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:i_,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:i_,rev:i_,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:i_,requiredFeatures:i_,requiredFonts:i_,requiredFormats:i_,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:t_,specularExponent:t_,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:t_,strikethroughThickness:t_,string:null,stroke:null,strokeDashArray:i_,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:t_,strokeOpacity:t_,strokeWidth:null,style:null,surfaceScale:t_,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:i_,tabIndex:t_,tableValues:null,target:null,targetX:t_,targetY:t_,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:i_,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:t_,underlineThickness:t_,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:t_,values:null,vAlphabetic:t_,vMathematical:t_,vectorEffect:null,vHanging:t_,vIdeographic:t_,version:null,vertAdvY:t_,vertOriginX:t_,vertOriginY:t_,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:t_,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),b_=KS([h_,d_,m_,g_,y_],"html"),w_=KS([h_,d_,m_,g_,v_],"svg"),x_=/^data[-\w.:]+$/i,k_=/-[a-z]/g,S_=/[A-Z]/g;function __(e){return"-"+e.toLowerCase()}function E_(e){return e.charAt(1).toUpperCase()}const C_={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};var O_=n(4222);const N_=O_.default||O_,T_=j_("end"),A_=j_("start");function j_(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"===typeof n.line&&n.line>0&&"number"===typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"===typeof n.offset&&n.offset>-1?n.offset:void 0}}}function P_(e){return e&&"object"===typeof e?"position"in e||"type"in e?R_(e.position):"start"in e||"end"in e?R_(e):"line"in e||"column"in e?I_(e):"":""}function I_(e){return M_(e&&e.line)+":"+M_(e&&e.column)}function R_(e){return I_(e&&e.start)+"-"+I_(e&&e.end)}function M_(e){return e&&"number"===typeof e?e:1}class $_ extends Error{constructor(e,t,n){super(),"string"===typeof t&&(n=t,t=void 0);let r="",i={},o=!1;if(t&&(i="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:{...t}),"string"===typeof e?r=e:!i.cause&&e&&(o=!0,r=e.message,i.cause=e),!i.ruleId&&!i.source&&"string"===typeof n){const e=n.indexOf(":");-1===e?i.ruleId=n:(i.source=n.slice(0,e),i.ruleId=n.slice(e+1))}if(!i.place&&i.ancestors&&i.ancestors){const e=i.ancestors[i.ancestors.length-1];e&&(i.place=e.position)}const s=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=s?s.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=s?s.line:void 0,this.name=P_(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=o&&i.cause&&"string"===typeof i.cause.stack?i.cause.stack:"",this.actual,this.expected,this.note,this.url}}$_.prototype.file="",$_.prototype.name="",$_.prototype.reason="",$_.prototype.message="",$_.prototype.stack="",$_.prototype.column=void 0,$_.prototype.line=void 0,$_.prototype.ancestors=void 0,$_.prototype.cause=void 0,$_.prototype.fatal=void 0,$_.prototype.place=void 0,$_.prototype.ruleId=void 0,$_.prototype.source=void 0;const L_={}.hasOwnProperty,D_=new Map,z_=/[A-Z]/g,F_=/-([a-z])/g,B_=new Set(["table","tbody","thead","tfoot","tr"]),U_=new Set(["td","th"]),H_="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function V_(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if("function"!==typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=function(e,t){return n;function n(n,r,i,o){const s=Array.isArray(i.children),a=A_(n);return t(r,i,o,s,{columnNumber:a?a.column-1:void 0,fileName:e,lineNumber:a?a.line:void 0},void 0)}}(n,t.jsxDEV)}else{if("function"!==typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!==typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");r=function(e,t,n){return r;function r(e,r,i,o){const s=Array.isArray(i.children)?n:t;return o?s(r,i,o):s(r,i)}}(0,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?w_:b_,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},o=W_(i,e,void 0);return o&&"string"!==typeof o?o:i.create(e,i.Fragment,{children:o||void 0},void 0)}function W_(e,t,n){return"element"===t.type?function(e,t,n){const r=e.schema;let i=r;"svg"===t.tagName.toLowerCase()&&"html"===r.space&&(i=w_,e.schema=i);e.ancestors.push(t);const o=Z_(e,t.tagName,!1),s=function(e,t){const n={};let r,i;for(i in t.properties)if("children"!==i&&L_.call(t.properties,i)){const o=G_(e,i,t.properties[i]);if(o){const[i,s]=o;e.tableCellAlignToStyle&&"align"===i&&"string"===typeof s&&U_.has(t.tagName)?r=s:n[i]=s}}if(r){(n.style||(n.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=r}return n}(e,t);let a=K_(e,t);B_.has(t.tagName)&&(a=a.filter((function(e){return"string"!==typeof e||!("object"===typeof(t=e)?"text"===t.type&&qS(t.value):qS(t));var t})));return q_(e,s,o,t),J_(s,a),e.ancestors.pop(),e.schema=r,e.create(t,o,s,n)}(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}Y_(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,n){const r=e.schema;let i=r;"svg"===t.name&&"html"===r.space&&(i=w_,e.schema=i);e.ancestors.push(t);const o=null===t.name?e.Fragment:Z_(e,t.name,!0),s=function(e,t){const n={};for(const r of t.attributes)if("mdxJsxExpressionAttribute"===r.type)if(r.data&&r.data.estree&&e.evaluater){const t=r.data.estree.body[0];t.type;const i=t.expression;i.type;const o=i.properties[0];o.type,Object.assign(n,e.evaluater.evaluateExpression(o.argument))}else Y_(e,t.position);else{const i=r.name;let o;if(r.value&&"object"===typeof r.value)if(r.value.data&&r.value.data.estree&&e.evaluater){const t=r.value.data.estree.body[0];t.type,o=e.evaluater.evaluateExpression(t.expression)}else Y_(e,t.position);else o=null===r.value||r.value;n[i]=o}return n}(e,t),a=K_(e,t);return q_(e,s,o,t),J_(s,a),e.ancestors.pop(),e.schema=r,e.create(t,o,s,n)}(e,t,n):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Y_(e,t.position)}(e,t):"root"===t.type?function(e,t,n){const r={};return J_(r,K_(e,t)),e.create(t,e.Fragment,r,n)}(e,t,n):"text"===t.type?function(e,t){return t.value}(0,t):void 0}function q_(e,t,n,r){"string"!==typeof n&&n!==e.Fragment&&e.passNode&&(t.node=r)}function J_(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function K_(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:D_;for(;++r<t.children.length;){const o=t.children[r];let s;if(e.passKeys){const e="element"===o.type?o.tagName:"mdxJsxFlowElement"===o.type||"mdxJsxTextElement"===o.type?o.name:void 0;if(e){const t=i.get(e)||0;s=e+"-"+t,i.set(e,t+1)}}const a=W_(e,o,s);void 0!==a&&n.push(a)}return n}function G_(e,t,n){const r=function(e,t){const n=GS(t);let r=t,i=ZS;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&x_.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(k_,E_);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!k_.test(e)){let n=e.replace(S_,__);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}i=a_}return new i(r,t)}(e.schema,t);if(!(null===n||void 0===n||"number"===typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?function(e,t){const n=t||{};return(""===e[e.length-1]?[...e,""]:e).join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}(n):n.join(" ").trim()),"style"===r.property){let t="object"===typeof n?n:function(e,t){const n={};try{N_(t,r)}catch(i){if(!e.ignoreInvalidStyle){const t=i,n=new $_("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:t,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=H_+"#cannot-parse-style-attribute",n}}return n;function r(e,t){let r=e;"--"!==r.slice(0,2)&&("-ms-"===r.slice(0,4)&&(r="ms-"+r.slice(4)),r=r.replace(F_,Q_)),n[r]=t}}(e,String(n));return"css"===e.stylePropertyNameCase&&(t=function(e){const t={};let n;for(n in e)L_.call(e,n)&&(t[X_(n)]=e[n]);return t}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&r.space?C_[r.property]||r.property:r.attribute,n]}}function Z_(e,t,n){let r;if(n)if(t.includes(".")){const e=t.split(".");let n,i=-1;for(;++i<e.length;){const t=VS(e[i])?{type:"Identifier",name:e[i]}:{type:"Literal",value:e[i]};n=n?{type:"MemberExpression",object:n,property:t,computed:Boolean(i&&"Literal"===t.type),optional:!1}:t}r=n}else r=VS(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else r={type:"Literal",value:t};if("Literal"===r.type){const t=r.value;return L_.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(r);Y_(e)}function Y_(e,t){const n=new $_("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=H_+"#cannot-handle-mdx-estrees-without-createevaluater",n}function X_(e){let t=e.replace(z_,eE);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function Q_(e,t){return t.toUpperCase()}function eE(e){return"-"+e.toLowerCase()}const tE={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},nE={};function rE(e,t,n){if(function(e){return Boolean(e&&"object"===typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return iE(e.children,t,n)}return Array.isArray(e)?iE(e,t,n):""}function iE(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=rE(e[i],t,n);return r.join("")}function oE(e,t,n,r){const i=e.length;let o,s=0;if(t=t<0?-t>i?0:i+t:t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function sE(e,t){return e.length>0?(oE(e,e.length,0,t),e):t}class aE{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=null===t||void 0===t?Number.POSITIVE_INFINITY:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const r=t||0;this.setCursor(Math.trunc(e));const i=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return n&&lE(this.left,n),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),lE(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),lE(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&0===this.right.length||e<0&&0===this.left.length))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);lE(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);lE(this.left,t.reverse())}}}function lE(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function cE(e){const t={};let n,r,i,o,s,a,l,c=-1;const u=new aE(e);for(;++c<u.length;){for(;c in t;)c=t[c];if(n=u.get(c),c&&"chunkFlow"===n[1].type&&"listItemPrefix"===u.get(c-1)[1].type&&(a=n[1]._tokenizer.events,i=0,i<a.length&&"lineEndingBlank"===a[i][1].type&&(i+=2),i<a.length&&"content"===a[i][1].type))for(;++i<a.length&&"content"!==a[i][1].type;)"chunkText"===a[i][1].type&&(a[i][1]._isInFirstContentOfListItem=!0,i++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,uE(u,c)),c=t[c],l=!0);else if(n[1]._container){for(i=c,r=void 0;i--&&(o=u.get(i),"lineEnding"===o[1].type||"lineEndingBlank"===o[1].type);)"enter"===o[0]&&(r&&(u.get(r)[1].type="lineEndingBlank"),o[1].type="lineEnding",r=i);r&&(n[1].end=Object.assign({},u.get(r)[1].start),s=u.slice(r,c),s.unshift(n),u.splice(r,c-r+1,s))}}return oE(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!l}function uE(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const o=[],s=n._tokenizer||r.parser[n.contentType](n.start),a=s.events,l=[],c={};let u,d,h=-1,p=n,f=0,m=0;const g=[m];for(;p;){for(;e.get(++i)[1]!==p;);o.push(i),p._tokenizer||(u=r.sliceStream(p),p.next||u.push(null),d&&s.defineSkip(p.start),p._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=!0),s.write(u),p._isInFirstContentOfListItem&&(s._gfmTasklistFirstContentOfListItem=void 0)),d=p,p=p.next}for(p=n;++h<a.length;)"exit"===a[h][0]&&"enter"===a[h-1][0]&&a[h][1].type===a[h-1][1].type&&a[h][1].start.line!==a[h][1].end.line&&(m=h+1,g.push(m),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(s.events=[],p?(p._tokenizer=void 0,p.previous=void 0):g.pop(),h=g.length;h--;){const t=a.slice(g[h],g[h+1]),n=o.pop();l.push([n,n+t.length-1]),e.splice(n,2,t)}for(l.reverse(),h=-1;++h<l.length;)c[f+l[h][0]]=f+l[h][1],f+=l[h][1]-l[h][0]-1;return c}const dE={}.hasOwnProperty;function hE(e,t){let n;for(n in t){const r=(dE.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let o;if(i)for(o in i){dE.call(r,o)||(r[o]=[]);const e=i[o];pE(r[o],Array.isArray(e)?e:e?[e]:[])}}}function pE(e,t){let n=-1;const r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);oE(e,0,0,r)}const fE=CE(/[A-Za-z]/),mE=CE(/[\dA-Za-z]/),gE=CE(/[#-'*+\--9=?A-Z^-~]/);function yE(e){return null!==e&&(e<32||127===e)}const vE=CE(/\d/),bE=CE(/[\dA-Fa-f]/),wE=CE(/[!-/:-@[-`{-~]/);function xE(e){return null!==e&&e<-2}function kE(e){return null!==e&&(e<0||32===e)}function SE(e){return-2===e||-1===e||32===e}const _E=CE(/\p{P}|\p{S}/u),EE=CE(/\s/);function CE(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function OE(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return function(r){if(SE(r))return e.enter(n),s(r);return t(r)};function s(r){return SE(r)&&o++<i?(e.consume(r),s):(e.exit(n),t(r))}}const NE={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,(function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),OE(e,t,"linePrefix")}),(function(t){return e.enter("paragraph"),r(t)}));let n;return t;function r(t){const r=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=r),n=r,i(t)}function i(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):xE(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),i)}}};const TE={tokenize:function(e){const t=this,n=[];let r,i,o,s=0;return a;function a(r){if(s<n.length){const i=n[s];return t.containerState=i[1],e.attempt(i[0].continuation,l,c)(r)}return c(r)}function l(e){if(s++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&v();const n=t.events.length;let i,o=n;for(;o--;)if("exit"===t.events[o][0]&&"chunkFlow"===t.events[o][1].type){i=t.events[o][1].end;break}y(s);let a=n;for(;a<t.events.length;)t.events[a][1].end=Object.assign({},i),a++;return oE(t.events,o+1,0,t.events.slice(n)),t.events.length=a,c(e)}return a(e)}function c(i){if(s===n.length){if(!r)return h(i);if(r.currentConstruct&&r.currentConstruct.concrete)return f(i);t.interrupt=Boolean(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(AE,u,d)(i)}function u(e){return r&&v(),y(s),h(e)}function d(e){return t.parser.lazy[t.now().line]=s!==n.length,o=t.now().offset,f(e)}function h(n){return t.containerState={},e.attempt(AE,p,f)(n)}function p(e){return s++,n.push([t.currentConstruct,t.containerState]),h(e)}function f(n){return null===n?(r&&v(),y(0),void e.consume(n)):(r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:i,_tokenizer:r}),m(n))}function m(n){return null===n?(g(e.exit("chunkFlow"),!0),y(0),void e.consume(n)):xE(n)?(e.consume(n),g(e.exit("chunkFlow")),s=0,t.interrupt=void 0,a):(e.consume(n),m)}function g(e,n){const a=t.sliceStream(e);if(n&&a.push(null),e.previous=i,i&&(i.next=e),i=e,r.defineSkip(e.start),r.write(a),t.parser.lazy[e.start.line]){let e=r.events.length;for(;e--;)if(r.events[e][1].start.offset<o&&(!r.events[e][1].end||r.events[e][1].end.offset>o))return;const n=t.events.length;let i,a,l=n;for(;l--;)if("exit"===t.events[l][0]&&"chunkFlow"===t.events[l][1].type){if(i){a=t.events[l][1].end;break}i=!0}for(y(s),e=n;e<t.events.length;)t.events[e][1].end=Object.assign({},a),e++;oE(t.events,l+1,0,t.events.slice(n)),t.events.length=e}}function y(r){let i=n.length;for(;i-- >r;){const r=n[i];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function v(){r.write([null]),i=void 0,r=void 0,t.containerState._closeFlow=void 0}}},AE={tokenize:function(e,t,n){return OE(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};const jE={tokenize:function(e,t,n){return function(t){return SE(t)?OE(e,r,"linePrefix")(t):r(t)};function r(e){return null===e||xE(e)?t(e):n(e)}},partial:!0};const PE={tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?i(t):xE(t)?e.check(IE,o,i)(t):(e.consume(t),r)}function i(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function o(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}},resolve:function(e){return cE(e),e}},IE={tokenize:function(e,t,n){const r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),OE(e,i,"linePrefix")};function i(i){if(null===i||xE(i))return n(i);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&"linePrefix"===o[1].type&&o[2].sliceSerialize(o[1],!0).length>=4?t(i):e.interrupt(r.parser.constructs.flow,n,t)(i)}},partial:!0};const RE={tokenize:function(e){const t=this,n=e.attempt(jE,(function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}),e.attempt(this.parser.constructs.flowInitial,r,OE(e,e.attempt(this.parser.constructs.flow,r,e.attempt(PE,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}};const ME={resolveAll:zE()},$E=DE("string"),LE=DE("text");function DE(e){return{tokenize:function(t){const n=this,r=this.parser.constructs[e],i=t.attempt(r,o,s);return o;function o(e){return l(e)?i(e):s(e)}function s(e){if(null!==e)return t.enter("data"),t.consume(e),a;t.consume(e)}function a(e){return l(e)?(t.exit("data"),i(e)):(t.consume(e),a)}function l(e){if(null===e)return!0;const t=r[e];let i=-1;if(t)for(;++i<t.length;){const e=t[i];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}},resolveAll:zE("text"===e?FE:void 0)}}function zE(e){return function(t,n){let r,i=-1;for(;++i<=t.length;)void 0===r?t[i]&&"data"===t[i][1].type&&(r=i,i++):t[i]&&"data"===t[i][1].type||(i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),i=r+2),r=void 0);return e?e(t,n):t}}function FE(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const r=e[n-1][1],i=t.sliceStream(r);let o,s=i.length,a=-1,l=0;for(;s--;){const e=i[s];if("string"===typeof e){for(a=e.length;32===e.charCodeAt(a-1);)l++,a--;if(a)break;a=-1}else if(-2===e)o=!0,l++;else if(-1!==e){s++;break}}if(l){const i={type:n===e.length||o||l<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-l,offset:r.end.offset-l,_index:r.start._index+s,_bufferIndex:s?a:r.start._bufferIndex+a},end:Object.assign({},r.end)};r.end=Object.assign({},i.start),r.start.offset===r.end.offset?Object.assign(r,i):(e.splice(n,0,["enter",i,t],["exit",i,t]),n+=2)}n++}return e}function BE(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}function UE(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},o=[];let s=[],a=[],l=!0;const c={consume:function(e){xE(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,w()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===s[r._index].length&&(r._bufferIndex=-1,r._index++));u.previous=e,l=!0},enter:function(e,t){const n=t||{};return n.type=e,n.start=f(),u.events.push(["enter",n,u]),a.push(n),n},exit:function(e){const t=a.pop();return t.end=f(),u.events.push(["exit",t,u]),t},attempt:v((function(e,t){b(e,t.from)})),check:v(y),interrupt:v(y,{interrupt:!0})},u={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:p,sliceSerialize:function(e,t){return function(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const o=e[n];let s;if("string"===typeof o)s=o;else switch(o){case-5:s="\r";break;case-4:s="\n";break;case-3:s="\r\n";break;case-2:s=t?" ":"\t";break;case-1:if(!t&&i)continue;s=" ";break;default:s=String.fromCharCode(o)}i=-2===o,r.push(s)}return r.join("")}(p(e),t)},now:f,defineSkip:function(e){i[e.line]=e.column,w()},write:function(e){if(s=sE(s,e),m(),null!==s[s.length-1])return[];return b(t,0),u.events=BE(o,u.events,u),u.events}};let d,h=t.tokenize.call(u,c);return t.resolveAll&&o.push(t),u;function p(e){return function(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let s;if(n===i)s=[e[n].slice(r,o)];else{if(s=e.slice(n,i),r>-1){const e=s[0];"string"===typeof e?s[0]=e.slice(r):s.shift()}o>0&&s.push(e[i].slice(0,o))}return s}(s,e)}function f(){const{line:e,column:t,offset:n,_index:i,_bufferIndex:o}=r;return{line:e,column:t,offset:n,_index:i,_bufferIndex:o}}function m(){let e;for(;r._index<s.length;){const t=s[r._index];if("string"===typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)g(t.charCodeAt(r._bufferIndex));else g(t)}}function g(e){l=void 0,d=e,h=h(e)}function y(e,t){t.restore()}function v(e,t){return function(n,i,o){let s,d,h,p;return Array.isArray(n)?m(n):"tokenize"in n?m([n]):function(e){return t;function t(t){const n=null!==t&&e[t],r=null!==t&&e.null;return m([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]])(t)}}(n);function m(e){return s=e,d=0,0===e.length?o:g(e[d])}function g(e){return function(n){p=function(){const e=f(),t=u.previous,n=u.currentConstruct,i=u.events.length,o=Array.from(a);return{restore:s,from:i};function s(){r=e,u.previous=t,u.currentConstruct=n,u.events.length=i,a=o,w()}}(),h=e,e.partial||(u.currentConstruct=e);if(e.name&&u.parser.constructs.disable.null.includes(e.name))return v(n);return e.tokenize.call(t?Object.assign(Object.create(u),t):u,c,y,v)(n)}}function y(t){return l=!0,e(h,p),i}function v(e){return l=!0,p.restore(),++d<s.length?g(s[d]):o}}}function b(e,t){e.resolveAll&&!o.includes(e)&&o.push(e),e.resolve&&oE(u.events,t,u.events.length-t,e.resolve(u.events.slice(t),u)),e.resolveTo&&(u.events=e.resolveTo(u.events,u))}function w(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}const HE={name:"thematicBreak",tokenize:function(e,t,n){let r,i=0;return function(t){return e.enter("thematicBreak"),function(e){return r=e,o(e)}(t)};function o(o){return o===r?(e.enter("thematicBreakSequence"),s(o)):i>=3&&(null===o||xE(o))?(e.exit("thematicBreak"),t(o)):n(o)}function s(t){return t===r?(e.consume(t),i++,s):(e.exit("thematicBreakSequence"),SE(t)?OE(e,o,"whitespace")(t):o(t))}}};const VE={name:"list",tokenize:function(e,t,n){const r=this,i=r.events[r.events.length-1];let o=i&&"linePrefix"===i[1].type?i[2].sliceSerialize(i[1],!0).length:0,s=0;return function(t){const i=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===i?!r.containerState.marker||t===r.containerState.marker:vE(t)){if(r.containerState.type||(r.containerState.type=i,e.enter(i,{_container:!0})),"listUnordered"===i)return e.enter("listItemPrefix"),42===t||45===t?e.check(HE,n,l)(t):l(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),a(t)}return n(t)};function a(t){return vE(t)&&++s<10?(e.consume(t),a):(!r.interrupt||s<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(jE,r.interrupt?n:c,e.attempt(WE,d,u))}function c(e){return r.containerState.initialBlankLine=!0,o++,d(e)}function u(t){return SE(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),d):n(t)}function d(n){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}},continuation:{tokenize:function(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(jE,i,o);function i(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,OE(e,t,"listItemIndent",r.containerState.size+1)(n)}function o(n){return r.containerState.furtherBlankLines||!SE(n)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,s(n)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(qE,t,s)(n))}function s(i){return r.containerState._closeFlow=!0,r.interrupt=void 0,OE(e,e.attempt(VE,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}},exit:function(e){e.exit(this.containerState.type)}},WE={tokenize:function(e,t,n){const r=this;return OE(e,(function(e){const i=r.events[r.events.length-1];return!SE(e)&&i&&"listItemPrefixWhitespace"===i[1].type?t(e):n(e)}),"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)},partial:!0},qE={tokenize:function(e,t,n){const r=this;return OE(e,(function(e){const i=r.events[r.events.length-1];return i&&"listItemIndent"===i[1].type&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?t(e):n(e)}),"listItemIndent",r.containerState.size+1)},partial:!0};const JE={name:"blockQuote",tokenize:function(e,t,n){const r=this;return function(t){if(62===t){const n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),i}return n(t)};function i(n){return SE(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},continuation:{tokenize:function(e,t,n){const r=this;return function(t){if(SE(t))return OE(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return i(t)};function i(r){return e.attempt(JE,t,n)(r)}}},exit:function(e){e.exit("blockQuote")}};function KE(e,t,n,r,i,o,s,a,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return function(t){if(60===t)return e.enter(r),e.enter(i),e.enter(o),e.consume(t),e.exit(o),d;if(null===t||32===t||41===t||yE(t))return n(t);return e.enter(r),e.enter(s),e.enter(a),e.enter("chunkString",{contentType:"string"}),f(t)};function d(n){return 62===n?(e.enter(o),e.consume(n),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(n))}function h(t){return 62===t?(e.exit("chunkString"),e.exit(a),d(t)):null===t||60===t||xE(t)?n(t):(e.consume(t),92===t?p:h)}function p(t){return 60===t||62===t||92===t?(e.consume(t),h):h(t)}function f(i){return u||null!==i&&41!==i&&!kE(i)?u<c&&40===i?(e.consume(i),u++,f):41===i?(e.consume(i),u--,f):null===i||32===i||40===i||yE(i)?n(i):(e.consume(i),92===i?m:f):(e.exit("chunkString"),e.exit(a),e.exit(s),e.exit(r),t(i))}function m(t){return 40===t||41===t||92===t?(e.consume(t),f):f(t)}}function GE(e,t,n,r,i,o){const s=this;let a,l=0;return function(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),e.enter(o),c};function c(d){return l>999||null===d||91===d||93===d&&!a||94===d&&!l&&"_hiddenFootnoteSupport"in s.parser.constructs?n(d):93===d?(e.exit(o),e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):xE(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),u(d))}function u(t){return null===t||91===t||93===t||xE(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),a||(a=!SE(t)),92===t?d:u)}function d(t){return 91===t||92===t||93===t?(e.consume(t),l++,u):u(t)}}function ZE(e,t,n,r,i,o){let s;return function(t){if(34===t||39===t||40===t)return e.enter(r),e.enter(i),e.consume(t),e.exit(i),s=40===t?41:t,a;return n(t)};function a(n){return n===s?(e.enter(i),e.consume(n),e.exit(i),e.exit(r),t):(e.enter(o),l(n))}function l(t){return t===s?(e.exit(o),a(s)):null===t?n(t):xE(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),OE(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===s||null===t||xE(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return t===s||92===t?(e.consume(t),c):c(t)}}function YE(e,t){let n;return function r(i){if(xE(i))return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r;if(SE(i))return OE(e,r,n?"linePrefix":"lineSuffix")(i);return t(i)}}function XE(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const QE={name:"definition",tokenize:function(e,t,n){const r=this;let i;return function(t){return e.enter("definition"),function(t){return GE.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function o(t){return i=XE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),s):n(t)}function s(t){return kE(t)?YE(e,a)(t):a(t)}function a(t){return KE(e,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function l(t){return e.attempt(eC,c,c)(t)}function c(t){return SE(t)?OE(e,u,"whitespace")(t):u(t)}function u(o){return null===o||xE(o)?(e.exit("definition"),r.parser.defined.push(i),t(o)):n(o)}}},eC={tokenize:function(e,t,n){return function(t){return kE(t)?YE(e,r)(t):n(t)};function r(t){return ZE(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function i(t){return SE(t)?OE(e,o,"whitespace")(t):o(t)}function o(e){return null===e||xE(e)?t(e):n(e)}},partial:!0};const tC={name:"codeIndented",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("codeIndented"),OE(e,i,"linePrefix",5)(t)};function i(e){const t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?o(e):n(e)}function o(t){return null===t?a(t):xE(t)?e.attempt(nC,o,a)(t):(e.enter("codeFlowValue"),s(t))}function s(t){return null===t||xE(t)?(e.exit("codeFlowValue"),o(t)):(e.consume(t),s)}function a(n){return e.exit("codeIndented"),t(n)}}},nC={tokenize:function(e,t,n){const r=this;return i;function i(t){return r.parser.lazy[r.now().line]?n(t):xE(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i):OE(e,o,"linePrefix",5)(t)}function o(e){const o=r.events[r.events.length-1];return o&&"linePrefix"===o[1].type&&o[2].sliceSerialize(o[1],!0).length>=4?t(e):xE(e)?i(e):n(e)}},partial:!0};const rC={name:"headingAtx",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),i(t)}(t)};function i(t){return 35===t&&r++<6?(e.consume(t),i):null===t||kE(t)?(e.exit("atxHeadingSequence"),o(t)):n(t)}function o(n){return 35===n?(e.enter("atxHeadingSequence"),s(n)):null===n||xE(n)?(e.exit("atxHeading"),t(n)):SE(n)?OE(e,o,"whitespace")(n):(e.enter("atxHeadingText"),a(n))}function s(t){return 35===t?(e.consume(t),s):(e.exit("atxHeadingSequence"),o(t))}function a(t){return null===t||35===t||kE(t)?(e.exit("atxHeadingText"),o(t)):(e.consume(t),a)}},resolve:function(e,t){let n,r,i=e.length-2,o=3;"whitespace"===e[o][1].type&&(o+=2);i-2>o&&"whitespace"===e[i][1].type&&(i-=2);"atxHeadingSequence"===e[i][1].type&&(o===i-1||i-4>o&&"whitespace"===e[i-2][1].type)&&(i-=o+1===i?2:4);i>o&&(n={type:"atxHeadingText",start:e[o][1].start,end:e[i][1].end},r={type:"chunkText",start:e[o][1].start,end:e[i][1].end,contentType:"text"},oE(e,o,i-o+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e}};const iC={name:"setextUnderline",tokenize:function(e,t,n){const r=this;let i;return function(t){let s,a=r.events.length;for(;a--;)if("lineEnding"!==r.events[a][1].type&&"linePrefix"!==r.events[a][1].type&&"content"!==r.events[a][1].type){s="paragraph"===r.events[a][1].type;break}if(!r.parser.lazy[r.now().line]&&(r.interrupt||s))return e.enter("setextHeadingLine"),i=t,function(t){return e.enter("setextHeadingLineSequence"),o(t)}(t);return n(t)};function o(t){return t===i?(e.consume(t),o):(e.exit("setextHeadingLineSequence"),SE(t)?OE(e,s,"lineSuffix")(t):s(t))}function s(r){return null===r||xE(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}},resolveTo:function(e,t){let n,r,i,o=e.length;for(;o--;)if("enter"===e[o][0]){if("content"===e[o][1].type){n=o;break}"paragraph"===e[o][1].type&&(r=o)}else"content"===e[o][1].type&&e.splice(o,1),i||"definition"!==e[o][1].type||(i=o);const s={type:"setextHeading",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)};e[r][1].type="setextHeadingText",i?(e.splice(r,0,["enter",s,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end=Object.assign({},e[i][1].end)):e[n][1]=s;return e.push(["exit",s,t]),e}};const oC=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],sC=["pre","script","style","textarea"],aC={name:"htmlFlow",tokenize:function(e,t,n){const r=this;let i,o,s,a,l;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c}(t)};function c(a){return 33===a?(e.consume(a),u):47===a?(e.consume(a),o=!0,p):63===a?(e.consume(a),i=3,r.interrupt?t:R):fE(a)?(e.consume(a),s=String.fromCharCode(a),f):n(a)}function u(o){return 45===o?(e.consume(o),i=2,d):91===o?(e.consume(o),i=5,a=0,h):fE(o)?(e.consume(o),i=4,r.interrupt?t:R):n(o)}function d(i){return 45===i?(e.consume(i),r.interrupt?t:R):n(i)}function h(i){const o="CDATA[";return i===o.charCodeAt(a++)?(e.consume(i),6===a?r.interrupt?t:C:h):n(i)}function p(t){return fE(t)?(e.consume(t),s=String.fromCharCode(t),f):n(t)}function f(a){if(null===a||47===a||62===a||kE(a)){const l=47===a,c=s.toLowerCase();return l||o||!sC.includes(c)?oC.includes(s.toLowerCase())?(i=6,l?(e.consume(a),m):r.interrupt?t(a):C(a)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(a):o?g(a):y(a)):(i=1,r.interrupt?t(a):C(a))}return 45===a||mE(a)?(e.consume(a),s+=String.fromCharCode(a),f):n(a)}function m(i){return 62===i?(e.consume(i),r.interrupt?t:C):n(i)}function g(t){return SE(t)?(e.consume(t),g):_(t)}function y(t){return 47===t?(e.consume(t),_):58===t||95===t||fE(t)?(e.consume(t),v):SE(t)?(e.consume(t),y):_(t)}function v(t){return 45===t||46===t||58===t||95===t||mE(t)?(e.consume(t),v):b(t)}function b(t){return 61===t?(e.consume(t),w):SE(t)?(e.consume(t),b):y(t)}function w(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,x):SE(t)?(e.consume(t),w):k(t)}function x(t){return t===l?(e.consume(t),l=null,S):null===t||xE(t)?n(t):(e.consume(t),x)}function k(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||kE(t)?b(t):(e.consume(t),k)}function S(e){return 47===e||62===e||SE(e)?y(e):n(e)}function _(t){return 62===t?(e.consume(t),E):n(t)}function E(t){return null===t||xE(t)?C(t):SE(t)?(e.consume(t),E):n(t)}function C(t){return 45===t&&2===i?(e.consume(t),A):60===t&&1===i?(e.consume(t),j):62===t&&4===i?(e.consume(t),M):63===t&&3===i?(e.consume(t),R):93===t&&5===i?(e.consume(t),I):!xE(t)||6!==i&&7!==i?null===t||xE(t)?(e.exit("htmlFlowData"),O(t)):(e.consume(t),C):(e.exit("htmlFlowData"),e.check(lC,$,O)(t))}function O(t){return e.check(cC,N,$)(t)}function N(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),T}function T(t){return null===t||xE(t)?O(t):(e.enter("htmlFlowData"),C(t))}function A(t){return 45===t?(e.consume(t),R):C(t)}function j(t){return 47===t?(e.consume(t),s="",P):C(t)}function P(t){if(62===t){const n=s.toLowerCase();return sC.includes(n)?(e.consume(t),M):C(t)}return fE(t)&&s.length<8?(e.consume(t),s+=String.fromCharCode(t),P):C(t)}function I(t){return 93===t?(e.consume(t),R):C(t)}function R(t){return 62===t?(e.consume(t),M):45===t&&2===i?(e.consume(t),R):C(t)}function M(t){return null===t||xE(t)?(e.exit("htmlFlowData"),$(t)):(e.consume(t),M)}function $(n){return e.exit("htmlFlow"),t(n)}},resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},concrete:!0},lC={tokenize:function(e,t,n){return function(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(jE,t,n)}},partial:!0},cC={tokenize:function(e,t,n){const r=this;return function(t){if(xE(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i;return n(t)};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0};const uC={tokenize:function(e,t,n){const r=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}},partial:!0},dC={name:"codeFenced",tokenize:function(e,t,n){const r=this,i={tokenize:function(e,t,n){let i=0;return s;function s(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l}function l(t){return e.enter("codeFencedFence"),SE(t)?OE(e,c,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):c(t)}function c(t){return t===o?(e.enter("codeFencedFenceSequence"),u(t)):n(t)}function u(t){return t===o?(i++,e.consume(t),u):i>=a?(e.exit("codeFencedFenceSequence"),SE(t)?OE(e,d,"whitespace")(t):d(t)):n(t)}function d(r){return null===r||xE(r)?(e.exit("codeFencedFence"),t(r)):n(r)}},partial:!0};let o,s=0,a=0;return function(t){return function(t){const n=r.events[r.events.length-1];return s=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,o=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}(t)};function l(t){return t===o?(a++,e.consume(t),l):a<3?n(t):(e.exit("codeFencedFenceSequence"),SE(t)?OE(e,c,"whitespace")(t):c(t))}function c(n){return null===n||xE(n)?(e.exit("codeFencedFence"),r.interrupt?t(n):e.check(uC,p,v)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),u(n))}function u(t){return null===t||xE(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(t)):SE(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),OE(e,d,"whitespace")(t)):96===t&&t===o?n(t):(e.consume(t),u)}function d(t){return null===t||xE(t)?c(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),h(t))}function h(t){return null===t||xE(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(t)):96===t&&t===o?n(t):(e.consume(t),h)}function p(t){return e.attempt(i,v,f)(t)}function f(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),m}function m(t){return s>0&&SE(t)?OE(e,g,"linePrefix",s+1)(t):g(t)}function g(t){return null===t||xE(t)?e.check(uC,p,v)(t):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||xE(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),y)}function v(n){return e.exit("codeFenced"),t(n)}},concrete:!0};const hC=document.createElement("i");function pC(e){const t="&"+e+";";hC.innerHTML=t;const n=hC.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}const fC={name:"characterReference",tokenize:function(e,t,n){const r=this;let i,o,s=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),a};function a(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),i=31,o=mE,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,o=bE,c):(e.enter("characterReferenceValue"),i=7,o=vE,c(t))}function c(a){if(59===a&&s){const i=e.exit("characterReferenceValue");return o!==mE||pC(r.sliceSerialize(i))?(e.enter("characterReferenceMarker"),e.consume(a),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(a)}return o(a)&&s++<i?(e.consume(a),c):n(a)}}};const mC={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return wE(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};const gC={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),OE(e,t,"linePrefix")}}};const yC={name:"labelEnd",tokenize:function(e,t,n){const r=this;let i,o,s=r.events.length;for(;s--;)if(("labelImage"===r.events[s][1].type||"labelLink"===r.events[s][1].type)&&!r.events[s][1]._balanced){i=r.events[s][1];break}return function(t){if(!i)return n(t);if(i._inactive)return u(t);return o=r.parser.defined.includes(XE(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),a};function a(t){return 40===t?e.attempt(vC,c,o?c:u)(t):91===t?e.attempt(bC,c,o?l:u)(t):o?c(t):u(t)}function l(t){return e.attempt(wC,c,u)(t)}function c(e){return t(e)}function u(e){return i._balanced=!0,n(e)}},resolveTo:function(e,t){let n,r,i,o,s=e.length,a=0;for(;s--;)if(n=e[s][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[s][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(i){if("enter"===e[s][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=s,"labelLink"!==n.type)){a=2;break}}else"labelEnd"===n.type&&(i=s);const l={type:"labelLink"===e[r][1].type?"link":"image",start:Object.assign({},e[r][1].start),end:Object.assign({},e[e.length-1][1].end)},c={type:"label",start:Object.assign({},e[r][1].start),end:Object.assign({},e[i][1].end)},u={type:"labelText",start:Object.assign({},e[r+a+2][1].end),end:Object.assign({},e[i-2][1].start)};return o=[["enter",l,t],["enter",c,t]],o=sE(o,e.slice(r+1,r+a+3)),o=sE(o,[["enter",u,t]]),o=sE(o,BE(t.parser.constructs.insideSpan.null,e.slice(r+a+4,i-3),t)),o=sE(o,[["exit",u,t],e[i-2],e[i-1],["exit",c,t]]),o=sE(o,e.slice(i+1)),o=sE(o,[["exit",l,t]]),oE(e,r,e.length,o),e},resolveAll:function(e){let t=-1;for(;++t<e.length;){const n=e[t][1];"labelImage"!==n.type&&"labelLink"!==n.type&&"labelEnd"!==n.type||(e.splice(t+1,"labelImage"===n.type?4:2),n.type="data",t++)}return e}},vC={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),r};function r(t){return kE(t)?YE(e,i)(t):i(t)}function i(t){return 41===t?c(t):KE(e,o,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function o(t){return kE(t)?YE(e,a)(t):c(t)}function s(e){return n(e)}function a(t){return 34===t||39===t||40===t?ZE(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):c(t)}function l(t){return kE(t)?YE(e,c)(t):c(t)}function c(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},bC={tokenize:function(e,t,n){const r=this;return function(t){return GE.call(r,e,i,o,"reference","referenceMarker","referenceString")(t)};function i(e){return r.parser.defined.includes(XE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function o(e){return n(e)}}},wC={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};const xC={name:"labelStartImage",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),i};function i(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),o):n(t)}function o(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:yC.resolveAll};function kC(e){return null===e||kE(e)||EE(e)?1:_E(e)?2:void 0}const SC={name:"attention",tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=kC(r);let o;return function(t){return o=t,e.enter("attentionSequence"),s(t)};function s(a){if(a===o)return e.consume(a),s;const l=e.exit("attentionSequence"),c=kC(a),u=!c||2===c&&i||n.includes(a),d=!i||2===i&&c||n.includes(r);return l._open=Boolean(42===o?u:u&&(i||!d)),l._close=Boolean(42===o?d:d&&(c||!u)),t(a)}},resolveAll:function(e,t){let n,r,i,o,s,a,l,c,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close)for(n=u;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[n][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;a=e[n][1].end.offset-e[n][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;const d=Object.assign({},e[n][1].end),h=Object.assign({},e[u][1].start);_C(d,-a),_C(h,a),o={type:a>1?"strongSequence":"emphasisSequence",start:d,end:Object.assign({},e[n][1].end)},s={type:a>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[u][1].start),end:h},i={type:a>1?"strongText":"emphasisText",start:Object.assign({},e[n][1].end),end:Object.assign({},e[u][1].start)},r={type:a>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},s.end)},e[n][1].end=Object.assign({},o.start),e[u][1].start=Object.assign({},s.end),l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=sE(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=sE(l,[["enter",r,t],["enter",o,t],["exit",o,t],["enter",i,t]]),l=sE(l,BE(t.parser.constructs.insideSpan.null,e.slice(n+1,u),t)),l=sE(l,[["exit",i,t],["enter",s,t],["exit",s,t],["exit",r,t]]),e[u][1].end.offset-e[u][1].start.offset?(c=2,l=sE(l,[["enter",e[u][1],t],["exit",e[u][1],t]])):c=0,oE(e,n-1,u-n+3,l),u=n+l.length-c-2;break}u=-1;for(;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e}};function _C(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const EC={name:"autolink",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i};function i(t){return fE(t)?(e.consume(t),o):64===t?n(t):l(t)}function o(e){return 43===e||45===e||46===e||mE(e)?(r=1,s(e)):l(e)}function s(t){return 58===t?(e.consume(t),r=0,a):(43===t||45===t||46===t||mE(t))&&r++<32?(e.consume(t),s):(r=0,l(t))}function a(r){return 62===r?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(r),e.exit("autolinkMarker"),e.exit("autolink"),t):null===r||32===r||60===r||yE(r)?n(r):(e.consume(r),a)}function l(t){return 64===t?(e.consume(t),c):gE(t)?(e.consume(t),l):n(t)}function c(e){return mE(e)?u(e):n(e)}function u(n){return 46===n?(e.consume(n),r=0,c):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):d(n)}function d(t){if((45===t||mE(t))&&r++<63){const n=45===t?d:u;return e.consume(t),n}return n(t)}}};const CC={name:"htmlText",tokenize:function(e,t,n){const r=this;let i,o,s;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),a};function a(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),w):63===t?(e.consume(t),v):fE(t)?(e.consume(t),S):n(t)}function l(t){return 45===t?(e.consume(t),c):91===t?(e.consume(t),o=0,p):fE(t)?(e.consume(t),y):n(t)}function c(t){return 45===t?(e.consume(t),h):n(t)}function u(t){return null===t?n(t):45===t?(e.consume(t),d):xE(t)?(s=u,P(t)):(e.consume(t),u)}function d(t){return 45===t?(e.consume(t),h):u(t)}function h(e){return 62===e?j(e):45===e?d(e):u(e)}function p(t){const r="CDATA[";return t===r.charCodeAt(o++)?(e.consume(t),6===o?f:p):n(t)}function f(t){return null===t?n(t):93===t?(e.consume(t),m):xE(t)?(s=f,P(t)):(e.consume(t),f)}function m(t){return 93===t?(e.consume(t),g):f(t)}function g(t){return 62===t?j(t):93===t?(e.consume(t),g):f(t)}function y(t){return null===t||62===t?j(t):xE(t)?(s=y,P(t)):(e.consume(t),y)}function v(t){return null===t?n(t):63===t?(e.consume(t),b):xE(t)?(s=v,P(t)):(e.consume(t),v)}function b(e){return 62===e?j(e):v(e)}function w(t){return fE(t)?(e.consume(t),x):n(t)}function x(t){return 45===t||mE(t)?(e.consume(t),x):k(t)}function k(t){return xE(t)?(s=k,P(t)):SE(t)?(e.consume(t),k):j(t)}function S(t){return 45===t||mE(t)?(e.consume(t),S):47===t||62===t||kE(t)?_(t):n(t)}function _(t){return 47===t?(e.consume(t),j):58===t||95===t||fE(t)?(e.consume(t),E):xE(t)?(s=_,P(t)):SE(t)?(e.consume(t),_):j(t)}function E(t){return 45===t||46===t||58===t||95===t||mE(t)?(e.consume(t),E):C(t)}function C(t){return 61===t?(e.consume(t),O):xE(t)?(s=C,P(t)):SE(t)?(e.consume(t),C):_(t)}function O(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),i=t,N):xE(t)?(s=O,P(t)):SE(t)?(e.consume(t),O):(e.consume(t),T)}function N(t){return t===i?(e.consume(t),i=void 0,A):null===t?n(t):xE(t)?(s=N,P(t)):(e.consume(t),N)}function T(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||kE(t)?_(t):(e.consume(t),T)}function A(e){return 47===e||62===e||kE(e)?_(e):n(e)}function j(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}function P(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),I}function I(t){return SE(t)?OE(e,R,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):R(t)}function R(t){return e.enter("htmlTextData"),s(t)}}};const OC={name:"labelStartLink",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),i};function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}},resolveAll:yC.resolveAll};const NC={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),r};function r(r){return xE(r)?(e.exit("hardBreakEscape"),t(r)):n(r)}}};const TC={name:"codeText",tokenize:function(e,t,n){let r,i,o=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),s(t)};function s(t){return 96===t?(e.consume(t),o++,s):(e.exit("codeTextSequence"),a(t))}function a(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),a):96===t?(i=e.enter("codeTextSequence"),r=0,c(t)):xE(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||xE(t)?(e.exit("codeTextData"),a(t)):(e.consume(t),l)}function c(n){return 96===n?(e.consume(n),r++,c):r===o?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(i.type="codeTextData",l(n))}},resolve:function(e){let t,n,r=e.length-4,i=3;if(("lineEnding"===e[i][1].type||"space"===e[i][1].type)&&("lineEnding"===e[r][1].type||"space"===e[r][1].type))for(t=i;++t<r;)if("codeTextData"===e[t][1].type){e[i][1].type="codeTextPadding",e[r][1].type="codeTextPadding",i+=2,r-=2;break}t=i-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}};const AC={42:VE,43:VE,45:VE,48:VE,49:VE,50:VE,51:VE,52:VE,53:VE,54:VE,55:VE,56:VE,57:VE,62:JE},jC={91:QE},PC={[-2]:tC,[-1]:tC,32:tC},IC={35:rC,42:HE,45:[iC,HE],60:aC,61:iC,95:HE,96:dC,126:dC},RC={38:fC,92:mC},MC={[-5]:gC,[-4]:gC,[-3]:gC,33:xC,38:fC,42:SC,60:[EC,CC],91:OC,92:[NC,mC],93:yC,95:SC,96:TC},$C={null:[SC,ME]},LC={null:[42,95]},DC={null:[]};function zC(e){const t=function(e){const t={};let n=-1;for(;++n<e.length;)hE(t,e[n]);return t}([o,...(e||{}).extensions||[]]),n={defined:[],lazy:{},constructs:t,content:r(NE),document:r(TE),flow:r(RE),string:r($E),text:r(LE)};return n;function r(e){return function(t){return UE(n,e,t)}}}const FC=/[\0\t\n\r]/g;function BC(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535===(65535&n)||65534===(65535&n)||n>1114111?"\ufffd":String.fromCodePoint(n)}const UC=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function HC(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return BC(n.slice(t?2:1),t?16:10)}return pC(n)||e}const VC={}.hasOwnProperty;function WC(e,t,n){return"string"!==typeof t&&(n=t,t=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(te),autolinkProtocol:E,autolinkEmail:E,atxHeading:o(Y),blockQuote:o(q),characterEscape:E,characterReference:E,codeFenced:o(J),codeFencedFenceInfo:s,codeFencedFenceMeta:s,codeIndented:o(J,s),codeText:o(K,s),codeTextData:E,data:E,codeFlowValue:E,definition:o(G),definitionDestinationString:s,definitionLabelString:s,definitionTitleString:s,emphasis:o(Z),hardBreakEscape:o(X),hardBreakTrailing:o(X),htmlFlow:o(Q,s),htmlFlowData:E,htmlText:o(Q,s),htmlTextData:E,image:o(ee),label:s,link:o(te),listItem:o(re),listItemValue:h,listOrdered:o(ne,d),listUnordered:o(ne),paragraph:o(ie),reference:z,referenceString:s,resourceDestinationString:s,resourceTitleString:s,setextHeading:o(Y),strong:o(oe),thematicBreak:o(ae)},exit:{atxHeading:l(),atxHeadingSequence:x,autolink:l(),autolinkEmail:W,autolinkProtocol:V,blockQuote:l(),characterEscapeValue:C,characterReferenceMarkerHexadecimal:B,characterReferenceMarkerNumeric:B,characterReferenceValue:U,characterReference:H,codeFenced:l(g),codeFencedFence:m,codeFencedFenceInfo:p,codeFencedFenceMeta:f,codeFlowValue:C,codeIndented:l(y),codeText:l(j),codeTextData:C,data:C,definition:l(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:b,emphasis:l(),hardBreakEscape:l(N),hardBreakTrailing:l(N),htmlFlow:l(T),htmlFlowData:C,htmlText:l(A),htmlTextData:C,image:l(I),label:M,labelText:R,lineEnding:O,link:l(P),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:F,resourceDestinationString:$,resourceTitleString:L,resource:D,setextHeading:l(_),setextHeadingLineSequence:S,setextHeadingText:k,strong:l(),thematicBreak:l()}};JC(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(e){let r={type:"root",children:[]};const o={stack:[r],tokenStack:[],config:t,enter:a,exit:c,buffer:s,resume:u,data:n},l=[];let d=-1;for(;++d<e.length;)if("listOrdered"===e[d][1].type||"listUnordered"===e[d][1].type)if("enter"===e[d][0])l.push(d);else{d=i(e,l.pop(),d)}for(d=-1;++d<e.length;){const n=t[e[d][0]];VC.call(n,e[d][1].type)&&n[e[d][1].type].call(Object.assign({sliceSerialize:e[d][2].sliceSerialize},o),e[d][1])}if(o.tokenStack.length>0){const e=o.tokenStack[o.tokenStack.length-1];(e[1]||GC).call(o,void 0,e[0])}for(r.position={start:qC(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:qC(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},d=-1;++d<t.transforms.length;)r=t.transforms[d](r)||r;return r}function i(e,t,n){let r,i,o,s,a=t-1,l=-1,c=!1;for(;++a<=n;){const t=e[a];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,s=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!r||s||l||o||(o=a),s=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:s=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let s=a;for(i=void 0;s--;){const t=e[s];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;i&&(e[i][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",i=s}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}o&&(!i||o<i)&&(r._spread=!0),r.end=Object.assign({},i?e[i][1].start:t[1].end),e.splice(i||a,0,["exit",r,t[2]]),a++,n++}if("listItemPrefix"===t[1].type){const i={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};r=i,e.splice(a,0,["enter",i,t[2]]),a++,n++,o=void 0,s=!0}}}return e[t][1]._spread=c,n}function o(e,t){return n;function n(n){a.call(this,e(n),n),t&&t.call(this,n)}}function s(){this.stack.push({type:"fragment",children:[]})}function a(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n]),e.position={start:qC(t.start),end:void 0}}function l(e){return t;function t(t){e&&e.call(this,t),c.call(this,t)}}function c(e,t){const n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+e.type+"` ("+P_({start:e.start,end:e.end})+"): it\u2019s not open");if(r[0].type!==e.type)if(t)t.call(this,e,r[0]);else{(r[1]||GC).call(this,e,r[0])}n.position.end=qC(e.end)}function u(){return function(e,t){const n=t||nE;return rE(e,"boolean"!==typeof n.includeImageAlt||n.includeImageAlt,"boolean"!==typeof n.includeHtml||n.includeHtml)}(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function h(e){if(this.data.expectingFirstListItemValue){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0}}function p(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function f(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function v(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=XE(this.sliceSerialize(e)).toLowerCase()}function b(){const e=this.resume();this.stack[this.stack.length-1].title=e}function w(){const e=this.resume();this.stack[this.stack.length-1].url=e}function x(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function k(){this.data.setextHeadingSlurpLineEnding=!0}function S(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2}function _(){this.data.setextHeadingSlurpLineEnding=void 0}function E(e){const t=this.stack[this.stack.length-1].children;let n=t[t.length-1];n&&"text"===n.type||(n=se(),n.position={start:qC(e.start),end:void 0},t.push(n)),this.stack.push(n)}function C(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=qC(e.end)}function O(e){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak){return n.children[n.children.length-1].position.end=qC(e.end),void(this.data.atHardBreak=void 0)}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(E.call(this,e),C.call(this,e))}function N(){this.data.atHardBreak=!0}function T(){const e=this.resume();this.stack[this.stack.length-1].value=e}function A(){const e=this.resume();this.stack[this.stack.length-1].value=e}function j(){const e=this.resume();this.stack[this.stack.length-1].value=e}function P(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function I(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function R(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(UC,HC)}(t),n.identifier=XE(t).toLowerCase()}function M(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const t=e.children;n.children=t}else n.alt=t}function $(){const e=this.resume();this.stack[this.stack.length-1].url=e}function L(){const e=this.resume();this.stack[this.stack.length-1].title=e}function D(){this.data.inReference=void 0}function z(){this.data.referenceType="collapsed"}function F(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=XE(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"}function B(e){this.data.characterReferenceType=e.type}function U(e){const t=this.sliceSerialize(e),n=this.data.characterReferenceType;let r;if(n)r=BC(t,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0;else{r=pC(t)}this.stack[this.stack.length-1].value+=r}function H(e){this.stack.pop().position.end=qC(e.end)}function V(e){C.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function W(e){C.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function q(){return{type:"blockquote",children:[]}}function J(){return{type:"code",lang:null,meta:null,value:""}}function K(){return{type:"inlineCode",value:""}}function G(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Z(){return{type:"emphasis",children:[]}}function Y(){return{type:"heading",depth:0,children:[]}}function X(){return{type:"break"}}function Q(){return{type:"html",value:""}}function ee(){return{type:"image",title:null,url:"",alt:null}}function te(){return{type:"link",title:null,url:"",children:[]}}function ne(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function re(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function ie(){return{type:"paragraph",children:[]}}function oe(){return{type:"strong",children:[]}}function se(){return{type:"text",value:""}}function ae(){return{type:"thematicBreak"}}}(n)(function(e){for(;!cE(e););return e}(zC(n).document().write(function(){let e,t=1,n="",r=!0;return function(i,o,s){const a=[];let l,c,u,d,h;for(i=n+("string"===typeof i?i.toString():new TextDecoder(o||void 0).decode(i)),u=0,n="",r&&(65279===i.charCodeAt(0)&&u++,r=void 0);u<i.length;){if(FC.lastIndex=u,l=FC.exec(i),d=l&&void 0!==l.index?l.index:i.length,h=i.charCodeAt(d),!l){n=i.slice(u);break}if(10===h&&u===d&&e)a.push(-3),e=void 0;else switch(e&&(a.push(-5),e=void 0),u<d&&(a.push(i.slice(u,d)),t+=d-u),h){case 0:a.push(65533),t++;break;case 9:for(c=4*Math.ceil(t/4),a.push(-2);t++<c;)a.push(-1);break;case 10:a.push(-4),t=1;break;default:e=!0,t=1}u=d+1}return s&&(e&&a.push(-5),n&&a.push(n),a.push(null)),a}}()(e,t,!0))))}function qC(e){return{line:e.line,column:e.column,offset:e.offset}}function JC(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?JC(e,r):KC(e,r)}}function KC(e,t){let n;for(n in t)if(VC.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function GC(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+P_({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+P_({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+P_({start:t.start,end:t.end})+") is still open")}function ZC(e){const t=this;t.parser=function(n){return WC(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}const YC="object"===typeof self?self:globalThis,XC=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),r=i=>{if(e.has(i))return e.get(i);const[o,s]=t[i];switch(o){case 0:case-1:return n(s,i);case 1:{const e=n([],i);for(const t of s)e.push(r(t));return e}case 2:{const e=n({},i);for(const[t,n]of s)e[r(t)]=r(n);return e}case 3:return n(new Date(s),i);case 4:{const{source:e,flags:t}=s;return n(new RegExp(e,t),i)}case 5:{const e=n(new Map,i);for(const[t,n]of s)e.set(r(t),r(n));return e}case 6:{const e=n(new Set,i);for(const t of s)e.add(r(t));return e}case 7:{const{name:e,message:t}=s;return n(new YC[e](t),i)}case 8:return n(BigInt(s),i);case"BigInt":return n(Object(BigInt(s)),i)}return n(new YC[o](s),i)};return r})(new Map,e)(0),QC="",{toString:eO}={},{keys:tO}=Object,nO=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=eO.call(e).slice(8,-1);switch(n){case"Array":return[1,QC];case"Object":return[2,QC];case"Date":return[3,QC];case"RegExp":return[4,QC];case"Map":return[5,QC];case"Set":return[6,QC]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},rO=e=>{let[t,n]=e;return 0===t&&("function"===n||"symbol"===n)},iO=function(e){let{json:t,lossy:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];return((e,t,n,r)=>{const i=(e,t)=>{const i=r.push(e)-1;return n.set(t,i),i},o=r=>{if(n.has(r))return n.get(r);let[s,a]=nO(r);switch(s){case 0:{let t=r;switch(a){case"bigint":s=8,t=r.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+a);t=null;break;case"undefined":return i([-1],r)}return i([s,t],r)}case 1:{if(a)return i([a,[...r]],r);const e=[],t=i([s,e],r);for(const n of r)e.push(o(n));return t}case 2:{if(a)switch(a){case"BigInt":return i([a,r.toString()],r);case"Boolean":case"Number":case"String":return i([a,r.valueOf()],r)}if(t&&"toJSON"in r)return o(r.toJSON());const n=[],l=i([s,n],r);for(const t of tO(r))!e&&rO(nO(r[t]))||n.push([o(t),o(r[t])]);return l}case 3:return i([s,r.toISOString()],r);case 4:{const{source:e,flags:t}=r;return i([s,{source:e,flags:t}],r)}case 5:{const t=[],n=i([s,t],r);for(const[i,s]of r)(e||!rO(nO(i))&&!rO(nO(s)))&&t.push([o(i),o(s)]);return n}case 6:{const t=[],n=i([s,t],r);for(const i of r)!e&&rO(nO(i))||t.push(o(i));return n}}const{message:l}=r;return i([s,{name:a,message:l}],r)};return o})(!(t||n),!!t,new Map,r)(e),r},oO="function"===typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?XC(iO(e,t)):structuredClone(e):(e,t)=>XC(iO(e,t));function sO(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const o=e.charCodeAt(n);let s="";if(37===o&&mE(e.charCodeAt(n+1))&&mE(e.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(s=String.fromCharCode(o));else if(o>55295&&o<57344){const t=e.charCodeAt(n+1);o<56320&&t>56319&&t<57344?(s=String.fromCharCode(o,t),i=1):s="\ufffd"}else s=String.fromCharCode(o);s&&(t.push(e.slice(r,n),encodeURIComponent(s)),r=n+i+1,s=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function aO(e,t){const n=[{type:"text",value:"\u21a9"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function lO(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const cO=function(e){if(null===e||void 0===e)return dO;if("function"===typeof e)return uO(e);if("object"===typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=cO(e[n]);return uO(r);function r(){let e=-1;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(;++e<t.length;)if(t[e].apply(this,r))return!0;return!1}}(e):function(e){const t=e;return uO(n);function n(n){const r=n;let i;for(i in e)if(r[i]!==t[i])return!1;return!0}}(e);if("string"===typeof e)return function(e){return uO(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function uO(e){return function(t,n,r){return Boolean(hO(t)&&e.call(this,t,"number"===typeof n?n:void 0,r||void 0))}}function dO(){return!0}function hO(e){return null!==e&&"object"===typeof e&&"type"in e}const pO=[],fO=!0,mO=!1,gO="skip";function yO(e,t,n,r){let i;"function"===typeof t&&"function"!==typeof n?(r=n,n=t):i=t;const o=cO(i),s=r?-1:1;!function e(i,a,l){const c=i&&"object"===typeof i?i:{};if("string"===typeof c.type){const e="string"===typeof c.tagName?c.tagName:"string"===typeof c.name?c.name:void 0;Object.defineProperty(u,"name",{value:"node ("+i.type+(e?"<"+e+">":"")+")"})}return u;function u(){let c,u,d,h=pO;if((!t||o(i,a,l[l.length-1]||void 0))&&(h=function(e){if(Array.isArray(e))return e;if("number"===typeof e)return[fO,e];return null===e||void 0===e?pO:[e]}(n(i,l)),h[0]===mO))return h;if("children"in i&&i.children){const t=i;if(t.children&&h[0]!==gO)for(u=(r?t.children.length:-1)+s,d=l.concat(t);u>-1&&u<t.children.length;){const n=t.children[u];if(c=e(n,u,d)(),c[0]===mO)return c;u="number"===typeof c[1]?c[1]:u+s}}return h}}(e,void 0,[])()}function vO(e,t,n,r){let i,o,s;"function"===typeof t&&"function"!==typeof n?(o=void 0,s=t,i=n):(o=t,s=n,i=r),yO(e,o,(function(e,t){const n=t[t.length-1],r=n?n.children.indexOf(e):void 0;return s(e,r,n)}),i)}function bO(e,t){const n=t.referenceType;let r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),o=i[0];o&&"text"===o.type?o.value="["+o.value:i.unshift({type:"text",value:"["});const s=i[i.length-1];return s&&"text"===s.type?s.value+=r:i.push({type:"text",value:r}),i}function wO(e){const t=e.spread;return null===t||void 0===t?e.children.length>1:t}const xO=9,kO=32;function SO(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const o=[];for(;r;)o.push(_O(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return o.push(_O(t.slice(i),i>0,!1)),o.join("")}function _O(e,t,n){let r=0,i=e.length;if(t){let t=e.codePointAt(r);for(;t===xO||t===kO;)r++,t=e.codePointAt(r)}if(n){let t=e.codePointAt(i-1);for(;t===xO||t===kO;)i--,t=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}const EO={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"===typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=sO(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);let s,a=e.footnoteCounts.get(r);void 0===a?(a=0,e.footnoteOrder.push(r),s=e.footnoteOrder.length):s=o+1,a+=1,e.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return bO(e,t);const i={src:sO(r.url||""),alt:t.alt};null!==r.title&&void 0!==r.title&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)},image:function(e,t){const n={src:sO(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return bO(e,t);const i={href:sO(r.url||"")};null!==r.title&&void 0!==r.title&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)},link:function(e,t){const n={href:sO(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},listItem:function(e,t,n){const r=e.all(t),i=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=wO(n[r])}return t}(n):wO(t),o={},s=[];if("boolean"===typeof t.checked){const e=r[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},r.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const e=r[a];(i||0!==a||"element"!==e.type||"p"!==e.tagName)&&s.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||i?s.push(e):s.push(...e.children)}const l=r[r.length-1];l&&(i||"element"!==l.type||"p"!==l.tagName)&&s.push({type:"text",value:"\n"});const c={type:"element",tagName:"li",properties:o,children:s};return e.patch(t,c),e.applyData(t,c)},list:function(e,t){const n={},r=e.all(t);let i=-1;for("number"===typeof t.start&&1!==t.start&&(n.start=t.start);++i<r.length;){const e=r[i];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],n),i.push(n)}if(n.length>0){const r={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},o=A_(t.children[1]),s=T_(t.children[t.children.length-1]);o&&s&&(r.position={start:o,end:s}),i.push(r)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const r=n?n.children:void 0,i=0===(r?r.indexOf(t):1)?"th":"td",o=n&&"table"===n.type?n.align:void 0,s=o?o.length:t.children.length;let a=-1;const l=[];for(;++a<s;){const n=t.children[a],r={},s=o?o[a]:void 0;s&&(r.align=s);let c={type:"element",tagName:i,properties:r,children:[]};n&&(c.children=e.all(n),e.patch(n,c),c=e.applyData(n,c)),l.push(c)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)},text:function(e,t){const n={type:"text",value:SO(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:CO,yaml:CO,definition:CO,footnoteDefinition:CO};function CO(){}const OO={}.hasOwnProperty,NO={};function TO(e,t){e.position&&(t.position=function(e){const t=A_(e),n=T_(e);if(t&&n)return{start:t,end:n}}(e))}function AO(e,t){let n=t;if(e&&e.data){const t=e.data.hName,r=e.data.hChildren,i=e.data.hProperties;if("string"===typeof t)if("element"===n.type)n.tagName=t;else{n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}}"element"===n.type&&i&&Object.assign(n.properties,oO(i)),"children"in n&&n.children&&null!==r&&void 0!==r&&(n.children=r)}return n}function jO(e,t){const n=t.data||{},r=!("value"in t)||OO.call(n,"hProperties")||OO.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,r),e.applyData(t,r)}function PO(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:"\n"});++r<e.length;)r&&n.push({type:"text",value:"\n"}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function IO(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function RO(e,t){const n=function(e,t){const n=t||NO,r=new Map,i=new Map,o=new Map,s={...EO,...n.handlers},a={all:function(e){const t=[];if("children"in e){const n=e.children;let r=-1;for(;++r<n.length;){const i=a.one(n[r],e);if(i){if(r&&"break"===n[r-1].type&&(Array.isArray(i)||"text"!==i.type||(i.value=IO(i.value)),!Array.isArray(i)&&"element"===i.type)){const e=i.children[0];e&&"text"===e.type&&(e.value=IO(e.value))}Array.isArray(i)?t.push(...i):t.push(i)}}}return t},applyData:AO,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:s,one:function(e,t){const n=e.type,r=a.handlers[n];if(OO.call(a.handlers,n)&&r)return r(a,e,t);if(a.options.passThrough&&a.options.passThrough.includes(n)){if("children"in e){const{children:t,...n}=e,r=oO(n);return r.children=a.all(e),r}return oO(e)}return(a.options.unknownHandler||jO)(a,e,t)},options:n,patch:TO,wrap:PO};return vO(e,(function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?r:i,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}})),a}(e,t),r=n.one(e,void 0),i=function(e){const t="string"===typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||aO,r=e.options.footnoteBackLabel||lO,i=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",s=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<e.footnoteOrder.length;){const i=e.footnoteById.get(e.footnoteOrder[l]);if(!i)continue;const o=e.all(i),s=String(i.identifier).toUpperCase(),c=sO(s.toLowerCase());let u=0;const d=[],h=e.footnoteCounts.get(s);for(;void 0!==h&&++u<=h;){d.length>0&&d.push({type:"text",value:" "});let e="string"===typeof n?n:n(l,u);"string"===typeof e&&(e={type:"text",value:e}),d.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+c+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:"string"===typeof r?r:r(l,u),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const p=o[o.length-1];if(p&&"element"===p.type&&"p"===p.tagName){const e=p.children[p.children.length-1];e&&"text"===e.type?e.value+=" ":p.children.push({type:"text",value:" "}),p.children.push(...d)}else o.push(...d);const f={type:"element",tagName:"li",properties:{id:t+"fn-"+c},children:e.wrap(o,!0)};e.patch(i,f),a.push(f)}if(0!==a.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...oO(s),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:"\n"}]}}(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:"\n"},i),o}function MO(e,t){return e&&"run"in e?async function(n,r){const i=RO(n,{file:r,...t});await e.run(i,r)}:function(n,r){return RO(n,{file:r,...e||t})}}function $O(e){if(e)throw e}var LO=n(3240);function DO(e){if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function zO(){const e=[],t={run:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let i=-1;const o=n.pop();if("function"!==typeof o)throw new TypeError("Expected function as last argument, not "+o);!function t(r){const s=e[++i];let a=-1;if(r)o(r);else{for(var l=arguments.length,c=new Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];for(;++a<n.length;)null!==c[a]&&void 0!==c[a]||(c[a]=n[a]);n=c,s?function(e,t){let n;return i;function i(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];const l=e.length>i.length;let c;l&&i.push(o);try{c=e.apply(this,i)}catch(r){if(l&&n)throw r;return o(r)}l||(c&&c.then&&"function"===typeof c.then?c.then(s,o):c instanceof Error?o(c):s(c))}function o(e){if(!n){n=!0;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];t(e,...i)}}function s(e){o(null,e)}}(s,t)(...c):o(null,...c)}}(null,...n)},use:function(n){if("function"!==typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const FO={basename:function(e,t){if(void 0!==t&&"string"!==typeof t)throw new TypeError('"ext" argument must be a string');BO(e);let n,r=0,i=-1,o=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;o--;)if(47===e.codePointAt(o)){if(n){r=o+1;break}}else i<0&&(n=!0,i=o+1);return i<0?"":e.slice(r,i)}if(t===e)return"";let s=-1,a=t.length-1;for(;o--;)if(47===e.codePointAt(o)){if(n){r=o+1;break}}else s<0&&(n=!0,s=o+1),a>-1&&(e.codePointAt(o)===t.codePointAt(a--)?a<0&&(i=o):(a=-1,i=s));r===i?i=s:i<0&&(i=e.length);return e.slice(r,i)},dirname:function(e){if(BO(e),0===e.length)return".";let t,n=-1,r=e.length;for(;--r;)if(47===e.codePointAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},extname:function(e){BO(e);let t,n=e.length,r=-1,i=0,o=-1,s=0;for(;n--;){const a=e.codePointAt(n);if(47!==a)r<0&&(t=!0,r=n+1),46===a?o<0?o=n:1!==s&&(s=1):o>-1&&(s=-1);else if(t){i=n+1;break}}if(o<0||r<0||0===s||1===s&&o===r-1&&o===i+1)return"";return e.slice(o,r)},join:function(){let e,t=-1;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(;++t<r.length;)BO(r[t]),r[t]&&(e=void 0===e?r[t]:e+"/"+r[t]);return void 0===e?".":function(e){BO(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,r,i="",o=0,s=-1,a=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else{if(47===n)break;n=47}if(47===n){if(s===l-1||1===a);else if(s!==l-1&&2===a){if(i.length<2||2!==o||46!==i.codePointAt(i.length-1)||46!==i.codePointAt(i.length-2))if(i.length>2){if(r=i.lastIndexOf("/"),r!==i.length-1){r<0?(i="",o=0):(i=i.slice(0,r),o=i.length-1-i.lastIndexOf("/")),s=l,a=0;continue}}else if(i.length>0){i="",o=0,s=l,a=0;continue}t&&(i=i.length>0?i+"/..":"..",o=2)}else i.length>0?i+="/"+e.slice(s+1,l):i=e.slice(s+1,l),o=l-s-1;s=l,a=0}else 46===n&&a>-1?a++:a=-1}return i}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/");return t?"/"+n:n}(e)},sep:"/"};function BO(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const UO={cwd:function(){return"/"}};function HO(e){return Boolean(null!==e&&"object"===typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function VO(e){if("string"===typeof e)e=new URL(e);else if(!HO(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const WO=["history","path","basename","stem","extname","dirname"];class qO{constructor(e){let t;t=e?HO(e)?{path:e}:"string"===typeof e||function(e){return Boolean(e&&"object"===typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":UO.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,r=-1;for(;++r<WO.length;){const e=WO[r];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)WO.includes(n)||(this[n]=t[n])}get basename(){return"string"===typeof this.path?FO.basename(this.path):void 0}set basename(e){KO(e,"basename"),JO(e,"basename"),this.path=FO.join(this.dirname||"",e)}get dirname(){return"string"===typeof this.path?FO.dirname(this.path):void 0}set dirname(e){GO(this.basename,"dirname"),this.path=FO.join(e||"",this.basename)}get extname(){return"string"===typeof this.path?FO.extname(this.path):void 0}set extname(e){if(JO(e,"extname"),GO(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=FO.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){HO(e)&&(e=VO(e)),KO(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"===typeof this.path?FO.basename(this.path,this.extname):void 0}set stem(e){KO(e,"stem"),JO(e,"stem"),this.path=FO.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const r=this.message(e,t,n);throw r.fatal=!0,r}info(e,t,n){const r=this.message(e,t,n);return r.fatal=void 0,r}message(e,t,n){const r=new $_(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){if(void 0===this.value)return"";if("string"===typeof this.value)return this.value;return new TextDecoder(e||void 0).decode(this.value)}}function JO(e,t){if(e&&e.includes(FO.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+FO.sep+"`")}function KO(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function GO(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const ZO=function(e){const t=this.constructor.prototype,n=t[e],r=function(){return n.apply(r,arguments)};return Object.setPrototypeOf(r,t),r},YO={}.hasOwnProperty;class XO extends ZO{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=zO()}copy(){const e=new XO;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(LO(!0,{},this.namespace)),e}data(e,t){return"string"===typeof e?2===arguments.length?(nN("data",this.frozen),this.namespace[e]=t,this):YO.call(this.namespace,e)&&this.namespace[e]||void 0:e?(nN("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const r=t.call(e,...n);"function"===typeof r&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=oN(e),n=this.parser||this.Parser;return eN("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),eN("process",this.parser||this.Parser),tN("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(r,i){const o=oN(e),s=n.parse(o);function a(e,n){e||!n?i(e):r?r(n):t(void 0,n)}n.run(s,o,(function(e,t,r){if(e||!t||!r)return a(e);const i=t,o=n.stringify(i,r);!function(e){return"string"===typeof e||function(e){return Boolean(e&&"object"===typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)}(o)?r.result=o:r.value=o,a(e,r)}))}}processSync(e){let t,n=!1;return this.freeze(),eN("processSync",this.parser||this.Parser),tN("processSync",this.compiler||this.Compiler),this.process(e,(function(e,r){n=!0,$O(e),t=r})),iN("processSync","process",n),t}run(e,t,n){rN(e),this.freeze();const r=this.transformers;return n||"function"!==typeof t||(n=t,t=void 0),n?i(void 0,n):new Promise(i);function i(i,o){const s=oN(t);r.run(e,s,(function(t,r,s){const a=r||e;t?o(t):i?i(a):n(void 0,a,s)}))}}runSync(e,t){let n,r=!1;return this.run(e,t,(function(e,t){$O(e),n=t,r=!0})),iN("runSync","run",r),n}stringify(e,t){this.freeze();const n=oN(t),r=this.compiler||this.Compiler;return tN("stringify",r),rN(e),r(e,n)}use(e){const t=this.attachers,n=this.namespace;if(nN("use",this.frozen),null===e||void 0===e);else if("function"===typeof e){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];c(e,i)}else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?l(e):a(e)}return this;function s(e){if("function"===typeof e)c(e,[]);else{if("object"!==typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;c(t,n)}else a(e)}}function a(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(e.plugins),e.settings&&(n.settings=LO(!0,n.settings,e.settings))}function l(e){let t=-1;if(null===e||void 0===e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){s(e[t])}}}function c(e,n){let r=-1,i=-1;for(;++r<t.length;)if(t[r][0]===e){i=r;break}if(-1===i)t.push([e,...n]);else if(n.length>0){let[r,...o]=n;const s=t[i][1];DO(s)&&DO(r)&&(r=LO(!0,s,r)),t[i]=[e,r,...o]}}}}const QO=(new XO).freeze();function eN(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function tN(e,t){if("function"!==typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function nN(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function rN(e){if(!DO(e)||"string"!==typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function iN(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function oN(e){return function(e){return Boolean(e&&"object"===typeof e&&"message"in e&&"messages"in e)}(e)?e:new qO(e)}const sN=[],aN={allowDangerousHtml:!0},lN=/^(https?|ircs?|mailto|xmpp)$/i,cN=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function uN(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,o=e.components,s=e.disallowedElements,a=e.rehypePlugins||sN,l=e.remarkPlugins||sN,c=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...aN}:aN,u=e.skipHtml,d=e.unwrapDisallowed,h=e.urlTransform||dN,p=QO().use(ZC).use(l).use(MO,c).use(a),f=new qO;"string"===typeof r&&(f.value=r);for(const y of cN)Object.hasOwn(e,y.from)&&(y.from,y.to&&y.to,y.id);const m=p.parse(f);let g=p.runSync(m,f);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:"root"===g.type?g.children:[g]}),vO(g,(function(e,r,i){if("raw"===e.type&&i&&"number"===typeof r)return u?i.children.splice(r,1):i.children[r]={type:"text",value:e.value},r;if("element"===e.type){let t;for(t in tE)if(Object.hasOwn(tE,t)&&Object.hasOwn(e.properties,t)){const n=e.properties[t],r=tE[t];(null===r||r.includes(e.tagName))&&(e.properties[t]=h(String(n||""),t,e))}}if("element"===e.type){let o=t?!t.includes(e.tagName):!!s&&s.includes(e.tagName);if(!o&&n&&"number"===typeof r&&(o=!n(e,r,i)),o&&i&&"number"===typeof r)return d&&e.children?i.children.splice(r,1,...e.children):i.children.splice(r,1),r}})),V_(g,{Fragment:tr.Fragment,components:o,ignoreInvalidStyle:!0,jsx:tr.jsx,jsxs:tr.jsxs,passKeys:!0,passNode:!0})}function dN(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||lN.test(e.slice(0,t))?e:""}const hN=e=>{let{isOpen:t,onClose:n,sectionType:r,essayInfo:i,currentContent:o}=e;const[s,l]=(0,a.useState)([]),[c,u]=(0,a.useState)(""),[d,h]=(0,a.useState)(null),p=(0,a.useRef)(null),f=(0,a.useRef)(!0);(0,a.useEffect)((()=>{const e="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";if(e){const t=new fS({apiKey:e,model:"mixtral-8x7b-32768",temperature:.5,maxTokens:1024,topP:1,baseURL:"https://api.groq.com/openai/v1",defaultHeaders:{"Content-Type":"application/json",Origin:"http://localhost:3000"}});h(t)}}),[]),(0,a.useEffect)((()=>{p.current&&(p.current.scrollTop=p.current.scrollHeight)}),[s]);const m=(0,a.useMemo)((()=>({role:"system",content:"\n      You are a friendly AI writing assistant. Your goal is to help students think critically and improve their essay writing by asking thoughtful questions. Don't provide direct examples or fully formed arguments. Instead, ask questions that encourage the student to reflect on their ideas, find connections, and develop their own arguments. Be encouraging and tailored to the specific section they\u2019re working on.\n  \n      Use the following formatting guidelines:\n      \n      - Use **bold** for key concepts or phrases to highlight important points.\n      - Use line breaks between questions and ideas for readability.\n      - Structure the response clearly, using bullet points or numbered lists to organize thoughts.\n      \n      When responding, always follow this approach:\n      \n      1. **Friendly greeting**: Start by making the student feel supported and confident.\n      2. **Understand the section**: Identify the part of the essay the student is working on (e.g., introduction, thesis, body, conclusion).\n      3. **Ask guiding questions**: Pose 3-5 thoughtful questions that guide the student to reflect deeply. Focus on helping them form their own arguments without giving direct answers.\n      4. **Offer general writing tips**: Suggest strategies (e.g., brainstorming or outlining) that can help develop their ideas.\n      5. **Encouragement**: Always end with a positive note to keep the student motivated.\n  \n      ### Examples:\n  \n      **Example 1: Introduction Section**\n      \n      _Hi there! Great job getting started on your essay. Let's focus on your introduction._\n  \n      **What is the main theme or argument** you want to introduce?  \n      **How can you grab your reader's attention** right from the beginning? Consider using a hook, like a surprising fact or a thought-provoking question.  \n      **Why is this topic important** in the broader context of your subject?  \n      **How will you structure the introduction** to flow naturally into the main points of your essay?\n  \n      You're on the right track\u2014reflecting on these questions will help make your introduction even stronger!\n  \n      **Example 2: Conclusion Section**\n  \n      _You're almost there! The conclusion is your final chance to leave a lasting impression on your reader._\n  \n      **What key points from your essay** do you want to emphasize?  \n      **How can you connect your argument back** to the introduction to create a sense of cohesion?  \n      **What final insight or call to action** can you leave with your reader that highlights the importance of your argument?  \n      **Are there any lingering questions** the reader might have that you can address briefly in your conclusion?\n  \n      You're so close\u2014thinking through these ideas will help make your conclusion really compelling!\n  \n      **Example 3: Body Paragraph**\n  \n      _Great work on developing the body of your essay! Let's dive deeper into this section._\n  \n      **What is the main point of this paragraph** and how does it connect to your thesis?  \n      **Do you have enough supporting evidence** for this point? Consider whether your examples are clear and persuasive.  \n      **How does this argument relate to your previous points**? Is there a logical flow?  \n      **Could you clarify any complex ideas** for the reader, or add more detail where needed?\n  \n      Keep refining, and your essay will be in excellent shape in no time!\n  \n      **Remember:** Your role is to guide students in developing their own thoughts without giving away the answers. Encourage critical thinking, avoid spoon-feeding, and focus on engaging questions and feedback.\n    "})),[]),g=(0,a.useCallback)((async()=>{try{const e={role:"user",content:`I'm writing a ${(null===i||void 0===i?void 0:i.postType)||"essay"} ${null!==i&&void 0!==i&&i.title?`titled "${i.title}"`:""} ${null!==i&&void 0!==i&&i.prompt?`based on the prompt: "${i.prompt}"`:""}. I'm currently working on the ${r} section. Can you provide some guidance to help me improve this part of my essay?`},t=await d.invoke([m,e]);l([{role:"assistant",content:t.content}])}catch(e){console.error("Error sending initial message:",e),l([{role:"assistant",content:"Hello! How can I assist you with your essay today?"}])}}),[d,m,i,r]);(0,a.useEffect)((()=>{t&&f.current&&d&&(g(),f.current=!1)}),[t,d,g]);return t?(0,tr.jsx)("div",{className:"fixed inset-y-0 right-0 w-96 bg-white shadow-lg transform transition-transform duration-300 ease-in-out",children:(0,tr.jsxs)("div",{className:"flex flex-col h-full",children:[(0,tr.jsxs)("div",{className:"flex justify-between items-center p-4 border-b",children:[(0,tr.jsx)("h2",{className:"text-lg font-semibold",children:"Writing Assistant"}),(0,tr.jsx)("button",{onClick:n,className:"w-auto text-white bg-red-500 hover:bg-black",children:(0,tr.jsx)(jS,{className:"h-6 w-6"})})]}),(0,tr.jsx)("div",{ref:p,className:"flex-grow overflow-y-auto p-4 space-y-4",children:s.map(((e,t)=>(0,tr.jsx)("div",{className:""+("user"===e.role?"text-right":"text-left"),children:(0,tr.jsx)("div",{className:"inline-block p-2 rounded-lg "+("user"===e.role?"bg-purple-100":"bg-gray-100"),children:(0,tr.jsx)(uN,{children:e.content})})},t)))}),(0,tr.jsx)("div",{className:"p-4 border-t",children:(0,tr.jsx)("div",{className:"flex items-center",children:(0,tr.jsx)("textarea",{value:c,onChange:e=>u(e.target.value),onKeyPress:e=>"Enter"===e.key&&!e.shiftKey&&(e.preventDefault(),(async()=>{if(""===c.trim()||!d)return;const e={role:"user",content:c};l((t=>[...t,e])),u("");try{const t=await d.invoke([m,...s,e,{role:"user",content:`Remember, I'm working on the ${r} section of my essay.`}]);l((e=>[...e,{role:"assistant",content:t.content}]))}catch(t){console.error("Error calling Groq API:",t),l((e=>[...e,{role:"assistant",content:"Sorry, I encountered an error. Please try again."}]))}})()),className:"flex-grow px-3 py-2 border rounded-l-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Type your message...",rows:"3"})})})]})}):null},pN={spelling:["typing_errors","unrecognizable_typing_errors","inflectional_noun_endings","syntactic","capital_letters","compounds"],punctuation:["comma","colon","semicolon","dot","triple_dot","constituents","clauses"],lexicoSemantic:["broken_meaningfulness","missing_words","incorrect_possessives","incorrect_lexical_choice"],stylistic:["incorrect_register","repeated_expressions","noun_cumulation","passive_usage","word_order","clumsy_expressions","sentence_length"],typographical:["local_formatting","document_layout","visualization"]},fN=async e=>{try{const n=new fS({apiKey:"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",model:"llama3-70b-8192",temperature:0,maxTokens:2048}),r={role:"system",content:`You are an advanced essay error detection system. Analyze the text and identify ALL errors without any limit, returning them ONLY as a JSON array. Check for these specific error types:\n    \n    1. Spelling Errors - Look for:\n       - Basic typing mistakes (e.g., "teh" instead of "the")\n       - Advanced spelling issues (i/y, s/z variations)\n       - Incorrect noun endings\n       - Agreement errors\n       - Capitalization mistakes\n       - Compound word errors\n    \n    2. Punctuation Errors - Check for:\n       - Missing or incorrect commas\n       - Colon and semicolon misuse\n       - Period/dot issues\n       - Missing punctuation between clauses\n       - Incorrect coordination punctuation\n    \n    3. Lexico-Semantic Errors - Identify:\n       - Phrases that lack clear meaning\n       - Missing necessary words\n       - Incorrect possessive forms (its/it's)\n       - Wrong word choices\n       - Semantic contradictions\n       - Improper word combinations\n    \n    4. Stylistic Errors - Look for:\n       - Informal language in formal context\n       - Word repetition\n       - Excessive passive voice\n       - Poor word order\n       - Overly complex sentences\n       - Awkward expressions\n    \n    5. Typographical Errors - Check:\n       - Spacing issues\n       - Document structure problems\n       - Layout inconsistencies\n       - Formatting errors\n    \n    For EACH error found, create an object:\n    {\n      "category": "exactly one of: spelling, punctuation, lexicoSemantic, stylistic, typographical",\n      "type": "specific subcategory from the error type list",\n      "message": "clear explanation of the error",\n      "suggestions": ["specific correction suggestions"],\n      "text": "the exact problematic text"\n    }\n    \n    IMPORTANT:\n    - Return ALL errors found, with no limit per category\n    - Do not skip any errors\n    - Include every instance of repeated errors\n    - Return ONLY the JSON array, with no additional text or explanations\n    - Check the entire text thoroughly.\n    \n    Here are examples to follow, showing both the format and reasoning:\n    \n    Example 1:\n    Text: "He go to the store but forgot his wallet"\n    Step-by-step:\n      - Spelling: "go" is incorrect verb form; should be "goes".\n      - Punctuation: Missing comma between clauses.\n    JSON:\n    [\n      {\n        "category": "spelling",\n        "type": "incorrect verb form",\n        "message": "The verb 'go' is incorrect; should be 'goes' to agree with subject.",\n        "suggestions": ["goes"],\n        "text": "go"\n      },\n      {\n        "category": "punctuation",\n        "type": "missing comma",\n        "message": "Missing comma between independent clauses.",\n        "suggestions": [", between 'store' and 'but'"],\n        "text": "He go to the store but forgot his wallet"\n      }\n    ]\n    \n    Example 2:\n    Text: "There going to be many people in a short period of time"\n    Step-by-step:\n      - Spelling: "There" is incorrect; should be "They're" for correct meaning.\n      - Lexico-Semantic: "short period of time" is vague and awkward; consider rephrasing.\n    JSON:\n    [\n      {\n        "category": "spelling",\n        "type": "incorrect word",\n        "message": "The word 'There' should be 'They're' to imply 'They are'.",\n        "suggestions": ["They're"],\n        "text": "There"\n      },\n      {\n        "category": "lexicoSemantic",\n        "type": "awkward phrase",\n        "message": "'short period of time' is unclear; consider a clearer time frame.",\n        "suggestions": ["a brief duration", "a few minutes"],\n        "text": "short period of time"\n      }\n    ]\n    \n    Now, analyze this new text step-by-step for all errors:\n    Text: "${e}"\n    JSON:\n    `},i={role:"user",content:`Analyze this text for ALL errors and return ONLY a JSON array. Find every single error: "${e}"`},o=await n.invoke([r,i]);let s=[];const a=o.content.trim();try{s=JSON.parse(a)}catch(RN){const n=a.match(/\[\s*\{[\s\S]*\}\s*\]/);if(n)try{s=JSON.parse(n[0])}catch(t){console.error("Failed to parse extracted JSON:",t)}}Array.isArray(s)||(console.error("AI response is not an array:",s),s=[]);const l=Object.keys(pN).reduce(((e,t)=>(e[t]=s.filter((e=>e.category===t)).map((e=>({...e,suggestions:Array.isArray(e.suggestions)?e.suggestions:[]}))),e)),{});return Object.keys(pN).forEach((e=>{l[e]||(l[e]=[])})),l}catch(n){return console.error("Error checking essay:",n),Object.keys(pN).reduce(((e,t)=>(e[t]=[],e)),{})}},mN={introduction:"\n    - Clear thesis statement present\n    - Sufficient background context\n    - Main points clearly outlined\n    - Engaging opening\n  ",bodyParagraph:"\n    - Clear topic sentence that directly supports the thesis\n    - Strong supporting evidence and examples\n    - Thorough analysis explaining the evidence\n    - Clear connection back to thesis/main argument\n    - Smooth transitions between ideas\n    - Proper paragraph structure and organization\n  ",conclusion:"\n    - Effective restatement of thesis\n    - Comprehensive summary of main points\n    - Meaningful final insights or implications\n    - Strong closing statement\n    - Clear sense of closure\n    - No new arguments introduced\n  "},gN=async e=>{const t=new fS({apiKey:"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",model:"llama3-70b-8192",temperature:0,maxTokens:1024}),n={role:"system",content:'You are a JSON-only response analyzer. Analyze the thesis statement and extract main points for body paragraphs.\n\nIMPORTANT: Return ONLY a valid JSON object with NO additional text, following this EXACT structure:\n{\n  "mainPoints": [\n    {\n      "point": "string",\n      "keywords": ["keyword1", "keyword2"],\n      "suggestedEvidence": ["evidence1", "evidence2"]\n    }\n  ]\n}\n\nRules:\n1. The response must be ONLY the JSON object\n2. All property names must be in double quotes\n3. All string values must be in double quotes\n4. Arrays can be empty but must be present\n5. NO comments or extra text allowed'};try{let i=(await t.invoke([n,{role:"user",content:`Extract main points from this thesis: "${e}"`}])).content;i.includes("{")&&(i=i.substring(i.indexOf("{"),i.lastIndexOf("}")+1));try{const e=JSON.parse(i);if(!e.mainPoints||!Array.isArray(e.mainPoints))throw new Error("Invalid response structure");return e.mainPoints=e.mainPoints.map(((e,t)=>({point:e.point||`Main Point ${t+1}`,keywords:Array.isArray(e.keywords)?e.keywords:[],suggestedEvidence:Array.isArray(e.suggestedEvidence)?e.suggestedEvidence:[]}))),e}catch(r){return console.error("Failed to parse response:",i),{mainPoints:[{point:"Main Argument",keywords:[],suggestedEvidence:[]}]}}}catch(i){return console.error("Error parsing thesis points:",i),{mainPoints:[{point:"Main Argument",keywords:[],suggestedEvidence:[]}]}}},yN=e=>{if(!Array.isArray(e))throw new Error("Invalid main points structure");return e.map(((e,t)=>({id:`body-${Date.now()}-${t+1}`,title:`Body Paragraph ${t+1}: ${e.point}`,type:"body",percentage:0,keywords:e.keywords,suggestedEvidence:e.suggestedEvidence})))},vN=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=new fS({apiKey:"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",model:"llama3-70b-8192",temperature:0,maxTokens:2048});let i;if(t.toLowerCase().includes("introduction"))i=mN.introduction;else if(t.toLowerCase().includes("body paragraph"))i=mN.bodyParagraph;else{if(!t.toLowerCase().includes("conclusion"))throw new Error("Invalid section type");i=mN.conclusion}const o={role:"system",content:`You are a JSON-only response analyzer. Evaluate the given ${t} section against specific criteria.\n\nIMPORTANT: Return ONLY a valid JSON object with NO additional text, following this EXACT structure:\n{\n  "isComplete": false,\n  "completionStatus": {\n    "met": ["criteria met 1", "criteria met 2"],\n    "missing": ["missing criteria 1", "missing criteria 2"]\n  },\n  "feedbackItems": ["feedback 1", "feedback 2"],\n  "suggestedImprovements": ["improvement 1", "improvement 2"]\n}\n\nEvaluate against these criteria:\n${i}\n\nRules:\n1. The response must be ONLY the JSON object\n2. All property names must be in double quotes\n3. All string values must be in double quotes\n4. Arrays can be empty but must be present\n5. NO comments or extra text allowed`};try{let t=(await r.invoke([o,{role:"user",content:n?`Previous section: "${n}"\nCurrent section: "${e}"`:`Analyze this content: "${e}"`}])).content;t.includes("{")&&(t=t.substring(t.indexOf("{"),t.lastIndexOf("}")+1));try{var s,a;const e=JSON.parse(t),n={isComplete:!1,completionStatus:{met:Array.isArray(null===e||void 0===e||null===(s=e.completionStatus)||void 0===s?void 0:s.met)?e.completionStatus.met:[],missing:Array.isArray(null===e||void 0===e||null===(a=e.completionStatus)||void 0===a?void 0:a.missing)?e.completionStatus.missing:["Requirements need to be reviewed"]},feedbackItems:Array.isArray(null===e||void 0===e?void 0:e.feedbackItems)?e.feedbackItems:[],suggestedImprovements:Array.isArray(null===e||void 0===e?void 0:e.suggestedImprovements)?e.suggestedImprovements:[]};return n.isComplete=Array.isArray(n.completionStatus.missing)&&0===n.completionStatus.missing.length,n}catch(l){return console.error("Failed to parse response:",t),{isComplete:!1,completionStatus:{met:[],missing:["Please review the section requirements"]},feedbackItems:["Analysis could not be completed"],suggestedImprovements:["Please try analyzing the section again"]}}}catch(c){return console.error("Error during section analysis:",c),{isComplete:!1,completionStatus:{met:[],missing:["Section analysis failed"]},feedbackItems:["Unable to complete analysis"],suggestedImprovements:["Please try again"]}}},bN=e=>{let{isOpen:t,onClose:n,children:r}=e;return t?(0,tr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,tr.jsx)("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col",children:r})}):null},wN=e=>{let{sections:t,essayInfo:n}=e;const[r,i]=(0,a.useState)(!1),[o,s]=(0,a.useState)("preview"),l=e=>localStorage.getItem(`essayContent_${e}`)||"",c=()=>(null===t||void 0===t?void 0:t.filter((e=>{const t=localStorage.getItem(`essayContent_${e.id}`);return t&&t.trim().length>0})))||[];return(0,tr.jsxs)(tr.Fragment,{children:[(0,tr.jsxs)("button",{onClick:()=>i(!0),className:"flex items-center gap-2 px-4 py-2 rounded-full hover:bg-purple-500",children:[(0,tr.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,tr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,tr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View Full Essay"]}),(0,tr.jsxs)(bN,{isOpen:r,onClose:()=>i(!1),children:[(0,tr.jsxs)("div",{className:"p-4 border-b flex items-center justify-between",children:[(0,tr.jsx)("h2",{className:"text-xl font-semibold",children:"Full Essay Preview"}),(0,tr.jsxs)("div",{className:"flex gap-2",children:[(0,tr.jsx)("button",{onClick:()=>{const e=c().map((e=>`${e.title}\n\n${l(e.id)}`)).join("\n\n---\n\n"),t=new Blob([e],{type:"text/plain"}),r=URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download=`${(null===n||void 0===n?void 0:n.title)||"essay"}.txt`,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)},className:"px-3 py-1 text-sm rounded-md bg-blue-50 text-blue-600 hover:bg-blue-100",children:"Download"}),(0,tr.jsx)("button",{onClick:()=>i(!1),className:"text-white bg-red-500 hover:bg-black",children:"\u2715"})]})]}),(0,tr.jsx)("div",{className:"flex flex-col items-center py-2 border-b",children:(0,tr.jsx)("div",{className:"flex gap-4",children:["preview","outline"].map((e=>(0,tr.jsx)("button",{onClick:()=>s(e),className:"w-auto px-4 py-2 border-b-2 transition-colors "+(o===e?"bg-gray-500 cursor-default border-blue-500 text-white-600":"border-transparent text-white-500 hover:bg-purple-500"),children:e.charAt(0).toUpperCase()+e.slice(1)},e)))})}),(0,tr.jsx)("div",{className:"flex-1 overflow-auto p-6",children:"preview"===o?(0,tr.jsxs)("div",{className:"space-y-8",children:[(0,tr.jsxs)("div",{className:"prose max-w-none",children:[(0,tr.jsx)("h1",{className:"text-2xl font-bold",children:null===n||void 0===n?void 0:n.title}),(0,tr.jsxs)("div",{className:"text-gray-600",children:[(0,tr.jsxs)("p",{children:[(0,tr.jsx)("strong",{children:"Prompt:"})," ",null===n||void 0===n?void 0:n.prompt]}),(0,tr.jsxs)("p",{children:[(0,tr.jsx)("strong",{children:"Type:"})," ",null===n||void 0===n?void 0:n.postType]})]})]}),c().map((e=>(0,tr.jsxs)("div",{className:"mb-8",children:[(0,tr.jsx)("h2",{className:"text-xl font-semibold mb-4",children:e.title}),(0,tr.jsx)("div",{className:"whitespace-pre-wrap font-serif",children:l(e.id)})]},e.id))),(0,tr.jsxs)("div",{className:"text-sm text-gray-500 text-right",children:["Word Count: ",c().map((e=>l(e.id).trim().split(/\s+/).length)).reduce(((e,t)=>e+t),0)]})]}):(0,tr.jsx)("div",{className:"space-y-4",children:c().map((e=>(0,tr.jsxs)("div",{className:"border-l-2 border-purple-200 pl-4",children:[(0,tr.jsx)("h3",{className:"font-semibold",children:e.title}),(0,tr.jsxs)("p",{className:"text-sm text-gray-600",children:[l(e.id).slice(0,150),"..."]})]},e.id)))})})]})]})},xN=e=>{let{isOpen:t,onClose:n,children:r}=e;return t?(0,tr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,tr.jsx)("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] flex flex-col",children:r})}):null},kN=e=>{let{sectionId:t,title:n}=e;const[r,i]=(0,a.useState)(!1),o=localStorage.getItem(`essayContent_${t}`);return o?(0,tr.jsxs)(tr.Fragment,{children:[(0,tr.jsxs)("button",{onClick:()=>i(!0),className:"w-full flex items-center gap-2 px-3 py-1 text-left text-gray-600 hover:text-purple-600 text-sm",children:[(0,tr.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,tr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"View ",n]}),(0,tr.jsxs)(xN,{isOpen:r,onClose:()=>i(!1),children:[(0,tr.jsxs)("div",{className:"p-4 border-b flex items-center justify-between",children:[(0,tr.jsx)("h2",{className:"text-xl font-semibold",children:n}),(0,tr.jsx)("button",{onClick:()=>i(!1),className:"text-gray-500 hover:text-gray-700",children:"\u2715"})]}),(0,tr.jsx)("div",{className:"p-6 overflow-auto",children:(0,tr.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,tr.jsx)("div",{className:"whitespace-pre-wrap font-serif",children:o})})})]})]}):null},SN=e=>{var t;let{isOpen:n,onClose:r,requirements:i,sectionTitle:o,isRevision:s=!1,hasBodyParagraphs:a=!1,onAcceptChanges:l,onAddBodyParagraph:c,onCompleteEssay:u,meetsRequirements:d=!1}=e;if(!n||!i)return null;const h=null===o||void 0===o?void 0:o.toLowerCase().includes("introduction"),p=null===o||void 0===o?void 0:o.toLowerCase().includes("body paragraph"),f=null===o||void 0===o?void 0:o.toLowerCase().includes("conclusion");return(0,tr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,tr.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full",children:[(0,tr.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,tr.jsx)("h2",{className:"text-xl font-semibold",children:s?`Revise ${o}`:`Complete ${o}`})}),(0,tr.jsxs)("div",{className:"p-6 space-y-4",children:[(0,tr.jsx)("p",{className:"text-gray-700",children:s?"Review your changes to this section:":i.isComplete?"Section requirements have been met:":"This section has missing requirements:"}),(0,tr.jsxs)("div",{className:"$'bg-blue-50' p-4 rounded-lg",children:[(0,tr.jsx)("h3",{className:`font-medium ${i.isComplete?"text-green-800":"text-red-800"} mb-2`,children:'"Requirements Overview:"'}),(0,tr.jsx)("ul",{className:"list-disc pl-5 space-y-2",children:i.missing&&i.missing.map(((e,t)=>(0,tr.jsx)("li",{className:i.isComplete?"text-green-700":"text-red-700",children:e},t)))})]}),h&&(null===i||void 0===i?void 0:i.isComplete)&&a&&(0,tr.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg mt-4",children:[(0,tr.jsx)("h3",{className:"font-medium text-yellow-800 mb-2",children:"Existing Body Paragraphs Found"}),(0,tr.jsx)("p",{className:"text-yellow-700 mb-4",children:"You have revised your introduction successfully! You have existing body paragraphs. Would you like to:"}),(0,tr.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,tr.jsx)("button",{onClick:i.onKeepExisting,className:"w-full px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Continue with existing body paragraphs"}),(0,tr.jsx)("button",{onClick:i.onRegenerateBodyParagraphs,className:"w-full px-4 py-3 border-2 border-purple-600 text-purple-600 rounded-lg hover:bg-purple-50 transition-colors",children:"Generate new body paragraphs based on revised thesis"})]}),(0,tr.jsx)("p",{className:"text-sm text-yellow-600 mt-2",children:"Note: Generating new paragraphs will remove all existing body paragraphs."})]}),(null===(t=i.improvements)||void 0===t?void 0:t.length)>0&&(0,tr.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,tr.jsx)("h3",{className:"font-medium text-blue-800 mb-2",children:"Suggested Improvements:"}),(0,tr.jsx)("ul",{className:"list-disc pl-5 space-y-2",children:i.improvements.map(((e,t)=>(0,tr.jsx)("li",{className:"text-blue-700",children:e},t)))})]})]}),(0,tr.jsx)("div",{className:"p-6 border-t border-gray-200 flex justify-end space-x-4",children:(()=>{const e=[];return e.push((0,tr.jsx)("button",{onClick:r,className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Continue Writing"},"continue-writing")),s?(e.push((0,tr.jsx)("button",{onClick:l,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Accept Changes"},"accept-changes")),a||!h&&!p||e.push((0,tr.jsx)("button",{onClick:c,className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:"Add Body Manual Paragraph"},"add-body"))):h?i.isComplete?a?(e.push((0,tr.jsx)("button",{onClick:i.onRegenerateBodyParagraphs,className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:"Regenerate Paragraphs from New Thesis"},"generate-body")),e.push((0,tr.jsx)("button",{onClick:i.onKeepExisting,className:"px-4 py-2 border-2 border-purple-600 text-purple-600 rounded hover:bg-purple-50",children:"Keep Existing Paragraphs"},"keep-existing"))):e.push((0,tr.jsx)("button",{onClick:i.onRegenerateBodyParagraphs,className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:"Generate Body Paragraphs from Thesis"},"generate-body")):e.push((0,tr.jsx)("button",{onClick:i.onAddBodyParagraph,className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:"Add Manual Body Paragraph"},"add-body")):p?(i.onContinue&&e.push((0,tr.jsx)("button",{onClick:i.onContinue,className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:"Next Body Paragraph"},"next-section")),i.onAddNewBodyParagraph&&e.push((0,tr.jsx)("button",{onClick:i.onAddNewBodyParagraph,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Add New Body Paragraph"},"add-body"))):f&&(d?e.push((0,tr.jsx)("button",{onClick:u,className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:"Complete Essay"},"complete-essay")):e.push((0,tr.jsx)("button",{onClick:i.onCompleteEssay,className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:"Complete Essay"},"complete-essay"))),e})()})]})})},_N=["spelling","punctuation","lexicoSemantic","stylistic","typographical"],EN=30,CN={spelling:"bg-red-200",punctuation:"bg-yellow-200",lexicoSemantic:"bg-orange-200",stylistic:"bg-blue-200",typographical:"bg-green-200"},ON=e=>({spelling:"Spelling",punctuation:"Punctuation",lexicoSemantic:"Meaning & Word Choice",stylistic:"Style",typographical:"Typography"}[e]||e),NN=e=>{var t;let{title:n,progress:r,isActive:i,isLast:o,id:s,onSelect:a,onDelete:l,setCompletionRequirements:c,setShowRequirementsModal:u,isFirst:d}=e;const h=null===(t=localStorage.getItem(`essayContent_${s}`))||void 0===t?void 0:t.trim(),p=JSON.parse(localStorage.getItem(`sectionRequirements_${s}`)||"null"),f=n.toLowerCase().includes("body paragraph"),m=n.toLowerCase().includes("conclusion");return(0,tr.jsxs)("div",{className:"relative cursor-pointer group",onClick:()=>a&&a(),children:[(0,tr.jsxs)("div",{className:"flex items-center py-2",children:[(0,tr.jsxs)("div",{className:"relative w-12 flex-shrink-0",children:[!d&&(0,tr.jsx)("div",{className:"absolute left-[1.375rem] -top-4 bottom-1/2 w-0.5 bg-[#F3E8FF]"}),(0,tr.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 z-10",children:(0,tr.jsx)("div",{className:`w-6 h-6 rounded-full ${i?"bg-purple-600":"bg-[#F3E8FF]"} \n              transition-colors duration-300\n              flex items-center justify-center`,children:(0,tr.jsx)("div",{className:"w-3 h-3 rounded-full bg-white opacity-30"})})}),!m&&(0,tr.jsx)("div",{className:"absolute left-[1.375rem] top-1/2 h-8 w-0.5 bg-[#F3E8FF]"})]}),(0,tr.jsxs)("div",{className:"flex-grow flex items-center justify-between",children:[(0,tr.jsxs)("span",{className:(n.toLowerCase().includes("introduction")?"text-purple-600":n.toLowerCase().includes("conclusion")?"text-gray-700":f?"text-blue-600":"text-gray-700")+" font-medium",children:[n,h&&!r&&(0,tr.jsxs)("span",{className:"ml-2 text-xs text-purple-400",children:["(draft",p?" - incomplete":"",")"]})]}),f&&(0,tr.jsx)("button",{onClick:e=>{e.stopPropagation(),window.confirm("Are you sure you want to delete this body paragraph?")&&l(s)},className:"opacity-0 group-hover:opacity-100 p-1.5 text-gray-400 \r hover:text-red-500 rounded-full hover:bg-red-50\r transition-all duration-200",children:(0,tr.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,tr.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),p&&!r&&(0,tr.jsx)("div",{className:"ml-12 text-xs mt-1",children:(0,tr.jsx)("button",{onClick:e=>{e.stopPropagation(),c({missing:p.missing,improvements:p.improvements,isComplete:!1}),u(!0)},className:"w-full text-left bg-red-50 p-2 rounded-md \r hover:bg-red-100 transition-colors\r border border-red-200",children:(0,tr.jsx)("div",{className:"font-medium text-red-800",children:"View Missing Requirements"})})})]})};function TN(){const{sectionId:e}=se(),t=re(),n=oe(),{section:r,allSections:i,essayInfo:o}=t.state||{},[s,l]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[d,h]=(0,a.useState)(!1),[p,f]=(0,a.useState)({}),[m,g]=(0,a.useState)("spelling"),[y,v]=(0,a.useState)(0),[b,w]=(0,a.useState)(0),[x,k]=(0,a.useState)(!1),[S,_]=(0,a.useState)(!1),[E,C]=(0,a.useState)(!1),[O,N]=(0,a.useState)(!1),[T,A]=(0,a.useState)(null),[j,P]=(0,a.useState)(!1),[I]=(0,a.useState)(!1),[R,M]=(0,a.useState)(!1),[$,L]=(0,a.useState)([]);(0,a.useEffect)((()=>{if(i){const e=i.filter((e=>e.title.toLowerCase().includes("body paragraph")));L(e)}}),[i]),(0,a.useEffect)((()=>{l(""),f({}),k(!1),_(!1),w(0),(()=>{const t=localStorage.getItem(`essayContent_${e}`);u(t||"")})()}),[e]),(0,a.useEffect)((()=>{if(x&&Object.keys(p).length>0){const e=F(c,p);l(e)}}),[p,c,x]),(0,a.useEffect)((()=>{if(i){const e=i.filter((e=>e.title.toLowerCase().includes("body paragraph")));M(e.length>0)}}),[i]),(0,a.useEffect)((()=>{const t=setInterval((()=>{e&&localStorage.setItem(`essayContent_${e}`,c)}),3e3);return()=>clearInterval(t)}),[c,e]);const D=()=>{const e=i.findIndex((e=>e.title.toLowerCase().includes("conclusion"))),t=i.filter((e=>e.title.toLowerCase().includes("body paragraph"))),r={id:`body-${Date.now()}`,title:`Body Paragraph ${t.length+1}`,type:"body",percentage:0};let s;s=-1!==e?[...i.slice(0,e),r,...i.slice(e)]:[...i,r],localStorage.setItem("essaySections",JSON.stringify(s)),N(!1),n(`/essayblock/${r.id}`,{state:{section:r,allSections:s,essayInfo:o}})},z=s=>{const a=i.filter((e=>e.id!==s)),l=a.map((e=>{if(e.title.toLowerCase().includes("body paragraph")){const t=a.filter((e=>e.title.toLowerCase().includes("body paragraph"))).findIndex((t=>t.id===e.id))+1;return{...e,title:`Body Paragraph ${t}`}}return e}));if(localStorage.removeItem(`essayContent_${s}`),localStorage.removeItem(`sectionRequirements_${s}`),s===e){const t=i.findIndex((t=>t.id===e)),r=l[Math.min(t,l.length-1)];n(`/essayblock/${r.id}`,{state:{section:r,allSections:l,essayInfo:o}})}else t.state&&(t.state.allSections=l),n(`/essayblock/${e}`,{state:{section:r,allSections:l,essayInfo:o}})},F=(e,t)=>{if(!e||!t)return"";let n=[];Object.entries(t).forEach((t=>{let[r,i]=t;i.forEach((t=>{const i=t.text;let o=0;for(;o<e.length;){const s=e.indexOf(i,o);if(-1===s)break;n.push({start:s,end:s+i.length,category:r,text:i,message:t.message,color:CN[r]}),o=s+1}}))})),n.sort(((e,t)=>e.start-t.start));let r="\n      <style>\n        .error-overlap-2 {\n          background: repeating-linear-gradient(\n            45deg,\n            var(--color1),\n            var(--color1) 10px,\n            var(--color2) 10px,\n            var(--color2) 20px\n          );\n        }\n        .error-overlap-3 {\n          background: repeating-linear-gradient(\n            -45deg,\n            var(--color1),\n            var(--color1) 8px,\n            var(--color2) 8px,\n            var(--color2) 16px,\n            var(--color3) 16px,\n            var(--color3) 24px\n          );\n        }\n      </style>\n    ",i=[];const o=e=>({"red-200":"254, 202, 202","yellow-200":"255, 255, 0","orange-200":"254, 128, 0","blue-200":"191, 219, 254","green-200":"187, 247, 208"}[e]||"200, 200, 200"),s=t=>{if(i=n.filter((e=>e.start<=t&&e.end>t)),0===i.length)return e.charAt(t);if(t===i[0].start){const n=Math.min(...i.map((e=>e.end))),r=e.slice(t,n);if(1===i.length)return`<span class="${i[0].color} rounded px-1" title="${i[0].message}">${r}</span>`;{const e=i.map((e=>e.message)).join("\n"),t=i.map((e=>e.color.replace("bg-","")));return`<span class="rounded px-1 error-overlap-${i.length}" \n            style="--color1: rgb(${o(t[0])}); \n                   --color2: rgb(${o(t[1])}); \n                   ${t[2]?`--color3: rgb(${o(t[2])});`:""}"\n            title="${e}">${r}</span>`}}return""};for(let a=0;a<e.length;a++){let e=s(a);e&&(r+=e,e.includes("span")&&(a=Math.min(...i.map((e=>e.end)))-1))}return r},B=()=>h(!d);return(0,tr.jsxs)("div",{className:"flex h-screen bg-gray-100",children:[(0,tr.jsxs)("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[(0,tr.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,tr.jsxs)("div",{className:"flex items-center space-x-2 text-purple-600 cursor-pointer",onClick:()=>n("/essaybuilder",{state:{essayInfo:o}}),children:[(0,tr.jsx)($S,{className:"h-6 w-6"}),(0,tr.jsx)("span",{children:"Return to Essay Builder"})]})}),(0,tr.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,tr.jsx)("h2",{className:"font-semibold",children:null===r||void 0===r?void 0:r.title})}),(0,tr.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,tr.jsx)("h3",{className:"font-semibold mb-2",children:"Essay Information"}),(0,tr.jsxs)("p",{className:"text-sm",children:[(0,tr.jsx)("strong",{children:"Prompt:"})," ",null===o||void 0===o?void 0:o.prompt]}),(0,tr.jsxs)("p",{className:"text-sm",children:[(0,tr.jsx)("strong",{children:"Title:"})," ",null===o||void 0===o?void 0:o.title]}),(0,tr.jsxs)("p",{className:"text-sm",children:[(0,tr.jsx)("strong",{children:"Post Type:"})," ",null===o||void 0===o?void 0:o.postType]})]}),(0,tr.jsxs)("div",{className:"p-4 flex-grow overflow-auto",children:[(0,tr.jsx)("h3",{className:"font-semibold mb-2",children:"Essay Progress"}),null===i||void 0===i?void 0:i.map(((t,s)=>{const l=t.title.toLowerCase().includes("introduction"),u=t.title.toLowerCase().includes("body paragraph");return(0,tr.jsxs)(a.Fragment,{children:[(0,tr.jsx)(NN,{id:t.id,title:t.title,progress:100===t.percentage,isActive:t.id===e,isLast:u||l,onSelect:()=>{return r=t,localStorage.setItem(`essayContent_${e}`,c),void n(`/essayblock/${r.id}`,{state:{section:r,allSections:i,essayInfo:o}});var r},onDelete:z,setCompletionRequirements:A,setShowRequirementsModal:N}),100===t.percentage&&t.id!==e&&(0,tr.jsx)("div",{className:"ml-9 mt-1",children:(0,tr.jsx)(kN,{sectionId:t.id,title:t.title})}),(l||u)&&s===i.findIndex((e=>e.title.toLowerCase().includes("conclusion")))-1&&i.filter((e=>e.title.toLowerCase().includes("body paragraph"))).length<5&&(0,tr.jsxs)("div",{className:"relative cursor-pointer group py-2",children:[(0,tr.jsx)("div",{className:"w-6 h-6 rounded-full bg-purple-200 \n                      flex items-center justify-center transition-colors\n                      hover:bg-purple-500 absolute left-3 top-1/2 transform -translate-y-1/2",children:(0,tr.jsx)("div",{className:"w-4 h-4 rounded-full bg-purple-600",style:{opacity:.3}})}),(0,tr.jsxs)("button",{onClick:()=>{const t=i.findIndex((e=>e.title.toLowerCase().includes("conclusion"))),s=i.filter((e=>e.title.toLowerCase().includes("body paragraph"))).length,a={id:`body-${Date.now()}`,title:`Body Paragraph ${s+1}`,type:"body",percentage:0};let l;l=-1!==t?[...i.slice(0,t),a,...i.slice(t)]:[...i,a],n(`/essayblock/${e}`,{state:{section:r,allSections:l,essayInfo:o}})},className:"w-full flex-1 flex items-center space-x-3 bg-white text-purple-600 border-2 border-dashed border-purple-600 rounded-full py-1 pl-12 pr-4 hover:bg-purple-50 transition-colors ml-6 text-sm",children:[(0,tr.jsx)("span",{className:"font-medium",children:"Add Body Paragraph"}),(0,tr.jsx)(PS,{className:"h-4 w-4"})]})]})]},t.id)}))]})]}),(0,tr.jsxs)("div",{className:"flex-grow flex flex-col",children:[(0,tr.jsxs)("header",{className:"bg-white border-b border-gray-200 p-4 flex justify-between items-center",children:[(0,tr.jsx)("h1",{className:"text-2xl font-semibold",children:null===r||void 0===r?void 0:r.title}),(0,tr.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,tr.jsx)(wN,{sections:i,essayInfo:o}),(0,tr.jsxs)("div",{className:"text-purple-600 font-bold",children:["Score: ",b]}),(0,tr.jsxs)("button",{className:"bg-purple-600 text-white px-4 py-2 rounded-full flex items-center hover:bg-purple-500",onClick:B,children:[(0,tr.jsx)(LS,{className:"h-5 w-5 mr-2"}),"WRITING ASSISTANT"]})]})]}),(0,tr.jsx)("div",{className:"flex-grow p-6 overflow-hidden h-[calc(100vh-16rem)]",children:(0,tr.jsxs)("div",{className:"grid grid-cols-12 gap-6 h-[calc(100vh-20rem)]",children:[(0,tr.jsxs)("div",{className:(S&&x?"col-span-5":"col-span-12")+" bg-white rounded-lg shadow overflow-hidden flex flex-col h-[calc(100vh-20rem)]",children:[(0,tr.jsx)("div",{className:"flex-1 p-4 overflow-hidden",children:(0,tr.jsx)("textarea",{value:c,onChange:n=>{const r=n.target.value;u(r),localStorage.setItem(`essayContent_${e}`,r);const o=i.map((t=>t.id===e?{...t,percentage:r.trim()?t.percentage||50:0}:t));localStorage.setItem("essaySections",JSON.stringify(o)),t.state&&(t.state.allSections=o)},className:"w-full h-full resize-none focus:outline-none font-mono overflow-auto",placeholder:"Start writing your essay here..."})}),S&&(0,tr.jsx)("div",{className:"h-[60px] px-4 border-t border-gray-200 flex justify-center items-center",children:(0,tr.jsx)("button",{onClick:()=>k(!x),className:"flex items-center gap-2 px-4 py-1.5 rounded-full bg-purple-500 hover:bg-purple-200 transition-colors",children:x?(0,tr.jsxs)(tr.Fragment,{children:[(0,tr.jsx)(DS,{className:"h-5 w-5 text-white"}),(0,tr.jsx)("span",{className:"text-white",children:"Hide Corrections"})]}):(0,tr.jsxs)(tr.Fragment,{children:[(0,tr.jsx)(zS,{className:"h-5 w-5 text-white"}),(0,tr.jsx)("span",{className:"text-white",children:"Show Corrections"})]})})})]}),S&&x&&(0,tr.jsxs)(tr.Fragment,{children:[(0,tr.jsxs)("div",{className:"col-span-4 bg-white rounded-lg shadow overflow-hidden flex flex-col h-[calc(100vh-20rem)]",children:[(0,tr.jsx)("div",{className:"flex-1 p-4 overflow-auto",children:(0,tr.jsx)("div",{className:"whitespace-pre-wrap font-mono",dangerouslySetInnerHTML:{__html:s}})}),(0,tr.jsx)("div",{className:"h-[60px] px-4 py-3 border-t border-gray-200 flex items-center",children:(0,tr.jsx)("div",{className:"flex flex-wrap gap-2",children:Object.entries(CN).filter((e=>{var t;let[n]=e;return(null===(t=p[n])||void 0===t?void 0:t.length)>0})).map((e=>{let[t,n]=e;return(0,tr.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,tr.jsx)("span",{className:`inline-block w-3 h-3 rounded ${n}`}),(0,tr.jsx)("span",{className:"text-xs text-gray-600",children:ON(t)})]},t)}))})})]}),(0,tr.jsxs)("div",{className:"col-span-3 flex flex-col h-[calc(100vh-20rem)]",children:[(0,tr.jsx)("div",{className:"bg-white rounded-lg p-4 shadow mb-4 h-[72px]",children:(0,tr.jsx)("div",{className:"flex space-x-2 overflow-x-auto",children:_N.filter((e=>{var t;return(null===(t=p[e])||void 0===t?void 0:t.length)>0})).map((e=>{var t;return(0,tr.jsxs)("button",{onClick:()=>g(e),className:"px-3 py-1 rounded-full text-sm whitespace-nowrap "+(m===e?"bg-purple-600 text-white":"bg-gray-200 text-gray-700"),children:[ON(e)," (",null===(t=p[e])||void 0===t?void 0:t.length,")"]},e)}))})}),(0,tr.jsx)("div",{className:"bg-white rounded-lg shadow flex-1 overflow-y-auto",children:(0,tr.jsx)("div",{className:"p-4",children:(()=>{var e;return null!==(e=p[m])&&void 0!==e&&e.length?(0,tr.jsx)("div",{className:"space-y-4 overflow-y-auto",children:p[m].map(((e,t)=>{var n;return(0,tr.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow",children:[(0,tr.jsx)("p",{className:"font-medium text-gray-800",children:e.message}),e.text&&(0,tr.jsxs)("p",{className:"mt-2 text-red-600 break-words",children:['Text: "',e.text,'"']}),(null===(n=e.suggestions)||void 0===n?void 0:n.length)>0&&(0,tr.jsxs)("div",{className:"mt-2",children:[(0,tr.jsx)("p",{className:"text-sm text-gray-600",children:"Suggestions:"}),(0,tr.jsx)("ul",{className:"list-disc list-inside",children:e.suggestions.map(((e,t)=>(0,tr.jsx)("li",{className:"text-green-600 break-words",children:e},t)))})]})]},t)}))}):(0,tr.jsx)("div",{className:"p-4 bg-green-50 rounded-lg",children:(0,tr.jsxs)("p",{className:"text-green-600",children:["Great work! No ",m.toLowerCase()," errors found."]})})})()})})]})]})]})}),(0,tr.jsxs)("footer",{className:"bg-white border-t border-gray-200 p-3 flex items-center justify-end space-x-3",children:[(0,tr.jsxs)("button",{onClick:async()=>{const e=Date.now();if(e-y<1e3*EN){const t=Math.ceil((1e3*EN-(e-y))/1e3);alert(`Please wait ${t} seconds before checking again.`)}else if(c.trim()){C(!0);try{const t=await fN(c);f(t),l(F(c,t)),v(e),k(!0),_(!0);const n=_N.find((e=>{var n;return(null===(n=t[e])||void 0===n?void 0:n.length)>0}));n&&g(n);const r=Object.values(t).flat().length,i=Math.max(0,b+(10-r));w(i),0===r&&alert("Great job! No errors found in this section. \ud83c\udf89")}catch(t){console.error("Error checking essay:",t),alert("Sorry, there was a problem checking your essay. Please try again.")}finally{C(!1)}}else alert("Please write something before checking for errors.")},className:"bg-blue-500 text-white px-8 py-2.5 rounded-full flex items-center text-sm disabled:opacity-50",disabled:E,children:[(0,tr.jsx)(FS,{className:"h-5 w-5 mr-2"}),E?"Checking...":"Check"]}),(0,tr.jsx)("button",{onClick:async()=>{if(c.trim()){localStorage.setItem(`essayContent_${e}`,c),P(!0);try{var t;const a=i.findIndex((t=>t.id===e)),l=a+1,u=a>0?i[a-1].id:null,d=u?localStorage.getItem(`essayContent_${u}`):null,h=null===(t=localStorage.getItem(`essayContent_${e}`))||void 0===t?void 0:t.trim(),p=null===r||void 0===r?void 0:r.title.toLowerCase().includes("introduction"),f=null===r||void 0===r?void 0:r.title.toLowerCase().includes("body paragraph"),m=null===r||void 0===r?void 0:r.title.toLowerCase().includes("conclusion"),g=h&&I,y=await vN(c,null===r||void 0===r?void 0:r.title,d);let v=i.map((t=>t.id===e?{...t,percentage:50}:t));if(f){const t=l<i.length&&i[l].title.toLowerCase().includes("body paragraph"),r=i.find((e=>e.title.toLowerCase().includes("conclusion")));if(y.isComplete){localStorage.removeItem(`sectionRequirements_${e}`);const s=i.map((t=>t.id===e?{...t,percentage:100}:t));return A({isComplete:!0,missing:[],improvements:[],hasBodyParagraphs:R,onAddNewBodyParagraph:D,onContinue:t?()=>{N(!1),n(`/essayblock/${s[l].id}`,{state:{section:s[l],allSections:s,essayInfo:o}})}:void 0,onMoveToConclusion:r?()=>{N(!1),n(`/essayblock/${r.id}`,{state:{section:r,allSections:s,essayInfo:o}})}:void 0}),N(!0),void P(!1)}return localStorage.setItem(`sectionRequirements_${e}`,JSON.stringify({missing:y.completionStatus.missing,improvements:y.suggestedImprovements})),A({missing:y.completionStatus.missing,improvements:y.suggestedImprovements,isComplete:!1,hasBodyParagraphs:R,onAddNewBodyParagraph:D,onMoveToConclusion:r?()=>{N(!1),n(`/essayblock/${r.id}`,{state:{section:r,allSections:v,essayInfo:o}})}:void 0,onContinue:t?()=>{N(!1),n(`/essayblock/${v[l].id}`,{state:{section:v[l],allSections:v,essayInfo:o}})}:void 0}),N(!0),void P(!1)}if(m){const t=i.map((t=>t.id===e?{...t,percentage:y.isComplete?100:50}:t));return y.isComplete||localStorage.setItem(`sectionRequirements_${e}`,JSON.stringify({missing:y.completionStatus.missing,improvements:y.suggestedImprovements})),A({missing:y.completionStatus.missing,improvements:y.suggestedImprovements,isComplete:y.isComplete,onCompleteEssay:()=>{N(!1),n("/essayreview",{state:{allSections:t,essayInfo:o}})}}),N(!0),void P(!1)}if(p&&!y.isComplete)return localStorage.setItem(`sectionRequirements_${e}`,JSON.stringify({missing:y.completionStatus.missing,improvements:y.suggestedImprovements})),A({missing:y.completionStatus.missing,improvements:y.suggestedImprovements,isRevision:g,hasBodyParagraphs:R,isComplete:!1,onAddBodyParagraph:()=>{const e=i.findIndex((e=>e.title.toLowerCase().includes("conclusion"))),t=i.filter((e=>e.title.toLowerCase().includes("body paragraph"))).sort(((e,t)=>parseInt(e.title.match(/\d+/)[0])-parseInt(t.title.match(/\d+/)[0]))),r={id:`body-${Date.now()}`,title:`Body Paragraph ${t.length+1}`,type:"body",percentage:0};let s;s=-1!==e?[...i.slice(0,e),r,...i.slice(e)]:[...i,r],N(!1),n(`/essayblock/${r.id}`,{state:{section:r,allSections:s,essayInfo:o}})}}),N(!0),void P(!1);if(p&&y.isComplete&&0===$.length){localStorage.removeItem(`sectionRequirements_${e}`);const t=i.map((t=>t.id===e?{...t,percentage:100}:t));try{const e=await gN(c),r=await yN(e.mainPoints),i=t.findIndex((e=>e.title.toLowerCase().includes("conclusion")));let s;s=-1!==i?[...t.slice(0,i),...r,...t.slice(i)]:[...t,...r],A({isComplete:!0,missing:[],improvements:[],hasBodyParagraphs:!1,onRegenerateBodyParagraphs:()=>{N(!1),n(`/essayblock/${r[0].id}`,{state:{section:r[0],allSections:s,essayInfo:o}})},onAddBodyParagraph:D})}catch(s){console.error("Error during thesis parsing:",s),A({isComplete:!0,missing:[],improvements:[],hasBodyParagraphs:!1,onAddBodyParagraph:D})}return N(!0),void P(!1)}}catch(s){console.error("Error during completion:",s),alert("There was an error processing the section. Please try again.")}finally{P(!1)}}else alert("Please write some content before completing this section.")},disabled:j,className:"bg-green-500 text-white px-8 py-2.5 rounded-full flex items-center text-sm disabled:opacity-50",children:j?"Completing...":"Complete"})]}),(0,tr.jsx)(SN,{isOpen:O,onClose:()=>N(!1),requirements:T,sectionTitle:null===r||void 0===r?void 0:r.title}),(0,tr.jsx)(hN,{isOpen:d,onClose:B,sectionType:null===r||void 0===r?void 0:r.title,essayInfo:o,currentContent:c})]})]})}const AN=a.forwardRef((function(e,t){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:t},e),a.createElement("path",{d:"M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"}))})),jN=()=>{const e=re(),t=oe(),{auth:n}=(0,a.useContext)(nr),{allSections:r,essayInfo:i}=e.state||{},[o,s]=(0,a.useState)(!1),[l,c]=(0,a.useState)(!1),u=null===r||void 0===r?void 0:r.map((e=>localStorage.getItem(`essayContent_${e.id}`))).filter(Boolean).join("\n\n");return(0,tr.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,tr.jsxs)("div",{className:"flex flex-col",children:[(0,tr.jsxs)("header",{className:"bg-white border-b border-gray-200 p-4 flex justify-between items-center",children:[(0,tr.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,tr.jsx)("button",{onClick:()=>t("/essaybuilder"),className:"text-purple-600 hover:text-purple-700",children:(0,tr.jsx)($S,{className:"h-6 w-6"})}),(0,tr.jsx)("h1",{className:"text-2xl font-semibold",children:null===i||void 0===i?void 0:i.title})]}),(0,tr.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,tr.jsxs)("button",{onClick:()=>c(!0),className:"bg-purple-600 text-white px-4 py-2 rounded-full flex items-center",children:[(0,tr.jsx)(LS,{className:"h-5 w-5 mr-2"}),"WRITING ASSISTANT"]}),(0,tr.jsxs)("button",{onClick:async()=>{if(null===n||void 0===n||!n.token)return alert("Please log in to post your essay"),void t("/login",{state:{from:e}});if(u)if(null!==i&&void 0!==i&&i.title&&null!==i&&void 0!==i&&i.postType)try{s(!0);const e={title:i.title,content:u,postType:i.postType,prompt:i.promptId||null};if((await Qn.post("/posts",e)).data){Object.keys(localStorage).forEach((e=>{e.startsWith("essayContent_")&&localStorage.removeItem(e),e.startsWith("sectionRequirements_")&&localStorage.removeItem(e),"essaySections"!==e&&"essayInfo"!==e||localStorage.removeItem(e),(e.startsWith("essay_")||e.includes("section"))&&localStorage.removeItem(e)})),t("/essaybuilder",{replace:!0,state:null}),t("/home",{replace:!0,state:{message:"Essay posted successfully!"}})}}catch(l){var r,o,a;401===(null===(r=l.response)||void 0===r?void 0:r.status)?(alert("Your session has expired. Please log in again."),t("/login",{state:{from:e}})):400===(null===(o=l.response)||void 0===o?void 0:o.status)?alert(l.response.data.message||"Invalid essay data. Please check all fields."):413===(null===(a=l.response)||void 0===a?void 0:a.status)?alert("Essay content is too large. Please try shortening it."):alert("Failed to post essay. Please try again later.")}finally{s(!1)}else alert("Missing required essay information");else alert("Cannot post empty essay")},disabled:o,className:"bg-green-600 text-white px-6 py-2 rounded-full flex items-center disabled:opacity-50",children:[(0,tr.jsx)(AN,{className:"h-5 w-5 mr-2"}),o?"Posting...":"Post Essay"]})]})]}),(0,tr.jsx)("main",{className:"flex-1 p-6",children:(0,tr.jsx)("div",{className:"max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-6",children:(0,tr.jsx)("div",{className:"space-y-4",children:(0,tr.jsx)("div",{className:"prose max-w-none",children:null===r||void 0===r?void 0:r.map(((e,t)=>(0,tr.jsxs)("div",{className:"mb-8",children:[(0,tr.jsx)("h2",{className:"text-xl font-semibold mb-4",children:e.title}),(0,tr.jsx)("div",{className:"whitespace-pre-wrap",children:localStorage.getItem(`essayContent_${e.id}`)})]},e.id)))})})})})]}),(0,tr.jsx)(hN,{isOpen:l,onClose:()=>c(!1),content:u,essayInfo:i})]})};const PN=function(){return(0,tr.jsx)(Te,{children:(0,tr.jsx)("div",{className:"App",children:(0,tr.jsxs)(Se,{children:[(0,tr.jsx)(xe,{path:"/reset-password/:token",element:(0,tr.jsx)(NS,{})}),(0,tr.jsx)(xe,{path:"/reset-password",element:(0,tr.jsx)(OS,{})}),(0,tr.jsx)(xe,{path:"/",element:(0,tr.jsx)(CS,{children:(0,tr.jsx)(ir,{})})}),(0,tr.jsx)(xe,{path:"/login",element:(0,tr.jsx)(CS,{children:(0,tr.jsx)(ir,{})})}),(0,tr.jsx)(xe,{path:"/register",element:(0,tr.jsx)(CS,{children:(0,tr.jsx)(or,{})})}),(0,tr.jsx)(xe,{path:"/essayguidance",element:(0,tr.jsx)(ES,{children:(0,tr.jsx)(AS,{})})}),(0,tr.jsx)(xe,{path:"/essaybuilder",element:(0,tr.jsx)(ES,{children:(0,tr.jsx)(MS,{})})}),(0,tr.jsx)(xe,{path:"/essayblock/:sectionId",element:(0,tr.jsx)(ES,{children:(0,tr.jsx)(TN,{})})}),(0,tr.jsx)(xe,{path:"/essayreview",element:(0,tr.jsx)(ES,{children:(0,tr.jsx)(jN,{})})}),(0,tr.jsx)(xe,{path:"/home",element:(0,tr.jsx)(ES,{children:(0,tr.jsx)(Jr,{})})}),(0,tr.jsx)(xe,{path:"/profile",element:(0,tr.jsx)(ES,{children:(0,tr.jsx)(Gr,{})})}),(0,tr.jsx)(xe,{path:"/createpost",element:(0,tr.jsx)(ES,{children:(0,tr.jsx)(yS,{})})}),(0,tr.jsx)(xe,{path:"/posts/:id",element:(0,tr.jsx)(ES,{children:(0,tr.jsx)(_S,{})})})]})})})},IN=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:s}=t;n(e),r(e),i(e),o(e),s(e)}))};c.createRoot(document.getElementById("root")).render((0,tr.jsx)(a.StrictMode,{children:(0,tr.jsx)(rr,{children:(0,tr.jsx)(PN,{})})})),IN()})()})();
//# sourceMappingURL=main.cf95ace4.js.map